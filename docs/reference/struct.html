<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>struct — struct • humdrumR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="struct — struct" />
<meta property="og:description" content="Virtual class to help create atomic-vector-like composite data objects." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">humdrumR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/GettingStarted.html">Getting started with humdrumR</a>
    </li>
    <li>
      <a href="../articles/HumdrumSyntax.html">The Humdrum Syntax</a>
    </li>
    <li>
      <a href="../articles/Intervals.html">Rhythm and Pitch Intervals</a>
    </li>
    <li>
      <a href="../articles/IntroForCoders.html">HumdrumR for Coders</a>
    </li>
    <li>
      <a href="../articles/KeysAndChord.html">Diatonic and Tertian Sets in humdrumR</a>
    </li>
    <li>
      <a href="../articles/Overview.html">Overview of humdrumR</a>
    </li>
    <li>
      <a href="../articles/PitchAndTonality.html">Pitch and Tonality in humdrumR</a>
    </li>
    <li>
      <a href="../articles/ReadWrite.html">Reading and writing data with humdrumR</a>
    </li>
    <li>
      <a href="../articles/RhythmAndMeter.html">Rhythm and Meter in humdrumR</a>
    </li>
    <li>
      <a href="../articles/Validation.html">Validating Humdrum Data</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>struct</h1>
    <small class="dont-index">Source: <a href='https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/blob/master/R/Vector.R'><code>R/Vector.R</code></a></small>
    <div class="hidden name"><code>struct.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Virtual class to help create atomic-vector-like composite data objects.</p>
    </div>

    <pre class="usage"><span class='fu'>is.struct</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span></pre>


    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>humdrumR</code> defines a number of <a href='http://adv-r.had.co.nz/S4.html'>S4 classes</a> which are, underneath the surface, <a href='https://en.wikipedia.org/wiki/Composite_data_type'>composite data types</a>
made up of collections of <a href='https://rdrr.io/r/base/vector.html'>base-R atomic vectors</a>, stuck together.
The "vectorized" nature of R's atomic types is one of R's key strengths, so in <code>humdrumR</code> we try to A) mostly use the standard atomic types B)
make all the new types we <em>do</em> define act as much like atomic vectors as possible.
<code>struct</code> is a <em>virtual</em> S4 class which serves this purpose: creating composite atomic vectors which act (mostly) like base-R atomic vectors.</p>
<p>As a "virtual class" <code>struct</code>s themselves don't really exist as independent objects, but the <code>struct</code> class defines (abstractly) all the necessarry methods to treat a collection of
atomic vectors as a single vector/matrix-like object---simply make your new subclass <a href='https://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)'>inherit</a> <code>struct</code>
and it is all taken care of. (To do this, specify <code>contains = "struct"</code> in your call to <a href='https://rdrr.io/r/methods/setClass.html'>setClass</a>.)</p>
<p>Important <code>humdrumR</code> classes which inherit from <code>struct</code> include:</p><ul>
<li><p><a href='tonalInterval.html'>tonalInterval</a></p></li>
<li><p><a href='diatonicSet.html'>diatonicSet</a></p></li>
<li><p><a href='tertianSet.html'>tertianSet</a></p></li>
<li><p><a href='rhythmInterval.html'>rhythmInterval</a></p></li>
</ul>

<p>Be warned, R's S4 object-system is limited in this regard: you can't really define S4 classes that act <em>fully</em> like R atomics, as
many of their features are hard-coded into R itself and can't be replicated.
The most important limitation of <code>struct</code> that you may encounter is that, though <code>struct</code> classes work (ok) in <a href='https://rdrr.io/r/base/data.frame.html'>data.frames</a>,
<a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.tables</a> and <a href='https://tibble.tidyverse.org/reference/tibble.html'>tibbles</a> will either not work or give strange behaviors if you put <code>struct</code>s into them.</p>
    <h2 class="hasAnchor" id="slots"><a class="anchor" href="#slots"></a>Slots</h2>

    

<dl>
<dt><code>dim</code></dt><dd><p>Either <code>NULL</code> or a non-negative <a href='https://rdrr.io/r/base/integer.html'>integer-vector</a> of <code>length == 2L</code>, representing the number of rows and columns respectively. Dimensions <em>can</em> be zero.</p></dd>

<dt><code>rownames</code></dt><dd><p>Either <code>NULL</code> or a <a href='https://rdrr.io/r/base/integer.html'>integer</a>/<a href='https://rdrr.io/r/base/character.html'>character</a>-vector which is the same length as either
A) if <code>dim == NULL</code>, the length of the <code>struct</code> B) if <code>dim != NULL</code>, the number of rows in the <code>struct</code>.</p></dd>

<dt><code>colnames</code></dt><dd><p>Either <code>NULL</code> (it <em>must</em> be <code>NULL</code> if <code>dim == NULL</code>) or a <a href='https://rdrr.io/r/base/integer.html'>integer</a>/<a href='https://rdrr.io/r/base/character.html'>character</a>-vector of length equal to the number of columns in the <code>struct</code>.</p></dd>

</dl>
    <h2 class="hasAnchor" id="behavior"><a class="anchor" href="#behavior"></a>Behavior</h2>

    


<p><code>struct</code> subclasses (i.e., classes which inherit from <code>struct</code>) behave very similarly to normal <a href='https://rdrr.io/r/base/vector.html'>R atomic vectors/matrices</a>.
However, they do differ in a few respects, mostly in ways that are intended to avoid some of the quirky behaviors of R matrices:
In general, the distinction between dimensionless vectors and dimensioned vectors (<a href='https://rdrr.io/r/base/matrix.html'>matrices</a>) is slightly weaker in <code>structs</code> than with normal R atomic vectors/matrices.
Most importantly, dimensioned <code>struct</code>s won't drop their dimensions under various common operations (<a href='https://rdrr.io/r/base/c.html'>c</a>, <code>[]</code>, etc.), the way base-R matrices do.
In general, it is easier to interact with a multi-column (matrix-)<code>struct</code> in the same way as a dimensionless (vector-)<code>struct</code>.
For example, if the struct has dimensions then <code>length(struct) == nrow(struct)</code>, instead of <code>length(matrix) == nrow(matrix) * ncol(matrix)</code>---i.e., the "height"
of the <code>struct</code> (the number of rows) is its length.
Another big difference is in the behaviors of <a href='https://rdrr.io/r/base/c.html'>c</a>: <code>c</code> doesn't always cause <code>struct</code>s to lose their dimensions and <code>c</code> can be used to concatinated multi-column <code>struct</code>s,
or even mixes of dimensionless and dimensioned <code>struct</code>s:
If any <code>struct</code> arguments to <code>c</code> have dimensions, the <code>struct</code>s are concatinated via a call to <a href='https://rdrr.io/r/base/cbind.html'>rbind</a>, with any dimensionless vectors coerced to
1-column matrices.
Of course, the (resulting) number of columns must all be the same or an error will occur!</p>
<p>Other differences:</p><ul>
<li><p><code>struct</code>s can have either no dimensions (<code>dim(struct) == NULL</code>) or two dimensions. Higher dimensional <code>struct</code>s are not supported (yet).</p></li>
<li><p><code>rowSums</code> and <code>colSums</code> will coerce a dimensionless struct to a column matrix.</p></li>
<li><p><code>struct</code>s always throw an error if you try to index them with a index value that is greater than the length/nrow of the <code>struct</code>.
This is different than atomic vectors, which will pad the vector up to the length of the index you give---a sometimes useful but quirky behavior.</p></li>
<li><p><code>struct</code>s with two dimensions have a <code>cartesian</code> indexing argument.
If <code>cartesian = TRUE</code>, the <code>i</code> and <code>j</code> arguments are treated as cartesian coordinates.
(This behavior can be achieved with base R matrices (or <code>struct</code>s) by inputing a matrix with two columns.)</p></li>
</ul>

    <h2 class="hasAnchor" id="requirements"><a class="anchor" href="#requirements"></a>Requirements</h2>

    


<p>To work, <code>struct</code> makes a few assumptions about your class.
Your class must have one or more slots which are vectors, all of which are the same length.
<code>struct</code>'s indexing method will cause all of these vectors to be indexed as one.
When you define a new subclass of <code>struct</code>, it will inherit a
<a href='https://rdrr.io/r/methods/validObject.html'>validObject</a> method which assures that all elements are the same dimension.
Thus, if you are writing your own <code>validObject</code> method (using <a href='https://rdrr.io/r/methods/validObject.html'>setValidity</a>)
you just have to worry specifically about the validity of the information in your slots,
not that the slots are all the same length.</p>
    <h2 class="hasAnchor" id="initialize"><a class="anchor" href="#initialize"></a>Initialize</h2>

    


<p>An initialize method which automatically makes all slots the same length is predefined
for <code>structs</code>. If you want to make a more specialized <a href='https://rdrr.io/r/methods/new.html'>initialize</a> method,
you can still take advantage of the inherited method by using callNextMethod at the
beginning of your method.</p>
    <h2 class="hasAnchor" id="predefined-methods"><a class="anchor" href="#predefined-methods"></a>Predefined methods</h2>

    


<p>The main purpose of the <code>struct</code> virtual class is that it defines many of the basic methods you need to manipulate subclass objects.
Most importantly, <a href='https://rdrr.io/r/base/Extract.html'>indexing</a> methods are fully defined (that mimic base-R atomic vector/matrix indexing), as well as
basic "structural" methods like <a href='https://rdrr.io/r/base/colnames.html'>(col/row)names</a>, <a href='https://rdrr.io/r/base/dim.html'>dim</a>, <a href='https://rdrr.io/r/base/length.html'>length</a>, <a href='https://rdrr.io/r/base/nrow.html'>ncol, nrow</a>, etc.
In addition:</p><ul>
<li><p>If you define <a href='https://rdrr.io/r/base/Comparison.html'>&gt; and &gt;=</a>, <code>&lt;</code> and <code>&lt;=</code> will be automatically defined.</p></li>
<li><p>If you define <a href='https://rdrr.io/r/base/character.html'>as.character</a> for your subclass, <a href='https://rdrr.io/r/methods/show.html'>show</a> and <a href='https://rdrr.io/r/base/format.html'>format</a> methods are automatically defined.</p></li>
</ul>

<p>What's more, default arithmetic methods for addition, subtraction, (scalar-integer) multiplication, and negation (<code>-x</code>) are defined.
The default addition behavior is that each numeric (<a href='https://rdrr.io/r/base/integer.html'>base::integer</a> or <a href='https://rdrr.io/r/base/numeric.html'>base::numeric</a>) slot from your subclasses will be added together.
Thus, <code>struct1 + struct2</code> will extract each numeric/integer slot from each <code>struct</code>, add them together and create a new <code>struct</code> from the result.
<code>-struct</code> will negate all numeric fields, and subtraction is simply defined as adding the negation.
Since <em>scalar</em> multiplication is defined, two <code>struct</code>s cannot be multiplied, but a struct can be multiplied by an integer (all numeric fields are multiplied by the integer(s)).
If these definitions don't work for your subclass, you'll need to create your own, more specific, method!</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Examples of <code>struct</code> subclasses: <a href='tonalInterval.html'>tonalInterval</a> <a href='rhythmInterval.html'>rhythmInterval</a> <a href='diatonicSet.html'>diatonicSet</a> <a href='tertianSet.html'>tertianSet</a></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>setClass</span><span class='op'>(</span><span class='st'>'mynewsubclass'</span>, contains <span class='op'>=</span> <span class='st'>'struct'</span>, slots <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>X<span class='op'>=</span> <span class='st'>'numeric'</span>, Y <span class='op'>=</span> <span class='st'>'numeric'</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>test</span> <span class='op'>&lt;-</span> <span class='fu'>new</span><span class='op'>(</span><span class='st'>'mynewsubclass'</span>, X <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>, Y <span class='op'>=</span> <span class='fl'>10</span><span class='op'>:</span><span class='fl'>1</span><span class='op'>)</span>

<span class='co'># all of these should work:</span>
<span class='va'>test</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>]</span>
</div><div class='output co'>#&gt; mynewsubclass[ , ]
#&gt; [1] 1,10 2,9  3,8  4,7  5,6 </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/rev.html'>rev</a></span><span class='op'>(</span><span class='va'>test</span><span class='op'>)</span>  <span class='op'>==</span> <span class='va'>test</span>
</div><div class='output co'>#&gt;  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>test</span>, <span class='va'>test</span><span class='op'>)</span>
</div><div class='output co'>#&gt; mynewsubclass
#&gt;       [,1] [,2]
#&gt;  [1,] 1,10 1,10
#&gt;  [2,] 2,9  2,9 
#&gt;  [3,] 3,8  3,8 
#&gt;  [4,] 4,7  4,7 
#&gt;  [5,] 5,6  5,6 
#&gt;  [6,] 6,5  6,5 
#&gt;  [7,] 7,4  7,4 
#&gt;  [8,] 8,3  8,3 
#&gt;  [9,] 9,2  9,2 
#&gt; [10,] 10,1 10,1</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>test</span>, <span class='va'>test</span><span class='op'>)</span>
</div><div class='output co'>#&gt; mynewsubclass[ , ]
#&gt;  [1] 1,10 2,9  3,8  4,7  5,6  6,5  7,4  8,3  9,2  10,1 1,10 2,9  3,8  4,7  5,6 
#&gt; [16] 6,5  7,4  8,3  9,2  10,1</div><div class='input'><span class='va'>test</span> <span class='op'>*</span> <span class='fl'>3</span>
</div><div class='output co'>#&gt; mynewsubclass[ , ]
#&gt;  [1] 3,30  6,27  9,24  12,21 15,18 18,15 21,12 24,9  27,6  30,3 </div><div class='input'><span class='va'>test</span> <span class='op'>-</span> <span class='va'>test</span>
</div><div class='output co'>#&gt; mynewsubclass[ , ]
#&gt;  [1] 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0</div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://fathermckenzie.net/'>Nathaniel Condit-Schultz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


