<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="humdrumR objects contain many fields of data stored in their underlying
humdrum table;
You can explicitly access any of these fields using with(in)Humdrum.
When you don't explicitly indicate a field, humdrumR will generally default to showing/using
an the objects &quot;Active expression&quot;."><title>The "Active expression" of a humdrumR object — humActive • humdrumR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="The " active expression of a humdrumr object humactive><meta property="og:description" content="humdrumR objects contain many fields of data stored in their underlying
humdrum table;
You can explicitly access any of these fields using with(in)Humdrum.
When you don't explicitly indicate a field, humdrumR will generally default to showing/using
an the objects &quot;Active expression&quot;."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">humdrumR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.5.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Basics</h6>
    <a class="dropdown-item" href="../articles/GettingStarted.html">Getting started with humdrumR</a>
    <a class="dropdown-item" href="../articles/IntroForCoders.html">HumdrumR for coders</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>R/Humdrum background</h6>
    <a class="dropdown-item" href="../articles/HumdrumSyntax.html">The humdrum syntax</a>
    <a class="dropdown-item" href="../articles/RPrimer.html">An R primer for humdrumR users</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Data prep</h6>
    <a class="dropdown-item" href="../articles/ReadWrite.html">Reading and writing data</a>
    <a class="dropdown-item" href="../articles/Reshaping.html">Shaping humdrum data</a>
    <a class="dropdown-item" href="../articles/Filtering.html">Filtering humdrum data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Analysis</h6>
    <a class="dropdown-item" href="../articles/Summary.html">Getting to know your data</a>
    <a class="dropdown-item" href="../articles/WorkingWithData.html">Working with humdrum data</a>
    <a class="dropdown-item" href="../articles/Context.html">Contextualizing data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Musical tools</h6>
    <a class="dropdown-item" href="../articles/PitchAndTonality.html">Pitch and tonality in humdrumR</a>
    <a class="dropdown-item" href="../articles/RhythmAndMeter.html">Time, rhythm, and meter in humdrumR</a>
    <a class="dropdown-item" href="../articles/KeysAndChord.html">Diatonic and tertian sets in humdrumR</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://ccml.music.gatech.edu/humdrumR-GUI">GUI</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>The "Active expression" of a <a href="humdrumRclass.html">humdrumR object</a></h1>
      <small class="dont-index">Source: <a href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/blob/HEAD/R/humdrumR-class.R" class="external-link"><code>R/humdrumR-class.R</code></a></small>
      <div class="d-none name"><code>humActive.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="humdrumRclass.html">humdrumR objects</a> contain many fields of data stored in their underlying
<a href="humTable.html">humdrum table</a>;
You can <em>explicitly</em> access any of these fields using <a href="withinHumdrum.html">with(in)Humdrum</a>.
When you don't explicitly indicate a field, <code>humdrumR</code> will generally default to showing/using
an the objects "<em>Active expression</em>".</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre><code>evalActive(
  humdrumR,
  dataTypes = "D",
  forceAtomic = TRUE,
  sep = ", ",
  nullChar = FALSE
)

getActive(humdrumR)

getActiveFields(humdrumR)

setActive(humdrumR, expr)

setActiveFields(humdrumR, fieldnames)

# S4 method for humdrumR
$(x, name)</code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>humdrumR</dt>
<dd><p><em><strong>HumdrumR data.</strong></em></p>
<p>Must be a <a href="humdrumRclass.html">humdrumR data object</a>.</p></dd>


<dt>dataTypes</dt>
<dd><p><em><strong>Which types of humdrum records to include in the census.</strong></em></p>
<p>Defaults to <code>"d"</code>.</p>
<p>Must be <code>character</code>. Legal values are <code>'G', 'L', 'I', 'M', 'D', 'd'</code>
or any combination of these (e.g., <code>"LIM"</code>).
(See the <a href="humTable.html">humdrum table</a> documentation <strong>Fields</strong> section for explanation.)</p></dd>


<dt>forceAtomic</dt>
<dd><p><em><strong>Whether he evaluated active field is forced/coerced into a atomic vector.</strong></em></p>
<p>Defaults to <code>TRUE</code>.</p>
<p>Must be a singleton <code>logical</code> value: an on/off switch</p></dd>


<dt>sep</dt>
<dd><p><em><strong>Separator to paste between collapsed strings.</strong></em></p>
<p>Defaults to <code>", "</code>.</p>
<p>Must be a single <code>character</code> string.</p>
<p>Only used if <code>forceAtomic == TRUE</code>, wherein lists of vectors are pasted together.</p></dd>


<dt>nullChar</dt>
<dd><p><em><strong>Should null tokens be returned as characters or <code>NA</code>?</strong></em></p>
<p>Defaults to <code>FALSE</code>.</p>
<p>Must be a singleton <code>logical</code> value: an on/off switch</p>
<p>If <code>nullChar == TRUE</code> and the output is <code>character</code>, <code>NA</code>s in the output vector are replaced with humdrum
null character tokens: <code>"."</code>, <code>"!"</code>, <code>"="</code>, or <code>"*"</code>.
If <code>forceAtomic</code> is <code>FALSE</code>, <code>nullChar</code> is ignored.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Most of the time, the active expression just points to a single field: when first <a href="readHumdrum.html">read in</a>,
the active expression/field is <code>Token</code>.
However, the active expression can be any arbitrary <code>R</code> expression involving fields of the <a href="humTable.html">humdrum table</a>.
When called for, the expression is evaluated within the object's <a href="humTable.html">humdrum table</a>
(similar to a "<a href="withinHumdrum.html">within</a> expression," without any extra evaluation options).
For instance, the active expression could be:
<code>paste(Token, Record)</code>, which would print each <code>Token</code> with its record number pasted to it.
Any fields referenced in the active expression are called "active fields."</p>
<p>Common commands which evaluate the active expression include:</p><ul><li><p>When is printing a <code>humdrumR</code> object in the terminal, the active expression is shown.
(<code>evalActive</code> is used to evaluate the expression as a <code>character</code> string, if needed.)
When a <a href="humdrumRclass.html">humdrumR object</a> prints, the active fields are marked with <code>"*"</code>
by their name(s).</p></li>
<li><p>When <a href="writeHumdrum.html">writing to files</a>, the active expression is written.</p></li>
<li><p>In a  "<a href="withinHumdrum.html">within expression</a>," the variable <code>.</code> is automatically replaced with the active expression.</p></li>
</ul><p>Functions like <a href="collapseHumdrum">collapseHumdrum</a>], <code><a href="foldHumdrum.html">foldHumdrum()</a></code>, and <code><a href="humTable.html">fields()</a></code>, use the active field(s) for default arguments.</p>
<p>The current active field can be seen by calling <code>getActive(humData)</code>.
A <code>character</code> vector of all fields being used by the active expression
can be extracted with <code>getActiveFields(humData)</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="setting-the-active-expression">Setting the active expression<a class="anchor" aria-label="anchor" href="#setting-the-active-expression"></a></h2>
    


<p>The active expression can be changed in several ways.
The simplest and most common is using the $ operator, which takes a field name
(<a href="partialMatching.html">partially matched</a>) and sets the active expression to simply call that field.
This is a handy way to quickly look at different fields in your data:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>humData<span class="sc">$</span>Token</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>humData<span class="sc">$</span>Spine</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>humData<span class="sc">$</span>Sp <span class="co"># same as last one, because it partially matches Spine</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span></code></pre><p></p></div>
<p>More complex active expressions can be set using <code>setActive</code>, specified directly as the second argument:
e.g., <code>setActive(humData, paste(Token, Record))</code>.
Notice that the active field <em>must</em></p><ol><li><p>Refer to at least one field in the <a href="humTable.html">humdrum table</a>.</p></li>
<li><p>Evaluate to an vector that is same length as the humdrum table (given the target <code>dataTypes</code>),
or a <em>list</em> of vectors of that length.</p></li>
</ol><p>For programmatic work, <code>setActiveFields</code> accepts a <code>character</code> vector of <a href="partialMatching.html">partially matched</a>
field names;
If one field name is given, the active field just calls that field.
If two or more field names are given, the active expression is set to an expression of the form
<code>list(Field1, Field2, Field3, ...)</code>.
This is the easiest way to quickly see two or three fields side by side.
As special syntactic sugar, if you call <code>humData$All</code>, a liit of <em>all</em> the data fields is set to the active field.
This is a useful way to look at all your data fields.</p>
    </div>
    <div class="section level2">
    <h2 id="null-data">Null data<a class="anchor" aria-label="anchor" href="#null-data"></a></h2>
    


<p><code>humdrumR`` identifies "null data" based on the active field---it might not be obvious, but this  is one of the most important jobs of the active field! Anywhere the current active field evaluates to </code>"."<code>or</code>NA<code>(or</code>NULL<code>for [lists][base::list()]) is considered null data; in the internal [humdrum table][humTable] these data points are set to</code>TRUE<code>in the</code>Null<code>field and assigned the type</code>"d"<code>in the</code>Type` field.
Null data is updated whenever the active field is changed or reset, including by functions which create new fields, like
<code><a href="foldHumdrum.html">foldHumdrum()</a></code> and <code><a href="withinHumdrum.html">within.humdrumR()</a></code>.</p>
<p>As you work, there will often be data tokens which are null in one field, but not in another field.
For example, if you load <code>**kern</code> data, a token like <code>"4r"</code> (quarter-note rest) token will be <code>NA</code> if you call <code>pitch</code>, but
not <code>NA</code> if you call <code>recip</code> (rhythm).</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>kerndata <span class="ot">&lt;-</span> <span class="fu">readHumdrum</span>(...)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">within</span>(kerndata<span class="sc">$</span>Token,</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>       Pitch  <span class="ot">&lt;-</span> <span class="fu">pitch</span>(.),</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>       Rhythm <span class="ot">&lt;-</span> <span class="fu">recip</span>(.)) <span class="ot">-&gt;</span> kerndata</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a></span></code></pre><p></p></div>
<p>Now, if you change the active field between <code>Pitch</code> and <code>Rhythm</code> (using <code>$</code>) you'll see that there
are different numbers of (non-null) data tokens: <code>ntoken(kerndata$Pitch ,'D')</code> vs <code>ntoken(kerndata$Rhythm, 'D)</code> will
return different numbers!
(The difference would be the number of rest tokens.)
Similarly, if you apply functions/expressions to this data (using <code><a href="withinHumdrum.html">withinHumdrum()</a></code> for example), the result will depend on
what the active field is:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">with</span>(kerndata<span class="sc">$</span>Pitch, <span class="fu">length</span>(.))</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">with</span>(kerndata<span class="sc">$</span>Rhythm, <span class="fu">length</span>(.))</span></code></pre><p></p></div>
<p>Once again, we'll get different numbers here! (Assuming there are rests in the data.)
This is the case even though the do-expression isn't actually using the <code>Pitch</code> or <code>Rhythm</code> fields!
If <code>Pitch</code> is the active field, the rest tokens are null-data and will be ignored!</p>
    </div>
    <div class="section level2">
    <h2 id="evaluating-the-active-expression">Evaluating the active expression<a class="anchor" aria-label="anchor" href="#evaluating-the-active-expression"></a></h2>
    


<p>Evaluation of the active expression is usually something done automatically by <code>humdrumR</code> functions,
especially for printing data at the console.
However, you can also do it manually using the <code>evalActive</code> command.
The "raw" result of evaluating the active expression can be returned by specifying <code>forceAtomic == FALSE</code>.
However, by default <code>forceAtomic == TRUE</code> which causes <code>evalActive</code> to coerce the evaluated results
into an atomic vector.
Obviously, the evaluated active result is an atomic vector, no coercion is needed.</p>
<p>If the evaluated active result is a <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a>, it must be either the full length of the <a href="humTable.html">humdrum table</a>,
or a list of vectors/lists of that length.
In other words, the result must be one or more "full length" vector/lists.
For each full length <code>list</code>, each element of the list is coerced to a single atomic value and then
<a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlisted</a> to create an atomic vector.
If the elements of the list are not themselves atomic, they are converted to various <code>character</code> representations.</p><ul><li><p><a href="https://rdrr.io/r/base/table.html" class="external-link">tables</a> are coerced to the string <code>"&lt;table: k=x, n=y&gt;"</code>, where <code>x</code> is the number of categories in the table
and <code>y</code> is the total number of values in the table (<code>sum(table(...))</code>).</p></li>
<li><p><a href="https://rdrr.io/r/base/list.html" class="external-link">lists</a> of <code>length &lt; 5</code> are coerced to <code>"list(a, b, c, d, e)"</code>, where <code>a-e</code> are the elements of the list.
Longer lists are coerced to <code>"list[n]:</code>, where <code>n</code> is the length of the list.</p></li>
<li><p>All other <code>R</code> objects are coerced to <code>&lt;class&gt;</code>, where <code>class</code> is the <a href="https://rdrr.io/r/base/class.html" class="external-link">class</a> of the object.</p></li>
</ul><p>Finally, all the thus-generated full-length vectors (if there are more than one) are pasted together, separated
by <code>sep</code> (default = <code>", "</code>).
A common practical illustration/application of this last is to specify active fields that are
lists of fields---for example, <code>list(Token, Spine, Record)</code>.
Following the algorithm above, the evaluated result is would be <code>character</code> vector looking
like <code>"Token, Spine, Record"</code>.
This is exactly what <code>setActiveFields</code> does when fed multiple <code>fieldNames</code>, as well as the
special call <code>humData$All</code>.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Nathaniel Condit-Schultz, Claire Arthur.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

