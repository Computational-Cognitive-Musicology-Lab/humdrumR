<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Tonal (diatonic) sets — diatonicSet • humdrumR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Tonal (diatonic) sets — diatonicSet" />
<meta property="og:description" content="diatonicSet is one of humdrumR's
types of tonal data, representing Western diatonic keys.
For the most part, users should not need to interact with diatonicSets directly---rather, diatonicSets work behind the scene in numerous humdrumR pitch functions.
See the keyRepresentations and keyTransformations documentation for details of usage and functionality or the Tonality in humdrumR vignette for
a detailed explanation of the theory and specifics of diatonicSets.
These functions translate various pitch representations" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">humdrumR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/GettingStarted.html">Getting started with humdrumR</a>
    </li>
    <li>
      <a href="../articles/HumdrumSyntax.html">The Humdrum Syntax</a>
    </li>
    <li>
      <a href="../articles/Intervals.html">Rhythm and Pitch Intervals</a>
    </li>
    <li>
      <a href="../articles/IntroForCoders.html">HumdrumR for Coders</a>
    </li>
    <li>
      <a href="../articles/KeysAndChord.html">Diatonic and Tertian Sets in humdrumR</a>
    </li>
    <li>
      <a href="../articles/Overview.html">Overview of humdrumR</a>
    </li>
    <li>
      <a href="../articles/PitchAndTonality.html">Pitch and Tonality in humdrumR</a>
    </li>
    <li>
      <a href="../articles/ReadWrite.html">Reading and writing data with humdrumR</a>
    </li>
    <li>
      <a href="../articles/RhythmAndMeter.html">Rhythm and Meter in humdrumR</a>
    </li>
    <li>
      <a href="../articles/Validation.html">Validating Humdrum Data</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Tonal (diatonic) sets</h1>
    <small class="dont-index">Source: <a href='https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/blob/master/R/diatonicSet.R'><code>R/diatonicSet.R</code></a>, <a href='https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/blob/master/R/tertianSet.R'><code>R/tertianSet.R</code></a></small>
    <div class="hidden name"><code>diatonicSet.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>diatonicSet</code> is one of <a href='humdrumR.html'>humdrumR</a>'s
types of tonal data, representing Western diatonic keys.
For the most part, users should not need to interact with diatonicSets directly---rather, diatonicSets work behind the scene in numerous <code>humdrumR</code> pitch functions.
See the keyRepresentations and keyTransformations documentation for details of usage and functionality or the <em>Tonality in humdrumR</em> vignette for
a detailed explanation of the theory and specifics of diatonicSets.</p>
<p>These functions translate various pitch representations</p>
    </div>

    <pre class="usage">dset(root = 0L, signature = root, alterations = 0L)

is.diatonicSet(x)

# S4 method for diatonicSet
as.character(x)

order.diatonicSet(
  x,
  ...,
  parallel = TRUE,
  na.last = TRUE,
  decreasing = FALSE,
  method = c("auto", "shell", "radix")
)

# S4 method for diatonicSet,diatonicSet
==(e1, e2)

# S4 method for diatonicSet,diatonicSet
Compare(e1, e2)

mapPartition(func, split = "/")

diatonicSet(x, ...)

# S4 method for tertianSet
as.character(x)

# S4 method for tertianSet,tertianSet
==(e1, e2)</pre>


    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>diatonicSet</code> is a <a href='https://adv-r.had.co.nz/S4.html'>S4</a> subclass of <code>humdrumR</code>'s virtual class <a href='struct.html'>struct</a>,
from which it inherits a lot of useful "vector-like" behaviors/functionality.</p>
<p>The constructor function <code>dset</code> can be used to create <code>diatonicSets</code> directly.
The three arguments corespond to the three slots: <code>root</code>, <code>mode</code>, and <code>alteration</code>.
All inputs will be coerced to match in length.
The <code>root</code> argument will attempt to coerce character strings to <a href='tonalInterval.html'>tonalIntervals</a>, and use their <code>LO5th</code> value as the root.</p>
<p>By default, the <a href='https://rdrr.io/r/base/character.html'>as.character</a> method, and thus (via <a href='struct.html'>struct</a>) the <a href='https://rdrr.io/r/methods/show.html'>show</a> method,
for diatonicSets call <a href='diatonicRepresentations.html'>key()</a>.
Thus, if you return a <code>diatonicSet</code> on the command line (or call <a href='https://rdrr.io/r/base/print.html'>print</a> one one),
you'll see the <a href='diatonicRepresentations.html'>key interpretation</a> representation printed.</p>
<p>Under the hood, these functions use the <code><a href='humdrumR.html'>humdrumR</a></code>
<code><a href='tonalInterval.html'>tonalInterval</a></code> <code>S4</code> class as the
fundamental, <em>lingua franca</em> representation of pitch.</p>
    <h2 class="hasAnchor" id="slots"><a class="anchor" href="#slots"></a>Slots</h2>

    

<dl>
<dt><code>Root</code></dt><dd><p>integers representing the root of the key on the line-of-fifths</p></dd>

<dt><code>Signature</code></dt><dd><p>integers representing the signature (number of accidentals) of the key.</p></dd>

<dt><code>Alteration</code></dt><dd><p>integers representing alterations of the diatonic setA key is represented by two integers, <code>Root</code> and <code>Signature</code>.
Root is simply the tonic note of the key on the circle of fifths.
Signature is a value on the circle of fifths, indicating the diatonic mode.
You can think of the <code>Signature</code> value as indicating the number of accidentals, with negative numbers
for flats and positive numbers for sharps.
You can also think of the signature as indicating how much the "natural key" (C major) is
slid up and down the line-of-fifths.
The <a href='https://en.wikipedia.org/wiki/Mode_(music)'>traditional diatonic modes</a> of Western music occur wherever <code>Signature - Tonic</code> is in the range <code>-5:1</code>:
<ul>
<li><p>\(Signature - Tonic = +1 \rightarrow\) Lydian</p></li>
<li><p>\(Signature - Tonic = +0 \rightarrow\) Major (Ionian)</p></li>
<li><p>\(Signature - Tonic = -1 \rightarrow\) Mixolydian</p></li>
<li><p>\(Signature - Tonic = -2 \rightarrow\) Dorian</p></li>
<li><p>\(Signature - Tonic = -3 \rightarrow\) Minor (Aeolian)</p></li>
<li><p>\(Signature - Tonic = -5 \rightarrow\) Locrian</p></li>
<li><p>\(Signature - Tonic = -4 \rightarrow\) Phyrgian</p></li>
</ul><em>Note that you can make diatonicSets where the <code>Root</code> is outside the <code>Key</code>. This is unusual, and may result in sets you wouldn't predict.</em></p></dd>

</dl>
    <h2 class="hasAnchor" id="alterations"><a class="anchor" href="#alterations"></a>Alterations</h2>

    


<p>The <code>Alteration</code> slots (also integer) can be used to represent various
"altered" scales.
The integer values are interpreted as a seven-trit <a href='https://en.wikipedia.org/wiki/Balanced_ternary'>balanced ternary</a> string.
("trits" are the ternary equivalent of binary "bits.")
Balanced ternary allows for three digits, <code>0</code> (unaltered degree), <code>1</code> (sharpened degree), and <code>-1</code> (flattened degree).
The seven trits correspond to the seven scale degrees on the line-of-fifth indicated by the <em>signature</em>---i.e., ordered from
lowest to hightest on the line-of-fifths, not relative to the root.
(For instance, when <code>Signature == 0</code>, the degrees are <code><a href='https://rdrr.io/r/base/c.html'>c(-1, 0, 1, 2, 3, 4, 5)</a></code>.)</p>
<p>The ternary arrangement maps powers of three to each scale degree, as so that in the <code>Alteration</code> integer:</p><ul>
<li><p>\(\pm 1\): raise or flatten the <strong>7th</strong> scale degree.</p></li>
<li><p>\(\pm 3\): raise or flatten the <strong>3rd</strong> scale degree.</p></li>
<li><p>\(\pm 9\): raise or flatten the <strong>6th</strong> scale degree.</p></li>
<li><p>\(\pm 27\): raise or flatten the <strong>2nd</strong> scale degree.</p></li>
<li><p>\(\pm 81\): raise or flatten the <strong>5th</strong> scale degree.</p></li>
<li><p>\(\pm 243\): raise or flatten the <strong>1st</strong> scale degree.</p></li>
<li><p>\(\pm 749\): raise or flatten the <strong>4th</strong> scale degree.</p></li>
</ul>

<p>For example, consider <code>Alteration == 26</code>:
In a balanced ternary representation, the decimal integer 26 is represented as <code>1 0 0 1 0 -1 0</code>.
(In other words 1 in the "27s  place" and -1 in the "ones place"---i.e., 27 - 1).
This represents a raised 2nd (the 27) and a lowered 7th (the -1).</p>
<p>The <code>Alteration</code> integer allows us to concisely represent all the 2,187 possible combinations of raised and lowered diatonic scale degrees!
However, combined with the <code>Signature</code> slot, there is some redundancy in scale representation.
For example, a melodic minor scale can be represented as a major scale (<code>Signature - Root == 0</code>) with a lowered third degree (<code>Alteration == -3</code>) <em>or</em> as
minor scale (<code>Signature - Root == -3</code>) with raised 6ths and 7ths (<code>Alteration == 10</code>).
However, though these two representations result in the same set on the line-of-fifths, some might consider them to be
conceptually different in some contexts, so we consider the redundancy acceptable.
Another case of encoding redundancy <em>is</em> that <code>Alteration - 1</code> (flatten the 7th) is exactly equivalent to <code>Signature - 1</code>.
Similarly, <code>Alteration + 749</code> (raise the 4th) is exactly equivalent to <code>Signature + 1</code>.</p>
<p>Double-flat and double-sharp degrees are <strong>not</strong> encodable in <code>diatonicSet</code>.
However, in combination with the <code>Signature</code> slot, sets with double-flat/sharps (like doubly-diminished 7ths) can be encoded.</p>
    <h2 class="hasAnchor" id="arithmatic"><a class="anchor" href="#arithmatic"></a>Arithmatic</h2>

    


<p>Arithmetic between diatonicSets is not defined.
However, a number of useful arithmetic operations between diatonicSets and other data types <em>are</em> defined:</p>
<p>XXXX Elaborate
XXXX Need to implement special logic for adding Alterations! (Taking into account Signature addition.)</p>
    <h2 class="hasAnchor" id="relational-operators"><a class="anchor" href="#relational-operators"></a>Relational Operators</h2>

    


<p>diatonicSets can be compared using the standard <a href='https://rdrr.io/r/base/Comparison.html'>relational operations</a> <code><a href='https://rdrr.io/r/base/Comparison.html'>==</a></code>, and <code><a href='https://rdrr.io/r/base/Comparison.html'>!=</a></code>.
Two diatonicSets are equal (according to <code><a href='https://rdrr.io/r/base/Comparison.html'>==</a></code>) only if all their slots (<code>Root</code>, <code>Signature</code>, and <code>Alteration</code>)
are exactly identical.
Ordinal comparisons (e.g., <code>&gt;</code>, <code>&lt;=</code>) between diatonicSets are on their <code>Signature</code> only.</p>
    <h2 class="hasAnchor" id="coercion"><a class="anchor" href="#coercion"></a>Coercion</h2>

    


<p><code>humdrumR</code> knows how to <a href='https://en.wikipedia.org/wiki/Type_conversion'>coerce</a> several <a href='https://rdrr.io/r/base/vector.html'>base-R atomic types</a> into diatonicSets.
This can be done using the <a href='https://rdrr.io/r/methods/as.html'>as</a> function---e.g., <code>as(3, "diatonicSet")</code>---or more intuitively using the function <code>diatonicSet()</code>.
Coercision methods are defined for</p><ul>
<li><p><a href='https://rdrr.io/r/base/integer.html'>integer</a>: interpreted as root of major key</p></li>
<li><p><a href='https://rdrr.io/r/base/numeric.html'>numeric</a>: rounded to nearest integer and intepreted as root of major key</p></li>
<li><p><a href='https://rdrr.io/r/base/character.html'>character</a>: interpreted using <code>humdrumR</code>s <a href='regexDispatch.html'>regular expression dispatch system</a>, as
explained fully <a href='diatonicRepresentations.html'>here</a>.</p></li>
</ul>


  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://fathermckenzie.net/'>Nathaniel Condit-Schultz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


