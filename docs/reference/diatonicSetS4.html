<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="diatonicSet is one of humdrumR's
types of tonal data, representing Western diatonic keys.
For the most part, users should not need to interact with diatonicSets directly---rather, diatonicSets work behind the scene in numerous humdrumR pitch functions.
See the keyRepresentations and keyTransformations documentation for details of usage and functionality or the Tonality in humdrumR vignette for
a detailed explanation of the theory and specifics of diatonicSets."><title>Tonal (diatonic) sets — diatonicSetS4 • humdrumR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tonal (diatonic) sets — diatonicSetS4"><meta property="og:description" content="diatonicSet is one of humdrumR's
types of tonal data, representing Western diatonic keys.
For the most part, users should not need to interact with diatonicSets directly---rather, diatonicSets work behind the scene in numerous humdrumR pitch functions.
See the keyRepresentations and keyTransformations documentation for details of usage and functionality or the Tonality in humdrumR vignette for
a detailed explanation of the theory and specifics of diatonicSets."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">humdrumR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.5.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Basics</h6>
    <a class="dropdown-item" href="../articles/GettingStarted.html">Getting started with humdrumR</a>
    <a class="dropdown-item" href="../articles/IntroForCoders.html">HumdrumR for coders</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>R/Humdrum background</h6>
    <a class="dropdown-item" href="../articles/HumdrumSyntax.html">The humdrum syntax</a>
    <a class="dropdown-item" href="../articles/RPrimer.html">An R primer for humdrumR users</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Data prep</h6>
    <a class="dropdown-item" href="../articles/ReadWrite.html">Reading and writing data</a>
    <a class="dropdown-item" href="../articles/Reshaping.html">Shaping humdrum data</a>
    <a class="dropdown-item" href="../articles/Filtering.html">Filtering humdrum data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Analysis</h6>
    <a class="dropdown-item" href="../articles/Summary.html">Getting to know your data</a>
    <a class="dropdown-item" href="../articles/WorkingWithData.html">Working with humdrum data</a>
    <a class="dropdown-item" href="../articles/Context.html">Contextualizing data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Musical tools</h6>
    <a class="dropdown-item" href="../articles/PitchAndTonality.html">Pitch and tonality in humdrumR</a>
    <a class="dropdown-item" href="../articles/RhythmAndMeter.html">Time, rhythm, and meter in humdrumR</a>
    <a class="dropdown-item" href="../articles/KeysAndChord.html">Diatonic and tertian sets in humdrumR</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://ccml.music.gatech.edu/humdrumR-GUI">GUI</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Tonal (diatonic) sets</h1>
      <small class="dont-index">Source: <a href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/blob/HEAD/R/Keys.R" class="external-link"><code>R/Keys.R</code></a>, <a href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/blob/HEAD/R/Chords.R" class="external-link"><code>R/Chords.R</code></a></small>
      <div class="d-none name"><code>diatonicSetS4.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>diatonicSet</code> is one of <a href="humdrumR.html">humdrumR</a>'s
types of tonal data, representing Western diatonic keys.
For the most part, users should not need to interact with diatonicSets directly---rather, diatonicSets work behind the scene in numerous <code>humdrumR</code> pitch functions.
See the keyRepresentations and keyTransformations documentation for details of usage and functionality or the <em>Tonality in humdrumR</em> vignette for
a detailed explanation of the theory and specifics of diatonicSets.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre><code>diatonicSet(...)

dset(root = 0L, signature = root, alterations = 0L)

is.diatonicSet(x)

order.diatonicSet(
  x,
  ...,
  parallel = TRUE,
  na.last = TRUE,
  decreasing = FALSE,
  method = c("auto", "shell", "radix")
)

# S4 method for diatonicSet,diatonicSet
==(e1, e2)

# S4 method for diatonicSet,diatonicSet
Compare(e1, e2)

# S4 method for tertianSet,tertianSet
==(e1, e2)</code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>diatonicSet</code> is a <a href="https://adv-r.had.co.nz/S4.html" class="external-link">S4</a> subclass of <code>humdrumR</code>'s virtual class <a href="struct.html">struct</a>,
from which it inherits a lot of useful "vector-like" behaviors/functionality.</p>
<p>The constructor function <code>dset</code> can be used to create <code>diatonicSets</code> directly.
The three arguments corespond to the three slots: <code>root</code>, <code>mode</code>, and <code>alteration</code>.
All inputs will be coerced to match in length.
The <code>root</code> argument will attempt to coerce character strings to <a href="pitchParsing.html">tonalIntervals</a>, and use their <code>LO5th</code> value as the root.</p>
<p>By default, the <a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a> method, and thus (via <a href="struct.html">struct</a>) the <a href="https://rdrr.io/r/methods/show.html" class="external-link">show</a> method,
for diatonicSets call key().
Thus, if you return a <code>diatonicSet</code> on the command line (or call <a href="https://rdrr.io/r/base/print.html" class="external-link">print</a> one one),
you'll see the key interpretation representation printed.</p>
    </div>
    <div class="section level2">
    <h2 id="slots">Slots<a class="anchor" aria-label="anchor" href="#slots"></a></h2>
    

<dl><dt><code>Root</code></dt>
<dd><p>integers representing the root of the key on the line-of-fifths</p></dd>


<dt><code>Signature</code></dt>
<dd><p>integers representing the signature (number of accidentals) of the key.</p>
<p>A key is represented by two integers, <code>Root</code> and <code>Signature</code>.
Root is simply the tonic note of the key on the circle of fifths.
Signature is a value on the circle of fifths, indicating the diatonic mode.
You can think of the <code>Signature</code> value as indicating the number of accidentals, with negative numbers
for flats and positive numbers for sharps.
You can also think of the signature as indicating how much the "natural key" (C major) is
slid up and down the line-of-fifths.
The <a href="https://en.wikipedia.org/wiki/Mode_(music)" class="external-link">traditional diatonic modes</a> of Western music occur wherever <code>Signature - Tonic</code> is in the range <code>-5:1</code>:</p><ul><li><p>Signature - Tonic = +1 =&gt; Lydian</p></li>
<li><p>Signature - Tonic = +0 =&gt; Major (Ionian)</p></li>
<li><p>Signature - Tonic = -1 =&gt; Mixolydian</p></li>
<li><p>Signature - Tonic = -2 =&gt; Dorian</p></li>
<li><p>Signature - Tonic = -3 =&gt; Minor (Aeolian)</p></li>
<li><p>Signature - Tonic = -5 =&gt; Locrian</p></li>
<li><p>Signature - Tonic = -4 =&gt; Phyrgian</p></li>
</ul><p><em>Note that you can make diatonicSets where the <code>Root</code> is outside the <code>Key</code>. This is unusual, and may result in sets you wouldn't predict.</em></p></dd>


<dt><code>Alteration</code></dt>
<dd><p>integers representing alterations of the diatonic set (details below).</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="alterations">Alterations<a class="anchor" aria-label="anchor" href="#alterations"></a></h2>
    


<p>The <code>Alteration</code> slots (also integer) can be used to represent various
"altered" scales.
The integer values are interpreted as a seven-trit <a href="https://en.wikipedia.org/wiki/Balanced_ternary" class="external-link">balanced ternary</a> string.
("trits" are the ternary equivalent of binary "bits.")
Balanced ternary allows for three digits, <code>0</code> (unaltered degree), <code>1</code> (sharpened degree), and <code>-1</code> (flattened degree).
The seven trits correspond to the seven scale degrees on the line-of-fifth indicated by the <em>signature</em>---i.e., ordered from
lowest to hightest on the line-of-fifths, not relative to the root.
(For instance, when <code>Signature == 0</code>, the degrees are <code>c(-1, 0, 1, 2, 3, 4, 5)</code>.)</p>
<p>The ternary arrangement maps powers of three to each scale degree, as so that in the <code>Alteration</code> integer:</p><ul><li><p>± 1: raise or flatten the <strong>7th</strong> scale degree.</p></li>
<li><p>± 3: raise or flatten the <strong>3rd</strong> scale degree.</p></li>
<li><p>± 9: raise or flatten the <strong>6th</strong> scale degree.</p></li>
<li><p>± 27: raise or flatten the <strong>2nd</strong> scale degree.</p></li>
<li><p>± 81: raise or flatten the <strong>5th</strong> scale degree.</p></li>
<li><p>± 243: raise or flatten the <strong>1st</strong> scale degree.</p></li>
<li><p>± 749: raise or flatten the <strong>4th</strong> scale degree.</p></li>
</ul><p>For example, consider <code>Alteration == 26</code>:
In a balanced ternary representation, the decimal integer 26 is represented as <code>1 0 0 1 0 -1 0</code>.
(In other words 1 in the "27s  place" and -1 in the "ones place"---i.e., 27 - 1).
This represents a raised 2nd (the 27) and a lowered 7th (the -1).</p>
<p>The <code>Alteration</code> integer allows us to concisely represent all the 2,187 possible combinations of raised and lowered diatonic scale degrees!
However, combined with the <code>Signature</code> slot, there is some redundancy in scale representation.
For example, a melodic minor scale can be represented as a major scale (<code>Signature - Root == 0</code>) with a lowered third degree (<code>Alteration == -3</code>) <em>or</em> as
minor scale (<code>Signature - Root == -3</code>) with raised 6ths and 7ths (<code>Alteration == 10</code>).
However, though these two representations result in the same set on the line-of-fifths, some might consider them to be
conceptually different in some contexts, so we consider the redundancy acceptable.
Another case of encoding redundancy <em>is</em> that <code>Alteration - 1</code> (flatten the 7th) is exactly equivalent to <code>Signature - 1</code>.
Similarly, <code>Alteration + 749</code> (raise the 4th) is exactly equivalent to <code>Signature + 1</code>.</p>
<p>Double-flat and double-sharp degrees are <strong>not</strong> encodable in <code>diatonicSet</code>.
However, in combination with the <code>Signature</code> slot, sets with double-flat/sharps (like doubly-diminished 7ths) can be encoded.</p>
    </div>
    <div class="section level2">
    <h2 id="arithmetic">Arithmetic<a class="anchor" aria-label="anchor" href="#arithmetic"></a></h2>
    


<p>Arithmetic between diatonicSets is not defined.
However, a number of useful arithmetic operations between diatonicSets and other data types <em>are</em> defined:</p>
<p>XXXX Elaborate
XXXX Need to implement special logic for adding Alterations! (Taking into account Signature addition.)</p>
    </div>
    <div class="section level2">
    <h2 id="relational-operators">Relational Operators<a class="anchor" aria-label="anchor" href="#relational-operators"></a></h2>
    


<p>diatonicSets can be compared using the standard <a href="https://rdrr.io/r/base/Comparison.html" class="external-link">relational operations</a> <code>==</code>, and <code>!=</code>.
Two diatonicSets are equal (according to <code>==</code>) only if all their slots (<code>Root</code>, <code>Signature</code>, and <code>Alteration</code>)
are exactly identical.
Ordinal comparisons (e.g., <code>&gt;</code>, <code>&lt;=</code>) between diatonicSets are on their <code>Signature</code> only.</p>
    </div>
    <div class="section level2">
    <h2 id="coercion">Coercion<a class="anchor" aria-label="anchor" href="#coercion"></a></h2>
    


<p><code>humdrumR</code> knows how to <a href="https://en.wikipedia.org/wiki/Type_conversion" class="external-link">coerce</a> several <a href="https://rdrr.io/r/base/vector.html" class="external-link">base-R atomic types</a> into diatonicSets.
This can be done using the <a href="https://rdrr.io/r/methods/as.html" class="external-link">as</a> function---e.g., <code>as(3, "diatonicSet")</code>---or more intuitively using the function <code><a href="https://rdrr.io/pkg/humdrumR/man/diatonicSetS4.html" class="external-link">diatonicSet()</a></code>.
Coercision methods are defined for</p><ul><li><p><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a>: interpreted as root of major key</p></li>
<li><p><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a>: rounded to nearest integer and intepreted as root of major key</p></li>
<li><p><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a>: interpreted using <code>humdrumR</code>s regular expression dispatch system, as
explained fully here.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>The main way to create <code>diatonicSet</code> S4 objects is with the <code><a href="https://rdrr.io/pkg/humdrumR/man/diatonicSetS4.html" class="external-link">diatonicSet()</a></code> pitch parser.</p>
<p>Other Tonal S4 classes: 
<code><a href="tertianSetS4.html">tertianSetS4</a></code>,
<code><a href="tonalIntervalS4.html">tonalIntervalS4</a></code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Nathaniel Condit-Schultz, Claire Arthur.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

