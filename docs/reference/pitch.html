<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Functions for creating and/or translating between numerous representations of pitch."><title>Pitch representations and translations — pitch • humdrumR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Pitch representations and translations — pitch"><meta property="og:description" content="Functions for creating and/or translating between numerous representations of pitch."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">humdrumR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/GettingStarted.html">Getting started with humdrumR</a>
    <a class="dropdown-item" href="../articles/HumdrumSyntax.html">The Humdrum Syntax</a>
    <a class="dropdown-item" href="../articles/Intervals.html">Rhythm and Pitch Intervals</a>
    <a class="dropdown-item" href="../articles/IntroForCoders.html">HumdrumR for Coders</a>
    <a class="dropdown-item" href="../articles/KeysAndChord.html">Diatonic and Tertian Sets in humdrumR</a>
    <a class="dropdown-item" href="../articles/Overview.html">Overview of humdrumR</a>
    <a class="dropdown-item" href="../articles/PitchAndTonality.html">Pitch and Tonality in humdrumR</a>
    <a class="dropdown-item" href="../articles/ReadWrite.html">Reading and writing data with humdrumR</a>
    <a class="dropdown-item" href="../articles/RhythmAndMeter.html">Rhythm and Meter in humdrumR</a>
    <a class="dropdown-item" href="../articles/Validation.html">Validating Humdrum Data</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="nav-link" href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Pitch representations and translations</h1>
      <small class="dont-index">Source: <a href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/blob/HEAD/R/tonalInterval.R"><code>R/tonalInterval.R</code></a></small>
      <div class="d-none name"><code>pitch.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Functions for creating and/or translating between numerous representations of pitch.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">semit</span><span class="op">(</span>
  <span class="va">x</span>,
  <span class="va">...</span>,
  Key <span class="op">=</span> <span class="cn">NULL</span>,
  Exclusive <span class="op">=</span> <span class="cn">NULL</span>,
  deparse <span class="op">=</span> <span class="cn">TRUE</span>,
  inPlace <span class="op">=</span> <span class="cn">FALSE</span>,
  dropNA <span class="op">=</span> <span class="cn">FALSE</span>,
  parseArgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,
  transposeArgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,
  memoize <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>There are numerous ways that musicians and musicologists encode pitch information---solfege, scientific pitch,
intervals, scale degrees, frequencies, etc.---each with different purposes and uses.
Some of these representations are numeric, but most involve letters and other characters.
Any of these concrete representations can be translated to and from
abstract <a href="tonalInterval.html">tonalInterval</a> objects: <code>tonalInterval</code>s completely represent all/any of these standard representations,
so <em>cocrete pitch representation -&gt; tonalInterval</em> is guaranteed to be lossless.
However, not all pitch representations encode complete tonal pitch information, so
<em>tonalInterval -&gt; concrete pitch representation</em> may be lossy.
These caneats asside, <code>humdrumR</code> can, via the common <code>tonalInterval</code> representation, encode and translate <em>between</em> various
representations: we can read in data in any reprsentation, manipulate it, and write it to the same or a different representation.
This documentation describes <code>humdrumR</code>'s pitch representation and translation features.
(<code>tonalIntervals</code> also give us easy ways to <strong>manipulate</strong> pitch information---see the tonalTransform documentation.)</p>
<p><code>humdrumR</code> currently recognizes XXX "standard" pitch representations:</p><table class="table table"><tr><td>Name</td><td>Class</td><td>Description</td></tr><tr><td>semit</td><td><code>integer</code></td><td><a href="https://en.wikipedia.org/wiki/Semitone" class="external-link">Semitones</a></td></tr><tr><td>midi</td><td><code>integer</code></td><td><a href="https://en.wikipedia.org/wiki/MIDI" class="external-link">MIDI</a> note number</td></tr><tr><td>kernPitch</td><td><code>character</code></td><td><a href="https://www.humdrum.org/rep/kern/index.html" class="external-link">Kern</a> pitch representation</td></tr><tr><td>pitch</td><td><code>character</code></td><td><a href="https://en.wikipedia.org/wiki/Scientific_pitch" class="external-link">Scientific pitch</a> representation</td></tr><tr><td>lilyPitch</td><td><code>character</code></td><td><a href="https://lilypond.org/doc/v2.20/Documentation/notation/pitches" class="external-link">LilyPond</a> pitch representation</td></tr><tr><td>interval</td><td><code>character</code></td><td>Tonal <a href="%22https://en.wikipedia.org/wiki/Interval_(music)#Interval_number_and_quality%22" class="external-link">interval</a></td></tr><tr><td>degree</td><td><code>character</code></td><td><a href="%22https://en.wikipedia.org/wiki/Degree_(music)%22" class="external-link">Scale degree</a></td></tr><tr><td>solfa</td><td><code>character</code></td><td>Humdrum <a href="https://www.humdrum.org/rep/solfa/" class="external-link">solfa</a> representation of solfege</td></tr><tr><td>decimal</td><td><code>numeric</code></td><td><a href="https://en.wikipedia.org/wiki/Interval_ratio" class="external-link">Frequency ratio</a> as R <a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a> (equal temperament)</td></tr><tr><td>frequency</td><td><code>numeric</code></td><td><a href="https://en.wikipedia.org/wiki/Frequency#Sound" class="external-link">Sound frequency</a> (<a href="https://en.wikipedia.org/wiki/Equal_temperament" class="external-link">equal temperament</a>)</td></tr><tr><td>fraction</td><td><code>character</code></td><td>Frequency ratio as fraction (Pythagorean tuning)</td></tr></table><p>Below are equivalent examples of each of these standard pitch representation; all the representations in each column of the table are
represented by the same <a href="tonalInterval.html">tonalInterval</a>---the final
two rows show the <code>tonalInterval</code> slot (<code>@Octave</code> and <code>@Fifth</code>) values associated with each interval as well (users should never really have to think about these).</p><table class="table table"><tr><td>Name</td><td>Unison</td><td>Minor second</td><td>Descending major second</td><td>Augmented fourth</td><td>Perfect 5th</td><td>Diminished 7th</td><td>Minor 10th</td></tr><tr><td>semit</td><td><code>0L</code></td><td><code>1L</code></td><td><code>-2L</code></td><td><code>6L</code></td><td><code>7L</code></td><td><code>9L</code></td><td><code>15L</code></td></tr><tr><td>midi</td><td><code>60L</code></td><td><code>61L</code></td><td><code>58L</code></td><td><code>66L</code></td><td><code>67L</code></td><td><code>69L</code></td><td><code>75L</code></td></tr><tr><td>kernPitch</td><td><code>"c"</code></td><td><code>"d-"</code></td><td><code>"B-"</code></td><td><code>"f#"</code></td><td><code>"g"</code></td><td><code>"b--"</code></td><td><code>"ee-"</code></td></tr><tr><td>pitch</td><td><code>"C4"</code></td><td><code>"Db4"</code></td><td><code>"Bb3"</code></td><td><code>"F#4"</code></td><td><code>"G4"</code></td><td><code>"Bbb4"</code></td><td><code>"Eb5"</code></td></tr><tr><td>lilyPitch</td><td><code>"c"</code></td><td><code>"des"</code></td><td><code>"bes,"</code></td><td><code>"fis"</code></td><td><code>"g"</code></td><td><code>"beses"</code></td><td><code>"ees'"</code></td></tr><tr><td>interval</td><td><code>"P1"</code></td><td><code>"+m2"</code></td><td><code>"-M2"</code></td><td><code>"+A4"</code></td><td><code>"+P5"</code></td><td><code>"+d7"</code></td><td><code>"+m10"</code></td></tr><tr><td>degree</td><td><code>"1"</code></td><td><code>"m2"</code></td><td><code>"m7"</code></td><td><code>"#4"</code></td><td><code>"5"</code></td><td><code>"b7"</code></td><td><code>"m3"</code></td></tr><tr><td>solfa</td><td><code>"do"</code></td><td><code>"ra"</code></td><td><code>"te"</code></td><td><code>"fi"</code></td><td><code>"so"</code></td><td><code>"te-"</code></td><td><code>"me"</code></td></tr><tr><td>decimal</td><td><code>1</code></td><td><code>1.059</code></td><td><code>0.891</code></td><td><code>1.414</code></td><td><code>1.498</code></td><td><code>1.682</code></td><td><code>2.378</code></td></tr><tr><td>frequency</td><td><code>261.625</code></td><td><code>277.182</code></td><td><code>233.0819</code></td><td><code>369.994</code></td><td><code>391.995</code></td><td><code>440</code></td><td><code>622.253</code></td></tr><tr><td>fraction</td><td><code>"1/1"</code></td><td><code>"256/243"</code></td><td><code>"8/9"</code></td><td><code>"729/512"</code></td><td><code>"3/2"</code></td><td><code>"32768/19683"</code></td><td><code>"64/27"</code></td></tr><tr><td><code>@Fifth</code></td><td><code>0L</code></td><td><code>-5L</code></td><td><code>-2L</code></td><td><code>6L</code></td><td><code>1L</code></td><td><code>-9L</code></td><td><code>-3L</code></td></tr><tr><td><code>@Octave</code></td><td><code>0L</code></td><td><code>8L</code></td><td><code>3L</code></td><td><code>-9L</code></td><td><code>-1L</code></td><td><code>15L</code></td><td><code>6L</code></td></tr></table><p>This table illustrates that some representations are <a href="https://en.wikipedia.org/wiki/Lossy_compression" class="external-link">lossy</a>, as they don't encode the full pitch information.
For instance, the <em>degree</em> representation drops octave information, while <em>semit</em> drops tonal information (i.e., that <code>C# != Db</code>).
This means that translating a more complete representation to a lossy (less complete representation) is a
non-<a href="https://en.wikipedia.org/wiki/Injective_function" class="external-link">injective</a> function.</p><div class="section">
<h3 id="pitch-translation">Pitch Translation<a class="anchor" aria-label="anchor" href="#pitch-translation"></a></h3>


<p><code>humdrumR</code> exports functions to read and write all of the standard representations above, as well as some custom non-standard representations (see <code>tonalChroma</code> below).
An input can be converted to any representation by calling the appropriate function of the form <code>as.xxx</code>: for example, <code>solfa</code>.
The complete list of <code>as.xxx</code> functions for pitch representations is:</p><ul><li><p>Atonal</p><ul><li><p><code>semit</code></p></li>
<li><p><code>midi</code></p></li>
</ul></li>
<li><p>Tonal</p><ul><li><p><code>tonalChroma</code></p><ul><li><p><code>step</code></p></li>
<li><p><code>as.accidental</code></p></li>
<li><p><code>as.quality</code></p></li>
<li><p><code>octave</code></p></li>
</ul></li>
<li><p><code>kern</code></p></li>
<li><p><code>lilypond</code></p></li>
<li><p><code>pitch</code></p></li>
<li><p><code>interval</code></p></li>
<li><p><code>degree</code></p></li>
<li><p><code>solfa</code></p></li>
</ul></li>
<li><p>Frequency</p><ul><li><p><code>decimal</code></p></li>
<li><p><code>frequency</code></p></li>
<li><p><code>fraction</code></p></li>
</ul></li>
</ul><p>Note that none of the functions have a plural name, so it's not <code>semits</code> or <code>intervals</code> even if you are applying them to multiple inputs!</p>
<p>Each of these functions does <em>three</em> things:</p><ol><li><p>Read and <em>parse</em> the input as a <code>tonalInterval</code> (details below).</p></li>
<li><p>If desired, transform the <code>tonalInterval</code> (see tonalTransform).</p></li>
<li><p><em>Deparse</em> and write the <code>tonalInterval</code> to the output representation (details below).</p></li>
</ol><p>Each of these three steps has numerous options that you can control via special arguments.
The details of the reading and writing stages, and all the associated arguments are described in subsequent sections.
All pitch translation functions <em>also</em> have arguments to perform various transformations on pitch data (i.e., inversion, transposition).
All the transformation arguments of the <a href="tonalTransformations.html">tonalTransform</a> function can be applied to any pitch translation function.
For example, you can write <code>kern(x, generic = TRUE, Key = "A")</code> to extract generic intervals in the key of A major and output them in <code>kernPitch</code> format.
These transformation arguments are listed as "common" arguments in the table below, and explained in more detail in the <a href="tonalTransformations.html">tonalTransformations</a> documentation.</p>
</div>

<div class="section">
<h3 id="reading-pitch-information">Reading Pitch Information<a class="anchor" aria-label="anchor" href="#reading-pitch-information"></a></h3>


<p>The master function <code>tonalInterval</code> converts any recognized pitch input into a <code>tonalInterval</code> object.
All the main <code>as.xxx</code> functions implicitely call <code>tonalInterval</code>.
How <code>tonalInterval</code> interprets input as pitch information is determined by the base R <a href="https://rdrr.io/r/methods/Methods_Details.html" class="external-link">dispatch system</a> (interpreting the class of the input) and,
if the input is a character-string, humdrumR's <a href="regexDispatch.html">regular expression dispatch system</a>.</p>
<p>The process of reading an input as a <code>tonalInterval</code> follows two steps:</p>
<p>First, the base R dispatch system checks the <a href="https://rdrr.io/r/base/class.html" class="external-link">class</a> of the input. There are currently methods for three recognized classes:</p><ul><li><p><code>integer</code>: integers are interpreted as semitones.</p></li>
<li><p><code>numeric</code>: numeric (floating point, not integer values) are interpreted as frequency ratios.</p></li>
<li><p><code>character</code>: if the input is a character, humdrumRs dispatch system comes into play (see next paragraph).</p></li>
</ul><p>Given an character-string input, the <code>humdrumR</code> <a href="regexDispatch.html">regular expression dispatch system</a> determines the appropriate way to parse
pitch information from the string using two criteria:</p><ol><li><p>matching known <em>regular expressions</em> in the string and</p></li>
<li><p>based on the <code>Exclusive</code> argument, which indicates a <em>exclusive interpretations</em> associated with it (see our <em>The Humdrum Syntax</em> vingette if you don't know
what an exclusive interpretation is).
For any input string, humdrumR searches for known regular expressions and decides to interpret the input based on whichever regular expression matches the <em>most</em> input strings.
For instance, if you call <code>kern("A4")</code> (or any <code>as.xxx</code> pitch function), the dispatcher will see that the <code>"A4"</code> string matches the regular expression for
scientific pitch notation (i.e., the A above middle C) and <em>also</em> the regular expression for intervals (i.e., an augmented fourth).
In this case, there is only one input string, so humdrumR will five scientific notation precedence and interpret the input as the A above middle C.
However, if we have an input with more information, like <code>kern(c("A4", "P5"))</code>, humdrumR will see that <strong>both</strong> inputs match intervals, but only the first one matches
scientific pitch notation---therefore, humdrumR will interpret both strings as intervals (augmented fourth and perfect 5th).
Note that humdrumR will <em>not</em> use two different interpretions of the same string.
Also, any strings which match no known regular expressions, will result in <code>NA</code> (unless <code>inPlace = TRUE</code>; see below).</p></li>
</ol><p>What if we want to interpret <code>kern("A4")</code> as an interval? Well, we can use the <code>Exculusive</code> argument.
The <code>Exclusive</code> argument gives more information to the dispatcher, which will override the purely-regex based decisions.
For instance, if we specify <code>kern("A4", Exclusive = 'interval')</code>, <code>humdrumR</code> will know that the exclusive interpretation "**interval"
should be interpreted as an interval.
If we run <code>kern(c("A4", "P5"), Exclusive = 'pitch')</code>, humdrumR will return <code>("a", NA)</code>, because the second input can't be interpreted as a scientfic pitch.
However, the <code>Exclusive</code> argument is vectorized, which gives us the option of using multiple input interpretations on different parts of the same input.
For instance, <code>kern(c("A4", "A4"), Exclusive = c('pitch', 'int')</code> will return <code>("a", "f#")</code>---the <code>'pitch'</code> exclusive intepretation is
matched with the first <code>"A4"</code> while the <code>'int'</code> interpretation is matched with the second one!</p>
<p>The following regular expressions and exclusive interpretations are associated with each representation in humdrumR:
Exclusive           RE                                                             Example
kernPitch        *<em>kern              (A-Ga-g)\1</em>(#-)<em>\2</em>                                      c
Beam             <em><em>kern              ([/\\]?(L+K</em>)?)|([/\\]?(J+k</em>)?)                            /Jk
MelodicSignifier **kern              [TtMmWw]R?|[TtMmWwS$O]                                         M
Articulation     **kern              ['`\"~I][vu]?|[vu]                                            v
recip            **recip             [1-9][0-9]<em>%?[1-9]?[0-9]</em>[.]<em>|01,2\.</em>                       8.
sciPitch         **pitch             [A-G][b#-]<em>[-+]?[0-9][0-9]</em>                                    C4
solfa            **solfa             [\^v',]<em>([sd]eoi</em>|[fl]eai<em>|[mt]eiy</em>|r[aei]) do
interval         **mint,**hint,*<em>int [+-]?([MmP]|[Ad#b]+)[1-9][0-9]</em>                                +P5
scaleDegree      **deg               [\^v',]<em>([MmPn]|[Ad#b]</em>)[1-9][0-9]*                           P5</p>
<p>A final useful option is controlled using the logical <code>inPlace</code> argument.
If <code>inPlace = TRUE</code> any extra characters in the input string which are <em>not</em> part of the matching regular expression will be left unchanged:
for example, <code>kern("4.A5xxxv", inPlace = TRUE)</code> will output <code>"4.aaxxxv</code>---the <code>"A5"</code> (scientific pitch) is translated to <code>"aa"</code> (kern pitch)
but the <code>"4."</code> and <code>"xxxv"</code> are not changed.
In contrast, <code>kern("4.A5xxxv", inPlace = FALSE)</code> will just return <code>"aa"</code>, stripping away the <code>"4."</code> and <code>"xxxv"</code>.
(Thus, the <code>inPlace</code> argument can be used as a tool to extract the desired part of strings.)
Note that if <code>inPlace = TRUE</code>, any inputs which fail to match anything will just be left unchanged.</p>
</div>

<div class="section">
<h3 id="read-writing-tonal-pitch-information">Read/Writing Tonal Pitch Information<a class="anchor" aria-label="anchor" href="#read-writing-tonal-pitch-information"></a></h3>


<p>Most of the pitch representations defined in <code>humdrumR</code> are based in Western diatonic <em>tonality</em>---for info on our atonal representations, see the <em>Read/Writing Atonal Pitch Information</em> section below.
The predefined <code>kernPitch</code>, <code>pitch</code>, <code>lilyPitch</code>, <code>helmholtz</code>, <code>interval</code>, <code>degree</code>, and <code>solfa</code> encodings are all tonal representations---in fact, they all represent <em>essentially</em> the same absract
information,  which is exactly what <code>tonalInterval</code>s encode.
Specifically, we condsider all of these representations to be different representations of what we call <em>tonal chroma</em>:
as such, the <code>tonalChroma</code> function is the master function used to construct all of these specific representations.
The following section(s) explain the abstract principles of pitch representation, how they function in standard representations, and how
we, in humdrumR, we can use <code>tonalChroma</code> and its arguments to create custom tonal representations of pitch.</p><div class="section">
<h4 id="tonal-pitch-partitions-">Tonal Pitch "Partitions"<a class="anchor" aria-label="anchor" href="#tonal-pitch-partitions-"></a></h4>


<p>As discussed in the <em>Tonality in humdrumR</em> vignette, tonal intervals can be "partitioned"---i.e., broken into constituent logical pieces.
There are two main "partitions" we frequently use:</p><ol><li><p>the partitioning of a <em>complex</em> interval into a <em>simple parts</em> and <em>octave</em> parts*.</p></li>
<li><p>the partitioning of a <em>specific</em> interval into a <em>generic part</em> and a <em>alteration</em> part.</p></li>
</ol><p>Simple intervals are abstract (<a href="https://en.wikipedia.org/wiki/Circle_of_fifths" class="external-link">line-of-fifths</a> ) information, without regards to a specific pitch in frequency space---i.e., actual "pitch height."
The combination of a simple interval with an octave part creates a complex interval, which <em>does</em> include information about specific pitch height.
Tonal "line-of-fifths space" can further be partitioned into <a href="tonalTransformations.html">generic</a> (diatonic) information and <em>specific</em> interval information which describes the
<em>quality</em> of intervals, including zero or more <a href="%22https://en.wikipedia.org/wiki/Accidental_(music)%22" class="external-link">alterations</a> of the diatonic set.
Thus, any tonal interval/pitch is composed of an <strong>octave</strong> part, a <strong>generic</strong> part, and a <strong>quality</strong> part.</p>
<p>Various pitch representation schemes (kern, solfege) represent the three different parts (octave/generic/quality) of <code>tonalInterval</code>s in various ways, though some representations are
lossy/incomplete, as they don't fully encode all three partitions.
For example, scale degrees represent simple tonal information without complex octave information.
In some schemes, each tonal partition is represented distinctly from others, allowing us to mix and match different sub-representation to create various full reprsentations.
In other cases, representations blur partitions in ways that can not be broken apart.
For instance, solfege syllables do not neatly delineate generic and quality information---the "e" vowel means different qualities depending on which leading consonant it is paired with
(e.g., "re" vs "me").
Since the logic of interval representation does not always conform to the more abstract logic of <code>tonalInterval</code> partitions, we use a different set of terms to
refer to the <em>representation</em> of distinct partitions: scale-<strong>step</strong> for generic information,  <strong>quality</strong>/<strong>alteration</strong>/<strong>accidental</strong> for alteration information, and  <strong>octave</strong> for octave information,
Thus, the terms <code>step</code>, <code>octave</code>, <code>quality</code>, <code>alteration</code>, <code>accidental</code> all appear as or in various pitch representation/translation function arguments (details below).</p>
<p>In humdrumR, a <em>tonal chroma</em> is a representation that combines some combination of the three representation partions (scale, alteration, and/or octave).
The <code>tonalChroma</code> function is a master function for writing tonal chroma.
The functions<code>kern</code>, <code>pitch</code>, <code>lilypond</code>, and <code>as.helmholtz</code> are all simply wrappers which call <code>tonalChroma</code> with various specific arguments.
<code>tonalChroma</code> itself calls four constituent functions: <code>step</code>, <code>as.quality</code>/<code>as.accidental</code>, and <code>octave</code>/<code>octave</code>.
The arguments to <code>tonalChroma</code>, derived from the constituent functions (details in the following sections) are:</p><ul><li><p><code>tonalChroma</code>:</p><ul><li><p><code>parts</code>: a character string of length 1--4, indicating which parts of the tonalChroma to print, and in which order.
Acceptable strings are <code>"step"</code>, <code>"qualities"</code>, <code>"accidentals"</code>, or <code>"octave"</code>.
([Partial matches][base::pmatch] matches like <code>"ste"</code> or <code>"s"</code> for <code>step</code> will work too.)
The output tonal chroma string will have its part concatinated in the order they appear in the <code>parts</code> argument.
For instance, you could put <code>c("octave", 'step', 'accidental')</code> to put the octave before the simple interval,
or put <code>c('step', 'accidental', "octave")</code> to put it after.</p></li>
<li><p><code>sep</code>: a character string which will be used to separate the elements (the default is <code>""</code>).</p></li>
</ul></li>
<li><p>from <code>step</code> (described below):</p><ul><li><p><code>step.labels</code></p></li>
</ul></li>
<li><p>from <code>as.accidental</code> (described below):</p><ul><li><p><code>accidental.labels</code></p></li>
<li><p><code>accidental.maximum</code> and <code>accidental.minimum</code></p></li>
<li><p><code>accidental.cautionary</code></p></li>
<li><p><code>accidental.memory</code></p></li>
<li><p><code>Key</code></p></li>
</ul></li>
<li><p>from <code>as.quality</code> (described below):</p><ul><li><p><code>quality.labels</code></p></li>
<li><p><code>quality.maximum</code> and <code>quality.minimum</code></p></li>
<li><p><code>quality.cautionary</code></p></li>
<li><p><code>quality.memory</code></p></li>
<li><p><code>Key</code></p></li>
</ul></li>
<li><p>from <code>octave</code> (described below):</p><ul><li><p><code>octave.labels</code></p></li>
<li><p><code>octave.maximum</code> and <code>octave.minimum</code></p></li>
<li><p><code>octave.offset</code></p></li>
<li><p><code>octave.round</code></p></li>
<li><p><code>octave.delta</code></p></li>
</ul></li>
</ul></div>


</div>

<div class="section">
<h3 id="scale-steps">Scale Steps<a class="anchor" aria-label="anchor" href="#scale-steps"></a></h3>


<p>A particular area of confusion in pitch representation is in the relationship between tonal (line-of-fifths) space and octave (frequency) space.
The line-of-fifths is an abstract space unrelated to specific frequencies---e.g., G is not inherently "above" or "below" C.
Still, musicians do not play abstractions, so we must always realize our line-of-fifths space in concrete frequency space.
By convention, collections from the line-of-fifths are conceptualized as frequency-orded "<strong>scales</strong>": folding the line-of-fifths into a sequence of intervals in the octave "above" the unison.
In most theoretical contexts, the order/"height" of elements in the scale is actually completely irrelavant.
Specifically, the first seven (diatonic) elements of the line-of-fifths are mapped into generic <strong>scale-steps</strong> in the order [0, 2, 4, 6, 1, 3, 5].
Scale-steps are strictly limited to a this seven-step range of a single diatonic octave, and are always "<em>ascending</em>"/"<em>positive</em>"---as they are steps in a pseudo-octave "above" the unison.
This representation of the line-of-fiths in terms of scale-steps is the most basic approach to representing pitch, and is associated with arguments containing <code>step</code>;
The function <code>step</code> is the basic building block of scale-step representations in humdrumR.</p>
<p>If we apply the modulo-7 operation to the line-of-fifths space, all intervals are mapped to these seven generic steps.
Alterations of the basic generic steps are represented separately (see <strong>Qualities and Alterations</strong> section below).
However, we should note that scale order is defined entirely based on the generic interval: for example, C-flat is by convention positioned "below"
C-natural in the scale, even though it (is often) equivalent to B-natural, which is at the "top" of the scale.</p>
<p>Generic, pseudo-ordered, scale-steps are conventionally represented in three forms: as letters (A-G), numbers (1-7 or I-VII), or conventional syllables (do, re, mi, fa...).
HumdrumR predefines several representations which include letters (A-G) as their scale-step encoding: <code>kernPitch</code>, <code>lilyPitch</code>, <code>helmholtz</code>, and <code>pitch</code>.
There are also standard numeric (<code>degree</code>) and syllable-based (<code>solfa</code>) based representations predefined.
The more generic <code>step</code> function can be used to write other variations of the scale step representations.
<code>step</code> includes two arguments:</p><ul><li><p><code>step.labels</code>: a vector of seven elements (default = c('C', 'D', 'E', 'F', 'G', 'A', 'B')) representing the desired names for the seven steps in scale order.</p></li>
</ul></div>

<div class="section">
<h3 id="quality-and-alterations">Quality and Alterations<a class="anchor" aria-label="anchor" href="#quality-and-alterations"></a></h3>


<p>Generically, a tonal interval's <em>quality</em> indicates its diatonic mode and relationship to that mode.
Specifically, alterations/accidentals indicate alterations of the key/mode while the quality indicates what the mode is.</p>
<p>The diatonic set is primarily defined by the major mode, consisting of the line-of-fifth range -1 to +5.
These seven intervals are the "<em>natural</em>" intervals---by default, unless a major context is specifically counter-indicated, the absence of an accidental
indicates these natural steps.
Any intervals outside of this scale can be indicated as alterations of the natural steps using accidentals:
There are two primary accidentals, <a href="%22https://en.wikipedia.org/wiki/Sharp_(music)%22" class="external-link">sharp</a> and <a href="%22https://en.wikipedia.org/wiki/Flat_(music)%22" class="external-link">flat</a>,
though they can be added together to create multi-sharps and multi-flats. (Sharps and flats cannot be mixed in <code>humdrumR</code>.)
An alteration corresponds to adding or subtracting multiples of <code>7</code> from the generic values (e.g., to "sharpen" a note means to add 7 to the line-of-fifths value).
Finally, a <a href="%22https://en.wikipedia.org/wiki/Natural_(music)%22" class="external-link">natural</a> accidental is used when the default natural step needs to be explicitely labeled.</p>
<p>The encoding of <em>qualities</em> is subtly distinct from alterations.
Qualities encode information about the diatonic mode of intervals, as well as alterations of mode.
The five consonant diatonic <a href="%22https://en.wikipedia.org/wiki/Mode_(music)%22" class="external-link">modes</a>---phyrigian (-5--+1), minor (-4--+2), dorian (-3--+3), mixolydian (-2--+4), and major (-1--+5)---all
share the same the "<em>perfect</em>" first, fourth, and  fifth scale-steps---corresponding to the central -1--+1 on the line-of-fifths.
However, these five modes encompass two varieties of each of the "<em>imperfect</em>" second, third, sixth, and seventh scale steps:
the <strong>major</strong> steps (+2--+5) and the <strong>minor</strong> steps (-2---5), which are (obviously) inverses on the line-of-fifths.
Each minor/major pair is separated on line-of-fifths interval of <code>7</code>, and thus one can be altered into the other.
Anything on the line-of-fifths outside of the -5--+5 range are represented as one or more alterations of the perfect/imperfect degree.
Postive alterations (<code>+7</code>) are  <strong>augmented</strong> while negative alterations (<code>-7</code>) are <strong>diminished</strong>---like sharps and flat, augmentations and diminutions can be multipled.</p>
<p>The following table illustrates the relationship between the line-of-fifths, scale-steps, accidentals, and qualities:</p><div class="sourceCode"><pre><code> LO5th Step Accidental Quality
   -10    E         --       d
    -9    B         --       d
    -8    F          -       d
    -7    C          -       d
    -6    G          -       d
    -5    D          -       m
    -4    A          -       m
    -3    E          -       m
    -2    B          -       m
    -1    F                   
     0    C                   
     1    G                   
     2    D                   
     3    A                   
     4    E                   
     5    B                   
     6    F          #       A
     7    C          #       A
     8    G          #       A
     9    D          #       A
    10    A          #       A
    11    E          #       A
    12    B          #       A
    13    F         ##      AA
    14    C         ##      AA
</code></pre></div>

<p>Note that accidentals are symetrical around the dorian mode (D), while qualities are symetrical around the major mode.
As a result, though sharp accidentals and augmentation qualities always correspond, flat accidentals are <em>not</em> equivalent to diminished qualities.</p>
<p>HumdrumR's predefined tonal chroma representations (<code>kernPitch</code>, <code>lilyPitch</code>, <code>helmholtz</code>, and <code>pitch</code>) each include alteration information through three accidental
indications (sharp, flat, natural).
The <code>degree</code> and <code>interval</code> representations encode more general qualities using five categories (major, minor, diminished, augmented, perfect).
The <code>solfa</code> representation also encodes quality through conventional (non-systematic) vowel modifications.
More generally, the <code>as.quality</code> and <code>as.accidental</code> functions can be used extract quality information in isolation.
These functions use some (or all) of the following arguments:</p><ul><li><p><code>_.labels</code>:</p><ul><li><p><code>accidental.labels</code>: a [named][base::names()] character vector which controls the characters used to represent accidentals.
The characters must be named either <code>flat</code>, <code>sharp</code>, <code>natural</code>, <code>doublesharp</code>, or <code>doubleflat</code>.
The defaults are <code>c(flat = "b", sharp = "#", natural = "n")</code>.
By default, <code>doubleflat</code> and <code>doublesharp</code> are not defined, and doubles are simply represented by two of the normal accidental symbols.
However, if either double accidental is defined, every pair of accidentals is collapsed to the double version.</p>
<p>If <code>accidental.labels == FALSE</code>, returns an integer value counting the number of alterations (positive for sharps, negative for flats).</p></li>
<li><p><code>quality.labels</code>: a [named][base::names()] character vector which controls the characters used to represent qualities.
The characters must be named either <code>perfect</code>, <code>major</code>, <code>minor</code>, <code>augment</code>, or <code>diminish</code>, with defaults
<code>c(perfect = "P", major = "M", minor = "m", augment = "A", diminish = "d")</code>.</p></li>
</ul></li>
<li><p><code>_.maximum</code> and <code>_.minimum</code></p><ul><li><p>Single integer values---defaults are <code>Inf</code> (maximum) and <code>-Inf</code> (minimum).
These arguments define the maximum number of multi-accidentals permitted.
For instance, if <code>accidental.maximum == 2L</code>, accidentals of at most <code>"##"</code> will be output; a triple sharp will be reduced to just a <code>"##"</code>.
The<code>_.minimum</code> argument must be negative (-2 == two flats).
By default, the minimum is the inverse of the maximum, so if you want them to be the same, just set the maximum.</p></li>
</ul></li>
<li><p><code>Key</code>: a [diatonicSet] object describing the key and mode. Default is <code>NULL</code>. If <code>Key</code> is specified, only alterations relative to that key are printed
(unless the <code>_.cautionary</code> or <code>_.memory</code> arguments override this).</p></li>
<li><p><code>_.cautionary</code>: a single logical value. Causes <em>more</em> accidentals/qualities to print (details below). Default is <code>FALSE</code> for accidentals and <code>TRUE</code> for qualities.</p></li>
<li><p><code>_.memory</code>: a single logical value (default is <code>FALSE</code>). Causes <em>fewer</em> accidentals/qualities to print (details below).</p></li>
</ul><p>The master <code>tonalChroma</code> calls these functions, and can thus pass these arguments to them.
For example, you could write <code>tonalChroma(x, accidental.maximum = 1)</code>.</p><div class="section">
<h4 id="cautionary-alterations">Cautionary Alterations<a class="anchor" aria-label="anchor" href="#cautionary-alterations"></a></h4>

<div class="section">
<h5 id="accidentals">Accidentals<a class="anchor" aria-label="anchor" href="#accidentals"></a></h5>
<div class="sourceCode"><pre><code>     a-   a    b-   a    b-   a-   e    f    f#   e-   g-   f    b    c    d-   b-   e-   b-   a-  
NFF  a-   a    b-   a    b-   a-   e    f    f#   e-   g-   f    b    c    d-   b-   e-   b-   a-  
NFT  a-   a    b-   a    b-   a-   e    f    f#   e-   g-   f    b    c    d-   b-   e-   b-   a-  
NTF  a-   a    b-   a    b-   a-   e    f    f#   e-   g-   f    b    c    d-   b-   e-   b-   a-  
NTT  a-   a    b-   a    b-   a-   e    f    f#   e-   g-   f    b    c    d-   b-   e-   b-   a-  
AbFF a-   a    b-   a    b-   a-   e    f    f#   e-   g-   f    b    c    d-   b-   e-   b-   a-  
AbFT a-   a    b-   a    b-   a-   e    f    f#   e-   g-   f    b    c    d-   b-   e-   b-   a-  
AbTF a-   a    b-   a    b-   a-   e    f    f#   e-   g-   f    b    c    d-   b-   e-   b-   a-  
AbTT a-   a    b-   a    b-   a-   e    f    f#   e-   g-   f    b    c    d-   b-   e-   b-   a-  
</code></pre></div>

</div>

<div class="section">
<h5 id="qualities">Qualities<a class="anchor" aria-label="anchor" href="#qualities"></a></h5>
<div class="sourceCode"><pre><code>     a-   a    b-   a    b-   a-   e    f    f#   e-   g-   f    b    c    d-   b-   e-   b-   a-  
NFF  mA   A    mB   A    mB   mA   E    F    AF   mE   dG   F    B    C    mD   mB   mE   mB   mA  
NFT  mA   A    mB   A    mB   mA   E    F    AF   mE   dG   F    B    C    mD   mB   mE   mB   mA  
NTF  mA   A    mB   A    mB   mA   E    F    AF   mE   dG   F    B    C    mD   mB   mE   mB   mA  
NTT  mA   A    mB   A    mB   mA   E    F    AF   mE   dG   F    B    C    mD   mB   mE   mB   mA  
AbFF mA   A    mB   A    mB   mA   E    F    AF   mE   dG   F    B    C    mD   mB   mE   mB   mA  
AbFT mA   A    mB   A    mB   mA   E    F    AF   mE   dG   F    B    C    mD   mB   mE   mB   mA  
AbTF mA   A    mB   A    mB   mA   E    F    AF   mE   dG   F    B    C    mD   mB   mE   mB   mA  
AbTT mA   A    mB   A    mB   mA   E    F    AF   mE   dG   F    B    C    mD   mB   mE   mB   mA  
</code></pre></div>

</div>


</div>


</div>

<div class="section">
<h3 id="octave">Octave<a class="anchor" aria-label="anchor" href="#octave"></a></h3>


<p>When we <em>do</em> wish to represent concrete, frequency-ordered information about a pitch, we add additional <em>octave</em> information to the simple, line-of-fifth representation to
creating <em>complex intervals</em>.
Since scale-step representations ostensibly encode frequency-space ordering already, the first step is to take the scale-ordering literally---e.g, G really is "above" D---,
creating what we call a <strong>simple octave</strong>.
To fully represent a complex interval, we can append zero or more octaves to the simple octave, what we call the <strong>octave octave</strong>.</p>
<p>In humdrumR, the symbols <code>"+"</code> and <code>"-"</code> are used to indicate the direction of the simple octave, with various scale-step and quality/alterations used to indicate the simple interval.
(In many representations, these symbols are implicit, and are thus ommitted.)
In contrast, the <em>octave octave</em> of an interval is simply an integer value, and can be represented a variety of ways:
either directly as an integer, or using repetitions of symbol pairs, most commonly <code>"^"</code>/<code>"v"</code> and <code>"'"</code>/<code>","</code>.
Other approaches represent octave octave information by changing the case (upper or lower) or repeating parts of the simple-interval string.
By default, the "same" option (i.e., a unison) for both types of octaves is left blank as an empty string <code>""</code>.</p>
<p>The relationship between the simple octave and the octave octave is determined by how the scale step is "rounded" to the octave (see the <em>Tonality in humdrumR</em> vignette), which
is controlled by the <code>octave.round</code> argument.
The standard approach, with the scale steps all ascending above the octave is achieved by the <em>floor</em> function: we call this a <strong>scale octave</strong>.
Another approach is to use the <em>round</em> function, which rounds the nearest octave below <strong>or</strong> above, centering the steps around the unison instead of above it: the result is a
scale like [-P4, -m3, -m2, P1, M2, M3, P4], which we call a <strong>central octave</strong>.
The difference between central octaves, scale octaves, and other simple octave options, are illustrated further below.</p><div class="section">
<h4 id="serial-vs-fixed-octave-contour">Serial vs Fixed Octave Contour<a class="anchor" aria-label="anchor" href="#serial-vs-fixed-octave-contour"></a></h4>


<p>#' As described in the <em>Tonality in humdrumR</em> vignette, there are two general approaches to representing intervals: fixed-reference and serial-reference.
Most pitch representations are <em>fixed</em>-reference, with each token representing an interval relative to a common reference (middle-C, tonic, unison, etc.).
In contrast, a <em>serial</em> representation represents each interval cummulatively, relative to the previous interval: the most common example being melodic intervals.
TonalIntervals can be encode either fixed- or serial-reference intervals, and either approach can be partitioned into simple intervals and octave offsets.
In the most common cases for representing pitch, the simple octave is treated as the "always ascending" scale octave, and the octave octave is simply kept fixed.
Common approaches to pairing octave information with this include:</p><ul><li><p><strong>pitch</strong> style: the octave offset is simply printed as an integer, though offset by +4 so that middle-C (unison) is <code>"4"</code>.</p></li>
<li><p><strong>kernPitch</strong> style: the scale step is lowercase for octave octaves <code>&gt;= 0</code> and uppercase otherwise. In addition, the scale step is repeated
the absolute value of the octave octave times (offset +1 for positive octaves).
For example, <code>(CCC = -3, CC = -2, C = -1, c = 0, cc = 1, ccc = 2)</code>.</p></li>
<li><p><strong>lilyAbsolute</strong> absolute style: the charactes <code>"'"</code> (positive) or <code>","</code> are repeated the absolute value of the octave octave.</p></li>
<li><p><strong>helmholtz</strong> style: an intersection of <code>lilyPitch</code>-absolute and <code>kernPitch</code> style, the case of the scale step is changed as in kern-style,
and the <code>"'"</code>/<code>","</code> characters are printed a la lilypond absolute style.</p></li>
</ul><p>However, another particularly useful possibility is to encode the octave part in serial reference and the simple part in fixed reference.
If we compute a serial-octave octave, and set our <code>octave.round</code> argument to <code>round</code>, the octave labels are blank (the "same" marker) if the interval has moved to the <em>closest</em> neighbor,
with the octave octave indicating moves away to that "closest note."
For instance, we can say, "play the F# above the previous note."
This is known as "relative pitch" representation in <a href="https://lilypond.org/doc/v2.20/Documentation/notation/pitches" class="external-link">LilyPond</a>]:
If <code>relative = TRUE</code>, <code>lilypond</code> will compute markers labeled in this way.
This approach is can be combined with with scale-octave (<code>octave.round = floor</code>) representation of pitch as <em>scale degrees</em>, resulting in a scale degree representation with lossless
octave information!</p>
<p>To achieve these serial octaves, we use the <code>octave.delta</code> and <code>octave.round</code> arguments.
If <code>delta = TRUE</code>, the octave of the serial representation of the input is computed, and the octave-part
of the octave is computed using the <code>octave.round</code> rounding function.
<code>floor</code> will create the "always ascending" scale octave, while <code>round</code> will achieve a centered octave.
<code>expand</code> will label <em>all</em> octaves as ascending/descending except unisons.</p>
<p>The following table illustrates the different <code>octave.round</code> arguments when <code>delta = TRUE</code>:</p><div class="sourceCode"><pre><code> round floor expand
     0     0      0
     0    -1     -1
     0    -1     -1
     0     0      0
     0     0      1
     0    -1     -1
     0    -1     -1
     0    -1     -1
     0    -1     -1
     0     0      1
     0     0      1
     0     0      1
     0     0      1
     0     0      1
     0     0      1
     0     0      0
     1     1      2
     1     1      2
     1     1      2
     1     1      1
</code></pre></div>

<p>The following table illustrates the same three rounding functions, but with <code>octave.delta = FALSE</code>.</p><div class="sourceCode"><pre><code> Kern round floor expand
    c     0     0      0
    A     0    -1     -1
    A     0    -1     -1
    c     0     0      0
    d     0     0      1
    G     0    -1     -1
    G     0    -1     -1
    A     0    -1     -1
   B-     0    -1     -1
    f     0     0      1
    f     0     0      1
    e     0     0      1
    d     0     0      1
    e     0     0      1
    d     0     0      1
    c     0     0      0
   ff     1     1      2
   ee     1     1      2
   dd     1     1      2
   cc     1     1      1
</code></pre></div>

</div>

<div class="section">
<h4 id="complex-steps">Complex Steps<a class="anchor" aria-label="anchor" href="#complex-steps"></a></h4>


<p>The final standard approach to indicating complex octaves is through complex steps: i.e., 9ths, 11ths, etc.
This approach directly represents full octave information as scale steps, with <code>+7</code> added for every octave octave.
This representation can only be accessed via the <code>interval</code> function.
To limit intervals to simple values, use the tonalTransform arguments <code>octave</code> and/or <code>roundMethod</code>.</p>
</div>

<div class="section">
<h4 id="octave-1">octave<a class="anchor" aria-label="anchor" href="#octave-1"></a></h4>


<p>The <code>octave</code> function can be used to directly generate representations of the octave/octave, or can be called indirectly via <code>tonalChroma</code> or one of the standard
pitch representation functions (<code>kern</code>, <code>pitch</code>, etc.).
The <code>octave</code> command is a synonym for <code>octave</code>.
The following arguments are defined for as octave:</p><ul><li><p><code>octave.labels</code>: a [named][base::names()] <code>character</code> vector which controls the characters used to represent octave shifts.
The characters must be named either <code>up</code>, <code>down</code>, or <code>same</code>; the defaults are <code>c(up = "^", down = "v", same = "")</code>.
If <code>octave.labels = FALSE</code>, the octave offset (integer) itself is returned.</p><ul><li><p>If <code>octave.labels == FALSE</code>, returns a integer value counting the octave offset number.</p></li>
</ul></li>
<li><p><code>octave.maximum</code> and <code>octave.minimum</code></p><ul><li><p>Single integer values---defaults are <code>Inf</code> (maximum) and <code>-Inf</code> (minimum).
These arguments define the maximum number of octave offset labels permitted.
If <code>maximum == 2L</code>, octave offsets of at most (<code>"^^"</code>) will be output; a triple octave mark will be reduced to just a <code>"^^</code>.
The<code>minimum</code> arguments should be negative.
By default, the minimum is the inverse of the maximum, so if you want them to be the same, just set the maximum.</p></li>
</ul></li>
<li><p><code>octave.offset</code>: a single integer, indicating the "center" octave. The default is <code>0L</code>, but <em>scientific pitch</em>
uses <code>4L</code> (because middle C is "C4").</p></li>
<li><p><code>octave.delta</code>: a single logical vale. If <code>TRUE</code>, the <em>serial</em> octave is calculated.</p></li>
<li><p><code>octave.round</code>: a function, either <code>floor</code>, <code>round</code>, <code>trunc</code>, <code>expand</code> (see <em>Tonality in humdrumR</em> vignette).
The default is <code>floor</code>, which is standard when <code>delta = FALSE</code>.</p></li>
</ul><p>[/\\]: R:/%5C%5C%5C%5C%5C%5C%5C
[/\\]: R:/%5C%5C%5C%5C%5C%5C%5C
[TtMmWw]: R:TtMmWw
[TtMmWwS$O]: R:TtMmWwS$O
[vu]: R:vu
[vu]: R:vu
[0-9]: R:0-9
[1-9]: R:1-9
[0-9]: R:0-9
[.]: R:.
[b#-]: R:b#-
[-+]: R:-+
[0-9]: R:0-9
[\^v',]: R:%5C%5C%5C%5C%5Ev',
[aei]: R:aei
[+-]: R:+-
[MmP]: R:MmP
[Ad#b]: R:Ad#b
[0-9]: R:0-9
[\^v',]: R:%5C%5C%5C%5C%5Ev',
[MmPn]: R:MmPn
[Ad#b]: R:Ad#b
[0-9]: R:0-9
[line-of-fifths]: R:line-of-fifths
<a href="tonalTransformations.html">tonalTransformations</a>: R:tonalTransformations
[alterations]: R:alterations
[base::pmatch]: R:base::pmatch
[0, 2, 4, 6, 1, 3, 5]: R:0,%202,%204,%206,%201,%203,%205
[sharp]: R:sharp
[flat]: R:flat
[natural]: R:natural
[modes]: R:modes
[base::names()]: R:base::names()
[base::names()]: R:base::names()
[diatonicSet]: R:diatonicSet
[-P4, -m3, -m2, P1, M2, M3, P4]: R:-P4,%20-m3,%20-m2,%20P1,%20M2,%20M3,%20P4
LilyPond: R:LilyPond
tonalTransform: R:tonalTransform
[base::names()]: R:base::names()</p>
</div>


</div>

    </div>
    <div class="section level2">
    <h2 id="reading-writing-atonal-pitch-information">Reading/Writing Atonal Pitch Information<a class="anchor" aria-label="anchor" href="#reading-writing-atonal-pitch-information"></a></h2>
    


<p>Atonal pitch representations predefined in <code>humdrumR</code> include <code>semit</code>, <code>midi</code>, <code>frequency</code>, <code>ratio</code>, and <code>fraction</code>.
As mentioned above, <code>integer</code> inputs are interpreted as semitones while <code>numeric</code> are interpreted as frequency ratios.</p><div class="section">
<h3 id="interpreting-frequencies-ratios">Interpreting Frequencies/Ratios<a class="anchor" aria-label="anchor" href="#interpreting-frequencies-ratios"></a></h3>


<p>Four additional arguments help <code>humdrumR</code> determing how to interpret frequencies or ratios as <code>tonalInterval</code>s.</p><ul><li><p><code>tonalHarmonic</code>: This determines the assumed tuning system by specifying the "tonal frequency ratio" associated
with an interval of a perfect 12th.
The default is <code>3</code>, corresponding to pythagorean tuning; change it to <code>2^(19/12)</code> to use equal temeperament.</p></li>
<li><p><code>centMargin</code>: this numeric argument determines how close <code>humdrumR</code> tries to get (in cents) to the input ratio (default is 10 cents).
If the <code>centMargin</code> is low, <code>humdrumR</code> may give you a crazy accidental like <code>A----</code> to get very close to the input ratio.
If the <code>centMargin</code> is higher, <code>humdrumR</code> will give the most reasonable (fewest accidentals) <code>tonalInterval</code> within that margin.
For example, <code>tonalInterval(1.44, centMargin = 10)</code> will return E##, because a pythagorean E## is within 10 cents of the ratio <code>1.44</code>.
However, <code>tonalInterval(1.44, centMargin = 20)</code> will return the more resonable <code>F#</code>.</p></li>
<li><p><code>frequency.reference</code> and <code>frequencyTint</code>: these arguments determing what the reference frequency and note is for
when reading frequencies. The standard A = 440Hz corresponds to <code>(frequency.reference = 440, frequencyTint = tonalInterval('a'))</code>.</p></li>
</ul></div>

<div class="section">
<h3 id="tonal-decisions">Tonal Decisions<a class="anchor" aria-label="anchor" href="#tonal-decisions"></a></h3>


<p>When interpreting an atonal representation as a tonal one there are multiple possibilities (for instance, midi note 61 could
be C# or Db).
The process <code>humdrumR</code> uses to determine the tonal representation of atonal input is influenced by the <code>accidental.melodic</code> and
<code>Key</code> arguments:
By default (<code>Key == NULL &amp; accidental.melodic == FALSE</code>), the line-of-fifths range -3--8 (E flat to G sharp) is used.
However, if a <code>Key</code> argument is specified, this line-of-fifths range will be shifted to match the corresponding key signature.
For instance, the key Bb minor would read accidentals in the range -8--3 (Fb flat to A natural).
If <code>accidental.melodic == TRUE</code>) the atonal notes are interpreted "melodically"---i.e.,
ascending chromatic steps as sharps and descending chromatic steps as flats.
When reading frequencies/ratios, a "pure" <code>tonalHarmonic</code> value---like the pure <code>3</code> of pythagorean tuning---will help determine
the appropriate accidental.
However, equal temperament will not provide useful information, so the <code>Key</code> and <code>accidental.melodic</code> arguments can be used instead.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>tonalInterval</p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="http://fathermckenzie.net/" class="external-link">Nathaniel Condit-Schultz</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

