<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Many users may wish to work with humdrum data,
without having to rely on humdrumR's with(in).humdrumR functionality.
Rather, you'd like to just get &quot;normal&quot; R objects out of your humdrum data.
humdrumR defines a number of functions/methods for &quot;coercing&quot; humdrum data into
basic R data types."><title>humdrumR coercion — humCoercion • humdrumR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="humdrumR coercion — humCoercion"><meta property="og:description" content="Many users may wish to work with humdrum data,
without having to rely on humdrumR's with(in).humdrumR functionality.
Rather, you'd like to just get &quot;normal&quot; R objects out of your humdrum data.
humdrumR defines a number of functions/methods for &quot;coercing&quot; humdrum data into
basic R data types."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">humdrumR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.3.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Basics</h6>
    <a class="dropdown-item" href="../articles/GettingStarted.html">Getting started with humdrumR</a>
    <a class="dropdown-item" href="../articles/IntroForCoders.html">HumdrumR for coders</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>R/Humdrum background</h6>
    <a class="dropdown-item" href="../articles/HumdrumSyntax.html">The humdrum syntax</a>
    <a class="dropdown-item" href="../articles/RPrimer.html">An R primer for humdrumR users</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Data prep</h6>
    <a class="dropdown-item" href="../articles/ReadWrite.html">Reading and writing data</a>
    <a class="dropdown-item" href="../articles/Reshaping.html">Shaping humdrum data</a>
    <a class="dropdown-item" href="../articles/Filtering.html">Filtering humdrum data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Analysis</h6>
    <a class="dropdown-item" href="../articles/Summary.html">Getting to know your data</a>
    <a class="dropdown-item" href="../articles/WorkingWithData.html">Working with humdrum data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Musical tools</h6>
    <a class="dropdown-item" href="../articles/PitchAndTonality.html">Pitch and tonality in humdrumR</a>
    <a class="dropdown-item" href="../articles/RhythmAndMeter.html">Time, rhythm, and meter in humdrumR</a>
    <a class="dropdown-item" href="../articles/KeysAndChord.html">Diatonic and tertian sets in humdrumR</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>humdrumR coercion</h1>
      <small class="dont-index">Source: <a href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/blob/HEAD/R/humdrumR-class.R" class="external-link"><code>R/humdrumR-class.R</code></a></small>
      <div class="d-none name"><code>humCoercion.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Many users may wish to work with humdrum data,
without having to rely on <code>humdrumR</code>'s <a href="withinHumdrum.html">with(in).humdrumR</a> functionality.
Rather, you'd like to just get "normal" <code>R</code> objects out of your humdrum data.
<code>humdrumR</code> defines a number of functions/methods for "coercing" <a href="humdrumRclass.html">humdrum data</a> into
basic <code>R</code> data types.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="co"># S4 method for humdrumR</span>
<span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">x</span>, mode <span class="op">=</span> <span class="st">"any"</span><span class="op">)</span>

<span class="fu">as.lines</span><span class="op">(</span>
  <span class="va">humdrumR</span>,
  dataTypes <span class="op">=</span> <span class="st">"GLIMDd"</span>,
  padPaths <span class="op">=</span> <span class="st">"dont"</span>,
  padder <span class="op">=</span> <span class="st">""</span>,
  sep <span class="op">=</span> <span class="st">"\t"</span>
<span class="op">)</span>

<span class="co"># S3 method for humdrumR</span>
<span class="fu">as.matrix</span><span class="op">(</span><span class="va">x</span>, dataTypes <span class="op">=</span> <span class="st">"GLIMDd"</span>, padPaths <span class="op">=</span> <span class="st">"corpus"</span>, padder <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>

<span class="co"># S4 method for humdrumR</span>
<span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">x</span>, dataTypes <span class="op">=</span> <span class="st">"Dd"</span>, padPaths <span class="op">=</span> <span class="st">"corpus"</span>, padder <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>

<span class="co"># S4 method for humdrumR</span>
<span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">x</span>, dataTypes <span class="op">=</span> <span class="st">"Dd"</span>, padPaths <span class="op">=</span> <span class="st">"corpus"</span>, padder <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>

<span class="fu">as.matrices</span><span class="op">(</span><span class="va">humdrumR</span>, dataTypes <span class="op">=</span> <span class="st">"LIMDd"</span>, padPaths <span class="op">=</span> <span class="st">"piece"</span>, padder <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>

<span class="fu">as.data.frames</span><span class="op">(</span><span class="va">humdrumR</span>, dataTypes <span class="op">=</span> <span class="st">"LIMDd"</span>, padPaths <span class="op">=</span> <span class="st">"piece"</span>, padder <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>mode</dt>
<dd><p><em><strong>The desired output class.</strong></em></p>
<p>Defaults to <code>"any"</code>.</p>
<p>Must be a single <code>character</code> string naming an <a href="https://rdrr.io/r/base/vector.html" class="external-link">atomic vector type</a> to coerce the output to (i.e., <code>logical</code> or <code>numeric</code>).</p>
<p>If set to <code>"any"</code>, the output type is simply whatever comes out of <code><a href="humActive.html">evalActive()</a></code>, which depends on the class of the underlying <a href="humTable.html">fields</a>.</p></dd>
<dt>humdrumR</dt>
<dd><p><em><strong>HumdrumR data.</strong></em></p>
<p>Must be a <a href="humdrumRclass.html">humdrumR data object</a>.</p></dd>
<dt>dataTypes</dt>
<dd><p><em><strong>Which types of humdrum record(s) to include.</strong></em></p>
<p>Defaults to <code>"GLIMDd"</code> for <code>as.lines()</code> and <code>as.matrix()</code>; <code>"Dd"</code> for <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code>;
<code>"LIMDd"</code> for <code>as.matrices()</code> and <code>as.data.frames()</code>.</p>
<p>Must be a single <code>character</code> string. Legal values are <code>'G', 'L', 'I', 'M', 'D', 'd'</code>
or any combination of these (e.g., <code>"LIM"</code>).
(See the <a href="humTable.html">humdrum table</a> documentation for explanation.)</p></dd>
<dt>padPaths</dt>
<dd><p><em><strong>Determines how spine-paths are aligned in the output.</strong></em></p>
<p>Defaults to <code>"dont"</code> for <code>as.lines()</code>; <code>"corpus"</code> for <code>as.matrix()</code> and <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code>;
<code>"piece"</code> for <code>as.matrices()</code> and <code>as.data.frames()</code></p>
<p>Must be a single <code>character</code> string, <code>"corpus"</code>, <code>"piece"</code>, or <code>"dont"</code>.</p>
<p>See the details for an explanation.</p></dd>
<dt>padder</dt>
<dd><p><em><strong>Used to fill in differences in the number of columns between files and/or spine paths.</strong></em></p>
<p>Defaults to <code>NA</code>.</p>
<p>Must be a single <code>atomic</code> value.</p></dd>
<dt>sep</dt>
<dd><p><em><strong>Separator to place between columns in collapsed lines.</strong></em></p>
<p>Defaults to <code>"\t"</code> (tab).</p>
<p>Must be a single <code>character</code> string.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Generally, coercion works by evaluating a humdrumR object's the
<a href="humActive.html">active expression</a> and forcing the result to be an atomic vector.
This process is accomplished by the <code><a href="humActive.html">evalActive()</a></code> command.
The <a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector(humdrumR)</a> method is essentially a wrapper for <code><a href="humActive.html">evalActive()</a></code>, with the additional
option of coercing the resulting vector to a particular type using the <code>mode</code> argument.</p>
<p>The <a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix(humdrumR)</a> method take things a step further by putting the evaluated
active expression into a two-dimensional matrix, with rows representing records and columns indicating
spine paths (see Padding section below).
<a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame(humdrumR)</a> first calls <code>as.matrix</code> then converts the matrix to a
<code>data.frame</code>.
Note that <code>as.matrix(humdrumR)</code> places the <em>entire</em> corpus object into one matrix, even if there are multiple pieces.
In contrast, the plural <code>as.matrices</code> and <code>as.data.frames</code> call their respective singular versions
separately on each individual file in a <a href="humdrumRclass.html">humdrumR corpus</a> and return them all in a list.
The <a href="https://rdrr.io/r/base/colnames.html" class="external-link">row names</a>  of the <code>matrix</code>/<code>data.frame</code>(s) consist of two integer values,
separated by a <code>.</code>, representing: <code>File.Record</code>.</p>
<p>The <code>as.lines</code> function converts a <a href="humdrumRclass.html">humdrumR object</a> into a <code>character</code> vector of text lines,
with columns separated by the <code>sep</code> argument (defaults to <code>"\t"</code>), just as you'd see in a humdrum-syntax file.
Each line is a single row from a <code>as.matrix.humdrumR</code>, with padded values at the right side removed.
The matrix's <code>File.Record</code> <a href="https://rdrr.io/r/base/colnames.html" class="external-link">row names</a> are preserved as the lines' <a href="https://rdrr.io/r/base/names.html" class="external-link">names</a>.</p>
<p>Note that multiple-stop token (where <code>Stop &gt; 1L</code>) cannot by incorporated into the two
dimensional <code>matrix</code>/<code>data.frame</code>. Thus, <code>as.matrix(humdrumR)</code> calls
collapseStops(collapseAtomic = TRUE, sep = " ")
on the <a href="humdrumRclass.html">humdrumR object</a> before creating a matrix.</p>
    </div>
    <div class="section level2">
    <h2 id="padding">Padding<a class="anchor" aria-label="anchor" href="#padding"></a></h2>
    


<p>Different pieces in a single <a href="humdrumRclass.html">humdrumR object</a>
often differ in the number of spines and/or spine paths they contain.
To squish them into a two dimensional object (<code>matrix</code> or <code>data.frame</code>) they must necessarily be padded to the same number of columns.
(Global comments---which actually have <code>NA</code> spines---are also padded, placing the record in column 1.)
The <code>pad</code> argument is a single atomic value which is used to pad the matrix.</p>
<p>Another consideration is the behavior of spine paths.
In the humdrum syntax, a spine path in a leftward spine "bumps" data in higher spines into new columns, as in this example:</p><div class="sourceCode"><pre><code>**kern  **kern
A       E
*^      *
A       C       E
G       B       D
*v      *v      *
A       C        
*-      *-
</code></pre></div>

<p>At the beginning and end of the file, the second column holds data for the second spine.
However, in the middle of the file, the second column holds data from the second spine path of the first spine.
To make the spine structure clearer, <code>as.matrix(humdrumR)</code> has the option to pad spine paths.
For example, using <code>"_"</code> as our <code>pad</code> argument:</p><div class="sourceCode"><pre><code>**kern   _        **kern
A        _        E
*^       _        *
A        C        E
G        B        D
*v       *v       *
A        _        C        
*-       _        *-
</code></pre></div>

<p>This aspect of the matrix padding behavior can be controlled with the <code>padPaths</code> argument, with three possible values/behaviors:</p><ul><li><p><code>"corpus"</code>: Paths are padded such that spine-paths across all pieces in the corpus all align in the same columns.
If even one file has a spine path, all the other files are padded so their spines stay aligned.
This is the default behavior for <code>as.matrix(humdrumR)</code>.</p></li>
<li><p><code>"piece"</code>: Paths are padded, but only <em>within</em> each piece. The spines/paths between different pieces may not align.</p></li>
<li><p><code>"dont"</code>: Paths are not padded at all.</p></li>
</ul></div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Nathaniel Condit-Schultz, Claire Arthur.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

