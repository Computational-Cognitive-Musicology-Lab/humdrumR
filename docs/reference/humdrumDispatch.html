<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The humdrumR regular-expression method dispatch system
is a simple system for making new functions which can by smartly
applied to a variety of character strings.
Humdrum dispatch works like normal R method dispatch, but instead of dispatching specific methods
based on their class (integer, character, etc.) it dispatches based on regular expressions.
In addition, exclusive interpretations can be used to guide dispatch."><title>Regular expression method dispatch and function application — humdrumDispatch • humdrumR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Regular expression method dispatch and function application — humdrumDispatch"><meta property="og:description" content="The humdrumR regular-expression method dispatch system
is a simple system for making new functions which can by smartly
applied to a variety of character strings.
Humdrum dispatch works like normal R method dispatch, but instead of dispatching specific methods
based on their class (integer, character, etc.) it dispatches based on regular expressions.
In addition, exclusive interpretations can be used to guide dispatch."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">humdrumR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Basics</h6>
    <a class="dropdown-item" href="../articles/GettingStarted.html">Getting started with humdrumR</a>
    <a class="dropdown-item" href="../articles/IntroForCoders.html">HumdrumR for coders</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>R/Humdrum background</h6>
    <a class="dropdown-item" href="../articles/HumdrumSyntax.html">The humdrum syntax</a>
    <a class="dropdown-item" href="../articles/RPrimer.html">An R primer for humdrumR users</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Data prep</h6>
    <a class="dropdown-item" href="../articles/ReadWrite.html">Reading and writing data</a>
    <a class="dropdown-item" href="../articles/Reshaping.html">Shaping humdrum data</a>
    <a class="dropdown-item" href="../articles/Filtering.html">Filtering humdrum data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Analysis</h6>
    <a class="dropdown-item" href="../articles/Summary.html">Getting to know your data</a>
    <a class="dropdown-item" href="../articles/WorkingWithData.html">Working with humdrum data</a>
    <a class="dropdown-item" href="../articles/Context.html">Contextualizing data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Musical tools</h6>
    <a class="dropdown-item" href="../articles/PitchAndTonality.html">Pitch and tonality in humdrumR</a>
    <a class="dropdown-item" href="../articles/RhythmAndMeter.html">Time, rhythm, and meter in humdrumR</a>
    <a class="dropdown-item" href="../articles/KeysAndChord.html">Diatonic and tertian sets in humdrumR</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Regular expression method dispatch and function application</h1>
      <small class="dont-index">Source: <a href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/blob/HEAD/R/Dispatch.R" class="external-link"><code>R/Dispatch.R</code></a></small>
      <div class="d-none name"><code>humdrumDispatch.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <a href="humdrumR.html">humdrumR</a> <strong>regular-expression method dispatch system</strong>
is a simple system for making new functions which can by smartly
applied to a variety of character strings.
Humdrum dispatch works like normal R method dispatch, but instead of dispatching specific methods
based on their class (<code>integer</code>, <code>character</code>, etc.) it dispatches based on regular expressions.
In addition, exclusive interpretations can be used to guide dispatch.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">humdrumDispatch</span><span class="op">(</span>
  <span class="va">x</span>,
  <span class="va">dispatchDF</span>,
  Exclusive <span class="op">=</span> <span class="cn">NULL</span>,
  funcName <span class="op">=</span> <span class="cn">NULL</span>,
  regexApply <span class="op">=</span> <span class="cn">TRUE</span>,
  multiDispatch <span class="op">=</span> <span class="cn">FALSE</span>,
  <span class="va">...</span>,
  outputClass <span class="op">=</span> <span class="st">"character"</span>
<span class="op">)</span>

<span class="fu">exclusiveDispatch</span><span class="op">(</span>
  <span class="va">x</span>,
  <span class="va">dispatchDF</span>,
  <span class="va">Exclusive</span>,
  regexApply <span class="op">=</span> <span class="cn">TRUE</span>,
  outputClass <span class="op">=</span> <span class="st">"character"</span>,
  inPlace <span class="op">=</span> <span class="cn">FALSE</span>,
  <span class="va">...</span>
<span class="op">)</span>

<span class="fu">makeDispatchDF</span><span class="op">(</span><span class="va">...</span><span class="op">)</span>

<span class="fu">makeHumdrumDispatcher</span><span class="op">(</span>
  <span class="va">...</span>,
  funcName <span class="op">=</span> <span class="st">"humdrum-dispatch"</span>,
  outputClass <span class="op">=</span> <span class="st">"character"</span>,
  args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">alist</a></span><span class="op">(</span><span class="op">)</span>
<span class="op">)</span>

<span class="co"># S3 method for humdrumDispatch</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dispatchDF</dt>
<dd><p><em><strong>A data.frame which describes what function should be called for which regex input. (See details).</strong></em></p>
<p>Must be a <code>data.frame</code>.</p></dd>
<dt>Exclusive</dt>
<dd><p><em><strong>Exclusive interpretations to dispatch.</strong></em></p>
<p>Defaults to <code>NULL</code>.</p>
<p>If <code>NULL</code>, only the regexes are used for dispatch.</p></dd>
<dt>multiDispatch</dt>
<dd><p><em><strong>Whether to use multiple dispatch function for each interpretation.</strong></em></p>
<p>Defaults to <code>FALSE</code>.</p>
<p>Must be a singleton <code>logical</code> value: an on/off switch.</p>
<p>If <code>FALSE</code> the "best" regex/exclusive match is dispatched for each Exclusive segment.
If <code>TRUE</code>, differenet functions can be dispatched
within the same input vector.</p></dd>
<dt>...</dt>
<dd><p><em><strong>Arguments to pass to dispatch functions.</strong></em></p></dd>
<dt>outputClass</dt>
<dd><p><em><strong>The default output class which the function should return.</strong></em></p>
<p>Defaults to <code>"character"</code>.</p>
<p>Must be single <code>character</code> string.</p>
<p>Generally, to make sense, all dispatched functions should return the same type, which you should explicitly
indicate with the <code>outputClass</code> argument.
Dispatch functions should also be <a href="https://rdrr.io/r/base/Vectorize.html" class="external-link">vectorized</a>.</p></dd>
<dt>str</dt>
<dd><p><em><strong>The input strings, on which dispatch is called.</strong></em></p>
<p>Must be <code>character</code>.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Many <code>humdrumR</code> functions are in fact, humdrum-dispatch functions: for example, <code><a href="pitchParsing.html">tonalInterval.character()</a></code>.
If you call <code>tonalInterval('ee-')</code>, the function will recognize that the input string is a token in the  <code>**kern</code>
representation, and call the appropriate parser.
If you instead call <code>tonalInterval('me')</code>, the function will recognize that the input string is a token in the <code>**solfa</code>
representation, and call the appropriate parser for that.</p><div class="section">
<h3 id="dispatchdf">dispatchDF<a class="anchor" aria-label="anchor" href="#dispatchdf"></a></h3>


<p>The <code>dispatchDF</code> must be a <code><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table()</a></code> created using the <code>makeDispatchDF</code> function.
<code>makeDispatchDF</code> takes one or more arguments, each a list with three components (ordered, not nameed):</p><ol><li><p>A character vector of exclusive interpretations. (Specify <code>"any"</code> if you don't want exclusive dispatch).</p></li>
<li><p>A regular expression (character string) or a function which can generate a regular expression, which accepts <code>...</code>
arguments at the time of dispatch.</p></li>
<li><p>A function to dispatch.</p></li>
</ol></div>

    </div>
    <div class="section level2">
    <h2 id="makehumdrumdispatcher">makeHumdrumDispatcher<a class="anchor" aria-label="anchor" href="#makehumdrumdispatcher"></a></h2>
    


<p><code>makeHumdrumDispatcher</code> is a function which creates a new function which automatically performs humdrum-dispatch.
A number of important <code>humdrumR</code> functions are created with <code>makeHumdrumDispatcher</code>:</p><ul><li><p><code>tonalInterval.character</code></p></li>
<li><p><code>diatonicSet.character</code></p></li>
<li><p><code>tertianSet.character</code></p></li>
<li><p><code>rhythmInterval.character</code></p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="va">u</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'A'</span>, <span class="st">'B'</span>, <span class="st">'CD'</span>, <span class="st">'E'</span>, <span class="st">'F'</span>, <span class="st">'gh'</span>, <span class="st">'L'</span>, <span class="st">'KX'</span><span class="op">)</span></span>
<span class="r-in"><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'cd'</span>, <span class="st">'e'</span>, <span class="st">'f'</span>, <span class="st">'gh'</span>, <span class="st">'l'</span>, <span class="st">'kx'</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">lowercasefunc</span> <span class="op">&lt;-</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">5L</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">humdrumDispatch</span><span class="op">(</span><span class="va">l</span>, outputClass <span class="op">=</span> <span class="st">'integer'</span>,</span>
<span class="r-in">                <span class="fu">makeDispatchDF</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'any'</span>, <span class="st">'[a-z]+'</span>,  <span class="va">lowercasefunc</span><span class="op">)</span>,</span>
<span class="r-in">                               <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'any'</span>, <span class="st">'[A-Z]+'</span>,  <span class="va">nchar</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 4 4 3 4 4 3 4 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"dispatch")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"dispatch")$Original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "a"  "b"  "cd" "e"  "f"  "gh" "l"  "kx"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"dispatch")$Regexes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [a-z]+ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "[a-z]+" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"dispatch")$Segments</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"dispatch")$Exclusives</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "any"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"> <span class="co"># lowercasefunc will be called on l, nchar on u</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Nathaniel Condit-Schultz, Claire Arthur.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

