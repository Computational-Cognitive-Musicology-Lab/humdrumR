<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The context() command can be used to group input data (vectors or fields)
into arbitrary contextual windows.
Unlike grouping vectors,
context() windows 1) are always contiguous relative to the reference vector(s)/field(s)
(which can depend on order); 2) can overlap; and 3) don't necesarily exhaustively
divide the data.
The context() function should generally be called on
humdrumR data, but it can also be called directly on vectors.
The uncontext() function removes contextual windows
from a humdrumR data object.
Once contextual windows are created, the windows() function can be used to
view a data.table representing these windows.
The Open and Close columns indicate row indices in the humdrum table."><title>Group vectors into contextual windows — context • humdrumR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Group vectors into contextual windows — context"><meta property="og:description" content="The context() command can be used to group input data (vectors or fields)
into arbitrary contextual windows.
Unlike grouping vectors,
context() windows 1) are always contiguous relative to the reference vector(s)/field(s)
(which can depend on order); 2) can overlap; and 3) don't necesarily exhaustively
divide the data.
The context() function should generally be called on
humdrumR data, but it can also be called directly on vectors.
The uncontext() function removes contextual windows
from a humdrumR data object.
Once contextual windows are created, the windows() function can be used to
view a data.table representing these windows.
The Open and Close columns indicate row indices in the humdrum table."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    <a href="https://gatech.edu" class="external-link"><img src="gt-logo.svg" alt="Georgia Tech" style="height:50px; padding-right:20px;"></a> <a href="https://ccml.gtcmt.gatech.edu" class="external-link"><img src="CCMLbanner.png" alt="CCMLab" style="height:80px; padding-right:20px;"></a>
    <a class="navbar-brand me-2" href="../index.html">humdrumR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Basics</h6>
    <a class="dropdown-item" href="../articles/GettingStarted.html">Getting started with humdrumR</a>
    <a class="dropdown-item" href="../articles/DataFields.html">HumdrumR Data Fields</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>R/Background</h6>
    <a class="dropdown-item" href="../articles/HumdrumSyntax.html">The humdrum syntax</a>
    <a class="dropdown-item" href="../articles/RPrimer.html">An R primer for humdrumR users</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Data prep</h6>
    <a class="dropdown-item" href="../articles/ReadWrite.html">Reading and writing humdrum data</a>
    <a class="dropdown-item" href="../articles/ComplexSyntax.html">Complex humdrum syntax</a>
    <a class="dropdown-item" href="../articles/Reshaping.html">Shaping humdrum data</a>
    <a class="dropdown-item" href="../articles/Filtering.html">Filtering humdrum data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Analysis</h6>
    <a class="dropdown-item" href="../articles/Summary.html">Getting to know your humdrum data</a>
    <a class="dropdown-item" href="../articles/Grouping.html">Grouping humdrum data</a>
    <a class="dropdown-item" href="../articles/Context.html">Contextualizing humdrum data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Musical tools</h6>
    <a class="dropdown-item" href="../articles/PitchAndTonality.html">Pitch and tonality in humdrumR</a>
    <a class="dropdown-item" href="../articles/RhythmAndMeter.html">Time, rhythm, and meter in humdrumR</a>
    <a class="dropdown-item" href="../articles/KeysAndChord.html">Diatonic and tertian sets in humdrumR</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://ccml.music.gatech.edu/humdrumR">GUI</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Group vectors into contextual windows</h1>
      <small class="dont-index">Source: <a href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/blob/HEAD/R/Context.R" class="external-link"><code>R/Context.R</code></a></small>
      <div class="d-none name"><code>context.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>context()</code> command can be used to group input data (vectors or <a href="humTable.html">fields</a>)
into arbitrary contextual windows.
Unlike <a href="groupHumdrum.html">grouping vectors</a>,
<code>context()</code> windows 1) are always contiguous relative to the reference vector(s)/field(s)
(which can depend on order); 2) can <em>overlap</em>; and 3) don't necesarily exhaustively
divide the data.
The <code>context()</code> function should generally be called on
<a href="humdrumRclass.html">humdrumR data</a>, but it can also be called directly on vectors.</p>
<p>The <code>uncontext()</code> function removes contextual windows
from a <a href="humdrumRclass.html">humdrumR data object</a>.</p>
<p>Once contextual windows are created, the <code>windows()</code> function can be used to
view a data.table representing these windows.
The <code>Open</code> and <code>Close</code> columns indicate row indices in the <a href="humTable.html">humdrum table</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">context</span><span class="op">(</span><span class="va">x</span>, <span class="va">open</span>, <span class="va">close</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">context</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">open</span>,</span>
<span>  <span class="va">close</span>,</span>
<span>  reference <span class="op">=</span> <span class="va">x</span>,</span>
<span>  overlap <span class="op">=</span> <span class="st">"paired"</span>,</span>
<span>  depth <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rightward <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  duplicate_indices <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  min_length <span class="op">=</span> <span class="fl">2L</span>,</span>
<span>  max_length <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  inPlace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  complement <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  alignToOpen <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  collapse <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">","</span>,</span>
<span>  stripRegex <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  groupby <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for humdrumR</span></span>
<span><span class="fu">context</span><span class="op">(</span></span>
<span>  <span class="va">humdrumR</span>,</span>
<span>  <span class="va">open</span>,</span>
<span>  <span class="va">close</span>,</span>
<span>  dataTypes <span class="op">=</span> <span class="st">"D"</span>,</span>
<span>  overlap <span class="op">=</span> <span class="st">"paired"</span>,</span>
<span>  depth <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rightward <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  duplicate_indices <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  min_length <span class="op">=</span> <span class="fl">2L</span>,</span>
<span>  max_length <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  <span class="va">groupby</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">uncontext</span><span class="op">(</span><span class="va">humdrumR</span>, complement <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">windows</span><span class="op">(</span><span class="va">humdrumR</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p><em><strong>Input data to group into windows.</strong></em></p>
<p>Must be an atomic vector.</p></dd>


<dt>open</dt>
<dd><p><em><strong>Where to "open" (start) windows.</strong></em></p>
<p>Can be natural numbers, <code>logical</code> vectors (of the same length as <code>x</code>),
a single <code>character</code> string (interpreted as a regular expression).
May also be an arbitrary expression which returns natural numbers;
the expression can refer to named elements of <code>reference</code>, to <code>end</code> (last index),
to <code>close</code>, or to <code>prevclose</code> (the previous close).</p></dd>


<dt>close</dt>
<dd><p><em><strong>Where to "close" (end) windows.</strong></em></p>
<p>Can be natural numbers, <code>logical</code> vectors (of the same length as <code>x</code>),
a single <code>character</code> string (interpreted as a regular expression).
May also be an arbitrary expression which returns natural numbers;
the expression can refer to named elements of <code>reference</code>, to <code>end</code> (previous index),
to <code>open</code>, or to <code>nextopen</code> (the next open).</p></dd>


<dt>reference</dt>
<dd><p><em><strong>Vector(s) to use to identify window open/closes.</strong></em></p>
<p>Defaults to <code>x</code>.</p>
<p>Must be either an atomic vector of the same length as <code>x</code>, or a <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>/<code>data.frame</code>
of such vectors, all <a href="https://rdrr.io/r/base/names.html" class="external-link">named</a>.</p>
<p>If <code>context()</code> is applied to a <a href="humdrumRclass.html">humdrumR dataset</a>,
all the fields of the data's <a href="humTable.html">humdrum table</a> are used as <code>reference</code>.</p></dd>


<dt>overlap</dt>
<dd><p><em><strong>How are overlapping windows treated/created?</strong></em></p>
<p>Defaults to <code>'paired'</code>.</p>
<p>Must be a single <code>character</code>, <a href="partialMatching.html">partially matching</a>
either <code>"paired"</code>, <code>"nested"</code>, <code>"edge"</code>, or <code>"none"</code>.</p></dd>


<dt>depth</dt>
<dd><p><em><strong>How "deep" can windows overlap?</strong></em></p>
<p>Defaults to <code>NULL</code>.</p>
<p>Must be <code>NULL</code>, or a vector of non-zero whole numbers.</p></dd>


<dt>rightward</dt>
<dd><p><em><strong>Should window alignment/overlap be determined from left to right?</strong></em></p>
<p>Defaults to <code>TRUE</code>.</p>
<p>Must be a singleton <code>logical</code> value: an on/off switch.</p></dd>


<dt>duplicate_indices</dt>
<dd><p><em><strong>Can the same index open/close multiple windows?</strong></em></p>
<p>Defaults to <code>TRUE</code>.</p>
<p>Must be a singleton <code>logical</code> value: an on/off switch.</p></dd>


<dt>min_length, max_length</dt>
<dd><p><em><strong>The minimum/maximum lengths of output windows.</strong></em></p>
<p>Default to two and infinity (no maximum) respectively.</p>
<p>Must be single, positive whole numbers.</p></dd>


<dt>inPlace</dt>
<dd><p><em><strong>Should output be padded to same length as input?</strong></em></p>
<p>Defaults to <code>FALSE</code>.</p>
<p>Must be a singleton <code>logical</code> value: an on/off switch.</p></dd>


<dt>complement</dt>
<dd><p><em><strong>Should input "outside" any windows, be output?</strong></em></p>
<p>Defaults to <code>FALSE</code>.</p>
<p>Must be a singleton <code>logical</code> value: an on/off switch.</p></dd>


<dt>alignToOpen</dt>
<dd><p><em><strong>Should '<code>inPlace</code>' output be aligned to the open of each window?</strong></em></p>
<p>Defaults to <code>TRUE</code>.</p>
<p>Must be a singleton <code>logical</code> value: an on/off switch.</p></dd>


<dt>collapse</dt>
<dd><p><em><strong>Should output windows be collapsed to single <code>character</code> strings?</strong></em></p>
<p>Defaults to <code>TRUE</code>.</p>
<p>Must be a singleton <code>logical</code> value: an on/off switch.</p></dd>


<dt>sep</dt>
<dd><p><em><strong>Separator for collapsed output.</strong></em></p>
<p>Defaults to a comma (<code>","</code>).</p>
<p>Must be a single <code>character</code> string.</p></dd>


<dt>stripRegex</dt>
<dd><p><em><strong>Should regular expressions matched by the <code>open</code>/<code>close</code> arguments be removed from the output?</strong></em></p>
<p>Defaults to <code>FALSE</code>.</p>
<p>Must be a singleton <code>logical</code> value: an on/off switch.</p></dd>


<dt>groupby</dt>
<dd><p><em><strong>Optional vectors to group windows within.</strong></em></p>
<p>Defaults to empty <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>.</p>
<p>Must be a <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>, which is either empty or contains vectors which are all the same length as <code>x</code>.
In calls to <a href="withinHumdrum.html">with/within.humdrumR</a>, <code>groupby</code> is passed <code>list(Piece, Spine, Path)</code> by default.</p>
<p>Windows cannot cross group boundaries.</p></dd>


<dt>humdrumR</dt>
<dd><p><em><strong>HumdrumR data.</strong></em></p>
<p>Must be a <a href="humdrumRclass.html">humdrumR data object</a>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>context()</code> function determines where contextual windows will begin and end based on
expressions in its <code>open</code> and <code>close</code> arguments.
These <code>open</code> and <code>close</code> expressions are evaluated using a <strong>reference</strong> <a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a>, or set of vectors/<code><a href="humTable.html">fields()</a></code> that are all
the same length.</p>
<p>In most cases, we'll apply <code>context()</code> to a humdrumR data object, so windows are defined by
evaluating the <code>open</code> and <code>close</code> arguments using the <code><a href="humTable.html">fields()</a></code> of the humdrum table as the reference.
Once this has been done, the humdrumR object will <a href="humdrumRclass.html">show</a> how many windows
have been identified when printed in the console.
If we then use <a href="withinHumdrum.html">with/within/mutate/summarize/reframe</a> on our data, these methods
will evaluate their argument expressions within each and every contextual window defined by <code>context()</code>.
This means we can do basically anything we want to/with our contextual windows.</p>
<p>We can also apply <code>context()</code> directly to a single input vector <code>x</code>, providing a <a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a> or <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a>/<a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a> of
equal-length vectors as the <code>reference</code> for the <code>open</code> and <code>close</code> arguments.
By default, <code>x</code> itself is reused as the <code>reference</code>, so windows are based on the input <code>x</code> itself.
When applied to a vector, <code>context()</code> will simply group the elements of <code>x</code> into the windows we defined,
with a few arguments to control how this is done:</p><ul><li><p><code>complement</code>: The "complement" refers to elements of the input vector that don't fall inside
any indicated windows: if <code>complement = FALSE</code> (the default), these "outside" values are
dropped; if <code>complement = TRUE</code>, they are retained.</p></li>
<li><p><code>inPlace</code>: If <code>inPlace = TRUE</code>, windows are output in a vector of the same length as the input,
padded with <code>NA</code> as needed---otherwise (the default), only the windows are returned</p></li>
<li><p><code>collapse</code>: If <code>collapse = TRUE</code>, the windows are collapsed to strings (separated by <code>sep</code>), otherwise,
a <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> of windows is returned.</p><ul><li><p><code>sep</code> the separator used if <code>collapse = TRUE</code>.</p></li>
</ul></li>
<li><p><code>alignToOpen</code>: Should padded output (<code>inPlace = TRUE</code>) by aligned to the openning (left-side)
of each window?</p></li>
<li><p><code>stripRegex</code>: Should regular expressions used to identify windows (details below) be stripped from the output?</p></li>
</ul><p>In the rest of this man page, we will apply <code>context()</code> to simple vectors (like the <a href="https://rdrr.io/r/base/Constants.html" class="external-link">letters</a> vector)
to illustrate how windows are defined.
In actual analyses, you'll be more likely to apply <code>context()</code> to <a href="humdrumRclass.html">humdrumR data</a>.</p>
<p>Note that, when using <code>context()</code> inside <a href="withinHumdrum.html">with, within, etc.</a>,
the <code>alignToOpen</code> argument will have no effect.
Instead, use <code>alignLeft = FALSE</code> as an argument to
<code><a href="withinHumdrum.html">with()</a></code>/<code><a href="withinHumdrum.html">within()</a></code>, not as an argument to <code>context()</code>.</p><div class="section">
<h3 id="groupby">groupby<a class="anchor" aria-label="anchor" href="#groupby"></a></h3>


<p>The <code>groupby</code> argument is an optional <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a> of grouping vectors,
all the same length as <code>x</code>/<code>reference</code>.
Contextual windows cannot cross boundaries indicated in <code>groupby</code>.
When applying <code>context()</code> to <a href="humdrumRclass.html">humdrumR data</a>,
<code>groupby</code> is automatically passed <code>list(Piece, Spine, Path)</code>, which prevents
windows from crossing normal "melodic" boundaries in the data.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="defining-windows">Defining windows<a class="anchor" aria-label="anchor" href="#defining-windows"></a></h2>
    


<p>The system <code>context()</code> uses to define/identify windows in the data is quite sophisticated,
and can take some time to master!
The basic idea is that you must indicate where you want windows to start ("<em>open</em>") and
where you want them to end ("<em>close</em>"):
you indicate this using the <code>open</code> and <code>close</code> arguments.
To introduce their usage, we will first do some simple examples applying
<code>context()</code> to the built-in <a href="https://rdrr.io/r/base/Constants.html" class="external-link">letters</a> vector, which (by default) will act as our <code>reference</code>
vector <em>and</em> the target vector <code>x</code> to contextualize.
We will then show how these techniques can be used with multiple vectors/<code><a href="humTable.html">fields()</a></code>.</p>
<p>The <code>open</code> and <code>close</code> arguments are <a href="evaluatingExpressions.html">expressions</a> which, when evaluated,
must indicate indices in the <code>reference</code> vector(s)/<a href="humTable.html">field(s)</a>;
For example, if we want a window to open at the 4th and 11th indices,
and close at the 15th and 24th index,
we can write:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">context</span>(letters, <span class="at">open =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">11</span>), <span class="at">close =</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">24</span>))</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span></code></pre><p></p></div>
<p>This is quite trivial.
However, the <code>open</code> and <code>close</code> expressions can do a number of special tricks,
including refering to each other.
For example, if either argument includes a call to <code><a href="hop.html">hop()</a></code>,
<code><a href="hop.html">hop()</a></code> will automatically be applied along the input vector.
Consider this example:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">context</span>(letters, <span class="at">open =</span> <span class="fu">hop</span>(<span class="dv">2</span>), <span class="at">close =</span> open <span class="sc">+</span> <span class="dv">3</span>)</span></code></pre><p></p></div>
<p>In this example, the <code><a href="hop.html">hop()</a></code> command generates <code>open</code> indices for every odd
number from <code>1</code> to <code>25</code>.
The <code>close</code> argument then references these <code>open</code> indices, and adds <code>3</code> to each---
the result is pairs like <code>1:4</code>, <code>2:5</code>, <code>3:6</code>, <code>4:7</code>, etc.
If we give <code><a href="hop.html">hop()</a></code> different arguments (like <code>by</code> or <code>from</code>), we can modify this process.
In fact, if we use the default <code>by</code> value for <code><a href="hop.html">hop()</a></code> (<code>1</code>), we can use this approach to
create standard N-grams.</p>
<p>We can also indicate open/closes by providing <code>logical</code> vectors (the same length as <code>x</code>/<code>reference</code>).
For example:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">context</span>(letters, <span class="at">open =</span> letters <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'e'</span>, <span class="st">'j'</span>, <span class="st">'l'</span>), <span class="at">close =</span> open <span class="sc">+</span> <span class="dv">2</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span></code></pre><p></p></div><div class="section">
<h3 id="regular-expressions">Regular Expressions<a class="anchor" aria-label="anchor" href="#regular-expressions"></a></h3>


<p>If either <code>open</code> or <code>close</code> are provided a <code>character</code> string, this string is treated
as a regular expression and is matched against the <code>reference</code> vector.
For example, we could make windows in the alphabet starting or ending on each vowel:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">context</span>(letters, <span class="at">open =</span> <span class="st">'[aeiou]'</span>, <span class="at">close =</span> open <span class="sc">+</span> <span class="dv">4</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">context</span>(letters, <span class="at">open =</span> close <span class="sc">-</span> <span class="dv">4</span>, <span class="at">close =</span> <span class="st">'[aeiou]'</span>, <span class="at">alignToOpen =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span></code></pre><p></p></div>
<p>If the <code>stripRegex = TRUE</code> (not the default), the matching <code>open</code> or <code>close</code> regular expressions are removed
from the output.
This can be useful if the character/tokens used to indicate windows are no longer needed
once windowing is done.</p>
</div>

<div class="section">
<h3 id="special-variables">Special variables<a class="anchor" aria-label="anchor" href="#special-variables"></a></h3>


<p>The <code>open</code> and <code>close</code> expressions will understand a few special variable names:</p><ul><li><p><code>nextopen</code>: represents the index of the <em>next</em> open---can only be used in the <code>close</code> argument.</p></li>
<li><p><code>prevclose</code>: represents the index of the <em>previous</em> close---can only be used in the <code>open</code> argument.</p></li>
<li><p><code>end</code>: represents the last index of the <code>reference</code> vector(s).</p></li>
<li><p><code>|</code>: As in "OR"---specify alternative window <code>open</code>/<code>close</code> criteria.</p></li>
</ul><p><code>What if we'd like each of our windows to close right before the next window opens? We can do this by making the</code>close<code>argument refer to the *next*</code>open<code>, by referring to the </code>nextopen` variable:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">context</span>(letters, <span class="at">open =</span> <span class="st">'[aeiou]'</span>, <span class="at">close =</span> nextopen <span class="sc">-</span> 1L)</span></code></pre><p></p></div>
<p>Conversely, <code>open</code> can refer to the <code>prevclose</code> close:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">context</span>(letters, <span class="at">open =</span> prevclose <span class="sc">+</span> <span class="dv">1</span>, <span class="at">close =</span> <span class="st">'[aeiou]'</span>, <span class="at">alignToOpen =</span> <span class="cn">FALSE</span>)</span></code></pre><p></p></div>
<p>Notice that when we called <code>context(letters, open = '[aeiou]', close = nextopen - 1L)</code>,
the window opening on <code>"u"</code> is not returned.
This is because there is no "<code>nextopen</code>" open to close on.
We can instead provide <code>context()</code> an alternative, using <code>|</code> (or):</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">context</span>(letters, <span class="at">open =</span> <span class="st">'[aeiou]'</span>, <span class="at">close =</span> nextopen <span class="sc">-</span> 1L <span class="sc">|</span> <span class="dv">26</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span></code></pre><p></p></div>
<p>Here we are saying, close a window 1 index before the next open <em>OR</em> at index 26.
What if we don't know exactly how long our input vector is?
Refer to the <code>end</code> variable:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">context</span>(letters, <span class="at">open =</span> <span class="st">'[aeiou]'</span>, <span class="at">close =</span> nextopen <span class="sc">-</span> 1L <span class="sc">|</span> end)</span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="separating-context-reference-from-application">Separating context reference from application<a class="anchor" aria-label="anchor" href="#separating-context-reference-from-application"></a></h3>


<p>The previous examples illustrate the basic concepts of using <code>open</code>/<code>close</code>;
to grasp how they work, study these examples and play around with them.
We can also define <code>open</code> and <code>close</code> expressions that reference more than one vector(s)/<a href="s">field</a>,
and which aren't necessarily the thing we want to apply the windowing to.
To illustrate this last point, let's take the last command from the previous section
and make it so the <code>x</code> argument is different than the <code>reference</code> argument:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">context</span>(LETTERS, <span class="at">reference =</span> letters, <span class="at">open =</span> <span class="st">'[aeiou]'</span>, <span class="at">close =</span> nextopen <span class="sc">-</span> 1L <span class="sc">|</span> <span class="dv">26</span>)</span></code></pre><p></p></div>
<p>Now, <code>letters</code> is still being used as the windowing reference, but the contextual windowing is being
applied to <code>LETTERS</code>.
When we use <code>context()</code> on a <a href="humdrumRclass.html">humdrumR dataset</a>, the data's <code><a href="humTable.html">fields()</a></code> can be used as the reference,
then <a href="withinHumdrum.html">with(), within(), mutate()</a> can be used to manipulate other fields.</p>
</div>

<div class="section">
<h3 id="multi-vector-field-reference">Multi-vector/field reference<a class="anchor" aria-label="anchor" href="#multi-vector-field-reference"></a></h3>


<p>The <code>open</code> and <code>close</code> arguments can reference more than one reference vector.
When applying <code>context()</code> to a vector <code>x</code>, we can provide a named <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> or <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code>
as the <code>reference</code> argument---so long as all the vectors they contain are the same length as <code>x</code>.
We can then refer to these vectors by name:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>reference.frame <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Threes =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">length.out =</span> <span class="dv">26</span>), </span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>                               <span class="at">Fours =</span> <span class="fu">rep</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">26</span>))</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">context</span>(letters, </span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>        <span class="at">reference =</span> reference.frame,</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>        <span class="at">open =</span> Threes <span class="sc">==</span> Fours, <span class="at">close =</span> Fours <span class="sc">==</span> <span class="dv">1</span>)</span></code></pre><p></p></div>
<p>So we created a data.frame with columns <code>Threes</code> and <code>Fours</code>.
We referenced <em>both</em> of these columns when defining where windows <code>open</code> and <code>close</code>.</p><div class="section">
<h4 id="using-humdrumr-data">Using humdrumR data<a class="anchor" aria-label="anchor" href="#using-humdrumr-data"></a></h4>


<p>When we apply <code>context()</code> to <a href="humdrumRclass.html">humdrumR data</a>, we can refer to <em>any</em> of the
data's <code><a href="humTable.html">fields()</a></code> in <code>open</code> or <code>close</code>.
We can also use all of <code>open</code>/<code>close</code>'s special tricks (described above), like <code><a href="hop.html">hop()</a></code>, <code>nextopen</code>, <code>prevclose</code>,
and <code>end</code>.
For example, to create 4-grams in a humdrum dataset:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>humData <span class="sc">|&gt;</span> <span class="fu">context</span>(<span class="at">open =</span> <span class="fu">hop</span>(), open <span class="sc">+</span> <span class="dv">3</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span></code></pre><p></p></div>
<p>As mentioned above, when we apply <code>context()</code> to <a href="humdrumRclass.html">humdrumR data</a>,
<code>groupby</code> is automatically passed <code>list(Piece, Spine, Path)</code>, which prevents
windows from crossing normal "melodic" boundaries in the data.
This can be overrriden by providing your own explicit <code>groupby</code> argument.
<a href="groupHumdrum.html">Grouping fields</a> that have already been defined in the data, are <em>also</em> used.</p>
</div>


</div>

    </div>
    <div class="section level2">
    <h2 id="filtering-windows">Filtering windows<a class="anchor" aria-label="anchor" href="#filtering-windows"></a></h2>
    


<p>Once <code>open</code> and <code>close</code> have identified where windows can start and end, there is still
some options for which open and close indices to associate with each other to create a window.
For example, as mentioned above, the <code>groupby</code> argument can be used to make sure windows to cross
grouping boundaries---even if one group has and extra open index and the next an extra close index.
The minimum and maximum length of windows can also be controlled using the <code>min_length</code> and <code>max_length</code> arguments.
The <code>overlap</code>, <code>depth</code>, <code>rightward</code>, and <code>duplicate_indices</code> arguments provide a number of additional options,
which are useful for some use cases (details below).</p><div class="section">
<h3 id="nested-windows">Nested windows<a class="anchor" aria-label="anchor" href="#nested-windows"></a></h3>


<p>A common use-case for <code>context()</code> is analyzing phrases indicated in music.
In <code>**kern</code>, phrases are indicated with opening (<code>(</code>) and close (<code>)</code>) parentheses,
which we can capture with regular expressions for <code>open</code> and <code>close</code>.
Here is an example:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>nesting1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'(a'</span>, <span class="st">'b)'</span>, <span class="st">'(c'</span>, <span class="st">'d'</span>, <span class="st">'e)'</span>, <span class="st">'(d'</span>, <span class="st">'e'</span>, <span class="st">'f)'</span>, <span class="st">'(e'</span>, <span class="st">'f'</span>, <span class="st">'f#'</span>, <span class="st">'g'</span>, <span class="st">'g#'</span>, <span class="st">'a)'</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">context</span>(nesting1, <span class="at">open =</span> <span class="st">'('</span>, <span class="at">close =</span> <span class="st">')'</span>)</span></code></pre><p></p></div>
<p>Perfect.
However, what if there are nested phrasing indicators?</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>nesting2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'(a'</span>, <span class="st">'b)'</span>, <span class="st">'(c'</span>, <span class="st">'(d'</span>, <span class="st">'e)'</span>,  <span class="st">'(d'</span>, <span class="st">'e)'</span>, <span class="st">'f)'</span>, <span class="st">'(e'</span>, <span class="st">'(f'</span>, <span class="st">'(f#'</span>, <span class="st">'g)'</span>, <span class="st">'g#)'</span>, <span class="st">'a)'</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">context</span>(nesting2, <span class="at">open =</span> <span class="st">'('</span>, <span class="at">close =</span> <span class="st">')'</span>)</span></code></pre><p></p></div>
<p>That's not what we want!
By default, <code>context()</code> "pairs" each <code>open</code> with the next <code>close</code>, which often makes the most sense.
But in this case, we want different behavior.
We can get what we want by specifying <code>overlap = 'nested'</code>:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">context</span>(nesting2, <span class="at">open =</span> <span class="st">'('</span>, <span class="at">close =</span> <span class="st">')'</span>, <span class="at">overlap =</span> <span class="st">'nested'</span>)</span></code></pre><p></p></div>
<p>Now context aligns each <code>open</code> with the corresponding <code>close</code> at the same <em>nesting level</em>.
What if we are only interested in the highest (or lowest) level of nesting?
Use the <code>depth</code> argument, which can be non-zero integers: the highest level is <code>1</code>,
with "deeper" levels incrementing up.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">context</span>(nesting2, <span class="at">open =</span> <span class="st">'('</span>, <span class="at">close =</span> <span class="st">')'</span>, <span class="at">overlap =</span> <span class="st">'nested'</span>, <span class="at">depth =</span> <span class="dv">1</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">context</span>(nesting2, <span class="at">open =</span> <span class="st">'('</span>, <span class="at">close =</span> <span class="st">')'</span>, <span class="at">overlap =</span> <span class="st">'nested'</span>, <span class="at">depth =</span> <span class="dv">2</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">context</span>(nesting2, <span class="at">open =</span> <span class="st">'('</span>, <span class="at">close =</span> <span class="st">')'</span>, <span class="at">overlap =</span> <span class="st">'nested'</span>, <span class="at">depth =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre><p></p></div>
<p>You can also use negative <code>depth</code> to specify from the deepest levels outward.
For example, in this case  <code>depth == -1</code> should get us that deepest level:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">context</span>(nesting2, <span class="at">open =</span> <span class="st">'('</span>, <span class="at">close =</span> <span class="st">')'</span>, <span class="at">overlap =</span> <span class="st">'nested'</span>, <span class="at">depth =</span> <span class="sc">-</span><span class="dv">1</span>)</span></code></pre><p></p></div>
<p>If <code>depth</code> is <code>NULL</code> (the default), all depths are returned.</p>
</div>

<div class="section">
<h3 id="controlling-overlap">Controlling overlap<a class="anchor" aria-label="anchor" href="#controlling-overlap"></a></h3>


<p>There are some other options for controlling how windows can, or cannot, overlap.
Perhaps we'd like to look at every melodic phrase moving from <em>So</em> (dominant) to <em>Do</em> (tonic).</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>melody <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'so'</span>, <span class="st">'la'</span>, <span class="st">'ti'</span>, <span class="st">'do'</span>, <span class="st">'so'</span>, <span class="st">'fi'</span>, <span class="st">'so'</span>, <span class="st">'la'</span>, <span class="st">'ti'</span>, <span class="st">'re'</span>, <span class="st">'do'</span>, <span class="st">'so'</span>, <span class="st">'la'</span>, <span class="st">'re'</span>, <span class="st">'do'</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">context</span>(melody, <span class="at">open =</span> <span class="st">'so'</span>, <span class="at">close =</span> <span class="st">'do'</span>)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a></span></code></pre><p></p></div>
<p>This output is probably not what we want.
Again, <code>context()</code> (by default) pairs each opening with the next close <em>which hasn't already been paired</em>.
In this case, that means the third <em>So</em> is getting pairs with the third <em>Do</em>,
even though there is another <em>Do</em> in between!
We might want to try either the <code>"edge"</code> or <code>"none"</code> options for the <code>overlap</code> argument:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">context</span>(melody, <span class="at">open =</span> <span class="st">'so'</span>, <span class="at">close =</span> <span class="st">'do'</span>, <span class="at">overlap =</span> <span class="st">'edge'</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">context</span>(melody, <span class="at">open =</span> <span class="st">'so'</span>, <span class="at">close =</span> <span class="st">'do'</span>, <span class="at">overlap =</span> <span class="st">'none'</span>)</span></code></pre><p></p></div>
<p>The <code>"edge"</code> option allows the closing edge of windows to share a <code>close</code>---in this case,
the second and third <em>So</em> (<code>open</code>) are paired with the same <em>Do</em>.
On the other hand, with <code>overlap = "none"</code>, overlapping windows are simply not allowed, so the third <code>open</code>
simply doesn't get paired with anything.</p>
<p>What if you would like to pair windows on their left (opening) edge?
If you specify <code>rightward = FALSE</code>, the overlap argument works backwards (right-to-left) through
the input vector, starting on each <code>close</code> and ending on each <code>open</code>.
By combining <code>righward = FALSE</code> with various <code>overlap</code> options, you can achieve a lot of windowing
options you might need.</p>
</div>

<div class="section">
<h3 id="repeated-indices">Repeated indices<a class="anchor" aria-label="anchor" href="#repeated-indices"></a></h3>


<p>Note that if <code>duplicates_indices = TRUE</code> (the default) the <code>open</code> and <code>close</code> arguments can
incorporate repeated indices, including multiple matches to a regular expression in the same index.
This is useful with, for example, nested phrases:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>nesting3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'(a'</span>, <span class="st">'b)'</span>, <span class="st">'((c'</span>, <span class="st">'d'</span>, <span class="st">'e)'</span>,  <span class="st">'(d'</span>, <span class="st">'e'</span>, <span class="st">'f))'</span>, <span class="st">'(e'</span>, <span class="st">'f'</span>, <span class="st">'((f#'</span>, <span class="st">'g)'</span>, <span class="st">'g#)'</span>, <span class="st">'a)'</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">context</span>(nesting3, <span class="at">open =</span> <span class="st">'('</span>, <span class="at">close =</span> <span class="st">')'</span>, <span class="at">overlap =</span> <span class="st">'nested'</span>, <span class="at">depth =</span> <span class="dv">1</span>)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">context</span>(nesting3, <span class="at">open =</span> <span class="st">'('</span>, <span class="at">close =</span> <span class="st">')'</span>, <span class="at">overlap =</span> <span class="st">'nested'</span>, <span class="at">depth =</span> <span class="dv">2</span>)</span></code></pre><p></p></div>
<p>In some cases, you might want to turn <code>duplicate_indices = FALSE</code>.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="complements-removing-context-">Complements (removing context)<a class="anchor" aria-label="anchor" href="#complements-removing-context-"></a></h2>
    


<p>The <code>uncontext()</code> command, like the <code><a href="groupHumdrum.html">ungroup()</a></code> command, is needed to remove
contextual windows from <a href="humdrumRclass.html">humdrumR data</a>, so that further calls to
<a href="withinHumdrum.html">within()/mutate()/etc.</a> are not applied in context.</p>
<p>The <code>uncontext()</code> command can also be used to access data <em>outside</em> of contextual windows
by using a <code>complement</code> argument, similar to the <code><a href="subset.humdrumR.html">unfilter()</a></code> function.
The <code>complement</code> must be an existing field in the data.
If <code>uncontext()</code> is used with a given complement field, the currently
selected data field (unless <code>Token</code> is selected) has the contents of the complement
field inserted into it all points outside the contextual windows.
This can be used to keep</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Contextual grouping functions.: 
<code><a href="groupHumdrum.html">groupHumdrum</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use the built-in 'letters' vector</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">context</span><span class="op">(</span><span class="va">letters</span>, open <span class="op">=</span> <span class="fu"><a href="hop.html">hop</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span>, close <span class="op">=</span> <span class="va">open</span> <span class="op">+</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "a,b,c,d" "e,f,g,h" "i,j,k,l" "m,n,o,p" "q,r,s,t" "u,v,w,x"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">context</span><span class="op">(</span><span class="va">letters</span>, open <span class="op">=</span> <span class="st">"[aeiou]"</span>, close <span class="op">=</span> <span class="va">nextopen</span> <span class="op">-</span> <span class="fl">1</span> <span class="op">|</span> <span class="va">end</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "a,b,c,d"     "e,f,g,h"     "i,j,k,l,m,n" "o,p,q,r,s,t" "u,v,w,x,y,z"</span>
<span class="r-in"><span><span class="fu">context</span><span class="op">(</span><span class="va">letters</span>, open <span class="op">=</span> <span class="st">"[aeiou]"</span>, close <span class="op">=</span> <span class="va">nextopen</span> <span class="op">-</span> <span class="fl">1</span> <span class="op">|</span> <span class="va">end</span>, inPlace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "a,b,c,d"     NA            NA            NA            "e,f,g,h"    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6] NA            NA            NA            "i,j,k,l,m,n" NA           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] NA            NA            NA            NA            "o,p,q,r,s,t"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16] NA            NA            NA            NA            NA           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [21] "u,v,w,x,y,z" NA            NA            NA            NA           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [26] NA           </span>
<span class="r-in"><span><span class="fu">context</span><span class="op">(</span><span class="va">letters</span>, open <span class="op">=</span> <span class="st">"[aeiou]"</span>, close <span class="op">=</span> <span class="va">nextopen</span> <span class="op">-</span> <span class="fl">1</span> <span class="op">|</span> <span class="va">end</span>, collapse <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "a" "b" "c" "d"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "e" "f" "g" "h"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "i" "j" "k" "l" "m" "n"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "o" "p" "q" "r" "s" "t"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "u" "v" "w" "x" "y" "z"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># within.humdrumR</span></span></span>
<span class="r-in"><span><span class="va">chorales</span> <span class="op">&lt;-</span> <span class="fu"><a href="readHumdrum.html">readHumdrum</a></span><span class="op">(</span><span class="va">humdrumRroot</span>, <span class="st">"HumdrumData/BachChorales/.*.krn"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 4-grams</span></span></span>
<span class="r-in"><span><span class="va">chorales</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">context</span><span class="op">(</span>open <span class="op">=</span> <span class="fu"><a href="hop.html">hop</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">open</span> <span class="op">+</span> <span class="fl">3</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="withinHumdrum.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">Token</span>, collapse <span class="op">=</span> <span class="st">','</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>       </span></span>
<span class="r-in"><span><span class="co"># phrases leading to fermatas</span></span></span>
<span class="r-in"><span><span class="va">chorales</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">context</span><span class="op">(</span>open <span class="op">=</span> <span class="fl">1</span> <span class="op">|</span> <span class="va">prevclose</span> <span class="op">+</span> <span class="fl">1</span>, close <span class="op">=</span> <span class="st">';'</span>, overlap <span class="op">=</span> <span class="st">'none'</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="withinHumdrum.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">Token</span>, collapse <span class="op">=</span> <span class="st">','</span><span class="op">)</span>, alignLeft <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">humData</span> <span class="op">&lt;-</span> <span class="fu"><a href="readHumdrum.html">readHumdrum</a></span><span class="op">(</span><span class="va">humdrumRroot</span>, <span class="st">"HumdrumData/BachChorales/chor00[1-4].krn"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Finding and reading files...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 	REpath-pattern '/home/nat/.tmp/Rtmp0uJ7xf/temp_libpath8924c446d585c/humdrumR/HumdrumData/BachChorales/chor00[1-4].krn' matches 4 text files in 1 directory.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Four files read from disk.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Validating four files...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> all valid.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Parsing four files...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Assembling corpus...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Done!</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">humData</span> <span class="op">|&gt;</span> <span class="fu">context</span><span class="op">(</span><span class="fu"><a href="hop.html">hop</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>, <span class="va">open</span> <span class="op">+</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="withinHumdrum.html">within</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">Token</span>, collapse <span class="op">=</span> <span class="st">'|'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">uncontext</span><span class="op">(</span>complement <span class="op">=</span> <span class="st">'Token'</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ######################## vvv chor001.krn vvv #########################</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">   1:  </span><span style="color: #00BBBB;">!!!COM: Bach, Johann Sebastian</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">   2:  </span><span style="color: #00BBBB;">!!!CDT: 1685/02/21/-1750/07/28/</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">   3:  </span><span style="color: #00BBBB;">!!!OTL@@DE: Aus meines Herzens Grunde</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">   4:  </span><span style="color: #00BBBB;">!!!OTL@EN:      From the Depths of My Heart</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">   5:  </span><span style="color: #00BBBB;">!!!SCT: BWV 269</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">   6:  </span><span style="color: #00BBBB;">!!!PC#: 1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">   7:  </span><span style="color: #00BBBB;">!!!AGN: chorale</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">   8:  </span><span style="color: #BB0000;">         **kern         **kern         **kern         **kern</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">   9:  </span><span style="color: #BB00BB;">         *ICvox         *ICvox         *ICvox         *ICvox</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  10:  </span><span style="color: #BB00BB;">         *Ibass        *Itenor         *Ialto        *Isoprn</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  11:  </span><span style="color: #BB00BB;">        *I"Bass       *I"Tenor        *I"Alto     *I"Soprano</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  12:  </span><span style="color: #BB00BB;">      *&gt;[A,A,B]      *&gt;[A,A,B]      *&gt;[A,A,B]      *&gt;[A,A,B]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  13:  </span><span style="color: #BB00BB;">   *&gt;norep[A,B]   *&gt;norep[A,B]   *&gt;norep[A,B]   *&gt;norep[A,B]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  14:  </span><span style="color: #BB00BB;">            *&gt;A            *&gt;A            *&gt;A            *&gt;A</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  15:  </span><span style="color: #BB00BB;">        *clefF4       *clefGv2        *clefG2        *clefG2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  16:  </span><span style="color: #BB00BB;">         *k[f#]         *k[f#]         *k[f#]         *k[f#]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  17:  </span><span style="color: #BB00BB;">            *G:            *G:            *G:            *G:</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  18:  </span><span style="color: #BB00BB;">          *M3/4          *M3/4          *M3/4          *M3/4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  19:  </span><span style="color: #BB00BB;">         *MM100         *MM100         *MM100         *MM100</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  20:  </span><span style="color: #BBBB00;">      4GG|4G|4E      4B|4B|8cL       4d|4d|4e      4g|2g|4dd</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  21:  </span><span style="color: #00BB00; text-decoration: underline;">             =1             =1             =1             =1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  22:  </span><span style="color: #BBBB00; font-weight: 100;">              .              .              .              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  23:  </span><span style="color: #BBBB00; font-weight: 100;">              .              .              .              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  24:  </span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">            8BJ</span><span style="color: #BBBB00; font-weight: 100;">              .              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  25:  </span><span style="color: #BBBB00;">            4F#             4A             4d</span><span style="color: #BBBB00; font-weight: 100;">              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  26:  </span><span style="color: #00BB00; text-decoration: underline;">             =2             =2             =2             =2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  27:  </span><span style="color: #BBBB00;">             4G             4G             2d            4.b</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  28:  </span><span style="color: #BBBB00;">             4D     4F#|4G|8cL</span><span style="color: #BBBB00; font-weight: 100;">              .              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  29:  </span><span style="color: #BBBB00; font-weight: 100;">              .              .              .</span><span style="color: #BBBB00;">             8a</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  30:  </span><span style="color: #BBBB00;">     4E|4C|8BBL</span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">             4B             4g</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  31:  </span><span style="color: #00BB00; text-decoration: underline;">             =3             =3             =3             =3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  32:  </span><span style="color: #BBBB00; font-weight: 100;">              .              .</span><span style="color: #BBBB00;">      8eL|8d|8e      4.g|8a|4b</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  33:  </span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">            8BJ</span><span style="color: #BBBB00; font-weight: 100;">              .              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  34:  </span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">             4c</span><span style="color: #BBBB00; font-weight: 100;">              .              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  35:  </span><span style="color: #BBBB00;">           8AAJ</span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">           8f#J</span><span style="color: #BBBB00; font-weight: 100;">              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  36:  </span><span style="color: #BBBB00;">            4GG             4d             4g</span><span style="color: #BBBB00; font-weight: 100;">              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  37:  </span><span style="color: #00BB00; text-decoration: underline;">             =4             =4             =4             =4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  38:  </span><span style="color: #BBBB00;">            2D;      2d;|4d|4A           2f#;            2a;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  39:  </span><span style="color: #BBBB00;">   4GG|4FF#|4GG</span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">       4g|4d|4e             4b</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  40:  </span><span style="color: #00BB00; text-decoration: underline;">             =5             =5             =5             =5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #000000; font-style: italic;">41-133::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ######################## ^^^ chor001.krn ^^^ #########################</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 		(two more pieces...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ######################## vvv chor004.krn vvv #########################</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #000000; font-style: italic;">  1-63::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  64:  </span><span style="color: #BBBB00;">           8G#L</span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">             4b           8eeL</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  65:  </span><span style="color: #BBBB00;">            8EJ</span><span style="color: #BBBB00; font-weight: 100;">              .              .</span><span style="color: #BBBB00;">          8dd#J</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  66:  </span><span style="color: #BBBB00;">            4F#            4A#            4f#    4cc#|4b;|4b</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  67:  </span><span style="color: #BBBB00;">    4BB;|4E|4G#           4d#;   4f#;|4g#|8eL</span><span style="color: #BBBB00; font-weight: 100;">              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  68:  </span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">             4e</span><span style="color: #BBBB00; font-weight: 100;">              .              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  69:  </span><span style="color: #00BB00; text-decoration: underline;">             =7             =7             =7             =7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  70:  </span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">       4B|4e|4e</span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">            4ee</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  71:  </span><span style="color: #BBBB00; font-weight: 100;">              .              .</span><span style="color: #BBBB00;">           8f#J</span><span style="color: #BBBB00; font-weight: 100;">              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  72:  </span><span style="color: #BBBB00;">             4E</span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">            4g#             4b</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  73:  </span><span style="color: #BBBB00;">          8AnXL</span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">             4a           4cc#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  74:  </span><span style="color: #BBBB00;">            8BJ</span><span style="color: #BBBB00; font-weight: 100;">              .              .              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  75:  </span><span style="color: #BBBB00;">    4c#|4E#|4F#            4c#   8eL|8f#J|4g#    8g#L|8aJ|4b</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  76:  </span><span style="color: #BBBB00; font-weight: 100;">              .              .              .              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  77:  </span><span style="color: #00BB00; text-decoration: underline;">             =8             =8             =8             =8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  78:  </span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">             4d</span><span style="color: #BBBB00; font-weight: 100;">              .              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  79:  </span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">            4c#            4f#             4a</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  80:  </span><span style="color: #BBBB00;">           4C#;   4c#;|[4B|4B]           4e#;           4g#;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  81:  </span><span style="color: #BBBB00;">             4E</span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">             4e            4g#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  82:  </span><span style="color: #00BB00; text-decoration: underline;">             =9             =9             =9             =9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  83:  </span><span style="color: #BBBB00;">            4BB</span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">     4d#|4c#|4B     4f#|4a|4g#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  84:  </span><span style="color: #BBBB00;">   8C#L|8D#J|4E             4e</span><span style="color: #BBBB00; font-weight: 100;">              .              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  85:  </span><span style="color: #BBBB00; font-weight: 100;">              .              .              .              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  86:  </span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">             4e</span><span style="color: #BBBB00; font-weight: 100;">              .              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  87:  </span><span style="color: #BBBB00;">            4BB           8d#L             4B            4f#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  88:  </span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">   8BJ|2F#|4G#;</span><span style="color: #BBBB00; font-weight: 100;">              .              .</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  89:  </span><span style="color: #00BB00; text-decoration: underline;">            =10            =10            =10            =10</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  90:  </span><span style="color: #BBBB00;">           4AA#</span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">            4c#            4c#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  91:  </span><span style="color: #BBBB00;">            4BB</span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">             4B            4d#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  92:  </span><span style="color: #BBBB00;">           4EE;</span><span style="color: #BBBB00; font-weight: 100;">              .</span><span style="color: #BBBB00;">            4B;            4e;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  93:  </span><span style="color: #00BB00; text-decoration: underline;">             ==             ==             ==             ==</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  94:  </span><span style="color: #BB00BB;">             *-             *-             *-             *-</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  95:  </span><span style="color: #00BBBB;">!!!hum2abc: -Q ''</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  96:  </span><span style="color: #00BBBB;">!!!title: @{PC#}. @{OTL@@DE}</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;">  97:  </span><span style="color: #00BBBB;">!!!YOR1: 371 vierstimmige Choralges&amp;auml;nge von Jo***</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">  </span><span style="color: #000000; font-style: italic;">  98:  </span><span style="color: #00BBBB;">!!!YOR2: 4th ed. by Alfred D&amp;ouml;rffel (Leipzig: B***</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">  </span><span style="color: #000000; font-style: italic;">  99:  </span><span style="color: #00BBBB;">!!!YOR2: c.1875). 178 pp. Plate "V.A.10".  reprint:***</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">  </span><span style="color: #000000; font-style: italic;"> 100:  </span><span style="color: #00BBBB;">!!!YOR4: Chorales (New York: Associated Music Publi***</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">  </span><span style="color: #000000; font-style: italic;"> 101:  </span><span style="color: #00BBBB;">!!!SMS: B&amp;H, 4th ed, Alfred D&amp;ouml;rffel, c.1875, p***</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">  </span><span style="color: #000000; font-style: italic;"> 102:  </span><span style="color: #00BBBB;">!!!EED:  Craig Stuart Sapp</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #000000; font-style: italic;"> 103:  </span><span style="color: #00BBBB;">!!!EEV:  2009/05/22</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ######################## ^^^ chor004.krn ^^^ #########################</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               (***five global comments truncated due to screen size***)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	humdrumR corpus of four pieces.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Data fields: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	         Token                        :: character</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	        *paste(Token, collapse = "|") :: character</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Nathaniel Condit-Schultz, Claire Arthur.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

