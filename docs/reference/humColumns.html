<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='In the humdrum syntax, data is placed in "spines,"
which are not the same as "columns" in a spreadsheet. A "column" refers to a
tab-delineated group of values.
"Spines" can be a single column, or they may (at any time) split into multiple columns,
which can in turn split again, using the "*^" interpretation token. The reverse can happen as well,
with two or more columns merging into a single column, using the "v" token.
This means that, while humdrum data at first glance looks like a simple two-dimensional table,
it is actually a flexible tree structure. As spines split and merge, the total number of columns
can change during a piece, creating a "ragged" edge.
Another similar issue is that a corpus of humdrum files may have varying numbers of spines/columns, between pieces.
("Global" comment/reference records are also a special case, as that are always a single value, even if interspersed with
multi-column local records.)'><title>Spines vs Paths vs Columns — humColumns • humdrumR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Spines vs Paths vs Columns — humColumns"><meta property="og:description" content='In the humdrum syntax, data is placed in "spines,"
which are not the same as "columns" in a spreadsheet. A "column" refers to a
tab-delineated group of values.
"Spines" can be a single column, or they may (at any time) split into multiple columns,
which can in turn split again, using the "*^" interpretation token. The reverse can happen as well,
with two or more columns merging into a single column, using the "v" token.
This means that, while humdrum data at first glance looks like a simple two-dimensional table,
it is actually a flexible tree structure. As spines split and merge, the total number of columns
can change during a piece, creating a "ragged" edge.
Another similar issue is that a corpus of humdrum files may have varying numbers of spines/columns, between pieces.
("Global" comment/reference records are also a special case, as that are always a single value, even if interspersed with
multi-column local records.)'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">humdrumR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Basics</h6>
    <a class="dropdown-item" href="../articles/Overview.html">Overview of humdrumR</a>
    <a class="dropdown-item" href="../articles/GettingStarted.html">Getting started with humdrumR</a>
    <a class="dropdown-item" href="../articles/IntroForCoders.html">HumdrumR for Coders</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>R/Humdrum background</h6>
    <a class="dropdown-item" href="../articles/HumdrumSyntax.html">The Humdrum Syntax</a>
    <a class="dropdown-item" href="../articles/RPrimer.html">An R Primer for humdrumR</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Data prep</h6>
    <a class="dropdown-item" href="../articles/ReadWrite.html">Reading and writing data</a>
    <a class="dropdown-item" href="../articles/Validation.html">Validating Humdrum Data</a>
    <a class="dropdown-item" href="../articles/Reshaping.html">Shaping Humdrum Data</a>
    <a class="dropdown-item" href="../articles/Filtering.html">Filtering Humdrum Data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Analysis</h6>
    <a class="dropdown-item" href="../articles/WorkingWithData.html">Working with Humdrum Data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Musical tools</h6>
    <a class="dropdown-item" href="../articles/PitchAndTonality.html">Pitch and Tonality in humdrumR</a>
    <a class="dropdown-item" href="../articles/RhythmAndMeter.html">Rhythm and Meter in humdrumR</a>
    <a class="dropdown-item" href="../articles/Intervals.html">Rhythm and Pitch Intervals</a>
    <a class="dropdown-item" href="../articles/KeysAndChord.html">Diatonic and Tertian Sets in humdrumR</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="nav-link" href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Spines vs Paths vs Columns</h1>
      <small class="dont-index">Source: <a href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/blob/HEAD/R/humdrumR-class.R"><code>R/humdrumR-class.R</code></a></small>
      <div class="d-none name"><code>humColumns.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>In the <a href="http://www.humdrum.org/guide/ch05/" class="external-link">humdrum syntax</a>, data is placed in "spines,"
which are not the same as "columns" in a spreadsheet. A "column" refers to a
tab-delineated group of values.
"Spines" can be a single column, or they may (at any time) split into multiple columns,
which can in turn split again, using the <code>"*^"</code> interpretation token. The reverse can happen as well,
with two or more columns merging into a single column, using the <code>"v"</code> token.
This means that, while humdrum data at first glance looks like a simple two-dimensional table,
it is actually a flexible tree structure. As spines split and merge, the total number of columns
can change during a piece, creating a "ragged" edge.
Another similar issue is that a corpus of humdrum files may have varying numbers of spines/columns, between pieces.
("Global" comment/reference records are also a special case, as that are always a single value, even if interspersed with
multi-column local records.)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">alignColumns</span><span class="op">(</span><span class="va">humdrumR</span>, padder <span class="op">=</span> <span class="st">"_C"</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>In <a href="humdrumR.html">humdrumR</a>, spines, columns, and spine paths work like this.
First of all, we actually assume a slightly more strict version of the humdrum syntax:
we assume that all the spines which appear at the beginning of a file (headed with exlusive interpretations
like <code>"**kern"</code>) can never merge into each other. Thus, a humdrum file read into <code>humdrumR</code>
must not end with fewer columns than it starts.
Spine merges (<code>"*v"</code>) can only happen within spine paths that originally split off the same spine.
This extra-strict specification of spine paths in the humdrum syntax is, fortunately, something that has been
informally followed in most humdrum datasets.</p>
<p>Our strict spine-path definition makes everything work fairly simply:
Within a piece, the spines which appear at the beginning of the piece are the "true" spines through the rest of the piece, numbered
from left to right, starting from <code>1L</code>.
For each local token, the value in the <code>Spine</code> field is an integer indicating which of these
"true" spines it belongs to---global tokens have a <code>NA</code> value in their <code>Spine</code> field, because they are considerd to not belong to any spine.
Any spine path splits (<code>"*^"</code> from the main spines form subspines, which we call <strong>Paths</strong>.
Every spine's paths are numbered, from right to left, starting from <code>0L</code>.
A spine with no splits will have all <code>0L</code>s in its <code>Path</code> field.</p>
    </div>
    <div class="section level2">
    <h2 id="columns">Columns<a class="anchor" aria-label="anchor" href="#columns"></a></h2>
    


<p>It is very useful to sometimes turn humdrum data into a true two dimensional structure, with no ragged edges.
(This always requires removing global records.)
In order to do this, while maintaining a sensible relationship between spine which have spine paths,
humRead automatically <em>pads</em> humdrum data into a complete, non-ragged 2d table.
For instance, given this file</p><div class="sourceCode"><pre><code>**kern  **kern
A       E
*^      *
A       C       E
G       B       D
*v      *v      *
A       C        
*-      *-
</code></pre></div>

<p>humRead pads the file as so:</p><div class="sourceCode"><pre><code>**kern   _P       **kern
A        _P       E
*^       _P       *
A        C        E
G        B        D
*v       *v       *
A        _P       C        
*-       _P       *-

##########################################
1        1        2        Spine
0        1        0        Path
1        2        3        Column
</code></pre></div>

<p>(In this example, the <code>Spine</code>, <code>Path</code>, and <code>Column</code> values are shown below the data.)
The <code>"_P"</code> tokens stand for "padded path."
This appraoch assures that every <strong>Spine</strong> is a contiguous block of tokens, of constant width.
In most humdrumR use cases, these padding tokens (and the <code>Column</code> field) can be safely ignored.</p>
    </div>
    <div class="section level2">
    <h2 id="corpus-padding">Corpus padding<a class="anchor" aria-label="anchor" href="#corpus-padding"></a></h2>
    


<p>humRead automatically pads spine paths <em>within pieces</em>.
However, as mentioned above, there is also (sometimes) a need to pad across pieces, in order
to create a logical, clean 2d structure.
Consider this example, with humdrum data from two pieces:</p><ul><li><p><em>Piece 1</em>:</p><div class="sourceCode"><pre><code>**kern   **kern  **kern
E        D       C
D        .       .
C        C       E
*-       *-      *-
</code></pre></div></li>
<li><p><em>Piece 2</em>:</p><div class="sourceCode"><pre><code>**kern   **kern
A        A
.        B
C        C
*-       *-
</code></pre></div></li>
</ul><p>In this example, we have two pieces, one with three spines, the other with two.
There is no way to squish these two pieces into one regular 2d table.
But we <em>could</em> pad any missing columns, as so:</p><ul><li><p><em>Piece 1</em>:</p><div class="sourceCode"><pre><code>**kern   **kern  **kern
E        D       C
D        .       .
C        C       E
*-       *-      *-
</code></pre></div></li>
<li><p><em>Piece 2</em>:</p><div class="sourceCode"><pre><code>**kern  **kern   _C
A        A       _C
.        B       _C
C        C       _C
*-       *-      _C
</code></pre></div></li>
</ul><p>The function <code>alignColumns</code> is used to achieve just this effect.
In this example, the <code>"_C"</code> token stands for "padded column."</p>
<p>The presence of spine paths makes padding columns across pieces a bit more complicated.
What <code>alignColumns</code> will do, is match up all pieces in a corpus so that
every <strong>Spine</strong>/<strong>Path</strong> field pair allign in the same column.
Here is an example, with its paths already padded:</p><ul><li><p><em>Piece 1</em>:</p><div class="sourceCode"><pre><code>**kern      _P        **kern
A           _P        E
B           _P        D
*^          _P        *
A           C         E
G#          B         E
*v          *v        *
A           _P        E
*-          _P        *-
#################################################
1           1         2         Spine
0           1         0         Path
1           2         3         Column
</code></pre></div></li>
<li><p><em>Piece 2</em>:</p><div class="sourceCode"><pre><code>**kern     **kern    _P
A          E         _P
*          *^        _P
G#         D         F
A          C         E
*          *v        *v
E          D         _P
*-         *-        _P        
#################################################
1          2         2        Spine
0          0         1        Path
1          2         3        Column
</code></pre></div></li>
</ul><p>We have two pieces, each with two spines,
but in the first piece, the first spine splits, while in the second piece, the
second spine splits. Thus, the padded output will have four columns:</p><ul><li><p><em>Piece 1</em>:</p><div class="sourceCode"><pre><code>**kern    _P        **kern   _C
A         _P        E        _C
B         _P        D        _C
*^        _P        *        _C
A         C         E        _C
G#        B         E        _C
*v        *v        *        _C
A         _P        E        _C
*-        _P        *-       _C 
###########################################################
1         1         2        2         Spine
0         1         0        1         Path
1         2         3        4         Column
</code></pre></div></li>
<li><p><em>Piece 2</em>:</p><div class="sourceCode"><pre><code>**kern    _C        **kern   _P
A         _C        E        _P
*         _C        *^       _P
G#        _C        D        F
A         _C        C        E
*         _C        *v       *v
E         _C        D        _P
*-        _C        *-       _P 
#########################################################       
1         1         2        2         Spine
0         1         0        1         Path
1         2         3        4         Column
</code></pre></div></li>
</ul><p>Note that <code>alignColumns</code> actually adds rows to the <a href="humdrumRclass.html">humdrumRclass</a> object's
internal <a href="humTable.html">humdrum tables</a>.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="http://fathermckenzie.net/" class="external-link">Nathaniel Condit-Schultz</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

