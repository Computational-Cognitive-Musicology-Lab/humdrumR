<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="humdrumR">
<title>Time, rhythm, and meter in humdrumR • humdrumR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Time, rhythm, and meter in humdrumR">
<meta property="og:description" content="humdrumR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">humdrumR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.2.0000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Basics</h6>
    <a class="dropdown-item" href="../articles/GettingStarted.html">Getting started with humdrumR</a>
    <a class="dropdown-item" href="../articles/IntroForCoders.html">HumdrumR for coders</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>R/Humdrum background</h6>
    <a class="dropdown-item" href="../articles/HumdrumSyntax.html">The humdrum syntax</a>
    <a class="dropdown-item" href="../articles/RPrimer.html">An R primer for humdrumR users</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Data prep</h6>
    <a class="dropdown-item" href="../articles/ReadWrite.html">Reading and writing data</a>
    <a class="dropdown-item" href="../articles/Reshaping.html">Shaping humdrum data</a>
    <a class="dropdown-item" href="../articles/Filtering.html">Filtering humdrum data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Analysis</h6>
    <a class="dropdown-item" href="../articles/Summary.html">Getting to know your data</a>
    <a class="dropdown-item" href="../articles/WorkingWithData.html">Working with humdrum data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Musical tools</h6>
    <a class="dropdown-item" href="../articles/PitchAndTonality.html">Pitch and tonality in humdrumR</a>
    <a class="dropdown-item" href="../articles/RhythmAndMeter.html">Time, rhythm, and meter in humdrumR</a>
    <a class="dropdown-item" href="../articles/KeysAndChord.html">Diatonic and tertian sets in humdrumR</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Time, rhythm, and meter in humdrumR</h1>
                        <h4 data-toc-skip class="author">Nathaniel
Condit-Schultz</h4>
            
            <h4 data-toc-skip class="date">2023-02-24</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/blob/HEAD/vignettes/RhythmAndMeter.Rmd" class="external-link"><code>vignettes/RhythmAndMeter.Rmd</code></a></small>
      <div class="d-none name"><code>RhythmAndMeter.Rmd</code></div>
    </div>

    
    
<p>As a computational musicology toolkit, humdrum<span class="math inline">\(_{\mathbb{R}}\)</span>’s tools for analyzing and
manipulating pitch data are just about the most important tools in the
toolbox. For the most part, humdrum<span class="math inline">\(_{\mathbb{R}}\)</span>’s pitch tools are focused
on the Western notions of rhythm and meter, but the tools can easily be
generalized to more diverse notions of rhythm and time.</p>
<div class="section level2">
<h2 id="durations">Durations<a class="anchor" aria-label="anchor" href="#durations"></a>
</h2>
<p>The fundamental unit of rhythm is a “duration”—a span of time.
Humdrum<span class="math inline">\(_{\mathbb{R}}\)</span> defines a
suite of rhythm functions, notably <code><a href="../reference/recip.html">recip()</a></code> and
<code><a href="../reference/duration.html">duration()</a></code>. These functions all work in essentially the
same way: they take in an input argument and output rhythm (duration)
information in their own particular format. For example,</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>input <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'4.c'</span>, <span class="st">'8d'</span>, <span class="st">'4e'</span>, <span class="st">'2.g'</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">duration</span>(input)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="er">**</span>duration</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="fl">0.375</span> <span class="fl">0.125</span> <span class="fl">0.250</span> <span class="fl">0.750</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="fu">recip</span>(input)</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="er">**</span>recip</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="fl">4.</span> <span class="dv">8</span>  <span class="dv">4</span>  <span class="fl">2.</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="fu">notehead</span>(input)</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="er">**</span>notehead</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] 𝅘𝅥 𝅭  𝅘𝅥𝅮    𝅘𝅥    𝅗𝅥 𝅭 </span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="fu">quarters</span>(input)</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="er">**</span>quarters</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="fl">1.5</span> <span class="fl">0.5</span> <span class="fl">1.0</span> <span class="fl">3.0</span></span></code></pre></div>
<p>Notice that the functions all recognize the rhythm part of these
input tokens, ignoring the non-rhythm (pitch) information. If you want
to keep the non-rhythm part of your tokens, use the <code>inPlace</code>
argument:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>input <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'4.c'</span>, <span class="st">'8d'</span>, <span class="st">'4e'</span>, <span class="st">'2.g'</span>)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="fu">duration</span>(input, <span class="at">inPlace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="st">"0.375c"</span> <span class="st">"0.125d"</span> <span class="st">"0.25e"</span>  <span class="st">"0.75g"</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="fu">recip</span>(input, <span class="at">inPlace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="st">"4.c"</span> <span class="st">"8d"</span>  <span class="st">"4e"</span>  <span class="st">"2.g"</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="fu">notehead</span>(input, <span class="at">inPlace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="st">"𝅘𝅥 𝅭 c"</span> <span class="st">"𝅘𝅥𝅮 d"</span>   <span class="st">"𝅘𝅥 e"</span>   <span class="st">"𝅗𝅥 𝅭 g"</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="fu">quarters</span>(input, <span class="at">inPlace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="st">"1.5c"</span> <span class="st">"0.5d"</span> <span class="st">"1e"</span>   <span class="st">"3g"</span></span></code></pre></div>
<p>The cool thing is that each of these functions can read any of the
other function’s output. So you can do things like:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">recip</span>(<span class="fl">0.375</span>)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="er">**</span>recip</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="fl">4.</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="fu">quarters</span>(<span class="st">'4.'</span>)</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="er">**</span>quarters</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="fl">1.5</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="fu">quarters</span>(<span class="fl">0.375</span>)</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="er">**</span>quarters</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="fl">1.5</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="fu">recip</span>(<span class="st">"𝅘𝅥 𝅭 "</span>)</span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="er">**</span>recip</span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="fl">4.</span></span></code></pre></div>
<hr>
<p>The complete list of basic pitch functions is:</p>
<ul>
<li>
<strong>Metric duration representations</strong>
<ul>
<li>
<em>Symbolic duration representations</em>
<ul>
<li>
<code>recip</code> (reciprocal note values)</li>
<li>
<code>notehead</code> (traditional note-value symbols)</li>
</ul>
</li>
<li>
<em>Numeric duration representations</em>
<ul>
<li>
<code>duration</code> (Whole notes)</li>
<li>
<code>quarters</code> (quarter notes/crotchets)</li>
</ul>
</li>
</ul>
</li>
<li>
<strong>Ametric duration representations</strong>
<ul>
<li>
<em>Symbolic duration representations</em>
<ul>
<li>
<code>dur</code> (durations of time)</li>
</ul>
</li>
<li>
<em>Numeric duration representations</em>
<ul>
<li><code>seconds</code></li>
<li>
<code>ms</code> (milliseconds)</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="section level5">
<h5 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h5>
<p>The global documentation for <em>all</em> the rhythm functions can be
seen by calling <code><a href="../reference/rhythmFunctions.html">?rhythmFunctions</a></code>. You can also call
documentation for any individual function, like <code><a href="../reference/recip.html">?recip</a></code>.</p>
</div>
<div class="section level4">
<h4 id="rhythm-arguments">Rhythm Arguments<a class="anchor" aria-label="anchor" href="#rhythm-arguments"></a>
</h4>
<p>The rhythm functions from the previous section have a few shared
arguments that they <em>all</em> understand: <code>scale</code> and
<code>parse(unit)</code>.</p>
</div>
<div class="section level4">
<h4 id="scale-and-unit">Scale and Unit<a class="anchor" aria-label="anchor" href="#scale-and-unit"></a>
</h4>
<p>The <code>scale</code> and <code>parse(unit)</code> arguments are
conceptually different, but can be used to acheive very similar
transformations, so it can be easy to confuse them. The
<code>scale</code> argument is the easiest to understand: it simply
(re)scales the output duration of the function. Would you like to <a href="https://en.wikipedia.org/wiki/Augmentation_(music)" class="external-link">augment</a>
durations? Perhaps doubling their length? Simply specify
<code>scale = 2</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">recip</span>(<span class="fu">c</span>(<span class="st">'8'</span>,<span class="st">'4'</span>,<span class="st">'4.'</span>,<span class="st">'2'</span>), <span class="at">scale =</span> <span class="dv">2</span>)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="er">**</span>recip</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="dv">4</span>  <span class="dv">2</span>  <span class="fl">2.</span> <span class="dv">1</span></span></code></pre></div>
<p>Or maybe you’d like <a href="https://en.wikipedia.org/wiki/Diminution" class="external-link">diminish</a> the
durations, by cutting them in thirds?</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">recip</span>(<span class="fu">c</span>(<span class="st">'8'</span>,<span class="st">'4'</span>,<span class="st">'4.'</span>,<span class="st">'2'</span>), <span class="at">scale =</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">3</span>)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="er">**</span>recip</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="dv">24</span> <span class="dv">12</span> <span class="dv">8</span>  <span class="dv">6</span></span></code></pre></div>
<hr>
<p>The <code>unit</code> argument can be passed to the rhythm input
parser by adding and argument <code>parse(unit = ...)</code> to a call.
Rather than transforming the output, this argument controls how the
parser interprets the input unit. This is most useful with numeric
values. I might get a bunch of duration values as numbers, like
<code>c(1, 1.5, 2, 1, 0.5, 1)</code>. But what unit is these numbers
counting? By default, humdrum<span class="math inline">\(_{\mathbb{R}}\)</span> treats them as <em>whole
notes</em>, so <code>0.5</code> is a half note, right? However, we might
prefer to think of these numbers as units of quarter notes—a very common
approach. Let’s look at how our output would change:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>input <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">1.5</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="fl">0.5</span>, <span class="dv">1</span>)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="fu">recip</span>(input)</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="er">**</span>recip</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="dv">1</span>  <span class="fl">1.</span> <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">1</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="fu">recip</span>(input, <span class="fu">parse</span>(<span class="at">unit =</span> <span class="st">'4'</span>))</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="er">**</span>recip</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="dv">4</span>  <span class="fl">4.</span> <span class="dv">2</span>  <span class="dv">4</span>  <span class="dv">8</span>  <span class="dv">4</span></span></code></pre></div>
<p>As you can see, you could achieve the same difference in output using
the <code>scale</code> argument (<code>scale = 1/4</code>), but the
<code>unit</code> argument is a little bit of a different way of
thinking about it.</p>
</div>
<div class="section level3">
<h3 id="special-cases">Special Cases<a class="anchor" aria-label="anchor" href="#special-cases"></a>
</h3>
<div class="section level4">
<h4 id="ioi">IOI<a class="anchor" aria-label="anchor" href="#ioi"></a>
</h4>
<p>In <code>**kern</code> data, some durations correspond to
<em>rests</em> in the music, rather than notes, indicated by an
<code>"r"</code>. In many analyses, we want to ignore rests and just
consider the durations (timespans) between notes, ignoring the presence
of rests. These are called <em>inter-onset-intervals</em>, or IOIs. The
<code><a href="../reference/ioi.html">ioi()</a></code> function can be used to convert duration data that
includes rests, into IOIs. For example:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>melody <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'8g'</span>,<span class="st">'8f#'</span>, <span class="st">'8g'</span>, <span class="st">'8r'</span>, <span class="st">'8g'</span>, <span class="st">'8f#'</span>,<span class="st">'8e'</span>,<span class="st">'8d'</span>, <span class="st">'4d#'</span>, <span class="st">'8r'</span>, <span class="st">'8f#'</span>, <span class="st">'4b'</span>, <span class="st">'4r'</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="fu">ioi</span>(melody)</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="sc">&gt;</span>    Warning<span class="sc">:</span> Passing an environment as data mask is deprecated.</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="sc">&gt;</span>    Please use <span class="st">`</span><span class="at">new_data_mask()</span><span class="st">`</span> to transform your environment to a mask.</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="er">&gt;</span>      env <span class="ot">&lt;-</span> <span class="fu">env</span>(<span class="at">foo =</span> <span class="st">"bar"</span>)</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="er">&gt;</span>      <span class="co"># Bad:</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="er">&gt;</span>      <span class="fu">as_data_mask</span>(env)</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="fu">eval_tidy</span>(expr, env)</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a><span class="er">&gt;</span>      <span class="co"># Good:</span></span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a><span class="er">&gt;</span>      mask <span class="ot">&lt;-</span> <span class="fu">new_data_mask</span>(env)</span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="fu">eval_tidy</span>(expr, mask)</span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a><span class="sc">&gt;</span>     [90mThis warning is displayed once per session. [39m</span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">1</span>] <span class="st">"8g"</span>   <span class="st">"8f#"</span>  <span class="st">"4g"</span>   <span class="st">"."</span>    <span class="st">"8g"</span>   <span class="st">"8f#"</span>  <span class="st">"8e"</span>   <span class="st">"8d"</span>   <span class="st">"4.d#"</span> <span class="st">"."</span>   </span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">11</span>] <span class="st">"8f#"</span>  <span class="cn">NA</span>     <span class="st">"."</span></span></code></pre></div>
<p>What did this do?</p>
<ol style="list-style-type: decimal">
<li>The duration of each rest is append to the duration of the previous
non-rest (if any).</li>
</ol>
<ul>
<li>The first <code>8g</code> becomes a <code>4g</code>
</li>
<li>The <code>4d#</code> becomes <code>4.d#</code>.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Rests are replaced by null tokens (<code>"."</code>).</li>
<li>The last note even is <code>NA</code>, because there is no more
onsets after it to create a inter-<em>onset</em>-interval.</li>
</ol>
<p>The last step here makes conceptual sense, but may not be what you
want! Maybe you’d like the interval between the last onset and the
<em>end</em> of the data? For that, specify
<code>finalOnset = TRUE</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="fu">ioi</span>(melody, <span class="at">finalOnset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">1</span>] <span class="st">"8g"</span>   <span class="st">"8f#"</span>  <span class="st">"4g"</span>   <span class="st">"."</span>    <span class="st">"8g"</span>   <span class="st">"8f#"</span>  <span class="st">"8e"</span>   <span class="st">"8d"</span>   <span class="st">"4.d#"</span> <span class="st">"."</span>   </span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">11</span>] <span class="st">"8f#"</span>  <span class="st">"2b"</span>   <span class="st">"."</span></span></code></pre></div>
<p>When used in a call to <code><a href="../reference/withinHumdrum.html">with()</a></code> or <code><a href="../reference/withinHumdrum.html">within()</a></code>,
<code><a href="../reference/ioi.html">ioi()</a></code> will automatically be applied within
Files/Spines/Paths.</p>
</div>
<div class="section level4">
<h4 id="ties">Ties<a class="anchor" aria-label="anchor" href="#ties"></a>
</h4>
<p>A similar case to inter-onset-intervals are <em>ties</em>. In
<code>**kern</code>, the <code>[</code>, <code>_</code>, and
<code>]</code> tokens are used to indicate groups of durations that are
actually played as a single, longer duration. The <code><a href="../reference/ioi.html">untie()</a></code>
function will automatically sum the durations of tied notes:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>melody <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'[2d'</span>, <span class="st">'8d]'</span>, <span class="st">'8d'</span>, <span class="st">'8f#'</span>, <span class="st">'8g#'</span>, <span class="st">'4.a'</span>, <span class="st">'[8b-'</span>, <span class="st">'2b-_'</span>, <span class="st">'4b-]'</span>, <span class="st">'4a'</span>, <span class="st">'2g#'</span>)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="fu">untie</span>(melody)</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">1</span>] <span class="st">"8%5d"</span>  <span class="st">"."</span>     <span class="st">"8d"</span>    <span class="st">"8f#"</span>   <span class="st">"8g#"</span>   <span class="st">"4.a"</span>   <span class="st">"2..b-"</span> <span class="st">"."</span>     <span class="st">"."</span>    </span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">10</span>] <span class="st">"4a"</span>    <span class="st">"2g#"</span></span></code></pre></div>
<p>The tie tokens are removed, and tied-notes are replaced by null
tokens (<code>"."</code>).</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="timeline">Timeline<a class="anchor" aria-label="anchor" href="#timeline"></a>
</h2>
<p>Traditional musical scores, and most humdrum data, encode rhythmic
information as duration, like what we worked on in the previous section.
However, we often want to think about when musical events are happening,
relative to a fixed reference: usually, relative to the beginning of the
piece. We can compute a <em>timeline</em> from sequences of duration
values, using the <code><a href="../reference/timeline.html">timeline()</a></code> function.</p>
<p>Let’s say we have a melody like:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">row</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'4c'</span>, <span class="st">'4c'</span>, <span class="st">'6c'</span>, <span class="st">'12d'</span>, <span class="st">'4e'</span>, <span class="st">'6e'</span>,<span class="st">'12d'</span>, <span class="st">'6e'</span>, <span class="st">'12f'</span>, <span class="st">'2g'</span>, 
         <span class="st">'12cc'</span>, <span class="st">'12cc'</span>, <span class="st">'12cc'</span>, <span class="st">'12g'</span>, <span class="st">'12g'</span>, <span class="st">'12g'</span>, <span class="st">'12e'</span>, <span class="st">'12e'</span>, <span class="st">'12e'</span>, <span class="st">'12c'</span>, <span class="st">'12c'</span>, <span class="st">'12c'</span>, 
         <span class="st">'6g'</span>,<span class="st">'12f'</span>, <span class="st">'6e'</span>, <span class="st">'12d'</span>,<span class="st">'2c'</span><span class="op">)</span></code></pre></div>
<p>Let’s look at a timeline for that melody:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="fu">timeline</span>(row)</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">1</span>] <span class="fl">0.0000000</span> <span class="fl">0.2500000</span> <span class="fl">0.5000000</span> <span class="fl">0.6666667</span> <span class="fl">0.7500000</span> <span class="fl">1.0000000</span> <span class="fl">1.1666667</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">8</span>] <span class="fl">1.2500000</span> <span class="fl">1.4166667</span> <span class="fl">1.5000000</span> <span class="fl">2.0000000</span> <span class="fl">2.0833333</span> <span class="fl">2.1666667</span> <span class="fl">2.2500000</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">15</span>] <span class="fl">2.3333333</span> <span class="fl">2.4166667</span> <span class="fl">2.5000000</span> <span class="fl">2.5833333</span> <span class="fl">2.6666667</span> <span class="fl">2.7500000</span> <span class="fl">2.8333333</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">22</span>] <span class="fl">2.9166667</span> <span class="fl">3.0000000</span> <span class="fl">3.1666667</span> <span class="fl">3.2500000</span> <span class="fl">3.4166667</span> <span class="fl">3.5000000</span></span></code></pre></div>
<p>The first note (<code>4c</code>) occurs at zero (the beginning) of
the timeline; the last note (<code>2c</code>) lands <code>3.5</code>
whole-notes later; etc. If we combine this with a call to
<code><a href="../reference/semits.html">semits()</a></code> (check out the [Pitch and
Tonality][PitchAndTonality.html] guide) we can even make a plot of the
melody:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/timeline.html">timeline</a></span><span class="op">(</span><span class="va">row</span><span class="op">)</span>,
     y <span class="op">=</span> <span class="fu"><a href="../reference/semits.html">semits</a></span><span class="op">(</span><span class="va">row</span>, Exclusive <span class="op">=</span> <span class="st">'kern'</span><span class="op">)</span>,
     main <span class="op">=</span> <span class="st">'Row Row Row Your Boat'</span><span class="op">)</span></code></pre></div>
<p><img src="RhythmAndMeter_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<hr>
<p>The <code><a href="../reference/timeline.html">timeline()</a></code> function has extra special functionality
when working on actual humdrum datasets using <code><a href="../reference/withinHumdrum.html">with()</a></code> or
<code><a href="../reference/withinHumdrum.html">within()</a></code>. It will automatically (unless told not too)
calculate timelines separately within each File/Spine/Path of a dataset,
ignoring multiple stops. For example:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>chorales <span class="ot">&lt;-</span> <span class="fu">readHumdrum</span>(humdrumRroot, <span class="st">'HumdrumData/BachChorales/chor.*.krn'</span>)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="fu">within</span>(chorales, <span class="fu">timeline</span>(Token))</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# vvv chor001.krn vvv #############################</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of My Heart</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>          <span class="er">**</span>kern        <span class="sc">**</span>kern        <span class="sc">**</span>kern        <span class="sc">**</span>kern</span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>          <span class="er">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox</span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>          <span class="er">*</span>Ibass       <span class="sc">*</span>Itenor        <span class="sc">*</span>Ialto       <span class="sc">*</span>Isoprn</span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>         <span class="er">*</span>I<span class="st">"Bass      *I"</span>Tenor       <span class="sc">*</span>I<span class="st">"Alto    *I"</span>Soprano</span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">12</span><span class="sc">:</span>       <span class="er">*&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]</span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">13</span><span class="sc">:</span>    <span class="er">*&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]</span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">14</span><span class="sc">:</span>             <span class="er">*&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A</span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">15</span><span class="sc">:</span>         <span class="er">*</span>clefF4      <span class="sc">*</span>clefGv2       <span class="sc">*</span>clefG2       <span class="sc">*</span>clefG2</span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">16</span><span class="sc">:</span>          <span class="er">*</span>k[f<span class="co">#]        *k[f#]        *k[f#]        *k[f#]</span></span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">17</span><span class="sc">:</span>             <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span></span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">18</span><span class="sc">:</span>           <span class="er">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb13-23"><a href="#cb13-23" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">19</span><span class="sc">:</span>          <span class="er">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100</span>
<span id="cb13-24"><a href="#cb13-24" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">20</span><span class="sc">:</span>               <span class="dv">0</span>             <span class="dv">0</span>             <span class="dv">0</span>             <span class="dv">0</span></span>
<span id="cb13-25"><a href="#cb13-25" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">21</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span></span>
<span id="cb13-26"><a href="#cb13-26" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">22</span><span class="sc">:</span>            <span class="fl">0.25</span>          <span class="fl">0.25</span>          <span class="fl">0.25</span>          <span class="fl">0.25</span></span>
<span id="cb13-27"><a href="#cb13-27" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">23</span><span class="sc">:</span>             <span class="fl">0.5</span>           <span class="fl">0.5</span>           <span class="fl">0.5</span>             .</span>
<span id="cb13-28"><a href="#cb13-28" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">24</span><span class="sc">:</span>               .         <span class="fl">0.625</span>             .             .</span>
<span id="cb13-29"><a href="#cb13-29" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">25</span><span class="sc">:</span>            <span class="fl">0.75</span>          <span class="fl">0.75</span>          <span class="fl">0.75</span>          <span class="fl">0.75</span></span>
<span id="cb13-30"><a href="#cb13-30" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">26</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span></span>
<span id="cb13-31"><a href="#cb13-31" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">27</span><span class="sc">:</span>               <span class="dv">1</span>             <span class="dv">1</span>             <span class="dv">1</span>             <span class="dv">1</span></span>
<span id="cb13-32"><a href="#cb13-32" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">28</span><span class="sc">:</span>            <span class="fl">1.25</span>          <span class="fl">1.25</span>             .             .</span>
<span id="cb13-33"><a href="#cb13-33" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">29</span><span class="sc">:</span>               .             .             .         <span class="fl">1.375</span></span>
<span id="cb13-34"><a href="#cb13-34" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">30</span><span class="sc">:</span>             <span class="fl">1.5</span>           <span class="fl">1.5</span>           <span class="fl">1.5</span>           <span class="fl">1.5</span></span>
<span id="cb13-35"><a href="#cb13-35" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">31</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span></span>
<span id="cb13-36"><a href="#cb13-36" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">32</span><span class="sc">:</span>            <span class="fl">1.75</span>          <span class="fl">1.75</span>          <span class="fl">1.75</span>          <span class="fl">1.75</span></span>
<span id="cb13-37"><a href="#cb13-37" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">33</span><span class="sc">:</span>               .         <span class="fl">1.875</span>         <span class="fl">1.875</span>             .</span>
<span id="cb13-38"><a href="#cb13-38" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">34</span><span class="sc">:</span>               <span class="dv">2</span>             <span class="dv">2</span>             <span class="dv">2</span>             .</span>
<span id="cb13-39"><a href="#cb13-39" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">35</span><span class="sc">:</span>           <span class="fl">2.125</span>             .         <span class="fl">2.125</span>         <span class="fl">2.125</span></span>
<span id="cb13-40"><a href="#cb13-40" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">36</span><span class="sc">:</span>            <span class="fl">2.25</span>          <span class="fl">2.25</span>          <span class="fl">2.25</span>          <span class="fl">2.25</span></span>
<span id="cb13-41"><a href="#cb13-41" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">37</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span></span>
<span id="cb13-42"><a href="#cb13-42" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">38</span><span class="sc">:</span>             <span class="fl">2.5</span>           <span class="fl">2.5</span>           <span class="fl">2.5</span>           <span class="fl">2.5</span></span>
<span id="cb13-43"><a href="#cb13-43" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">39</span><span class="sc">:</span>               <span class="dv">3</span>             <span class="dv">3</span>             <span class="dv">3</span>             <span class="dv">3</span></span>
<span id="cb13-44"><a href="#cb13-44" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">40</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span></span>
<span id="cb13-45"><a href="#cb13-45" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="dv">41-133</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb13-46"><a href="#cb13-46" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# ^^^ chor001.krn ^^^ #############################</span></span>
<span id="cb13-47"><a href="#cb13-47" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb13-48"><a href="#cb13-48" tabindex="-1"></a><span class="er">&gt;</span>           (<span class="dv">8</span> more files...)</span>
<span id="cb13-49"><a href="#cb13-49" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb13-50"><a href="#cb13-50" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# vvv chor010.krn vvv #############################</span></span>
<span id="cb13-51"><a href="#cb13-51" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">1-60</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb13-52"><a href="#cb13-52" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">61</span><span class="sc">:</span>               <span class="dv">7</span>             <span class="dv">7</span>             <span class="dv">7</span>             <span class="dv">7</span></span>
<span id="cb13-53"><a href="#cb13-53" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">62</span><span class="sc">:</span>             <span class="fl">7.5</span>           <span class="fl">7.5</span>           <span class="fl">7.5</span>           <span class="fl">7.5</span></span>
<span id="cb13-54"><a href="#cb13-54" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">63</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span></span>
<span id="cb13-55"><a href="#cb13-55" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">64</span><span class="sc">:</span>               <span class="dv">8</span>             <span class="dv">8</span>             <span class="dv">8</span>             <span class="dv">8</span></span>
<span id="cb13-56"><a href="#cb13-56" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">65</span><span class="sc">:</span>            <span class="fl">8.25</span>          <span class="fl">8.25</span>          <span class="fl">8.25</span>          <span class="fl">8.25</span></span>
<span id="cb13-57"><a href="#cb13-57" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">66</span><span class="sc">:</span>           <span class="fl">8.375</span>             .             .             .</span>
<span id="cb13-58"><a href="#cb13-58" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">67</span><span class="sc">:</span>             <span class="fl">8.5</span>           <span class="fl">8.5</span>           <span class="fl">8.5</span>           <span class="fl">8.5</span></span>
<span id="cb13-59"><a href="#cb13-59" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">68</span><span class="sc">:</span>               .             .         <span class="fl">8.625</span>             .</span>
<span id="cb13-60"><a href="#cb13-60" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">69</span><span class="sc">:</span>            <span class="fl">8.75</span>          <span class="fl">8.75</span>          <span class="fl">8.75</span>          <span class="fl">8.75</span></span>
<span id="cb13-61"><a href="#cb13-61" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">70</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span></span>
<span id="cb13-62"><a href="#cb13-62" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">71</span><span class="sc">:</span>               <span class="dv">9</span>             <span class="dv">9</span>             <span class="dv">9</span>             <span class="dv">9</span></span>
<span id="cb13-63"><a href="#cb13-63" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">72</span><span class="sc">:</span>               .         <span class="fl">9.125</span>             .             .</span>
<span id="cb13-64"><a href="#cb13-64" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">73</span><span class="sc">:</span>            <span class="fl">9.25</span>             .          <span class="fl">9.25</span>          <span class="fl">9.25</span></span>
<span id="cb13-65"><a href="#cb13-65" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">74</span><span class="sc">:</span>               .         <span class="fl">9.375</span>             .             .</span>
<span id="cb13-66"><a href="#cb13-66" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">75</span><span class="sc">:</span>             <span class="fl">9.5</span>           <span class="fl">9.5</span>           <span class="fl">9.5</span>           <span class="fl">9.5</span></span>
<span id="cb13-67"><a href="#cb13-67" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">76</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span></span>
<span id="cb13-68"><a href="#cb13-68" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">77</span><span class="sc">:</span>              <span class="dv">10</span>            <span class="dv">10</span>            <span class="dv">10</span>            <span class="dv">10</span></span>
<span id="cb13-69"><a href="#cb13-69" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">78</span><span class="sc">:</span>            <span class="fl">10.5</span>          <span class="fl">10.5</span>          <span class="fl">10.5</span>          <span class="fl">10.5</span></span>
<span id="cb13-70"><a href="#cb13-70" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">79</span><span class="sc">:</span>           <span class="fl">10.75</span>         <span class="fl">10.75</span>         <span class="fl">10.75</span>         <span class="fl">10.75</span></span>
<span id="cb13-71"><a href="#cb13-71" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">80</span><span class="sc">:</span>               .             .        <span class="fl">10.875</span>             .</span>
<span id="cb13-72"><a href="#cb13-72" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">81</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span></span>
<span id="cb13-73"><a href="#cb13-73" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">82</span><span class="sc">:</span>              <span class="dv">11</span>            <span class="dv">11</span>            <span class="dv">11</span>            <span class="dv">11</span></span>
<span id="cb13-74"><a href="#cb13-74" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">83</span><span class="sc">:</span>           <span class="fl">11.25</span>         <span class="fl">11.25</span>         <span class="fl">11.25</span>         <span class="fl">11.25</span></span>
<span id="cb13-75"><a href="#cb13-75" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">84</span><span class="sc">:</span>            <span class="fl">11.5</span>          <span class="fl">11.5</span>          <span class="fl">11.5</span>          <span class="fl">11.5</span></span>
<span id="cb13-76"><a href="#cb13-76" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">85</span><span class="sc">:</span>           <span class="fl">11.75</span>         <span class="fl">11.75</span>             .         <span class="fl">11.75</span></span>
<span id="cb13-77"><a href="#cb13-77" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">86</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span></span>
<span id="cb13-78"><a href="#cb13-78" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">87</span><span class="sc">:</span>              <span class="dv">12</span>            <span class="dv">12</span>            <span class="dv">12</span>            <span class="dv">12</span></span>
<span id="cb13-79"><a href="#cb13-79" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">88</span><span class="sc">:</span>           <span class="fl">12.25</span>         <span class="fl">12.25</span>         <span class="fl">12.25</span>             .</span>
<span id="cb13-80"><a href="#cb13-80" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">89</span><span class="sc">:</span>            <span class="fl">12.5</span>          <span class="fl">12.5</span>          <span class="fl">12.5</span>             .</span>
<span id="cb13-81"><a href="#cb13-81" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">90</span><span class="sc">:</span>              <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span></span>
<span id="cb13-82"><a href="#cb13-82" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">91</span><span class="sc">:</span>              <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span></span>
<span id="cb13-83"><a href="#cb13-83" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">92</span><span class="sc">:</span>  <span class="sc">!!!</span>hum2abc<span class="sc">:</span> <span class="sc">-</span>Q <span class="st">''</span></span>
<span id="cb13-84"><a href="#cb13-84" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">93</span><span class="sc">:</span>  <span class="sc">!!!</span>title<span class="sc">:</span> <span class="er">@</span>{PC<span class="co">#}. @{OTL@@DE}</span></span>
<span id="cb13-85"><a href="#cb13-85" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">94</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR1<span class="sc">:</span> <span class="dv">371</span> vierstimmige Choralges<span class="sc">&amp;</span>auml;nge von Johann Sebastian B<span class="sc">**</span><span class="er">*</span></span>
<span id="cb13-86"><a href="#cb13-86" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">95</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> 4th ed. by Alfred D<span class="sc">&amp;</span>ouml;<span class="fu">rffel</span> (Leipzig<span class="sc">:</span> Breitkopf und H<span class="sc">&amp;</span>a<span class="sc">**</span><span class="er">*</span></span>
<span id="cb13-87"><a href="#cb13-87" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">96</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> c<span class="fl">.1875</span>). <span class="dv">178</span> pp. Plate <span class="st">"V.A.10"</span>.  reprint<span class="sc">:</span> J.S. Bach, <span class="dv">371</span> <span class="sc">**</span><span class="er">*</span></span>
<span id="cb13-88"><a href="#cb13-88" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">97</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR4<span class="sc">:</span> <span class="fu">Chorales</span> (New York<span class="sc">:</span> Associated Music Publishers, Inc., c<span class="fl">.1</span><span class="sc">**</span><span class="er">*</span></span>
<span id="cb13-89"><a href="#cb13-89" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">98</span><span class="sc">:</span>  <span class="sc">!!!</span>SMS<span class="sc">:</span> B<span class="sc">&amp;</span>H, 4th ed, Alfred D<span class="sc">&amp;</span>ouml;rffel, c<span class="fl">.1875</span>, plate V.A<span class="fl">.10</span></span>
<span id="cb13-90"><a href="#cb13-90" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">99</span><span class="sc">:</span>  <span class="sc">!!!</span>EED<span class="sc">:</span>  Craig Stuart Sapp</span>
<span id="cb13-91"><a href="#cb13-91" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">100</span><span class="sc">:</span>  <span class="sc">!!!</span>EEV<span class="sc">:</span>  <span class="dv">2009</span><span class="sc">/</span><span class="dv">05</span><span class="sc">/</span><span class="dv">22</span></span>
<span id="cb13-92"><a href="#cb13-92" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# ^^^ chor010.krn ^^^ #############################</span></span>
<span id="cb13-93"><a href="#cb13-93" tabindex="-1"></a><span class="er">&gt;</span>                           (<span class="sc">**</span><span class="er">*</span>four global comments truncated due to screen size<span class="sc">**</span><span class="er">*</span>)</span>
<span id="cb13-94"><a href="#cb13-94" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb13-95"><a href="#cb13-95" tabindex="-1"></a><span class="er">&gt;</span>       humdrumR corpus of ten files.</span>
<span id="cb13-96"><a href="#cb13-96" tabindex="-1"></a><span class="sc">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb13-97"><a href="#cb13-97" tabindex="-1"></a><span class="er">&gt;</span>                Token   <span class="sc">::</span> character</span>
<span id="cb13-98"><a href="#cb13-98" tabindex="-1"></a><span class="sc">&gt;</span>               <span class="er">*</span>Result1 <span class="sc">::</span> numeric</span></code></pre></div>
<div class="section level3">
<h3 id="controlling-the-start">Controlling the Start<a class="anchor" aria-label="anchor" href="#controlling-the-start"></a>
</h3>
<p>You’ll notice that our timelines all start with zero, which makes
sense of course. But in some cases, you might want to have the timeline
start at a different value. For example, “Row Row Row Your Boat” is a
round, so we’d want the second entrance of the round to start at the
second measure. We can do this with the <code>start</code> argument to
timeline:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">timeline</span>(row, <span class="at">start =</span> <span class="dv">2</span>)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">1</span>] <span class="fl">2.000000</span> <span class="fl">2.250000</span> <span class="fl">2.500000</span> <span class="fl">2.666667</span> <span class="fl">2.750000</span> <span class="fl">3.000000</span> <span class="fl">3.166667</span> <span class="fl">3.250000</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">9</span>] <span class="fl">3.416667</span> <span class="fl">3.500000</span> <span class="fl">4.000000</span> <span class="fl">4.083333</span> <span class="fl">4.166667</span> <span class="fl">4.250000</span> <span class="fl">4.333333</span> <span class="fl">4.416667</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">17</span>] <span class="fl">4.500000</span> <span class="fl">4.583333</span> <span class="fl">4.666667</span> <span class="fl">4.750000</span> <span class="fl">4.833333</span> <span class="fl">4.916667</span> <span class="fl">5.000000</span> <span class="fl">5.166667</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">25</span>] <span class="fl">5.250000</span> <span class="fl">5.416667</span> <span class="fl">5.500000</span></span></code></pre></div>
<hr>
<div class="section level4">
<h4 id="pickups">Pickups<a class="anchor" aria-label="anchor" href="#pickups"></a>
</h4>
<p>The <code>pickup</code> argument gives us another option to control
where our timeline starts. In many datasets, the first few events in the
music are a <em>anacrusis</em> or “pick up”; we’d generally like our
timeline to start <em>after</em> the pickup. To make this happen, the
<code>pickup</code> argument can be passed a <code>logical</code> vector
which is the same length as the input (<code>x</code>): Any
<code>TRUE</code> values at the beginning of the vector are considered a
pickup; Thus, the <em>first</em> <code>FALSE</code> value in the
<code>pickup</code> vector is chosen as the start of th timeline. For
example, let’s say we have the melody</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">melody</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'8c'</span>, <span class="st">'8d'</span>,<span class="st">'2e'</span>, <span class="st">'2f'</span>,<span class="st">'1e'</span><span class="op">)</span></code></pre></div>
<p>but the first two notes are a pickup. Since we can see that the
pickup has a duration of <code>.25</code> (quarte-note), we
<em>could</em> use the <code>start</code> argument to do this:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">timeline</span>(melody, <span class="at">start =</span> <span class="sc">-</span>.<span class="dv">25</span>)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="sc">-</span><span class="fl">0.250</span> <span class="sc">-</span><span class="fl">0.125</span>  <span class="fl">0.000</span>  <span class="fl">0.500</span>  <span class="fl">1.000</span></span></code></pre></div>
<p>Now <code>0</code> is on the downbeat, and events before that
<code>start</code> are negative on the timeline!</p>
<p>To do this with the <code>logical</code> <code>pickup</code>
argument, we could do this:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">timeline</span>(melody, <span class="at">pickup =</span> melody <span class="sc">!=</span> <span class="st">'2e'</span>)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="sc">-</span><span class="fl">0.250</span> <span class="sc">-</span><span class="fl">0.125</span>  <span class="fl">0.000</span>  <span class="fl">0.500</span>  <span class="fl">1.000</span></span></code></pre></div>
<p>This might seem <em>less</em> intuitive! However, this approach can
be very useful when working with actual humdrumR datasets. In many
humdrum datasets, pickup measures are indicated by have barlines labeled
<code>=0</code> or <code>=-</code>. When humdrum<span class="math inline">\(_{\mathbb{R}}\)</span> reads a file, it counts the
barlines and creates a field called <code>Bar</code>, and it numbers
pickup measures as zero (or negative numbers, if there are more than
one). This means pickups will have <code>Bar &lt; 1</code>. So, in our
Bach chorales:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="fu">within</span>(chorales, <span class="fu">timeline</span>(Token, <span class="at">pickup =</span> Bar <span class="sc">&lt;</span> <span class="dv">1</span>))</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# vvv chor001.krn vvv #############################</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of My Heart</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>          <span class="er">**</span>kern        <span class="sc">**</span>kern        <span class="sc">**</span>kern        <span class="sc">**</span>kern</span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>          <span class="er">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox</span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>          <span class="er">*</span>Ibass       <span class="sc">*</span>Itenor        <span class="sc">*</span>Ialto       <span class="sc">*</span>Isoprn</span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>         <span class="er">*</span>I<span class="st">"Bass      *I"</span>Tenor       <span class="sc">*</span>I<span class="st">"Alto    *I"</span>Soprano</span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">12</span><span class="sc">:</span>       <span class="er">*&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]</span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">13</span><span class="sc">:</span>    <span class="er">*&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]</span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">14</span><span class="sc">:</span>             <span class="er">*&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A</span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">15</span><span class="sc">:</span>         <span class="er">*</span>clefF4      <span class="sc">*</span>clefGv2       <span class="sc">*</span>clefG2       <span class="sc">*</span>clefG2</span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">16</span><span class="sc">:</span>          <span class="er">*</span>k[f<span class="co">#]        *k[f#]        *k[f#]        *k[f#]</span></span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">17</span><span class="sc">:</span>             <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span></span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">18</span><span class="sc">:</span>           <span class="er">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">19</span><span class="sc">:</span>          <span class="er">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100</span>
<span id="cb18-23"><a href="#cb18-23" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">20</span><span class="sc">:</span>           <span class="sc">-</span><span class="fl">0.25</span>         <span class="sc">-</span><span class="fl">0.25</span>         <span class="sc">-</span><span class="fl">0.25</span>         <span class="sc">-</span><span class="fl">0.25</span></span>
<span id="cb18-24"><a href="#cb18-24" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">21</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span></span>
<span id="cb18-25"><a href="#cb18-25" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">22</span><span class="sc">:</span>               <span class="dv">0</span>             <span class="dv">0</span>             <span class="dv">0</span>             <span class="dv">0</span></span>
<span id="cb18-26"><a href="#cb18-26" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">23</span><span class="sc">:</span>            <span class="fl">0.25</span>          <span class="fl">0.25</span>          <span class="fl">0.25</span>             .</span>
<span id="cb18-27"><a href="#cb18-27" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">24</span><span class="sc">:</span>               .         <span class="fl">0.375</span>             .             .</span>
<span id="cb18-28"><a href="#cb18-28" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">25</span><span class="sc">:</span>             <span class="fl">0.5</span>           <span class="fl">0.5</span>           <span class="fl">0.5</span>           <span class="fl">0.5</span></span>
<span id="cb18-29"><a href="#cb18-29" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">26</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span></span>
<span id="cb18-30"><a href="#cb18-30" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">27</span><span class="sc">:</span>            <span class="fl">0.75</span>          <span class="fl">0.75</span>          <span class="fl">0.75</span>          <span class="fl">0.75</span></span>
<span id="cb18-31"><a href="#cb18-31" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">28</span><span class="sc">:</span>               <span class="dv">1</span>             <span class="dv">1</span>             .             .</span>
<span id="cb18-32"><a href="#cb18-32" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">29</span><span class="sc">:</span>               .             .             .         <span class="fl">1.125</span></span>
<span id="cb18-33"><a href="#cb18-33" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">30</span><span class="sc">:</span>            <span class="fl">1.25</span>          <span class="fl">1.25</span>          <span class="fl">1.25</span>          <span class="fl">1.25</span></span>
<span id="cb18-34"><a href="#cb18-34" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">31</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span></span>
<span id="cb18-35"><a href="#cb18-35" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">32</span><span class="sc">:</span>             <span class="fl">1.5</span>           <span class="fl">1.5</span>           <span class="fl">1.5</span>           <span class="fl">1.5</span></span>
<span id="cb18-36"><a href="#cb18-36" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">33</span><span class="sc">:</span>               .         <span class="fl">1.625</span>         <span class="fl">1.625</span>             .</span>
<span id="cb18-37"><a href="#cb18-37" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">34</span><span class="sc">:</span>            <span class="fl">1.75</span>          <span class="fl">1.75</span>          <span class="fl">1.75</span>             .</span>
<span id="cb18-38"><a href="#cb18-38" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">35</span><span class="sc">:</span>           <span class="fl">1.875</span>             .         <span class="fl">1.875</span>         <span class="fl">1.875</span></span>
<span id="cb18-39"><a href="#cb18-39" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">36</span><span class="sc">:</span>               <span class="dv">2</span>             <span class="dv">2</span>             <span class="dv">2</span>             <span class="dv">2</span></span>
<span id="cb18-40"><a href="#cb18-40" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">37</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span></span>
<span id="cb18-41"><a href="#cb18-41" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">38</span><span class="sc">:</span>            <span class="fl">2.25</span>          <span class="fl">2.25</span>          <span class="fl">2.25</span>          <span class="fl">2.25</span></span>
<span id="cb18-42"><a href="#cb18-42" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">39</span><span class="sc">:</span>            <span class="fl">2.75</span>          <span class="fl">2.75</span>          <span class="fl">2.75</span>          <span class="fl">2.75</span></span>
<span id="cb18-43"><a href="#cb18-43" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">40</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span></span>
<span id="cb18-44"><a href="#cb18-44" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="dv">41-133</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb18-45"><a href="#cb18-45" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# ^^^ chor001.krn ^^^ #############################</span></span>
<span id="cb18-46"><a href="#cb18-46" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb18-47"><a href="#cb18-47" tabindex="-1"></a><span class="er">&gt;</span>           (<span class="dv">8</span> more files...)</span>
<span id="cb18-48"><a href="#cb18-48" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb18-49"><a href="#cb18-49" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# vvv chor010.krn vvv #############################</span></span>
<span id="cb18-50"><a href="#cb18-50" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">1-60</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb18-51"><a href="#cb18-51" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">61</span><span class="sc">:</span>               <span class="dv">7</span>             <span class="dv">7</span>             <span class="dv">7</span>             <span class="dv">7</span></span>
<span id="cb18-52"><a href="#cb18-52" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">62</span><span class="sc">:</span>             <span class="fl">7.5</span>           <span class="fl">7.5</span>           <span class="fl">7.5</span>           <span class="fl">7.5</span></span>
<span id="cb18-53"><a href="#cb18-53" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">63</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span></span>
<span id="cb18-54"><a href="#cb18-54" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">64</span><span class="sc">:</span>               <span class="dv">8</span>             <span class="dv">8</span>             <span class="dv">8</span>             <span class="dv">8</span></span>
<span id="cb18-55"><a href="#cb18-55" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">65</span><span class="sc">:</span>            <span class="fl">8.25</span>          <span class="fl">8.25</span>          <span class="fl">8.25</span>          <span class="fl">8.25</span></span>
<span id="cb18-56"><a href="#cb18-56" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">66</span><span class="sc">:</span>           <span class="fl">8.375</span>             .             .             .</span>
<span id="cb18-57"><a href="#cb18-57" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">67</span><span class="sc">:</span>             <span class="fl">8.5</span>           <span class="fl">8.5</span>           <span class="fl">8.5</span>           <span class="fl">8.5</span></span>
<span id="cb18-58"><a href="#cb18-58" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">68</span><span class="sc">:</span>               .             .         <span class="fl">8.625</span>             .</span>
<span id="cb18-59"><a href="#cb18-59" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">69</span><span class="sc">:</span>            <span class="fl">8.75</span>          <span class="fl">8.75</span>          <span class="fl">8.75</span>          <span class="fl">8.75</span></span>
<span id="cb18-60"><a href="#cb18-60" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">70</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span></span>
<span id="cb18-61"><a href="#cb18-61" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">71</span><span class="sc">:</span>               <span class="dv">9</span>             <span class="dv">9</span>             <span class="dv">9</span>             <span class="dv">9</span></span>
<span id="cb18-62"><a href="#cb18-62" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">72</span><span class="sc">:</span>               .         <span class="fl">9.125</span>             .             .</span>
<span id="cb18-63"><a href="#cb18-63" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">73</span><span class="sc">:</span>            <span class="fl">9.25</span>             .          <span class="fl">9.25</span>          <span class="fl">9.25</span></span>
<span id="cb18-64"><a href="#cb18-64" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">74</span><span class="sc">:</span>               .         <span class="fl">9.375</span>             .             .</span>
<span id="cb18-65"><a href="#cb18-65" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">75</span><span class="sc">:</span>             <span class="fl">9.5</span>           <span class="fl">9.5</span>           <span class="fl">9.5</span>           <span class="fl">9.5</span></span>
<span id="cb18-66"><a href="#cb18-66" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">76</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span></span>
<span id="cb18-67"><a href="#cb18-67" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">77</span><span class="sc">:</span>              <span class="dv">10</span>            <span class="dv">10</span>            <span class="dv">10</span>            <span class="dv">10</span></span>
<span id="cb18-68"><a href="#cb18-68" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">78</span><span class="sc">:</span>            <span class="fl">10.5</span>          <span class="fl">10.5</span>          <span class="fl">10.5</span>          <span class="fl">10.5</span></span>
<span id="cb18-69"><a href="#cb18-69" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">79</span><span class="sc">:</span>           <span class="fl">10.75</span>         <span class="fl">10.75</span>         <span class="fl">10.75</span>         <span class="fl">10.75</span></span>
<span id="cb18-70"><a href="#cb18-70" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">80</span><span class="sc">:</span>               .             .        <span class="fl">10.875</span>             .</span>
<span id="cb18-71"><a href="#cb18-71" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">81</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span></span>
<span id="cb18-72"><a href="#cb18-72" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">82</span><span class="sc">:</span>              <span class="dv">11</span>            <span class="dv">11</span>            <span class="dv">11</span>            <span class="dv">11</span></span>
<span id="cb18-73"><a href="#cb18-73" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">83</span><span class="sc">:</span>           <span class="fl">11.25</span>         <span class="fl">11.25</span>         <span class="fl">11.25</span>         <span class="fl">11.25</span></span>
<span id="cb18-74"><a href="#cb18-74" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">84</span><span class="sc">:</span>            <span class="fl">11.5</span>          <span class="fl">11.5</span>          <span class="fl">11.5</span>          <span class="fl">11.5</span></span>
<span id="cb18-75"><a href="#cb18-75" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">85</span><span class="sc">:</span>           <span class="fl">11.75</span>         <span class="fl">11.75</span>             .         <span class="fl">11.75</span></span>
<span id="cb18-76"><a href="#cb18-76" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">86</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span></span>
<span id="cb18-77"><a href="#cb18-77" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">87</span><span class="sc">:</span>              <span class="dv">12</span>            <span class="dv">12</span>            <span class="dv">12</span>            <span class="dv">12</span></span>
<span id="cb18-78"><a href="#cb18-78" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">88</span><span class="sc">:</span>           <span class="fl">12.25</span>         <span class="fl">12.25</span>         <span class="fl">12.25</span>             .</span>
<span id="cb18-79"><a href="#cb18-79" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">89</span><span class="sc">:</span>            <span class="fl">12.5</span>          <span class="fl">12.5</span>          <span class="fl">12.5</span>             .</span>
<span id="cb18-80"><a href="#cb18-80" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">90</span><span class="sc">:</span>              <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span></span>
<span id="cb18-81"><a href="#cb18-81" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">91</span><span class="sc">:</span>              <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span></span>
<span id="cb18-82"><a href="#cb18-82" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">92</span><span class="sc">:</span>  <span class="sc">!!!</span>hum2abc<span class="sc">:</span> <span class="sc">-</span>Q <span class="st">''</span></span>
<span id="cb18-83"><a href="#cb18-83" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">93</span><span class="sc">:</span>  <span class="sc">!!!</span>title<span class="sc">:</span> <span class="er">@</span>{PC<span class="co">#}. @{OTL@@DE}</span></span>
<span id="cb18-84"><a href="#cb18-84" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">94</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR1<span class="sc">:</span> <span class="dv">371</span> vierstimmige Choralges<span class="sc">&amp;</span>auml;nge von Johann Sebastian B<span class="sc">**</span><span class="er">*</span></span>
<span id="cb18-85"><a href="#cb18-85" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">95</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> 4th ed. by Alfred D<span class="sc">&amp;</span>ouml;<span class="fu">rffel</span> (Leipzig<span class="sc">:</span> Breitkopf und H<span class="sc">&amp;</span>a<span class="sc">**</span><span class="er">*</span></span>
<span id="cb18-86"><a href="#cb18-86" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">96</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> c<span class="fl">.1875</span>). <span class="dv">178</span> pp. Plate <span class="st">"V.A.10"</span>.  reprint<span class="sc">:</span> J.S. Bach, <span class="dv">371</span> <span class="sc">**</span><span class="er">*</span></span>
<span id="cb18-87"><a href="#cb18-87" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">97</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR4<span class="sc">:</span> <span class="fu">Chorales</span> (New York<span class="sc">:</span> Associated Music Publishers, Inc., c<span class="fl">.1</span><span class="sc">**</span><span class="er">*</span></span>
<span id="cb18-88"><a href="#cb18-88" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">98</span><span class="sc">:</span>  <span class="sc">!!!</span>SMS<span class="sc">:</span> B<span class="sc">&amp;</span>H, 4th ed, Alfred D<span class="sc">&amp;</span>ouml;rffel, c<span class="fl">.1875</span>, plate V.A<span class="fl">.10</span></span>
<span id="cb18-89"><a href="#cb18-89" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">99</span><span class="sc">:</span>  <span class="sc">!!!</span>EED<span class="sc">:</span>  Craig Stuart Sapp</span>
<span id="cb18-90"><a href="#cb18-90" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">100</span><span class="sc">:</span>  <span class="sc">!!!</span>EEV<span class="sc">:</span>  <span class="dv">2009</span><span class="sc">/</span><span class="dv">05</span><span class="sc">/</span><span class="dv">22</span></span>
<span id="cb18-91"><a href="#cb18-91" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# ^^^ chor010.krn ^^^ #############################</span></span>
<span id="cb18-92"><a href="#cb18-92" tabindex="-1"></a><span class="er">&gt;</span>                           (<span class="sc">**</span><span class="er">*</span>four global comments truncated due to screen size<span class="sc">**</span><span class="er">*</span>)</span>
<span id="cb18-93"><a href="#cb18-93" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb18-94"><a href="#cb18-94" tabindex="-1"></a><span class="er">&gt;</span>       humdrumR corpus of ten files.</span>
<span id="cb18-95"><a href="#cb18-95" tabindex="-1"></a><span class="sc">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb18-96"><a href="#cb18-96" tabindex="-1"></a><span class="er">&gt;</span>                Token   <span class="sc">::</span> character</span>
<span id="cb18-97"><a href="#cb18-97" tabindex="-1"></a><span class="sc">&gt;</span>               <span class="er">*</span>Result1 <span class="sc">::</span> numeric</span></code></pre></div>
<p>Now the <code>0</code> in our timelines corresponds to the first
downbeat of each spine, in each file. The key advantage is that this
will work even if different pieces in the corpus have pickups of
different lengths, even if there is <em>no</em> pickup.</p>
</div>
<div class="section level4">
<h4 id="timestamp">Timestamp<a class="anchor" aria-label="anchor" href="#timestamp"></a>
</h4>
<p>The <code><a href="../reference/timeline.html">timestamp()</a></code> function is a special variant of
<code><a href="../reference/timeline.html">timeline()</a></code> which outputs a timeline in clock-time, using
the <code><a href="../reference/time.html">dur()</a></code> format. In order to do this
<code><a href="../reference/timeline.html">timestamp()</a></code> needs to know a tempo: by default,
<code><a href="../reference/withinHumdrum.html">with()</a></code> and <code><a href="../reference/withinHumdrum.html">within()</a></code> will pass the
<code>BPM</code> field from humdrum data (if there is one) to
<code><a href="../reference/timeline.html">timestamp()</a></code>. If the <code>BPM</code> argument is not
provided, the default is 60 bpm.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="counting-beats">Counting Beats<a class="anchor" aria-label="anchor" href="#counting-beats"></a>
</h2>
<p>Ok, the <code><a href="../reference/timeline.html">timeline()</a></code> gives us a timeline in whole-note
units, giving fractional (decimal) output. Often in music, we want to
know how many <em>beats</em> have ellapsed at a given time, rather than
the exact time position. For this, use the <code><a href="../reference/count.html">count()</a></code>, and its
<code>beat</code> argument. The default <code>beat</code> is a
whole-note, so <code><a href="../reference/count.html">count()</a></code> will count which whole note you are
on:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="fu">count</span>(row)</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span></span></code></pre></div>
<p>Let’s try quarter-notes instead:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="fu">count</span>(row, <span class="at">beat =</span> <span class="st">'4'</span>)</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">1</span>]  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">3</span>  <span class="dv">3</span>  <span class="dv">4</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">6</span>  <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">9</span>  <span class="dv">9</span>  <span class="dv">9</span> <span class="dv">10</span> <span class="dv">10</span> <span class="dv">10</span> <span class="dv">11</span> <span class="dv">11</span> <span class="dv">11</span> <span class="dv">12</span> <span class="dv">12</span> <span class="dv">12</span> <span class="dv">13</span> <span class="dv">13</span> <span class="dv">14</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">26</span>] <span class="dv">14</span> <span class="dv">15</span></span></code></pre></div>
<p><code><a href="../reference/count.html">count()</a></code> will even work for irregular beat patterns,
which must be entered as a list. For example, the meter 7/8 is often
played as three beats, with the last beat being longer than the first
two: a pattern line <code>4 4 4.</code>. <code><a href="../reference/count.html">count()</a></code> can count
these irregular beats!</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>seven8 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'4'</span>, <span class="st">'4'</span>, <span class="st">'8'</span>,<span class="st">'8'</span>,<span class="st">'8'</span>,<span class="st">'4'</span>,<span class="st">'4'</span>,<span class="st">'4'</span>,<span class="st">'8'</span>,<span class="st">'4'</span>,<span class="st">'4'</span>,<span class="st">'8'</span>,<span class="st">'8'</span>, <span class="st">'8'</span>, <span class="st">'4'</span>)</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="fu">count</span>(seven8, <span class="at">beat =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">'4'</span>, <span class="st">'4'</span>, <span class="st">'4.'</span>)))</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">1</span>]  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">3</span>  <span class="dv">3</span>  <span class="dv">3</span>  <span class="dv">4</span>  <span class="dv">5</span>  <span class="dv">6</span>  <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">8</span>  <span class="dv">9</span>  <span class="dv">9</span>  <span class="dv">9</span> <span class="dv">10</span></span></code></pre></div>
<p>This could be handy for counting subdivisions in swing time!</p>
<div class="section level4">
<h4 id="subposition">Subposition<a class="anchor" aria-label="anchor" href="#subposition"></a>
</h4>
<p>The counterpart to <code><a href="../reference/count.html">count()</a></code> is <code><a href="../reference/count.html">subpos()</a></code>.
When we count beats, some notes don’t actually land <em>on</em> the
beat, but somewhere “inside” the beat—in other words, between beats.
<code><a href="../reference/count.html">subpos()</a></code> will tell us how far from the beat each attack is;
the unit will be whole-notes, unless we pass a <code>scale</code>
argument to change the scale. Let’s look at our last few examples again,
but using <code><a href="../reference/count.html">subpos()</a></code>:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="fu">subpos</span>(row, <span class="at">scale =</span> <span class="dv">12</span>)</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="er">**</span>duration</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">1</span>]  <span class="dv">0</span>  <span class="dv">3</span>  <span class="dv">6</span>  <span class="dv">8</span>  <span class="dv">9</span>  <span class="dv">0</span>  <span class="dv">2</span>  <span class="dv">3</span>  <span class="dv">5</span>  <span class="dv">6</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">3</span>  <span class="dv">4</span>  <span class="dv">5</span>  <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">8</span>  <span class="dv">9</span> <span class="dv">10</span> <span class="dv">11</span>  <span class="dv">0</span>  <span class="dv">2</span>  <span class="dv">3</span></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">26</span>]  <span class="dv">5</span>  <span class="dv">6</span></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="fu">subpos</span>(row, <span class="at">beat =</span> <span class="st">'4'</span>, <span class="at">scale =</span> <span class="dv">12</span>)</span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="er">**</span>duration</span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">1</span>] <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">2</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">2</span> <span class="dv">0</span> <span class="dv">2</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">0</span> <span class="dv">2</span> <span class="dv">0</span> <span class="dv">2</span> <span class="dv">0</span></span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a></span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a><span class="fu">subpos</span>(seven8, <span class="at">beat =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">'4'</span>, <span class="st">'4'</span>, <span class="st">'4.'</span>)), <span class="at">scale =</span> <span class="dv">8</span>)</span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="er">**</span>duration</span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">1</span>] <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">2</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">0</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="meter">Meter<a class="anchor" aria-label="anchor" href="#meter"></a>
</h2>
<p>The <code><a href="../reference/count.html">count()</a></code> and <code><a href="../reference/count.html">subpos()</a></code> commands are great
if we want count in a single beat/measure unit. To take things to the
next level(s), we need to consider musical <em>meter</em>. From the
point of view of humdrum<span class="math inline">\(_{\mathbb{R}}\)</span>, “meter” is a set of
multiple “beat levels” occuring at the same time, with “lower”
(faster/shorter) levels nested inside “higher” (slower/longer) levels.
<code>R Hm</code> defines a number of useful tools for applying metric
analyses to rhythmic data.</p>
<div class="section level3">
<h3 id="metric-levels">Metric levels<a class="anchor" aria-label="anchor" href="#metric-levels"></a>
</h3>
<p>The first thing we might want to do, is take a sequence of rhythm
durations, and identify which metric level each onset lands on. To do
this, use <code><a href="../reference/metlev.html">metlev()</a></code>:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>eighths <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'8'</span>, <span class="st">'8'</span>, <span class="st">'8'</span>, <span class="st">'8'</span>, <span class="st">'8'</span>, <span class="st">'8'</span>, <span class="st">'8'</span>, <span class="st">'8'</span>)</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="fu">metlev</span>(eighths)</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="st">"1"</span> <span class="st">"8"</span> <span class="st">"4"</span> <span class="st">"8"</span> <span class="st">"2"</span> <span class="st">"8"</span> <span class="st">"4"</span> <span class="st">"8"</span></span></code></pre></div>
<p>By default, <code><a href="../reference/metlev.html">metlev()</a></code> is assuming a duple meter for
us—basically 4/4 time—so these eight eighth-notes make one measure of
4/4. The first onset lands on the downbeat, coinciding with the highest
level in the meter (as defined by default)—this highest level beat is a
whole-note, which is why the output is <code>"1"</code> ([recip()]
notation for a whole-note). Every odd eighth-note falls down at the
eigth-note beat level, and is labeled <code>"8"</code>. 4/4 beats 2 and
4 (the back beats) fall on the quarter-note level, and labeled
<code>"4"</code>. Finally, beat 3 is on the half-note level
(<code>"2"</code>).</p>
<p>If you prefer to have your levels simply numbered from highest to
lowest, use <code>metlev(..., value = FALSE)</code>:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>eighths <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'8'</span>, <span class="st">'8'</span>, <span class="st">'8'</span>, <span class="st">'8'</span>, <span class="st">'8'</span>, <span class="st">'8'</span>, <span class="st">'8'</span>, <span class="st">'8'</span>)</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="fu">metlev</span>(eighths, <span class="at">value =</span> <span class="cn">FALSE</span>)</span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">4</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">2</span> <span class="dv">4</span> <span class="dv">3</span> <span class="dv">4</span></span></code></pre></div>
<p>The whole-note level is <code>1</code> and (in this case) the
eighth-note level is <code>4</code>.</p>
</div>
<div class="section level3">
<h3 id="controlling-meter">Controlling meter<a class="anchor" aria-label="anchor" href="#controlling-meter"></a>
</h3>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Nathaniel Condit-Schultz, Claire Arthur.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
