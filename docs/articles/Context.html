<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="humdrumR">
<title>Contextualizing data • humdrumR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Contextualizing data">
<meta property="og:description" content="humdrumR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">humdrumR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.2.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Basics</h6>
    <a class="dropdown-item" href="../articles/GettingStarted.html">Getting started with humdrumR</a>
    <a class="dropdown-item" href="../articles/IntroForCoders.html">HumdrumR for coders</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>R/Humdrum background</h6>
    <a class="dropdown-item" href="../articles/HumdrumSyntax.html">The humdrum syntax</a>
    <a class="dropdown-item" href="../articles/RPrimer.html">An R primer for humdrumR users</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Data prep</h6>
    <a class="dropdown-item" href="../articles/ReadWrite.html">Reading and writing data</a>
    <a class="dropdown-item" href="../articles/Reshaping.html">Shaping humdrum data</a>
    <a class="dropdown-item" href="../articles/Filtering.html">Filtering humdrum data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Analysis</h6>
    <a class="dropdown-item" href="../articles/Summary.html">Getting to know your data</a>
    <a class="dropdown-item" href="../articles/WorkingWithData.html">Working with humdrum data</a>
    <a class="dropdown-item" href="../articles/Context.html">Contextualizing data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Musical tools</h6>
    <a class="dropdown-item" href="../articles/PitchAndTonality.html">Pitch and tonality in humdrumR</a>
    <a class="dropdown-item" href="../articles/RhythmAndMeter.html">Time, rhythm, and meter in humdrumR</a>
    <a class="dropdown-item" href="../articles/KeysAndChord.html">Diatonic and tertian sets in humdrumR</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Contextualizing data</h1>
                        <h4 data-toc-skip class="author">Nathaniel
Condit-Schultz</h4>
            
            <h4 data-toc-skip class="date">July 2022</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Computational-Cognitive-Musicology-Lab/humdrumR/blob/HEAD/vignettes/Context.Rmd" class="external-link"><code>vignettes/Context.Rmd</code></a></small>
      <div class="d-none name"><code>Context.Rmd</code></div>
    </div>

    
    
<p>When analyzing musical data, we often treat each and every data token
as a separate, independent “data point.” However, in many cases, we want
to consider data points <em>in context</em>—what other data points are
nearby in the data? Since the <a href="HumdrumSyntax.html">humdrum
syntax</a> encodes data in temporal order, the “context” usually means
either “what is happening before or after this data point?” or “what
else is happening at the same time as this this data point?”
Humdrum<span class="math inline">\(_{\mathbb{R}}\)</span> provides a
number of ways of analyzing data “in context.”</p>
<div class="section level2">
<h2 id="groupby">Groupby<a class="anchor" aria-label="anchor" href="#groupby"></a>
</h2>
<p>The most conventionally “R-style” way to look at data context is
using R/humdrum<span class="math inline">\(_{\mathbb{R}}\)</span>’s
various “group by” options. This functionality is described elsewhere,
for example in the <a href="WorkingWithData.html">Working With Data</a>
article, and in the <code><a href="../reference/withinHumdrum.html">within.humdrumR()</a></code> man page. Group-by
functionality isn’t necessarily connected to temporal context: you can,
for instance, group together all the data from each instrument in an
ensemble, across all songs in a dataset—this is useful, but
non-temporal-context. If you want to use <code>groupby</code> to get
more temporal context, here are a few good options:</p>
<div class="section level4">
<h4 id="group-by-record">Group by Record<a class="anchor" aria-label="anchor" href="#group-by-record"></a>
</h4>
<p>All humdrum<span class="math inline">\(_{\mathbb{R}}\)</span> data
has a <code>Record</code> field, indicating data points that occur at
the same time. Using <code><a href="../reference/withinHumdrum.html">within.humdrumR()</a></code>’s
<code>groupby</code> argument, we can perform calculations grouped by
record.</p>
<p>Let’s load our trusty Bach-chorale data:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chorales</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readHumdrum.html">readHumdrum</a></span><span class="op">(</span><span class="va">humdrumRroot</span>, <span class="st">'HumdrumData/BachChorales/.*krn'</span><span class="op">)</span></span></code></pre></div>
<p>Let’s count how many new note onsets (not rests) occur on each record
of the data, and tabulate the results. We’ll look for tokens that
<em>don’t</em> contain an <code>r</code> (for rest), using a
regular-expression match <code>%~% 'r'</code> and the negating bang
(<code>!</code>).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">with</span>(chorales, <span class="fu">sum</span>(<span class="sc">!</span>Token <span class="sc">%~%</span> <span class="st">'r'</span>), <span class="at">by =</span> <span class="fu">list</span>(File, Record)) <span class="sc">|&gt;</span> <span class="fu">table</span>()</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">0</span>   <span class="dv">1</span>   <span class="dv">2</span>   <span class="dv">3</span>   <span class="dv">4</span> </span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">1</span> <span class="dv">211</span>  <span class="dv">89</span>  <span class="dv">64</span> <span class="dv">462</span></span></code></pre></div>
<p>Most records have new notes in all four voices—Not surprising for
choral music—with <em>one</em> onset being the next most common case.
Note that we include <code>File</code> in our groupby argument (e.g.,
<code>by = list(File, Record)</code>). Why? Because each piece/file in
the data set repeats the same record numbers—you wouldn’t want to count
the 17th record from the 3rd chorale together with the 17th record from
the 7th chorale, for example.</p>
</div>
<div class="section level4">
<h4 id="group-by-bar">Group by Bar<a class="anchor" aria-label="anchor" href="#group-by-bar"></a>
</h4>
<p>Most humdrum data includes bar lines, indicated by <code>=</code>.
When humdrum<span class="math inline">\(_{\mathbb{R}}\)</span> reads
data (<code>?readHumdrumR</code>) data, it will look at these barlines,
count them in each file, and put that count into a field called
<code>Bar</code> (<code><a href="../reference/humTable.html">?fields</a></code>). You can then use this data to
group data by bar. Remember, that if your data set has no <code>=</code>
tokens, the <code>Bar</code> field will be nothing but useless
<code>0</code>s.</p>
<p>What if we wanted to know what the lowest note in each bar of the
music is. Let’s first extract <code><a href="../reference/semits.html">semits()</a></code> data, so it is easy
to get the lowest value:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/withinHumdrum.html">within</a></span><span class="op">(</span><span class="va">chorales</span>, </span>
<span>       <span class="fu"><a href="../reference/semits.html">semits</a></span><span class="op">(</span><span class="va">Token</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Semits</span>, </span>
<span>       <span class="fu"><a href="../reference/kern.html">kern</a></span><span class="op">(</span><span class="va">Token</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Kern</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">chorales</span></span></code></pre></div>
<p>We can now group within bars, get the minimum, an tabulate them.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">with</span>(chorales, Kern[<span class="fu">which.min</span>(Semits)], <span class="at">by =</span> <span class="fu">list</span>(File, Bar)) <span class="sc">|&gt;</span> <span class="fu">table</span>()</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="er">&gt;</span>     CC CC<span class="co">#  DD DD# EE-  EE EE#  FF FF#  GG GG# AA-  AA AA# BB-  BB   C  C#   D  D# </span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">1</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">6</span>   <span class="dv">0</span>   <span class="dv">9</span>   <span class="dv">3</span>  <span class="dv">21</span>   <span class="dv">1</span>   <span class="dv">3</span>  <span class="dv">23</span>   <span class="dv">0</span>   <span class="dv">7</span>  <span class="dv">23</span>   <span class="dv">9</span>  <span class="dv">15</span>  <span class="dv">19</span>   <span class="dv">2</span> </span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="sc">&gt;</span>     E<span class="sc">-</span>   E  E<span class="co">#   F  F#   G  G#  A-   A  A#  B-   B   c  c#   d  d#  e-   e  e#   f </span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">1</span>  <span class="dv">17</span>   <span class="dv">1</span>   <span class="dv">1</span>   <span class="dv">5</span>   <span class="dv">4</span>   <span class="dv">1</span>   <span class="dv">0</span>   <span class="dv">4</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span> </span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="sc">&gt;</span>     f<span class="co">#   g  g#  a-   a  a#  b-   b  cc cc#  dd dd# ee-  ee ee#  ff ff#  gg gg# aa- </span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span> </span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="sc">&gt;</span>     aa aa<span class="co"># bb-  bb </span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span></span></code></pre></div>
<p>The highest lowest-note-in-bar is <code>A</code>.</p>
<hr>
<p>For further analysis, we might want to save the lowest-note into a
new field. Let’s use <code>within.humdrumR</code>’s <code>fill =</code>
option to duplicate the low note throughout the bar:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">within</span>(chorales, <span class="at">fill =</span> <span class="fu">min</span>(Semits) <span class="ot">-&gt;</span> Lowest, <span class="at">by =</span> <span class="fu">list</span>(File, Bar)) <span class="ot">-&gt;</span> chorales</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>chorales</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# vvv chor001.krn vvv #############################</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of My Heart</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>        <span class="er">**</span>semits      <span class="sc">**</span>semits      <span class="sc">**</span>semits      <span class="sc">**</span>semits</span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>          <span class="er">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox</span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>          <span class="er">*</span>Ibass       <span class="sc">*</span>Itenor        <span class="sc">*</span>Ialto       <span class="sc">*</span>Isoprn</span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>         <span class="er">*</span>I<span class="st">"Bass      *I"</span>Tenor       <span class="sc">*</span>I<span class="st">"Alto    *I"</span>Soprano</span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">12</span><span class="sc">:</span>       <span class="er">*&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]</span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">13</span><span class="sc">:</span>    <span class="er">*&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]</span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">14</span><span class="sc">:</span>             <span class="er">*&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A</span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">15</span><span class="sc">:</span>         <span class="er">*</span>clefF4      <span class="sc">*</span>clefGv2       <span class="sc">*</span>clefG2       <span class="sc">*</span>clefG2</span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">16</span><span class="sc">:</span>          <span class="er">*</span>k[f<span class="co">#]        *k[f#]        *k[f#]        *k[f#]</span></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">17</span><span class="sc">:</span>             <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">18</span><span class="sc">:</span>           <span class="er">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">19</span><span class="sc">:</span>          <span class="er">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100</span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">20</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span></span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">21</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span></span>
<span id="cb5-27"><a href="#cb5-27" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">22</span><span class="sc">:</span>              <span class="sc">-</span><span class="dv">8</span>            <span class="sc">-</span><span class="dv">8</span>            <span class="sc">-</span><span class="dv">8</span>            <span class="sc">-</span><span class="dv">8</span></span>
<span id="cb5-28"><a href="#cb5-28" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">23</span><span class="sc">:</span>              <span class="sc">-</span><span class="dv">8</span>            <span class="sc">-</span><span class="dv">8</span>            <span class="sc">-</span><span class="dv">8</span>             .</span>
<span id="cb5-29"><a href="#cb5-29" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">24</span><span class="sc">:</span>               .            <span class="sc">-</span><span class="dv">8</span>             .             .</span>
<span id="cb5-30"><a href="#cb5-30" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">25</span><span class="sc">:</span>              <span class="sc">-</span><span class="dv">8</span>            <span class="sc">-</span><span class="dv">8</span>            <span class="sc">-</span><span class="dv">8</span>            <span class="sc">-</span><span class="dv">8</span></span>
<span id="cb5-31"><a href="#cb5-31" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">26</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span></span>
<span id="cb5-32"><a href="#cb5-32" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">27</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">10</span>           <span class="sc">-</span><span class="dv">10</span>           <span class="sc">-</span><span class="dv">10</span>           <span class="sc">-</span><span class="dv">10</span></span>
<span id="cb5-33"><a href="#cb5-33" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">28</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">10</span>           <span class="sc">-</span><span class="dv">10</span>             .             .</span>
<span id="cb5-34"><a href="#cb5-34" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">29</span><span class="sc">:</span>               .             .             .           <span class="sc">-</span><span class="dv">10</span></span>
<span id="cb5-35"><a href="#cb5-35" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">30</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">10</span>           <span class="sc">-</span><span class="dv">10</span>           <span class="sc">-</span><span class="dv">10</span>           <span class="sc">-</span><span class="dv">10</span></span>
<span id="cb5-36"><a href="#cb5-36" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">31</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span></span>
<span id="cb5-37"><a href="#cb5-37" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">32</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span></span>
<span id="cb5-38"><a href="#cb5-38" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">33</span><span class="sc">:</span>               .           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>             .</span>
<span id="cb5-39"><a href="#cb5-39" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">34</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>             .</span>
<span id="cb5-40"><a href="#cb5-40" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">35</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">17</span>             .           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span></span>
<span id="cb5-41"><a href="#cb5-41" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">36</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span></span>
<span id="cb5-42"><a href="#cb5-42" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">37</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span></span>
<span id="cb5-43"><a href="#cb5-43" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">38</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span></span>
<span id="cb5-44"><a href="#cb5-44" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">39</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span></span>
<span id="cb5-45"><a href="#cb5-45" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">40</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span></span>
<span id="cb5-46"><a href="#cb5-46" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="dv">41-133</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb5-47"><a href="#cb5-47" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# ^^^ chor001.krn ^^^ #############################</span></span>
<span id="cb5-48"><a href="#cb5-48" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb5-49"><a href="#cb5-49" tabindex="-1"></a><span class="er">&gt;</span>           (<span class="dv">8</span> more pieces...)</span>
<span id="cb5-50"><a href="#cb5-50" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb5-51"><a href="#cb5-51" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# vvv chor010.krn vvv #############################</span></span>
<span id="cb5-52"><a href="#cb5-52" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">1-60</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb5-53"><a href="#cb5-53" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">61</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span></span>
<span id="cb5-54"><a href="#cb5-54" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">62</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span></span>
<span id="cb5-55"><a href="#cb5-55" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">63</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span></span>
<span id="cb5-56"><a href="#cb5-56" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">64</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">13</span>           <span class="sc">-</span><span class="dv">13</span>           <span class="sc">-</span><span class="dv">13</span>           <span class="sc">-</span><span class="dv">13</span></span>
<span id="cb5-57"><a href="#cb5-57" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">65</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">13</span>           <span class="sc">-</span><span class="dv">13</span>           <span class="sc">-</span><span class="dv">13</span>           <span class="sc">-</span><span class="dv">13</span></span>
<span id="cb5-58"><a href="#cb5-58" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">66</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">13</span>             .             .             .</span>
<span id="cb5-59"><a href="#cb5-59" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">67</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">13</span>           <span class="sc">-</span><span class="dv">13</span>           <span class="sc">-</span><span class="dv">13</span>           <span class="sc">-</span><span class="dv">13</span></span>
<span id="cb5-60"><a href="#cb5-60" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">68</span><span class="sc">:</span>               .             .           <span class="sc">-</span><span class="dv">13</span>             .</span>
<span id="cb5-61"><a href="#cb5-61" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">69</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">13</span>           <span class="sc">-</span><span class="dv">13</span>           <span class="sc">-</span><span class="dv">13</span>           <span class="sc">-</span><span class="dv">13</span></span>
<span id="cb5-62"><a href="#cb5-62" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">70</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span></span>
<span id="cb5-63"><a href="#cb5-63" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">71</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span></span>
<span id="cb5-64"><a href="#cb5-64" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">72</span><span class="sc">:</span>               .           <span class="sc">-</span><span class="dv">17</span>             .             .</span>
<span id="cb5-65"><a href="#cb5-65" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">73</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">17</span>             .           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span></span>
<span id="cb5-66"><a href="#cb5-66" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">74</span><span class="sc">:</span>               .           <span class="sc">-</span><span class="dv">17</span>             .             .</span>
<span id="cb5-67"><a href="#cb5-67" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">75</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span>           <span class="sc">-</span><span class="dv">17</span></span>
<span id="cb5-68"><a href="#cb5-68" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">76</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span></span>
<span id="cb5-69"><a href="#cb5-69" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">77</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span></span>
<span id="cb5-70"><a href="#cb5-70" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">78</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span></span>
<span id="cb5-71"><a href="#cb5-71" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">79</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span></span>
<span id="cb5-72"><a href="#cb5-72" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">80</span><span class="sc">:</span>               .             .           <span class="sc">-</span><span class="dv">15</span>             .</span>
<span id="cb5-73"><a href="#cb5-73" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">81</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span></span>
<span id="cb5-74"><a href="#cb5-74" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">82</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span></span>
<span id="cb5-75"><a href="#cb5-75" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">83</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span></span>
<span id="cb5-76"><a href="#cb5-76" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">84</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span></span>
<span id="cb5-77"><a href="#cb5-77" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">85</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">15</span>           <span class="sc">-</span><span class="dv">15</span>             .           <span class="sc">-</span><span class="dv">15</span></span>
<span id="cb5-78"><a href="#cb5-78" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">86</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span></span>
<span id="cb5-79"><a href="#cb5-79" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">87</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">20</span>           <span class="sc">-</span><span class="dv">20</span>           <span class="sc">-</span><span class="dv">20</span>           <span class="sc">-</span><span class="dv">20</span></span>
<span id="cb5-80"><a href="#cb5-80" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">88</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">20</span>           <span class="sc">-</span><span class="dv">20</span>           <span class="sc">-</span><span class="dv">20</span>             .</span>
<span id="cb5-81"><a href="#cb5-81" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">89</span><span class="sc">:</span>             <span class="sc">-</span><span class="dv">20</span>           <span class="sc">-</span><span class="dv">20</span>           <span class="sc">-</span><span class="dv">20</span>             .</span>
<span id="cb5-82"><a href="#cb5-82" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">90</span><span class="sc">:</span>              <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span></span>
<span id="cb5-83"><a href="#cb5-83" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">91</span><span class="sc">:</span>              <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span></span>
<span id="cb5-84"><a href="#cb5-84" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">92</span><span class="sc">:</span>  <span class="sc">!!!</span>hum2abc<span class="sc">:</span> <span class="sc">-</span>Q <span class="st">''</span></span>
<span id="cb5-85"><a href="#cb5-85" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">93</span><span class="sc">:</span>  <span class="sc">!!!</span>title<span class="sc">:</span> <span class="er">@</span>{PC<span class="co">#}. @{OTL@@DE}</span></span>
<span id="cb5-86"><a href="#cb5-86" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">94</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR1<span class="sc">:</span> <span class="dv">371</span> vierstimmige Choralges<span class="sc">&amp;</span>auml;nge von Johann Sebastian B<span class="sc">**</span><span class="er">*</span></span>
<span id="cb5-87"><a href="#cb5-87" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">95</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> 4th ed. by Alfred D<span class="sc">&amp;</span>ouml;<span class="fu">rffel</span> (Leipzig<span class="sc">:</span> Breitkopf und H<span class="sc">&amp;</span>a<span class="sc">**</span><span class="er">*</span></span>
<span id="cb5-88"><a href="#cb5-88" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">96</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> c<span class="fl">.1875</span>). <span class="dv">178</span> pp. Plate <span class="st">"V.A.10"</span>.  reprint<span class="sc">:</span> J.S. Bach, <span class="dv">371</span> <span class="sc">**</span><span class="er">*</span></span>
<span id="cb5-89"><a href="#cb5-89" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">97</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR4<span class="sc">:</span> <span class="fu">Chorales</span> (New York<span class="sc">:</span> Associated Music Publishers, Inc., c<span class="fl">.1</span><span class="sc">**</span><span class="er">*</span></span>
<span id="cb5-90"><a href="#cb5-90" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">98</span><span class="sc">:</span>  <span class="sc">!!!</span>SMS<span class="sc">:</span> B<span class="sc">&amp;</span>H, 4th ed, Alfred D<span class="sc">&amp;</span>ouml;rffel, c<span class="fl">.1875</span>, plate V.A<span class="fl">.10</span></span>
<span id="cb5-91"><a href="#cb5-91" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">99</span><span class="sc">:</span>  <span class="sc">!!!</span>EED<span class="sc">:</span>  Craig Stuart Sapp</span>
<span id="cb5-92"><a href="#cb5-92" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">100</span><span class="sc">:</span>  <span class="sc">!!!</span>EEV<span class="sc">:</span>  <span class="dv">2009</span><span class="sc">/</span><span class="dv">05</span><span class="sc">/</span><span class="dv">22</span></span>
<span id="cb5-93"><a href="#cb5-93" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# ^^^ chor010.krn ^^^ #############################</span></span>
<span id="cb5-94"><a href="#cb5-94" tabindex="-1"></a><span class="er">&gt;</span>                           (<span class="sc">**</span><span class="er">*</span>four global comments truncated due to screen size<span class="sc">**</span><span class="er">*</span>)</span>
<span id="cb5-95"><a href="#cb5-95" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb5-96"><a href="#cb5-96" tabindex="-1"></a><span class="er">&gt;</span>       humdrumR corpus of ten pieces.</span>
<span id="cb5-97"><a href="#cb5-97" tabindex="-1"></a><span class="sc">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb5-98"><a href="#cb5-98" tabindex="-1"></a><span class="er">&gt;</span>                Token  <span class="sc">::</span> character</span>
<span id="cb5-99"><a href="#cb5-99" tabindex="-1"></a><span class="sc">&gt;</span>                Semits <span class="sc">::</span> <span class="fu">integer</span> (<span class="sc">**</span>semits tokens)</span>
<span id="cb5-100"><a href="#cb5-100" tabindex="-1"></a><span class="sc">&gt;</span>                Kern   <span class="sc">::</span> <span class="fu">character</span> (<span class="sc">**</span>kern tokens)</span>
<span id="cb5-101"><a href="#cb5-101" tabindex="-1"></a><span class="sc">&gt;</span>               <span class="er">*</span>Lowest <span class="sc">::</span> <span class="fu">integer</span> (<span class="sc">**</span>semits tokens)</span></code></pre></div>
<p>We could then, for example, subtract the bar’s lowest note from each
note:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">with</span>(chorales, Semits <span class="sc">-</span> Lowest) <span class="sc">|&gt;</span> <span class="fu">table</span>()</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="er">&gt;</span>    <span class="sc">-</span><span class="dv">12</span> <span class="sc">-</span><span class="dv">11</span> <span class="sc">-</span><span class="dv">10</span>  <span class="sc">-</span><span class="dv">9</span>  <span class="sc">-</span><span class="dv">8</span>  <span class="sc">-</span><span class="dv">7</span>  <span class="sc">-</span><span class="dv">6</span>  <span class="sc">-</span><span class="dv">5</span>  <span class="sc">-</span><span class="dv">4</span>  <span class="sc">-</span><span class="dv">3</span>  <span class="sc">-</span><span class="dv">2</span>  <span class="sc">-</span><span class="dv">1</span>   <span class="dv">0</span>   <span class="dv">1</span>   <span class="dv">2</span>   <span class="dv">3</span>   <span class="dv">4</span>   <span class="dv">5</span>   <span class="dv">6</span>   <span class="dv">7</span> </span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span> <span class="dv">196</span>  <span class="dv">40</span>  <span class="dv">96</span>  <span class="dv">74</span>  <span class="dv">62</span> <span class="dv">103</span>  <span class="dv">21</span> <span class="dv">106</span> </span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">8</span>   <span class="dv">9</span>  <span class="dv">10</span>  <span class="dv">11</span>  <span class="dv">12</span>  <span class="dv">13</span>  <span class="dv">14</span>  <span class="dv">15</span>  <span class="dv">16</span>  <span class="dv">17</span>  <span class="dv">18</span>  <span class="dv">19</span>  <span class="dv">20</span>  <span class="dv">21</span>  <span class="dv">22</span>  <span class="dv">23</span>  <span class="dv">24</span>  <span class="dv">25</span>  <span class="dv">26</span>  <span class="dv">27</span> </span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="sc">&gt;</span>     <span class="dv">34</span>  <span class="dv">53</span>  <span class="dv">49</span>  <span class="dv">45</span> <span class="dv">171</span>  <span class="dv">22</span>  <span class="dv">68</span>  <span class="dv">97</span>  <span class="dv">98</span> <span class="dv">146</span>  <span class="dv">42</span> <span class="dv">228</span>  <span class="dv">64</span>  <span class="dv">96</span>  <span class="dv">69</span>  <span class="dv">47</span> <span class="dv">168</span>  <span class="dv">13</span>  <span class="dv">62</span>  <span class="dv">44</span> </span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="sc">&gt;</span>     <span class="dv">28</span>  <span class="dv">29</span>  <span class="dv">30</span>  <span class="dv">31</span>  <span class="dv">32</span>  <span class="dv">33</span>  <span class="dv">34</span>  <span class="dv">35</span>  <span class="dv">36</span>  <span class="dv">37</span>  <span class="dv">38</span>  <span class="dv">39</span>  <span class="dv">40</span>  <span class="dv">41</span>  <span class="dv">42</span>  <span class="dv">43</span>  <span class="dv">44</span>  <span class="dv">45</span>  <span class="dv">46</span>  <span class="dv">47</span> </span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="sc">&gt;</span>     <span class="dv">42</span>  <span class="dv">36</span>   <span class="dv">3</span>  <span class="dv">22</span>   <span class="dv">6</span>   <span class="dv">1</span>   <span class="dv">2</span>   <span class="dv">0</span>   <span class="dv">2</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">1</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="group-by-beat">Group by Beat<a class="anchor" aria-label="anchor" href="#group-by-beat"></a>
</h4>
<p>Another useful contextual group is the beat. There will be no
automatic “beat” field in our data, we’ll need to make it—obviously, we
need ti have data with rhythmic information encoded (like
<code>**kern</code> or <code>**recip</code>). We can use the
<code><a href="../reference/count.html">count()</a></code> function to count the beats in our data. We could
count quarter-notes by setting <code>beat = '4'</code>; alternatively,
if our data includes time-signature interpretations (like
<code>*M3/4</code>) we could use the <code>TimeSignature</code> field to
get the tactus of the meter. Let’s try the later and save the result to
a new field, which we’ll call <code>Beat</code> (or anything else you
want).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">within</span>(chorales, <span class="fu">count</span>(Token, <span class="at">beat =</span> <span class="fu">tactus</span>(TimeSignature)) <span class="ot">-&gt;</span> Beat) <span class="ot">-&gt;</span> chorales</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>chorales</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# vvv chor001.krn vvv #############################</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of My Heart</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>          <span class="er">**</span>kern        <span class="sc">**</span>kern        <span class="sc">**</span>kern        <span class="sc">**</span>kern</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>          <span class="er">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>          <span class="er">*</span>Ibass       <span class="sc">*</span>Itenor        <span class="sc">*</span>Ialto       <span class="sc">*</span>Isoprn</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>         <span class="er">*</span>I<span class="st">"Bass      *I"</span>Tenor       <span class="sc">*</span>I<span class="st">"Alto    *I"</span>Soprano</span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">12</span><span class="sc">:</span>       <span class="er">*&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]</span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">13</span><span class="sc">:</span>    <span class="er">*&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]</span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">14</span><span class="sc">:</span>             <span class="er">*&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A</span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">15</span><span class="sc">:</span>         <span class="er">*</span>clefF4      <span class="sc">*</span>clefGv2       <span class="sc">*</span>clefG2       <span class="sc">*</span>clefG2</span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">16</span><span class="sc">:</span>          <span class="er">*</span>k[f<span class="co">#]        *k[f#]        *k[f#]        *k[f#]</span></span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">17</span><span class="sc">:</span>             <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span></span>
<span id="cb7-22"><a href="#cb7-22" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">18</span><span class="sc">:</span>           <span class="er">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb7-23"><a href="#cb7-23" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">19</span><span class="sc">:</span>          <span class="er">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100</span>
<span id="cb7-24"><a href="#cb7-24" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">20</span><span class="sc">:</span>               <span class="dv">1</span>             <span class="dv">1</span>             <span class="dv">1</span>             <span class="dv">1</span></span>
<span id="cb7-25"><a href="#cb7-25" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">21</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span></span>
<span id="cb7-26"><a href="#cb7-26" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">22</span><span class="sc">:</span>               <span class="dv">2</span>             <span class="dv">2</span>             <span class="dv">2</span>             <span class="dv">2</span></span>
<span id="cb7-27"><a href="#cb7-27" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">23</span><span class="sc">:</span>               <span class="dv">3</span>             <span class="dv">3</span>             <span class="dv">3</span>             .</span>
<span id="cb7-28"><a href="#cb7-28" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">24</span><span class="sc">:</span>               .             <span class="dv">3</span>             .             .</span>
<span id="cb7-29"><a href="#cb7-29" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">25</span><span class="sc">:</span>               <span class="dv">4</span>             <span class="dv">4</span>             <span class="dv">4</span>             <span class="dv">4</span></span>
<span id="cb7-30"><a href="#cb7-30" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">26</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span></span>
<span id="cb7-31"><a href="#cb7-31" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">27</span><span class="sc">:</span>               <span class="dv">5</span>             <span class="dv">5</span>             <span class="dv">5</span>             <span class="dv">5</span></span>
<span id="cb7-32"><a href="#cb7-32" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">28</span><span class="sc">:</span>               <span class="dv">6</span>             <span class="dv">6</span>             .             .</span>
<span id="cb7-33"><a href="#cb7-33" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">29</span><span class="sc">:</span>               .             .             .             <span class="dv">6</span></span>
<span id="cb7-34"><a href="#cb7-34" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">30</span><span class="sc">:</span>               <span class="dv">7</span>             <span class="dv">7</span>             <span class="dv">7</span>             <span class="dv">7</span></span>
<span id="cb7-35"><a href="#cb7-35" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">31</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span></span>
<span id="cb7-36"><a href="#cb7-36" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">32</span><span class="sc">:</span>               <span class="dv">8</span>             <span class="dv">8</span>             <span class="dv">8</span>             <span class="dv">8</span></span>
<span id="cb7-37"><a href="#cb7-37" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">33</span><span class="sc">:</span>               .             <span class="dv">8</span>             <span class="dv">8</span>             .</span>
<span id="cb7-38"><a href="#cb7-38" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">34</span><span class="sc">:</span>               <span class="dv">9</span>             <span class="dv">9</span>             <span class="dv">9</span>             .</span>
<span id="cb7-39"><a href="#cb7-39" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">35</span><span class="sc">:</span>               <span class="dv">9</span>             .             <span class="dv">9</span>             <span class="dv">9</span></span>
<span id="cb7-40"><a href="#cb7-40" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">36</span><span class="sc">:</span>              <span class="dv">10</span>            <span class="dv">10</span>            <span class="dv">10</span>            <span class="dv">10</span></span>
<span id="cb7-41"><a href="#cb7-41" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">37</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span></span>
<span id="cb7-42"><a href="#cb7-42" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">38</span><span class="sc">:</span>              <span class="dv">11</span>            <span class="dv">11</span>            <span class="dv">11</span>            <span class="dv">11</span></span>
<span id="cb7-43"><a href="#cb7-43" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">39</span><span class="sc">:</span>              <span class="dv">13</span>            <span class="dv">13</span>            <span class="dv">13</span>            <span class="dv">13</span></span>
<span id="cb7-44"><a href="#cb7-44" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">40</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span></span>
<span id="cb7-45"><a href="#cb7-45" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="dv">41-133</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb7-46"><a href="#cb7-46" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# ^^^ chor001.krn ^^^ #############################</span></span>
<span id="cb7-47"><a href="#cb7-47" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb7-48"><a href="#cb7-48" tabindex="-1"></a><span class="er">&gt;</span>           (<span class="dv">8</span> more pieces...)</span>
<span id="cb7-49"><a href="#cb7-49" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb7-50"><a href="#cb7-50" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# vvv chor010.krn vvv #############################</span></span>
<span id="cb7-51"><a href="#cb7-51" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">1-60</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb7-52"><a href="#cb7-52" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">61</span><span class="sc">:</span>              <span class="dv">29</span>            <span class="dv">29</span>            <span class="dv">29</span>            <span class="dv">29</span></span>
<span id="cb7-53"><a href="#cb7-53" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">62</span><span class="sc">:</span>              <span class="dv">31</span>            <span class="dv">31</span>            <span class="dv">31</span>            <span class="dv">31</span></span>
<span id="cb7-54"><a href="#cb7-54" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">63</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span></span>
<span id="cb7-55"><a href="#cb7-55" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">64</span><span class="sc">:</span>              <span class="dv">33</span>            <span class="dv">33</span>            <span class="dv">33</span>            <span class="dv">33</span></span>
<span id="cb7-56"><a href="#cb7-56" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">65</span><span class="sc">:</span>              <span class="dv">34</span>            <span class="dv">34</span>            <span class="dv">34</span>            <span class="dv">34</span></span>
<span id="cb7-57"><a href="#cb7-57" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">66</span><span class="sc">:</span>              <span class="dv">34</span>             .             .             .</span>
<span id="cb7-58"><a href="#cb7-58" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">67</span><span class="sc">:</span>              <span class="dv">35</span>            <span class="dv">35</span>            <span class="dv">35</span>            <span class="dv">35</span></span>
<span id="cb7-59"><a href="#cb7-59" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">68</span><span class="sc">:</span>               .             .            <span class="dv">35</span>             .</span>
<span id="cb7-60"><a href="#cb7-60" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">69</span><span class="sc">:</span>              <span class="dv">36</span>            <span class="dv">36</span>            <span class="dv">36</span>            <span class="dv">36</span></span>
<span id="cb7-61"><a href="#cb7-61" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">70</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span></span>
<span id="cb7-62"><a href="#cb7-62" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">71</span><span class="sc">:</span>              <span class="dv">37</span>            <span class="dv">37</span>            <span class="dv">37</span>            <span class="dv">37</span></span>
<span id="cb7-63"><a href="#cb7-63" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">72</span><span class="sc">:</span>               .            <span class="dv">37</span>             .             .</span>
<span id="cb7-64"><a href="#cb7-64" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">73</span><span class="sc">:</span>              <span class="dv">38</span>             .            <span class="dv">38</span>            <span class="dv">38</span></span>
<span id="cb7-65"><a href="#cb7-65" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">74</span><span class="sc">:</span>               .            <span class="dv">38</span>             .             .</span>
<span id="cb7-66"><a href="#cb7-66" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">75</span><span class="sc">:</span>              <span class="dv">39</span>            <span class="dv">39</span>            <span class="dv">39</span>            <span class="dv">39</span></span>
<span id="cb7-67"><a href="#cb7-67" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">76</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span></span>
<span id="cb7-68"><a href="#cb7-68" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">77</span><span class="sc">:</span>              <span class="dv">41</span>            <span class="dv">41</span>            <span class="dv">41</span>            <span class="dv">41</span></span>
<span id="cb7-69"><a href="#cb7-69" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">78</span><span class="sc">:</span>              <span class="dv">43</span>            <span class="dv">43</span>            <span class="dv">43</span>            <span class="dv">43</span></span>
<span id="cb7-70"><a href="#cb7-70" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">79</span><span class="sc">:</span>              <span class="dv">44</span>            <span class="dv">44</span>            <span class="dv">44</span>            <span class="dv">44</span></span>
<span id="cb7-71"><a href="#cb7-71" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">80</span><span class="sc">:</span>               .             .            <span class="dv">44</span>             .</span>
<span id="cb7-72"><a href="#cb7-72" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">81</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span></span>
<span id="cb7-73"><a href="#cb7-73" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">82</span><span class="sc">:</span>              <span class="dv">45</span>            <span class="dv">45</span>            <span class="dv">45</span>            <span class="dv">45</span></span>
<span id="cb7-74"><a href="#cb7-74" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">83</span><span class="sc">:</span>              <span class="dv">46</span>            <span class="dv">46</span>            <span class="dv">46</span>            <span class="dv">46</span></span>
<span id="cb7-75"><a href="#cb7-75" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">84</span><span class="sc">:</span>              <span class="dv">47</span>            <span class="dv">47</span>            <span class="dv">47</span>            <span class="dv">47</span></span>
<span id="cb7-76"><a href="#cb7-76" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">85</span><span class="sc">:</span>              <span class="dv">48</span>            <span class="dv">48</span>             .            <span class="dv">48</span></span>
<span id="cb7-77"><a href="#cb7-77" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">86</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span></span>
<span id="cb7-78"><a href="#cb7-78" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">87</span><span class="sc">:</span>              <span class="dv">49</span>            <span class="dv">49</span>            <span class="dv">49</span>            <span class="dv">49</span></span>
<span id="cb7-79"><a href="#cb7-79" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">88</span><span class="sc">:</span>              <span class="dv">50</span>            <span class="dv">50</span>            <span class="dv">50</span>             .</span>
<span id="cb7-80"><a href="#cb7-80" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">89</span><span class="sc">:</span>              <span class="dv">51</span>            <span class="dv">51</span>            <span class="dv">51</span>             .</span>
<span id="cb7-81"><a href="#cb7-81" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">90</span><span class="sc">:</span>              <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span></span>
<span id="cb7-82"><a href="#cb7-82" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">91</span><span class="sc">:</span>              <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span></span>
<span id="cb7-83"><a href="#cb7-83" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">92</span><span class="sc">:</span>  <span class="sc">!!!</span>hum2abc<span class="sc">:</span> <span class="sc">-</span>Q <span class="st">''</span></span>
<span id="cb7-84"><a href="#cb7-84" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">93</span><span class="sc">:</span>  <span class="sc">!!!</span>title<span class="sc">:</span> <span class="er">@</span>{PC<span class="co">#}. @{OTL@@DE}</span></span>
<span id="cb7-85"><a href="#cb7-85" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">94</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR1<span class="sc">:</span> <span class="dv">371</span> vierstimmige Choralges<span class="sc">&amp;</span>auml;nge von Johann Sebastian B<span class="sc">**</span><span class="er">*</span></span>
<span id="cb7-86"><a href="#cb7-86" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">95</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> 4th ed. by Alfred D<span class="sc">&amp;</span>ouml;<span class="fu">rffel</span> (Leipzig<span class="sc">:</span> Breitkopf und H<span class="sc">&amp;</span>a<span class="sc">**</span><span class="er">*</span></span>
<span id="cb7-87"><a href="#cb7-87" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">96</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> c<span class="fl">.1875</span>). <span class="dv">178</span> pp. Plate <span class="st">"V.A.10"</span>.  reprint<span class="sc">:</span> J.S. Bach, <span class="dv">371</span> <span class="sc">**</span><span class="er">*</span></span>
<span id="cb7-88"><a href="#cb7-88" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">97</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR4<span class="sc">:</span> <span class="fu">Chorales</span> (New York<span class="sc">:</span> Associated Music Publishers, Inc., c<span class="fl">.1</span><span class="sc">**</span><span class="er">*</span></span>
<span id="cb7-89"><a href="#cb7-89" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">98</span><span class="sc">:</span>  <span class="sc">!!!</span>SMS<span class="sc">:</span> B<span class="sc">&amp;</span>H, 4th ed, Alfred D<span class="sc">&amp;</span>ouml;rffel, c<span class="fl">.1875</span>, plate V.A<span class="fl">.10</span></span>
<span id="cb7-90"><a href="#cb7-90" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">99</span><span class="sc">:</span>  <span class="sc">!!!</span>EED<span class="sc">:</span>  Craig Stuart Sapp</span>
<span id="cb7-91"><a href="#cb7-91" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">100</span><span class="sc">:</span>  <span class="sc">!!!</span>EEV<span class="sc">:</span>  <span class="dv">2009</span><span class="sc">/</span><span class="dv">05</span><span class="sc">/</span><span class="dv">22</span></span>
<span id="cb7-92"><a href="#cb7-92" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# ^^^ chor010.krn ^^^ #############################</span></span>
<span id="cb7-93"><a href="#cb7-93" tabindex="-1"></a><span class="er">&gt;</span>                           (<span class="sc">**</span><span class="er">*</span>four global comments truncated due to screen size<span class="sc">**</span><span class="er">*</span>)</span>
<span id="cb7-94"><a href="#cb7-94" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb7-95"><a href="#cb7-95" tabindex="-1"></a><span class="er">&gt;</span>       humdrumR corpus of ten pieces.</span>
<span id="cb7-96"><a href="#cb7-96" tabindex="-1"></a><span class="sc">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb7-97"><a href="#cb7-97" tabindex="-1"></a><span class="er">&gt;</span>                Token  <span class="sc">::</span> character</span>
<span id="cb7-98"><a href="#cb7-98" tabindex="-1"></a><span class="sc">&gt;</span>                Semits <span class="sc">::</span> <span class="fu">integer</span> (<span class="sc">**</span>semits tokens)</span>
<span id="cb7-99"><a href="#cb7-99" tabindex="-1"></a><span class="sc">&gt;</span>                Kern   <span class="sc">::</span> <span class="fu">character</span> (<span class="sc">**</span>kern tokens)</span>
<span id="cb7-100"><a href="#cb7-100" tabindex="-1"></a><span class="sc">&gt;</span>                Lowest <span class="sc">::</span> <span class="fu">integer</span> (<span class="sc">**</span>semits tokens)</span>
<span id="cb7-101"><a href="#cb7-101" tabindex="-1"></a><span class="sc">&gt;</span>               <span class="er">*</span>Beat   <span class="sc">::</span> integer</span></code></pre></div>
<p>We can now group by beat. Maybe we want to know the range of notes in
each beat:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/withinHumdrum.html">with</a></span><span class="op">(</span><span class="va">chorales</span>, <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">Semits</span><span class="op">)</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">File</span>, <span class="va">Beat</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="Context_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<blockquote>
<p>Note: If your data includes spine paths, you’ll want to set
<code>within(mydata, count(Token), expandPaths = TRUE, ...)</code>.
Count (and similar functions, like <code><a href="../reference/timeline.html">timeline()</a></code>) won’t work
correctly without paths expanded (<code><a href="../reference/expandPaths.html">?expandPaths</a></code>).</p>
</blockquote>
</div>
</div>
<div class="section level2">
<h2 id="contextual-windows">Contextual Windows<a class="anchor" aria-label="anchor" href="#contextual-windows"></a>
</h2>
<p>When you use <code>groupby</code>/<code>by</code>, your data is
exhaustively partitioned into non-overlapping groups; the groups are
also not necessarily ordered—we have to explicitely used (temporally)
ordered groups like <code>list(File, Record)</code> if we want temporal
context. In contrast, the <code><a href="../reference/context.html">context()</a></code> function, when used in
combination with <code><a href="../reference/withinHumdrum.html">with.humdrumR()</a></code>, gives us much more
flexible control over the context we want for our data.</p>
<p><code><a href="../reference/context.html">context()</a></code> takes an input vector and treats it as an
ordered sequence of information. It then identifies arbitrary contextual
windows in the data, based on your criteria. The windows created by
<code><a href="../reference/context.html">context()</a></code> are always sequentially ordered, aren’t
necessarily exhaustive (some data might not fall in any window), and can
<em>overlap</em> (some data falls in multiple windows).</p>
<p>The way you use <code><a href="../reference/context.html">context()</a></code> is by telling it when to
“open” (begin) and “close” (end) contextual windows, using the
<code>open</code> and <code>close</code> arguments. Context can use many
criteria to open/close windows. In the following sections, we layout
just a few examples; we’ll use our chorale data again, as well as the
built-in Beethoven variation data:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chorales</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readHumdrum.html">readHumdrum</a></span><span class="op">(</span><span class="va">humdrumRroot</span>, <span class="st">'HumdrumData/BachChorales/.*krn'</span><span class="op">)</span></span></code></pre></div>
<p>For most examples, we’ll use <code><a href="../reference/withinHumdrum.html">within.humdrumR()</a></code> and run
the command <code>paste(Token, collapse = '-')</code>. This is the
simplest/fastest way to <em>see</em> what <code><a href="../reference/context.html">context()</a></code> is
doing!</p>
<div class="section level3">
<h3 id="regular-windows">Regular windows<a class="anchor" aria-label="anchor" href="#regular-windows"></a>
</h3>
<p>In some cases, we simply want to progress through data and open/close
windows at regular locations. We can do this using the
<code><a href="../reference/hop.html">hop()</a></code> function. (<code><a href="../reference/hop.html">hop()</a></code> is a humdrum<span class="math inline">\(_{\mathbb{R}}\)</span> function which is very
similar to R’s base <code><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq()</a></code> function; however,
<code><a href="../reference/hop.html">hop()</a></code> has some special features and, more importantly, gets
special treatment from <code><a href="../reference/context.html">context()</a></code>). Maybe we want to open a
four-note window on every note:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">within</span>(chorales, <span class="fu">paste</span>(Token, <span class="at">collapse =</span> <span class="st">'-'</span>), <span class="fu">context</span>(<span class="fu">hop</span>(), open <span class="sc">+</span> <span class="dv">3</span>))</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">####################### vvv chor001.krn vvv ########################</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of My Heart</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>               <span class="er">**</span>kern          <span class="sc">**</span>kern           <span class="sc">**</span>kern    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>               <span class="er">*</span>ICvox          <span class="sc">*</span>ICvox           <span class="sc">*</span>ICvox    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>               <span class="er">*</span>Ibass         <span class="sc">*</span>Itenor           <span class="sc">*</span>Ialto    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>              <span class="er">*</span>I<span class="st">"Bass        *I"</span>Tenor          <span class="sc">*</span>I<span class="st">"Alto    ***</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a><span class="st">&gt;        12:            *&gt;[A,A,B]       *&gt;[A,A,B]        *&gt;[A,A,B]    ***</span></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a><span class="st">&gt;        13:         *&gt;norep[A,B]    *&gt;norep[A,B]     *&gt;norep[A,B]    ***</span></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a><span class="st">&gt;        14:                  *&gt;A             *&gt;A              *&gt;A    ***</span></span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a><span class="st">&gt;        15:              *clefF4        *clefGv2          *clefG2    ***</span></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a><span class="st">&gt;        16:               *k[f#]          *k[f#]           *k[f#]    ***</span></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a><span class="st">&gt;        17:                  *G:             *G:              *G:    ***</span></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a><span class="st">&gt;        18:                *M3/4           *M3/4            *M3/4    ***</span></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a><span class="st">&gt;        19:               *MM100          *MM100           *MM100    ***</span></span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a><span class="st">&gt;        20:        4GG-4G-4E-4F#   4B-4B-8cL-8BJ      4d-4d-4e-4d    ***</span></span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a><span class="st">&gt;        21:                   =1              =1               =1    ***</span></span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a><span class="st">&gt;        22:         4G-4E-4F#-4G   4B-8cL-8BJ-4A      4d-4e-4d-2d    ***</span></span>
<span id="cb10-25"><a href="#cb10-25" tabindex="-1"></a><span class="st">&gt;        23:         4E-4F#-4G-4D   8cL-8BJ-4A-4G      4e-4d-2d-4B    ***</span></span>
<span id="cb10-26"><a href="#cb10-26" tabindex="-1"></a><span class="st">&gt;        24:                    .   8BJ-4A-4G-4F#                .    ***</span></span>
<span id="cb10-27"><a href="#cb10-27" tabindex="-1"></a><span class="st">&gt;        25:         4F#-4G-4D-4E    4A-4G-4F#-4G     4d-2d-4B-8eL    ***</span></span>
<span id="cb10-28"><a href="#cb10-28" tabindex="-1"></a><span class="st">&gt;        26:                   =2              =2               =2    ***</span></span>
<span id="cb10-29"><a href="#cb10-29" tabindex="-1"></a><span class="st">&gt;        27:          4G-4D-4E-4C   4G-4F#-4G-8cL     2d-4B-8eL-8d    ***</span></span>
<span id="cb10-30"><a href="#cb10-30" tabindex="-1"></a><span class="st">&gt;        28:        4D-4E-4C-8BBL  4F#-4G-8cL-8BJ                .    ***</span></span>
<span id="cb10-31"><a href="#cb10-31" tabindex="-1"></a><span class="st">&gt;        29:                    .               .                .    ***</span></span>
<span id="cb10-32"><a href="#cb10-32" tabindex="-1"></a><span class="st">&gt;        30:      4E-4C-8BBL-8AAJ   4G-8cL-8BJ-4c     4B-8eL-8d-8e    ***</span></span>
<span id="cb10-33"><a href="#cb10-33" tabindex="-1"></a><span class="st">&gt;        31:                   =3              =3               =3    ***</span></span>
<span id="cb10-34"><a href="#cb10-34" tabindex="-1"></a><span class="st">&gt;        32:     4C-8BBL-8AAJ-4GG   8cL-8BJ-4c-4d   8eL-8d-8e-8f#J    ***</span></span>
<span id="cb10-35"><a href="#cb10-35" tabindex="-1"></a><span class="st">&gt;        33:                    .   8BJ-4c-4d-2d;    8d-8e-8f#J-4g    ***</span></span>
<span id="cb10-36"><a href="#cb10-36" tabindex="-1"></a><span class="st">&gt;        34:    8BBL-8AAJ-4GG-2D;    4c-4d-2d;-4d  8e-8f#J-4g-2f#;    ***</span></span>
<span id="cb10-37"><a href="#cb10-37" tabindex="-1"></a><span class="st">&gt;        35:     8AAJ-4GG-2D;-4GG               .  8f#J-4g-2f#;-4g    ***</span></span>
<span id="cb10-38"><a href="#cb10-38" tabindex="-1"></a><span class="st">&gt;        36:     4GG-2D;-4GG-4FF#    4d-2d;-4d-4A    4g-2f#;-4g-4d    ***</span></span>
<span id="cb10-39"><a href="#cb10-39" tabindex="-1"></a><span class="st">&gt;        37:                   =4              =4               =4    ***</span></span>
<span id="cb10-40"><a href="#cb10-40" tabindex="-1"></a><span class="st">&gt;        38:     2D;-4GG-4FF#-4GG    2d;-4d-4A-4B    2f#;-4g-4d-4e    ***</span></span>
<span id="cb10-41"><a href="#cb10-41" tabindex="-1"></a><span class="st">&gt;        39:     4GG-4FF#-4GG-4AA     4d-4A-4B-4c     4g-4d-4e-4f#    ***</span></span>
<span id="cb10-42"><a href="#cb10-42" tabindex="-1"></a><span class="st">&gt;        40:                   =5              =5               =5    ***</span></span>
<span id="cb10-43"><a href="#cb10-43" tabindex="-1"></a><span class="st">&gt;    41-133::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb10-44"><a href="#cb10-44" tabindex="-1"></a><span class="st">&gt;    ####################### ^^^ chor001.krn ^^^ ########################</span></span>
<span id="cb10-45"><a href="#cb10-45" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb10-46"><a href="#cb10-46" tabindex="-1"></a><span class="st">&gt;           (8 more pieces...)</span></span>
<span id="cb10-47"><a href="#cb10-47" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb10-48"><a href="#cb10-48" tabindex="-1"></a><span class="st">&gt;    ####################### vvv chor010.krn vvv ########################</span></span>
<span id="cb10-49"><a href="#cb10-49" tabindex="-1"></a><span class="st">&gt;      1-60::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb10-50"><a href="#cb10-50" tabindex="-1"></a><span class="st">&gt;        61:       2AA;-2A-4E-8DL    2c;-2e-4e-4e     2e;-2a-4g-4g    ***</span></span>
<span id="cb10-51"><a href="#cb10-51" tabindex="-1"></a><span class="st">&gt;        62:        2A-4E-8DL-8CJ     2e-4e-4e-4d     2a-4g-4g-8gL    ***</span></span>
<span id="cb10-52"><a href="#cb10-52" tabindex="-1"></a><span class="st">&gt;        63:                   =9              =9               =9    ***</span></span>
<span id="cb10-53"><a href="#cb10-53" tabindex="-1"></a><span class="st">&gt;        64:       4E-8DL-8CJ-4BB     4e-4e-4d-4c    4g-4g-8gL-8fJ    ***</span></span>
<span id="cb10-54"><a href="#cb10-54" tabindex="-1"></a><span class="st">&gt;        65:       8DL-8CJ-4BB-4C    4e-4d-4c-8F#    4g-8gL-8fJ-4e    ***</span></span>
<span id="cb10-55"><a href="#cb10-55" tabindex="-1"></a><span class="st">&gt;        66:        8CJ-4BB-4C-4D               .                .    ***</span></span>
<span id="cb10-56"><a href="#cb10-56" tabindex="-1"></a><span class="st">&gt;        67:         4BB-4C-4D-4D    4d-4c-8F#-4G    8gL-8fJ-4e-4d    ***</span></span>
<span id="cb10-57"><a href="#cb10-57" tabindex="-1"></a><span class="st">&gt;        68:                    .               .     8fJ-4e-4d-4c    ***</span></span>
<span id="cb10-58"><a href="#cb10-58" tabindex="-1"></a><span class="st">&gt;        69:        4C-4D-4D-2GG;   4c-8F#-4G-8F#     4e-4d-4c-2B;    ***</span></span>
<span id="cb10-59"><a href="#cb10-59" tabindex="-1"></a><span class="st">&gt;        70:                  =10             =10              =10    ***</span></span>
<span id="cb10-60"><a href="#cb10-60" tabindex="-1"></a><span class="st">&gt;        71:        4D-4D-2GG;-2C  8F#-4G-8F#-2G;     4d-4c-2B;-2e    ***</span></span>
<span id="cb10-61"><a href="#cb10-61" tabindex="-1"></a><span class="st">&gt;        72:                    .   4G-8F#-2G;-2G                .    ***</span></span>
<span id="cb10-62"><a href="#cb10-62" tabindex="-1"></a><span class="st">&gt;        73:       4D-2GG;-2C-4AA               .     4c-2B;-2e-4e    ***</span></span>
<span id="cb10-63"><a href="#cb10-63" tabindex="-1"></a><span class="st">&gt;        74:                    .   8F#-2G;-2G-4A                .    ***</span></span>
<span id="cb10-64"><a href="#cb10-64" tabindex="-1"></a><span class="st">&gt;        75:       2GG;-2C-4AA-4E   2G;-2G-4A-4G#    2B;-2e-4e-8eL    ***</span></span>
<span id="cb10-65"><a href="#cb10-65" tabindex="-1"></a><span class="st">&gt;        76:                  =11             =11              =11    ***</span></span>
<span id="cb10-66"><a href="#cb10-66" tabindex="-1"></a><span class="st">&gt;        77:         2C-4AA-4E-4F    2G-4A-4G#-4A    2e-4e-8eL-8dJ    ***</span></span>
<span id="cb10-67"><a href="#cb10-67" tabindex="-1"></a><span class="st">&gt;        78:         4AA-4E-4F-4C    4A-4G#-4A-4G    4e-8eL-8dJ-4c    ***</span></span>
<span id="cb10-68"><a href="#cb10-68" tabindex="-1"></a><span class="st">&gt;        79:        4E-4F-4C-4BB-    4G#-4A-4G-4G    8eL-8dJ-4c-4c    ***</span></span>
<span id="cb10-69"><a href="#cb10-69" tabindex="-1"></a><span class="st">&gt;        80:                    .               .    8dJ-4c-4c-[2d    ***</span></span>
<span id="cb10-70"><a href="#cb10-70" tabindex="-1"></a><span class="st">&gt;        81:                  =12             =12              =12    ***</span></span>
<span id="cb10-71"><a href="#cb10-71" tabindex="-1"></a><span class="st">&gt;        82:       4F-4C-4BB--4AA     4A-4G-4G-4A    4c-4c-[2d-4d]    ***</span></span>
<span id="cb10-72"><a href="#cb10-72" tabindex="-1"></a><span class="st">&gt;        83:     4C-4BB--4AA-4GG#     4G-4G-4A-4B    4c-[2d-4d]-4c    ***</span></span>
<span id="cb10-73"><a href="#cb10-73" tabindex="-1"></a><span class="st">&gt;        84:    4BB--4AA-4GG#-4AA     4G-4A-4B-4A   [2d-4d]-4c-2B;    ***</span></span>
<span id="cb10-74"><a href="#cb10-74" tabindex="-1"></a><span class="st">&gt;        85:    4AA-4GG#-4AA-2EE;  4A-4B-4A-2G#X;                .    ***</span></span>
<span id="cb10-75"><a href="#cb10-75" tabindex="-1"></a><span class="st">&gt;        86:                  =13             =13              =13    ***</span></span>
<span id="cb10-76"><a href="#cb10-76" tabindex="-1"></a><span class="st">&gt;        87:                    .               .                .    ***</span></span>
<span id="cb10-77"><a href="#cb10-77" tabindex="-1"></a><span class="st">&gt;        88:                    .               .                .    ***</span></span>
<span id="cb10-78"><a href="#cb10-78" tabindex="-1"></a><span class="st">&gt;        89:                    .               .                .    ***</span></span>
<span id="cb10-79"><a href="#cb10-79" tabindex="-1"></a><span class="st">&gt;        90:                   ==              ==               ==    ***</span></span>
<span id="cb10-80"><a href="#cb10-80" tabindex="-1"></a><span class="st">&gt;        91:                   *-              *-               *-    ***</span></span>
<span id="cb10-81"><a href="#cb10-81" tabindex="-1"></a><span class="st">&gt;        92:  !!!hum2abc: -Q ''</span></span>
<span id="cb10-82"><a href="#cb10-82" tabindex="-1"></a><span class="st">&gt;        93:  !!!title: @{PC#}. @{OTL@@DE}</span></span>
<span id="cb10-83"><a href="#cb10-83" tabindex="-1"></a><span class="st">&gt;        94:  !!!YOR1: 371 vierstimmige Choralges&amp;auml;nge von Johann ***</span></span>
<span id="cb10-84"><a href="#cb10-84" tabindex="-1"></a><span class="st">&gt;        95:  !!!YOR2: 4th ed. by Alfred D&amp;ouml;rffel (Leipzig: Breitk***</span></span>
<span id="cb10-85"><a href="#cb10-85" tabindex="-1"></a><span class="st">&gt;        96:  !!!YOR2: c.1875). 178 pp. Plate "</span>V.A<span class="fl">.10</span><span class="st">".  reprint: J.S.***</span></span>
<span id="cb10-86"><a href="#cb10-86" tabindex="-1"></a><span class="st">&gt;        97:  !!!YOR4: Chorales (New York: Associated Music Publishers***</span></span>
<span id="cb10-87"><a href="#cb10-87" tabindex="-1"></a><span class="st">&gt;        98:  !!!SMS: B&amp;H, 4th ed, Alfred D&amp;ouml;rffel, c.1875, plate ***</span></span>
<span id="cb10-88"><a href="#cb10-88" tabindex="-1"></a><span class="st">&gt;        99:  !!!EED:  Craig Stuart Sapp</span></span>
<span id="cb10-89"><a href="#cb10-89" tabindex="-1"></a><span class="st">&gt;       100:  !!!EEV:  2009/05/22</span></span>
<span id="cb10-90"><a href="#cb10-90" tabindex="-1"></a><span class="st">&gt;    ####################### ^^^ chor010.krn ^^^ ########################</span></span>
<span id="cb10-91"><a href="#cb10-91" tabindex="-1"></a><span class="st">&gt;                  (***one spine/path not displayed due to screen size***)</span></span>
<span id="cb10-92"><a href="#cb10-92" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb10-93"><a href="#cb10-93" tabindex="-1"></a><span class="st">&gt;       humdrumR corpus of ten pieces.</span></span>
<span id="cb10-94"><a href="#cb10-94" tabindex="-1"></a><span class="st">&gt;        Data fields: </span></span>
<span id="cb10-95"><a href="#cb10-95" tabindex="-1"></a><span class="st">&gt;                Token   :: character</span></span>
<span id="cb10-96"><a href="#cb10-96" tabindex="-1"></a><span class="st">&gt;                Semits  :: integer (**semits tokens)</span></span>
<span id="cb10-97"><a href="#cb10-97" tabindex="-1"></a><span class="st">&gt;                Kern    :: character (**kern tokens)</span></span>
<span id="cb10-98"><a href="#cb10-98" tabindex="-1"></a><span class="st">&gt;                Lowest  :: integer (**semits tokens)</span></span>
<span id="cb10-99"><a href="#cb10-99" tabindex="-1"></a><span class="st">&gt;                Beat    :: integer</span></span>
<span id="cb10-100"><a href="#cb10-100" tabindex="-1"></a><span class="st">&gt;               *Result1 :: character</span></span></code></pre></div>
<p>Cool, we’ve got overlapping four-note windows, running throught each
spine! How did we do this?</p>
<div class="section level4">
<h4 id="regular-open">Regular Open<a class="anchor" aria-label="anchor" href="#regular-open"></a>
</h4>
<p>The first argument to <code><a href="../reference/context.html">context()</a></code> is the <code>open</code>
argument; we give <code>open</code> a set of indices (natural numbers)
where to open windows in the data. <code><a href="../reference/hop.html">hop()</a></code> simply generates a
sequence of numbers “along” the input data—by default, the “hop size” is
<code>1</code>, but we can change that. For example:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">hop</span>(letters, <span class="at">by =</span> <span class="dv">1</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">1</span>]  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">3</span>  <span class="dv">4</span>  <span class="dv">5</span>  <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">8</span>  <span class="dv">9</span> <span class="dv">10</span> <span class="dv">11</span> <span class="dv">12</span> <span class="dv">13</span> <span class="dv">14</span> <span class="dv">15</span> <span class="dv">16</span> <span class="dv">17</span> <span class="dv">18</span> <span class="dv">19</span> <span class="dv">20</span> <span class="dv">21</span> <span class="dv">22</span> <span class="dv">23</span> <span class="dv">24</span> <span class="dv">25</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">26</span>] <span class="dv">26</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="fu">hop</span>(letters, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">1</span>]  <span class="dv">1</span>  <span class="dv">3</span>  <span class="dv">5</span>  <span class="dv">7</span>  <span class="dv">9</span> <span class="dv">11</span> <span class="dv">13</span> <span class="dv">15</span> <span class="dv">17</span> <span class="dv">19</span> <span class="dv">21</span> <span class="dv">23</span> <span class="dv">25</span></span></code></pre></div>
<p>When we use <code><a href="../reference/hop.html">hop()</a></code> inside <code><a href="../reference/context.html">context()</a></code>, it
automatically knows what the input vector is. So now check this out:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">within</span>(chorales, <span class="fu">paste</span>(Token, <span class="at">collapse =</span> <span class="st">'-'</span>), <span class="fu">context</span>(<span class="fu">hop</span>(<span class="dv">2</span>), open <span class="sc">+</span> <span class="dv">3</span>))</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">####################### vvv chor001.krn vvv ########################</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of My Heart</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>               <span class="er">**</span>kern          <span class="sc">**</span>kern           <span class="sc">**</span>kern    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>               <span class="er">*</span>ICvox          <span class="sc">*</span>ICvox           <span class="sc">*</span>ICvox    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>               <span class="er">*</span>Ibass         <span class="sc">*</span>Itenor           <span class="sc">*</span>Ialto    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>              <span class="er">*</span>I<span class="st">"Bass        *I"</span>Tenor          <span class="sc">*</span>I<span class="st">"Alto    ***</span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a><span class="st">&gt;        12:            *&gt;[A,A,B]       *&gt;[A,A,B]        *&gt;[A,A,B]    ***</span></span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a><span class="st">&gt;        13:         *&gt;norep[A,B]    *&gt;norep[A,B]     *&gt;norep[A,B]    ***</span></span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a><span class="st">&gt;        14:                  *&gt;A             *&gt;A              *&gt;A    ***</span></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a><span class="st">&gt;        15:              *clefF4        *clefGv2          *clefG2    ***</span></span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a><span class="st">&gt;        16:               *k[f#]          *k[f#]           *k[f#]    ***</span></span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a><span class="st">&gt;        17:                  *G:             *G:              *G:    ***</span></span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a><span class="st">&gt;        18:                *M3/4           *M3/4            *M3/4    ***</span></span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a><span class="st">&gt;        19:               *MM100          *MM100           *MM100    ***</span></span>
<span id="cb12-22"><a href="#cb12-22" tabindex="-1"></a><span class="st">&gt;        20:        4GG-4G-4E-4F#   4B-4B-8cL-8BJ      4d-4d-4e-4d    ***</span></span>
<span id="cb12-23"><a href="#cb12-23" tabindex="-1"></a><span class="st">&gt;        21:                   =1              =1               =1    ***</span></span>
<span id="cb12-24"><a href="#cb12-24" tabindex="-1"></a><span class="st">&gt;        22:                    .               .                .    ***</span></span>
<span id="cb12-25"><a href="#cb12-25" tabindex="-1"></a><span class="st">&gt;        23:         4E-4F#-4G-4D   8cL-8BJ-4A-4G      4e-4d-2d-4B    ***</span></span>
<span id="cb12-26"><a href="#cb12-26" tabindex="-1"></a><span class="st">&gt;        24:                    .               .                .    ***</span></span>
<span id="cb12-27"><a href="#cb12-27" tabindex="-1"></a><span class="st">&gt;        25:                    .    4A-4G-4F#-4G                .    ***</span></span>
<span id="cb12-28"><a href="#cb12-28" tabindex="-1"></a><span class="st">&gt;        26:                   =2              =2               =2    ***</span></span>
<span id="cb12-29"><a href="#cb12-29" tabindex="-1"></a><span class="st">&gt;        27:          4G-4D-4E-4C               .     2d-4B-8eL-8d    ***</span></span>
<span id="cb12-30"><a href="#cb12-30" tabindex="-1"></a><span class="st">&gt;        28:                    .  4F#-4G-8cL-8BJ                .    ***</span></span>
<span id="cb12-31"><a href="#cb12-31" tabindex="-1"></a><span class="st">&gt;        29:                    .               .                .    ***</span></span>
<span id="cb12-32"><a href="#cb12-32" tabindex="-1"></a><span class="st">&gt;        30:      4E-4C-8BBL-8AAJ               .                .    ***</span></span>
<span id="cb12-33"><a href="#cb12-33" tabindex="-1"></a><span class="st">&gt;        31:                   =3              =3               =3    ***</span></span>
<span id="cb12-34"><a href="#cb12-34" tabindex="-1"></a><span class="st">&gt;        32:                    .   8cL-8BJ-4c-4d   8eL-8d-8e-8f#J    ***</span></span>
<span id="cb12-35"><a href="#cb12-35" tabindex="-1"></a><span class="st">&gt;        33:                    .               .                .    ***</span></span>
<span id="cb12-36"><a href="#cb12-36" tabindex="-1"></a><span class="st">&gt;        34:    8BBL-8AAJ-4GG-2D;    4c-4d-2d;-4d  8e-8f#J-4g-2f#;    ***</span></span>
<span id="cb12-37"><a href="#cb12-37" tabindex="-1"></a><span class="st">&gt;        35:                    .               .                .    ***</span></span>
<span id="cb12-38"><a href="#cb12-38" tabindex="-1"></a><span class="st">&gt;        36:     4GG-2D;-4GG-4FF#               .    4g-2f#;-4g-4d    ***</span></span>
<span id="cb12-39"><a href="#cb12-39" tabindex="-1"></a><span class="st">&gt;        37:                   =4              =4               =4    ***</span></span>
<span id="cb12-40"><a href="#cb12-40" tabindex="-1"></a><span class="st">&gt;        38:                    .    2d;-4d-4A-4B                .    ***</span></span>
<span id="cb12-41"><a href="#cb12-41" tabindex="-1"></a><span class="st">&gt;        39:     4GG-4FF#-4GG-4AA               .     4g-4d-4e-4f#    ***</span></span>
<span id="cb12-42"><a href="#cb12-42" tabindex="-1"></a><span class="st">&gt;        40:                   =5              =5               =5    ***</span></span>
<span id="cb12-43"><a href="#cb12-43" tabindex="-1"></a><span class="st">&gt;    41-133::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb12-44"><a href="#cb12-44" tabindex="-1"></a><span class="st">&gt;    ####################### ^^^ chor001.krn ^^^ ########################</span></span>
<span id="cb12-45"><a href="#cb12-45" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb12-46"><a href="#cb12-46" tabindex="-1"></a><span class="st">&gt;           (8 more pieces...)</span></span>
<span id="cb12-47"><a href="#cb12-47" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb12-48"><a href="#cb12-48" tabindex="-1"></a><span class="st">&gt;    ####################### vvv chor010.krn vvv ########################</span></span>
<span id="cb12-49"><a href="#cb12-49" tabindex="-1"></a><span class="st">&gt;      1-60::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb12-50"><a href="#cb12-50" tabindex="-1"></a><span class="st">&gt;        61:       2AA;-2A-4E-8DL    2c;-2e-4e-4e                .    ***</span></span>
<span id="cb12-51"><a href="#cb12-51" tabindex="-1"></a><span class="st">&gt;        62:                    .               .     2a-4g-4g-8gL    ***</span></span>
<span id="cb12-52"><a href="#cb12-52" tabindex="-1"></a><span class="st">&gt;        63:                   =9              =9               =9    ***</span></span>
<span id="cb12-53"><a href="#cb12-53" tabindex="-1"></a><span class="st">&gt;        64:       4E-8DL-8CJ-4BB     4e-4e-4d-4c                .    ***</span></span>
<span id="cb12-54"><a href="#cb12-54" tabindex="-1"></a><span class="st">&gt;        65:                    .               .    4g-8gL-8fJ-4e    ***</span></span>
<span id="cb12-55"><a href="#cb12-55" tabindex="-1"></a><span class="st">&gt;        66:        8CJ-4BB-4C-4D               .                .    ***</span></span>
<span id="cb12-56"><a href="#cb12-56" tabindex="-1"></a><span class="st">&gt;        67:                    .    4d-4c-8F#-4G                .    ***</span></span>
<span id="cb12-57"><a href="#cb12-57" tabindex="-1"></a><span class="st">&gt;        68:                    .               .     8fJ-4e-4d-4c    ***</span></span>
<span id="cb12-58"><a href="#cb12-58" tabindex="-1"></a><span class="st">&gt;        69:        4C-4D-4D-2GG;               .                .    ***</span></span>
<span id="cb12-59"><a href="#cb12-59" tabindex="-1"></a><span class="st">&gt;        70:                  =10             =10              =10    ***</span></span>
<span id="cb12-60"><a href="#cb12-60" tabindex="-1"></a><span class="st">&gt;        71:                    .  8F#-4G-8F#-2G;     4d-4c-2B;-2e    ***</span></span>
<span id="cb12-61"><a href="#cb12-61" tabindex="-1"></a><span class="st">&gt;        72:                    .               .                .    ***</span></span>
<span id="cb12-62"><a href="#cb12-62" tabindex="-1"></a><span class="st">&gt;        73:       4D-2GG;-2C-4AA               .                .    ***</span></span>
<span id="cb12-63"><a href="#cb12-63" tabindex="-1"></a><span class="st">&gt;        74:                    .   8F#-2G;-2G-4A                .    ***</span></span>
<span id="cb12-64"><a href="#cb12-64" tabindex="-1"></a><span class="st">&gt;        75:                    .               .    2B;-2e-4e-8eL    ***</span></span>
<span id="cb12-65"><a href="#cb12-65" tabindex="-1"></a><span class="st">&gt;        76:                  =11             =11              =11    ***</span></span>
<span id="cb12-66"><a href="#cb12-66" tabindex="-1"></a><span class="st">&gt;        77:         2C-4AA-4E-4F    2G-4A-4G#-4A                .    ***</span></span>
<span id="cb12-67"><a href="#cb12-67" tabindex="-1"></a><span class="st">&gt;        78:                    .               .    4e-8eL-8dJ-4c    ***</span></span>
<span id="cb12-68"><a href="#cb12-68" tabindex="-1"></a><span class="st">&gt;        79:        4E-4F-4C-4BB-    4G#-4A-4G-4G                .    ***</span></span>
<span id="cb12-69"><a href="#cb12-69" tabindex="-1"></a><span class="st">&gt;        80:                    .               .    8dJ-4c-4c-[2d    ***</span></span>
<span id="cb12-70"><a href="#cb12-70" tabindex="-1"></a><span class="st">&gt;        81:                  =12             =12              =12    ***</span></span>
<span id="cb12-71"><a href="#cb12-71" tabindex="-1"></a><span class="st">&gt;        82:                    .               .                .    ***</span></span>
<span id="cb12-72"><a href="#cb12-72" tabindex="-1"></a><span class="st">&gt;        83:     4C-4BB--4AA-4GG#     4G-4G-4A-4B    4c-[2d-4d]-4c    ***</span></span>
<span id="cb12-73"><a href="#cb12-73" tabindex="-1"></a><span class="st">&gt;        84:                    .               .                .    ***</span></span>
<span id="cb12-74"><a href="#cb12-74" tabindex="-1"></a><span class="st">&gt;        85:    4AA-4GG#-4AA-2EE;  4A-4B-4A-2G#X;                .    ***</span></span>
<span id="cb12-75"><a href="#cb12-75" tabindex="-1"></a><span class="st">&gt;        86:                  =13             =13              =13    ***</span></span>
<span id="cb12-76"><a href="#cb12-76" tabindex="-1"></a><span class="st">&gt;        87:                    .               .                .    ***</span></span>
<span id="cb12-77"><a href="#cb12-77" tabindex="-1"></a><span class="st">&gt;        88:                    .               .                .    ***</span></span>
<span id="cb12-78"><a href="#cb12-78" tabindex="-1"></a><span class="st">&gt;        89:                    .               .                .    ***</span></span>
<span id="cb12-79"><a href="#cb12-79" tabindex="-1"></a><span class="st">&gt;        90:                   ==              ==               ==    ***</span></span>
<span id="cb12-80"><a href="#cb12-80" tabindex="-1"></a><span class="st">&gt;        91:                   *-              *-               *-    ***</span></span>
<span id="cb12-81"><a href="#cb12-81" tabindex="-1"></a><span class="st">&gt;        92:  !!!hum2abc: -Q ''</span></span>
<span id="cb12-82"><a href="#cb12-82" tabindex="-1"></a><span class="st">&gt;        93:  !!!title: @{PC#}. @{OTL@@DE}</span></span>
<span id="cb12-83"><a href="#cb12-83" tabindex="-1"></a><span class="st">&gt;        94:  !!!YOR1: 371 vierstimmige Choralges&amp;auml;nge von Johann ***</span></span>
<span id="cb12-84"><a href="#cb12-84" tabindex="-1"></a><span class="st">&gt;        95:  !!!YOR2: 4th ed. by Alfred D&amp;ouml;rffel (Leipzig: Breitk***</span></span>
<span id="cb12-85"><a href="#cb12-85" tabindex="-1"></a><span class="st">&gt;        96:  !!!YOR2: c.1875). 178 pp. Plate "</span>V.A<span class="fl">.10</span><span class="st">".  reprint: J.S.***</span></span>
<span id="cb12-86"><a href="#cb12-86" tabindex="-1"></a><span class="st">&gt;        97:  !!!YOR4: Chorales (New York: Associated Music Publishers***</span></span>
<span id="cb12-87"><a href="#cb12-87" tabindex="-1"></a><span class="st">&gt;        98:  !!!SMS: B&amp;H, 4th ed, Alfred D&amp;ouml;rffel, c.1875, plate ***</span></span>
<span id="cb12-88"><a href="#cb12-88" tabindex="-1"></a><span class="st">&gt;        99:  !!!EED:  Craig Stuart Sapp</span></span>
<span id="cb12-89"><a href="#cb12-89" tabindex="-1"></a><span class="st">&gt;       100:  !!!EEV:  2009/05/22</span></span>
<span id="cb12-90"><a href="#cb12-90" tabindex="-1"></a><span class="st">&gt;    ####################### ^^^ chor010.krn ^^^ ########################</span></span>
<span id="cb12-91"><a href="#cb12-91" tabindex="-1"></a><span class="st">&gt;                  (***one spine/path not displayed due to screen size***)</span></span>
<span id="cb12-92"><a href="#cb12-92" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb12-93"><a href="#cb12-93" tabindex="-1"></a><span class="st">&gt;       humdrumR corpus of ten pieces.</span></span>
<span id="cb12-94"><a href="#cb12-94" tabindex="-1"></a><span class="st">&gt;        Data fields: </span></span>
<span id="cb12-95"><a href="#cb12-95" tabindex="-1"></a><span class="st">&gt;                Token   :: character</span></span>
<span id="cb12-96"><a href="#cb12-96" tabindex="-1"></a><span class="st">&gt;                Semits  :: integer (**semits tokens)</span></span>
<span id="cb12-97"><a href="#cb12-97" tabindex="-1"></a><span class="st">&gt;                Kern    :: character (**kern tokens)</span></span>
<span id="cb12-98"><a href="#cb12-98" tabindex="-1"></a><span class="st">&gt;                Lowest  :: integer (**semits tokens)</span></span>
<span id="cb12-99"><a href="#cb12-99" tabindex="-1"></a><span class="st">&gt;                Beat    :: integer</span></span>
<span id="cb12-100"><a href="#cb12-100" tabindex="-1"></a><span class="st">&gt;               *Result1 :: character</span></span></code></pre></div>
<p>By saying <code>hop(2)</code>, our windows only open on every
<em>other</em> index. If we don’t want our four-note windows to overlap
at all, we could set <code>hop(4)</code>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">within</span>(chorales, <span class="fu">paste</span>(Token, <span class="at">collapse =</span> <span class="st">'-'</span>), <span class="fu">context</span>(<span class="fu">hop</span>(<span class="dv">4</span>), open <span class="sc">+</span> <span class="dv">3</span>))</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">####################### vvv chor001.krn vvv ########################</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of My Heart</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>               <span class="er">**</span>kern          <span class="sc">**</span>kern           <span class="sc">**</span>kern    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>               <span class="er">*</span>ICvox          <span class="sc">*</span>ICvox           <span class="sc">*</span>ICvox    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>               <span class="er">*</span>Ibass         <span class="sc">*</span>Itenor           <span class="sc">*</span>Ialto    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>              <span class="er">*</span>I<span class="st">"Bass        *I"</span>Tenor          <span class="sc">*</span>I<span class="st">"Alto    ***</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="st">&gt;        12:            *&gt;[A,A,B]       *&gt;[A,A,B]        *&gt;[A,A,B]    ***</span></span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a><span class="st">&gt;        13:         *&gt;norep[A,B]    *&gt;norep[A,B]     *&gt;norep[A,B]    ***</span></span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a><span class="st">&gt;        14:                  *&gt;A             *&gt;A              *&gt;A    ***</span></span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a><span class="st">&gt;        15:              *clefF4        *clefGv2          *clefG2    ***</span></span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a><span class="st">&gt;        16:               *k[f#]          *k[f#]           *k[f#]    ***</span></span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a><span class="st">&gt;        17:                  *G:             *G:              *G:    ***</span></span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a><span class="st">&gt;        18:                *M3/4           *M3/4            *M3/4    ***</span></span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a><span class="st">&gt;        19:               *MM100          *MM100           *MM100    ***</span></span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a><span class="st">&gt;        20:        4GG-4G-4E-4F#   4B-4B-8cL-8BJ      4d-4d-4e-4d    ***</span></span>
<span id="cb13-23"><a href="#cb13-23" tabindex="-1"></a><span class="st">&gt;        21:                   =1              =1               =1    ***</span></span>
<span id="cb13-24"><a href="#cb13-24" tabindex="-1"></a><span class="st">&gt;        22:                    .               .                .    ***</span></span>
<span id="cb13-25"><a href="#cb13-25" tabindex="-1"></a><span class="st">&gt;        23:                    .               .                .    ***</span></span>
<span id="cb13-26"><a href="#cb13-26" tabindex="-1"></a><span class="st">&gt;        24:                    .               .                .    ***</span></span>
<span id="cb13-27"><a href="#cb13-27" tabindex="-1"></a><span class="st">&gt;        25:                    .    4A-4G-4F#-4G                .    ***</span></span>
<span id="cb13-28"><a href="#cb13-28" tabindex="-1"></a><span class="st">&gt;        26:                   =2              =2               =2    ***</span></span>
<span id="cb13-29"><a href="#cb13-29" tabindex="-1"></a><span class="st">&gt;        27:          4G-4D-4E-4C               .     2d-4B-8eL-8d    ***</span></span>
<span id="cb13-30"><a href="#cb13-30" tabindex="-1"></a><span class="st">&gt;        28:                    .               .                .    ***</span></span>
<span id="cb13-31"><a href="#cb13-31" tabindex="-1"></a><span class="st">&gt;        29:                    .               .                .    ***</span></span>
<span id="cb13-32"><a href="#cb13-32" tabindex="-1"></a><span class="st">&gt;        30:                    .               .                .    ***</span></span>
<span id="cb13-33"><a href="#cb13-33" tabindex="-1"></a><span class="st">&gt;        31:                   =3              =3               =3    ***</span></span>
<span id="cb13-34"><a href="#cb13-34" tabindex="-1"></a><span class="st">&gt;        32:                    .   8cL-8BJ-4c-4d                .    ***</span></span>
<span id="cb13-35"><a href="#cb13-35" tabindex="-1"></a><span class="st">&gt;        33:                    .               .                .    ***</span></span>
<span id="cb13-36"><a href="#cb13-36" tabindex="-1"></a><span class="st">&gt;        34:    8BBL-8AAJ-4GG-2D;               .  8e-8f#J-4g-2f#;    ***</span></span>
<span id="cb13-37"><a href="#cb13-37" tabindex="-1"></a><span class="st">&gt;        35:                    .               .                .    ***</span></span>
<span id="cb13-38"><a href="#cb13-38" tabindex="-1"></a><span class="st">&gt;        36:                    .               .                .    ***</span></span>
<span id="cb13-39"><a href="#cb13-39" tabindex="-1"></a><span class="st">&gt;        37:                   =4              =4               =4    ***</span></span>
<span id="cb13-40"><a href="#cb13-40" tabindex="-1"></a><span class="st">&gt;        38:                    .    2d;-4d-4A-4B                .    ***</span></span>
<span id="cb13-41"><a href="#cb13-41" tabindex="-1"></a><span class="st">&gt;        39:     4GG-4FF#-4GG-4AA               .     4g-4d-4e-4f#    ***</span></span>
<span id="cb13-42"><a href="#cb13-42" tabindex="-1"></a><span class="st">&gt;        40:                   =5              =5               =5    ***</span></span>
<span id="cb13-43"><a href="#cb13-43" tabindex="-1"></a><span class="st">&gt;    41-133::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb13-44"><a href="#cb13-44" tabindex="-1"></a><span class="st">&gt;    ####################### ^^^ chor001.krn ^^^ ########################</span></span>
<span id="cb13-45"><a href="#cb13-45" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb13-46"><a href="#cb13-46" tabindex="-1"></a><span class="st">&gt;           (8 more pieces...)</span></span>
<span id="cb13-47"><a href="#cb13-47" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb13-48"><a href="#cb13-48" tabindex="-1"></a><span class="st">&gt;    ####################### vvv chor010.krn vvv ########################</span></span>
<span id="cb13-49"><a href="#cb13-49" tabindex="-1"></a><span class="st">&gt;      1-60::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb13-50"><a href="#cb13-50" tabindex="-1"></a><span class="st">&gt;        61:                    .               .                .    ***</span></span>
<span id="cb13-51"><a href="#cb13-51" tabindex="-1"></a><span class="st">&gt;        62:                    .               .     2a-4g-4g-8gL    ***</span></span>
<span id="cb13-52"><a href="#cb13-52" tabindex="-1"></a><span class="st">&gt;        63:                   =9              =9               =9    ***</span></span>
<span id="cb13-53"><a href="#cb13-53" tabindex="-1"></a><span class="st">&gt;        64:       4E-8DL-8CJ-4BB     4e-4e-4d-4c                .    ***</span></span>
<span id="cb13-54"><a href="#cb13-54" tabindex="-1"></a><span class="st">&gt;        65:                    .               .                .    ***</span></span>
<span id="cb13-55"><a href="#cb13-55" tabindex="-1"></a><span class="st">&gt;        66:                    .               .                .    ***</span></span>
<span id="cb13-56"><a href="#cb13-56" tabindex="-1"></a><span class="st">&gt;        67:                    .               .                .    ***</span></span>
<span id="cb13-57"><a href="#cb13-57" tabindex="-1"></a><span class="st">&gt;        68:                    .               .     8fJ-4e-4d-4c    ***</span></span>
<span id="cb13-58"><a href="#cb13-58" tabindex="-1"></a><span class="st">&gt;        69:        4C-4D-4D-2GG;               .                .    ***</span></span>
<span id="cb13-59"><a href="#cb13-59" tabindex="-1"></a><span class="st">&gt;        70:                  =10             =10              =10    ***</span></span>
<span id="cb13-60"><a href="#cb13-60" tabindex="-1"></a><span class="st">&gt;        71:                    .  8F#-4G-8F#-2G;                .    ***</span></span>
<span id="cb13-61"><a href="#cb13-61" tabindex="-1"></a><span class="st">&gt;        72:                    .               .                .    ***</span></span>
<span id="cb13-62"><a href="#cb13-62" tabindex="-1"></a><span class="st">&gt;        73:                    .               .                .    ***</span></span>
<span id="cb13-63"><a href="#cb13-63" tabindex="-1"></a><span class="st">&gt;        74:                    .               .                .    ***</span></span>
<span id="cb13-64"><a href="#cb13-64" tabindex="-1"></a><span class="st">&gt;        75:                    .               .    2B;-2e-4e-8eL    ***</span></span>
<span id="cb13-65"><a href="#cb13-65" tabindex="-1"></a><span class="st">&gt;        76:                  =11             =11              =11    ***</span></span>
<span id="cb13-66"><a href="#cb13-66" tabindex="-1"></a><span class="st">&gt;        77:         2C-4AA-4E-4F    2G-4A-4G#-4A                .    ***</span></span>
<span id="cb13-67"><a href="#cb13-67" tabindex="-1"></a><span class="st">&gt;        78:                    .               .                .    ***</span></span>
<span id="cb13-68"><a href="#cb13-68" tabindex="-1"></a><span class="st">&gt;        79:                    .               .                .    ***</span></span>
<span id="cb13-69"><a href="#cb13-69" tabindex="-1"></a><span class="st">&gt;        80:                    .               .    8dJ-4c-4c-[2d    ***</span></span>
<span id="cb13-70"><a href="#cb13-70" tabindex="-1"></a><span class="st">&gt;        81:                  =12             =12              =12    ***</span></span>
<span id="cb13-71"><a href="#cb13-71" tabindex="-1"></a><span class="st">&gt;        82:                    .               .                .    ***</span></span>
<span id="cb13-72"><a href="#cb13-72" tabindex="-1"></a><span class="st">&gt;        83:     4C-4BB--4AA-4GG#     4G-4G-4A-4B                .    ***</span></span>
<span id="cb13-73"><a href="#cb13-73" tabindex="-1"></a><span class="st">&gt;        84:                    .               .                .    ***</span></span>
<span id="cb13-74"><a href="#cb13-74" tabindex="-1"></a><span class="st">&gt;        85:                    .               .                .    ***</span></span>
<span id="cb13-75"><a href="#cb13-75" tabindex="-1"></a><span class="st">&gt;        86:                  =13             =13              =13    ***</span></span>
<span id="cb13-76"><a href="#cb13-76" tabindex="-1"></a><span class="st">&gt;        87:                    .               .                .    ***</span></span>
<span id="cb13-77"><a href="#cb13-77" tabindex="-1"></a><span class="st">&gt;        88:                    .               .                .    ***</span></span>
<span id="cb13-78"><a href="#cb13-78" tabindex="-1"></a><span class="st">&gt;        89:                    .               .                .    ***</span></span>
<span id="cb13-79"><a href="#cb13-79" tabindex="-1"></a><span class="st">&gt;        90:                   ==              ==               ==    ***</span></span>
<span id="cb13-80"><a href="#cb13-80" tabindex="-1"></a><span class="st">&gt;        91:                   *-              *-               *-    ***</span></span>
<span id="cb13-81"><a href="#cb13-81" tabindex="-1"></a><span class="st">&gt;        92:  !!!hum2abc: -Q ''</span></span>
<span id="cb13-82"><a href="#cb13-82" tabindex="-1"></a><span class="st">&gt;        93:  !!!title: @{PC#}. @{OTL@@DE}</span></span>
<span id="cb13-83"><a href="#cb13-83" tabindex="-1"></a><span class="st">&gt;        94:  !!!YOR1: 371 vierstimmige Choralges&amp;auml;nge von Johann ***</span></span>
<span id="cb13-84"><a href="#cb13-84" tabindex="-1"></a><span class="st">&gt;        95:  !!!YOR2: 4th ed. by Alfred D&amp;ouml;rffel (Leipzig: Breitk***</span></span>
<span id="cb13-85"><a href="#cb13-85" tabindex="-1"></a><span class="st">&gt;        96:  !!!YOR2: c.1875). 178 pp. Plate "</span>V.A<span class="fl">.10</span><span class="st">".  reprint: J.S.***</span></span>
<span id="cb13-86"><a href="#cb13-86" tabindex="-1"></a><span class="st">&gt;        97:  !!!YOR4: Chorales (New York: Associated Music Publishers***</span></span>
<span id="cb13-87"><a href="#cb13-87" tabindex="-1"></a><span class="st">&gt;        98:  !!!SMS: B&amp;H, 4th ed, Alfred D&amp;ouml;rffel, c.1875, plate ***</span></span>
<span id="cb13-88"><a href="#cb13-88" tabindex="-1"></a><span class="st">&gt;        99:  !!!EED:  Craig Stuart Sapp</span></span>
<span id="cb13-89"><a href="#cb13-89" tabindex="-1"></a><span class="st">&gt;       100:  !!!EEV:  2009/05/22</span></span>
<span id="cb13-90"><a href="#cb13-90" tabindex="-1"></a><span class="st">&gt;    ####################### ^^^ chor010.krn ^^^ ########################</span></span>
<span id="cb13-91"><a href="#cb13-91" tabindex="-1"></a><span class="st">&gt;                  (***one spine/path not displayed due to screen size***)</span></span>
<span id="cb13-92"><a href="#cb13-92" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb13-93"><a href="#cb13-93" tabindex="-1"></a><span class="st">&gt;       humdrumR corpus of ten pieces.</span></span>
<span id="cb13-94"><a href="#cb13-94" tabindex="-1"></a><span class="st">&gt;        Data fields: </span></span>
<span id="cb13-95"><a href="#cb13-95" tabindex="-1"></a><span class="st">&gt;                Token   :: character</span></span>
<span id="cb13-96"><a href="#cb13-96" tabindex="-1"></a><span class="st">&gt;                Semits  :: integer (**semits tokens)</span></span>
<span id="cb13-97"><a href="#cb13-97" tabindex="-1"></a><span class="st">&gt;                Kern    :: character (**kern tokens)</span></span>
<span id="cb13-98"><a href="#cb13-98" tabindex="-1"></a><span class="st">&gt;                Lowest  :: integer (**semits tokens)</span></span>
<span id="cb13-99"><a href="#cb13-99" tabindex="-1"></a><span class="st">&gt;                Beat    :: integer</span></span>
<span id="cb13-100"><a href="#cb13-100" tabindex="-1"></a><span class="st">&gt;               *Result1 :: character</span></span></code></pre></div>
<p>Note that the <code>by</code> argument can be a vector of hop-sizes,
which will cause <code><a href="../reference/hop.html">hop()</a></code> to generate a sequence of irregular
hops! You can also use <code><a href="../reference/hop.html">hop()</a></code>’s <code>from</code> and
<code>to</code> arguments to control when the first/last windows occur,
etc. When using <code>to</code>, you can refer to another special
variable—<code>end</code>—which <code><a href="../reference/context.html">context()</a></code> will interpret as
the last index. So you could, for example, say
<code>hop(from = 5, to = end - 5)</code>.</p>
</div>
<div class="section level4">
<h4 id="fixed-close">Fixed Close<a class="anchor" aria-label="anchor" href="#fixed-close"></a>
</h4>
<p>So <code><a href="../reference/hop.html">hop()</a></code> is telling <code><a href="../reference/context.html">context()</a></code> when to open
windows; how are we telling it when to close windows? The second
argument to <code><a href="../reference/context.html">context()</a></code> is the <code>close</code> argument.
Like <code>open</code>, the <code>close</code> argument should be a set
of natural-number indices. However, the cool thing is that the
<code>close</code> argument can <em>refer to</em> the <code>open</code>
argument. So rather than manually figuring out what index would go with
each <code>open</code> (don’t try, because the multiple spines etc. make
it confusing), we simply say <code>open + 3</code>. If we want five-note
windows, we can say <code>open + 4</code>.</p>
<hr>
<p>What if we want to the window to simply close before the next
opening? We can do this by having the <code>close</code> argument refer
to the <code>nextopen</code> variable. So instead of saying
<code>open + 3</code> we say <code>nextopen - 1L</code>!</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">within</span>(chorales, <span class="fu">paste</span>(Token, <span class="at">collapse =</span> <span class="st">'-'</span>), <span class="fu">context</span>(<span class="fu">hop</span>(<span class="dv">4</span>), nextopen <span class="sc">-</span> 1L))</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">####################### vvv chor001.krn vvv ########################</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of My Heart</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>               <span class="er">**</span>kern          <span class="sc">**</span>kern           <span class="sc">**</span>kern    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>               <span class="er">*</span>ICvox          <span class="sc">*</span>ICvox           <span class="sc">*</span>ICvox    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>               <span class="er">*</span>Ibass         <span class="sc">*</span>Itenor           <span class="sc">*</span>Ialto    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>              <span class="er">*</span>I<span class="st">"Bass        *I"</span>Tenor          <span class="sc">*</span>I<span class="st">"Alto    ***</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="st">&gt;        12:            *&gt;[A,A,B]       *&gt;[A,A,B]        *&gt;[A,A,B]    ***</span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a><span class="st">&gt;        13:         *&gt;norep[A,B]    *&gt;norep[A,B]     *&gt;norep[A,B]    ***</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a><span class="st">&gt;        14:                  *&gt;A             *&gt;A              *&gt;A    ***</span></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a><span class="st">&gt;        15:              *clefF4        *clefGv2          *clefG2    ***</span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a><span class="st">&gt;        16:               *k[f#]          *k[f#]           *k[f#]    ***</span></span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a><span class="st">&gt;        17:                  *G:             *G:              *G:    ***</span></span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a><span class="st">&gt;        18:                *M3/4           *M3/4            *M3/4    ***</span></span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a><span class="st">&gt;        19:               *MM100          *MM100           *MM100    ***</span></span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a><span class="st">&gt;        20:        4GG-4G-4E-4F#   4B-4B-8cL-8BJ      4d-4d-4e-4d    ***</span></span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a><span class="st">&gt;        21:                   =1              =1               =1    ***</span></span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a><span class="st">&gt;        22:                    .               .                .    ***</span></span>
<span id="cb14-25"><a href="#cb14-25" tabindex="-1"></a><span class="st">&gt;        23:                    .               .                .    ***</span></span>
<span id="cb14-26"><a href="#cb14-26" tabindex="-1"></a><span class="st">&gt;        24:                    .               .                .    ***</span></span>
<span id="cb14-27"><a href="#cb14-27" tabindex="-1"></a><span class="st">&gt;        25:                    .    4A-4G-4F#-4G                .    ***</span></span>
<span id="cb14-28"><a href="#cb14-28" tabindex="-1"></a><span class="st">&gt;        26:                   =2              =2               =2    ***</span></span>
<span id="cb14-29"><a href="#cb14-29" tabindex="-1"></a><span class="st">&gt;        27:          4G-4D-4E-4C               .     2d-4B-8eL-8d    ***</span></span>
<span id="cb14-30"><a href="#cb14-30" tabindex="-1"></a><span class="st">&gt;        28:                    .               .                .    ***</span></span>
<span id="cb14-31"><a href="#cb14-31" tabindex="-1"></a><span class="st">&gt;        29:                    .               .                .    ***</span></span>
<span id="cb14-32"><a href="#cb14-32" tabindex="-1"></a><span class="st">&gt;        30:                    .               .                .    ***</span></span>
<span id="cb14-33"><a href="#cb14-33" tabindex="-1"></a><span class="st">&gt;        31:                   =3              =3               =3    ***</span></span>
<span id="cb14-34"><a href="#cb14-34" tabindex="-1"></a><span class="st">&gt;        32:                    .   8cL-8BJ-4c-4d                .    ***</span></span>
<span id="cb14-35"><a href="#cb14-35" tabindex="-1"></a><span class="st">&gt;        33:                    .               .                .    ***</span></span>
<span id="cb14-36"><a href="#cb14-36" tabindex="-1"></a><span class="st">&gt;        34:    8BBL-8AAJ-4GG-2D;               .  8e-8f#J-4g-2f#;    ***</span></span>
<span id="cb14-37"><a href="#cb14-37" tabindex="-1"></a><span class="st">&gt;        35:                    .               .                .    ***</span></span>
<span id="cb14-38"><a href="#cb14-38" tabindex="-1"></a><span class="st">&gt;        36:                    .               .                .    ***</span></span>
<span id="cb14-39"><a href="#cb14-39" tabindex="-1"></a><span class="st">&gt;        37:                   =4              =4               =4    ***</span></span>
<span id="cb14-40"><a href="#cb14-40" tabindex="-1"></a><span class="st">&gt;        38:                    .    2d;-4d-4A-4B                .    ***</span></span>
<span id="cb14-41"><a href="#cb14-41" tabindex="-1"></a><span class="st">&gt;        39:     4GG-4FF#-4GG-4AA               .     4g-4d-4e-4f#    ***</span></span>
<span id="cb14-42"><a href="#cb14-42" tabindex="-1"></a><span class="st">&gt;        40:                   =5              =5               =5    ***</span></span>
<span id="cb14-43"><a href="#cb14-43" tabindex="-1"></a><span class="st">&gt;    41-133::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb14-44"><a href="#cb14-44" tabindex="-1"></a><span class="st">&gt;    ####################### ^^^ chor001.krn ^^^ ########################</span></span>
<span id="cb14-45"><a href="#cb14-45" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb14-46"><a href="#cb14-46" tabindex="-1"></a><span class="st">&gt;           (8 more pieces...)</span></span>
<span id="cb14-47"><a href="#cb14-47" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb14-48"><a href="#cb14-48" tabindex="-1"></a><span class="st">&gt;    ####################### vvv chor010.krn vvv ########################</span></span>
<span id="cb14-49"><a href="#cb14-49" tabindex="-1"></a><span class="st">&gt;      1-60::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb14-50"><a href="#cb14-50" tabindex="-1"></a><span class="st">&gt;        61:                    .               .                .    ***</span></span>
<span id="cb14-51"><a href="#cb14-51" tabindex="-1"></a><span class="st">&gt;        62:                    .               .     2a-4g-4g-8gL    ***</span></span>
<span id="cb14-52"><a href="#cb14-52" tabindex="-1"></a><span class="st">&gt;        63:                   =9              =9               =9    ***</span></span>
<span id="cb14-53"><a href="#cb14-53" tabindex="-1"></a><span class="st">&gt;        64:       4E-8DL-8CJ-4BB     4e-4e-4d-4c                .    ***</span></span>
<span id="cb14-54"><a href="#cb14-54" tabindex="-1"></a><span class="st">&gt;        65:                    .               .                .    ***</span></span>
<span id="cb14-55"><a href="#cb14-55" tabindex="-1"></a><span class="st">&gt;        66:                    .               .                .    ***</span></span>
<span id="cb14-56"><a href="#cb14-56" tabindex="-1"></a><span class="st">&gt;        67:                    .               .                .    ***</span></span>
<span id="cb14-57"><a href="#cb14-57" tabindex="-1"></a><span class="st">&gt;        68:                    .               .     8fJ-4e-4d-4c    ***</span></span>
<span id="cb14-58"><a href="#cb14-58" tabindex="-1"></a><span class="st">&gt;        69:        4C-4D-4D-2GG;               .                .    ***</span></span>
<span id="cb14-59"><a href="#cb14-59" tabindex="-1"></a><span class="st">&gt;        70:                  =10             =10              =10    ***</span></span>
<span id="cb14-60"><a href="#cb14-60" tabindex="-1"></a><span class="st">&gt;        71:                    .  8F#-4G-8F#-2G;                .    ***</span></span>
<span id="cb14-61"><a href="#cb14-61" tabindex="-1"></a><span class="st">&gt;        72:                    .               .                .    ***</span></span>
<span id="cb14-62"><a href="#cb14-62" tabindex="-1"></a><span class="st">&gt;        73:                    .               .                .    ***</span></span>
<span id="cb14-63"><a href="#cb14-63" tabindex="-1"></a><span class="st">&gt;        74:                    .               .                .    ***</span></span>
<span id="cb14-64"><a href="#cb14-64" tabindex="-1"></a><span class="st">&gt;        75:                    .               .    2B;-2e-4e-8eL    ***</span></span>
<span id="cb14-65"><a href="#cb14-65" tabindex="-1"></a><span class="st">&gt;        76:                  =11             =11              =11    ***</span></span>
<span id="cb14-66"><a href="#cb14-66" tabindex="-1"></a><span class="st">&gt;        77:         2C-4AA-4E-4F    2G-4A-4G#-4A                .    ***</span></span>
<span id="cb14-67"><a href="#cb14-67" tabindex="-1"></a><span class="st">&gt;        78:                    .               .                .    ***</span></span>
<span id="cb14-68"><a href="#cb14-68" tabindex="-1"></a><span class="st">&gt;        79:                    .               .                .    ***</span></span>
<span id="cb14-69"><a href="#cb14-69" tabindex="-1"></a><span class="st">&gt;        80:                    .               .    8dJ-4c-4c-[2d    ***</span></span>
<span id="cb14-70"><a href="#cb14-70" tabindex="-1"></a><span class="st">&gt;        81:                  =12             =12              =12    ***</span></span>
<span id="cb14-71"><a href="#cb14-71" tabindex="-1"></a><span class="st">&gt;        82:                    .               .                .    ***</span></span>
<span id="cb14-72"><a href="#cb14-72" tabindex="-1"></a><span class="st">&gt;        83:     4C-4BB--4AA-4GG#     4G-4G-4A-4B                .    ***</span></span>
<span id="cb14-73"><a href="#cb14-73" tabindex="-1"></a><span class="st">&gt;        84:                    .               .                .    ***</span></span>
<span id="cb14-74"><a href="#cb14-74" tabindex="-1"></a><span class="st">&gt;        85:                    .               .                .    ***</span></span>
<span id="cb14-75"><a href="#cb14-75" tabindex="-1"></a><span class="st">&gt;        86:                  =13             =13              =13    ***</span></span>
<span id="cb14-76"><a href="#cb14-76" tabindex="-1"></a><span class="st">&gt;        87:                    .               .       4d]-4c-2B;    ***</span></span>
<span id="cb14-77"><a href="#cb14-77" tabindex="-1"></a><span class="st">&gt;        88:             4AA-2EE;        4A-2G#X;                .    ***</span></span>
<span id="cb14-78"><a href="#cb14-78" tabindex="-1"></a><span class="st">&gt;        89:                    .               .                .    ***</span></span>
<span id="cb14-79"><a href="#cb14-79" tabindex="-1"></a><span class="st">&gt;        90:                   ==              ==               ==    ***</span></span>
<span id="cb14-80"><a href="#cb14-80" tabindex="-1"></a><span class="st">&gt;        91:                   *-              *-               *-    ***</span></span>
<span id="cb14-81"><a href="#cb14-81" tabindex="-1"></a><span class="st">&gt;        92:  !!!hum2abc: -Q ''</span></span>
<span id="cb14-82"><a href="#cb14-82" tabindex="-1"></a><span class="st">&gt;        93:  !!!title: @{PC#}. @{OTL@@DE}</span></span>
<span id="cb14-83"><a href="#cb14-83" tabindex="-1"></a><span class="st">&gt;        94:  !!!YOR1: 371 vierstimmige Choralges&amp;auml;nge von Johann ***</span></span>
<span id="cb14-84"><a href="#cb14-84" tabindex="-1"></a><span class="st">&gt;        95:  !!!YOR2: 4th ed. by Alfred D&amp;ouml;rffel (Leipzig: Breitk***</span></span>
<span id="cb14-85"><a href="#cb14-85" tabindex="-1"></a><span class="st">&gt;        96:  !!!YOR2: c.1875). 178 pp. Plate "</span>V.A<span class="fl">.10</span><span class="st">".  reprint: J.S.***</span></span>
<span id="cb14-86"><a href="#cb14-86" tabindex="-1"></a><span class="st">&gt;        97:  !!!YOR4: Chorales (New York: Associated Music Publishers***</span></span>
<span id="cb14-87"><a href="#cb14-87" tabindex="-1"></a><span class="st">&gt;        98:  !!!SMS: B&amp;H, 4th ed, Alfred D&amp;ouml;rffel, c.1875, plate ***</span></span>
<span id="cb14-88"><a href="#cb14-88" tabindex="-1"></a><span class="st">&gt;        99:  !!!EED:  Craig Stuart Sapp</span></span>
<span id="cb14-89"><a href="#cb14-89" tabindex="-1"></a><span class="st">&gt;       100:  !!!EEV:  2009/05/22</span></span>
<span id="cb14-90"><a href="#cb14-90" tabindex="-1"></a><span class="st">&gt;    ####################### ^^^ chor010.krn ^^^ ########################</span></span>
<span id="cb14-91"><a href="#cb14-91" tabindex="-1"></a><span class="st">&gt;                  (***one spine/path not displayed due to screen size***)</span></span>
<span id="cb14-92"><a href="#cb14-92" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb14-93"><a href="#cb14-93" tabindex="-1"></a><span class="st">&gt;       humdrumR corpus of ten pieces.</span></span>
<span id="cb14-94"><a href="#cb14-94" tabindex="-1"></a><span class="st">&gt;        Data fields: </span></span>
<span id="cb14-95"><a href="#cb14-95" tabindex="-1"></a><span class="st">&gt;                Token   :: character</span></span>
<span id="cb14-96"><a href="#cb14-96" tabindex="-1"></a><span class="st">&gt;                Semits  :: integer (**semits tokens)</span></span>
<span id="cb14-97"><a href="#cb14-97" tabindex="-1"></a><span class="st">&gt;                Kern    :: character (**kern tokens)</span></span>
<span id="cb14-98"><a href="#cb14-98" tabindex="-1"></a><span class="st">&gt;                Lowest  :: integer (**semits tokens)</span></span>
<span id="cb14-99"><a href="#cb14-99" tabindex="-1"></a><span class="st">&gt;                Beat    :: integer</span></span>
<span id="cb14-100"><a href="#cb14-100" tabindex="-1"></a><span class="st">&gt;               *Result1 :: character</span></span></code></pre></div>
<p>Now we’ll get exhaustive windows no matter where we open the windows.
For example, we can change the hop size and still get exhaustive
windows!</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">within</span>(chorales, <span class="fu">paste</span>(Token, <span class="at">collapse =</span> <span class="st">'-'</span>), <span class="fu">context</span>(<span class="fu">hop</span>(<span class="dv">6</span>), nextopen <span class="sc">-</span> 1L))</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">##################### vvv chor001.krn vvv #####################</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of My Heart</span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>                     <span class="er">**</span>kern                <span class="sc">**</span>kern    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>                     <span class="er">*</span>ICvox                <span class="sc">*</span>ICvox    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>                     <span class="er">*</span>Ibass               <span class="sc">*</span>Itenor    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>                    <span class="er">*</span>I<span class="st">"Bass              *I"</span>Tenor    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">12</span><span class="sc">:</span>                  <span class="er">*&gt;</span>[A,A,B]             <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">13</span><span class="sc">:</span>               <span class="er">*&gt;</span>norep[A,B]          <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-16"><a href="#cb15-16" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">14</span><span class="sc">:</span>                        <span class="er">*&gt;</span>A                   <span class="sc">*</span><span class="er">&gt;</span>A    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-17"><a href="#cb15-17" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">15</span><span class="sc">:</span>                    <span class="er">*</span>clefF4              <span class="sc">*</span>clefGv2    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-18"><a href="#cb15-18" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">16</span><span class="sc">:</span>                     <span class="er">*</span>k[f<span class="co">#]                *k[f#]    ***</span></span>
<span id="cb15-19"><a href="#cb15-19" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">17</span><span class="sc">:</span>                        <span class="er">*</span>G<span class="sc">:</span>                   <span class="er">*</span>G<span class="sc">:</span>    <span class="er">***</span></span>
<span id="cb15-20"><a href="#cb15-20" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">18</span><span class="sc">:</span>                      <span class="er">*</span>M3<span class="sc">/</span><span class="dv">4</span>                 <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-21"><a href="#cb15-21" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">19</span><span class="sc">:</span>                     <span class="er">*</span>MM100                <span class="sc">*</span>MM100    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-22"><a href="#cb15-22" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">20</span><span class="sc">:</span>        4GG<span class="sc">-</span>4G<span class="fl">-4E-4</span>F<span class="co">#-4G-4D   4B-4B-8cL-8BJ-4A-4G    ***</span></span>
<span id="cb15-23"><a href="#cb15-23" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">21</span><span class="sc">:</span>                         <span class="er">=</span><span class="dv">1</span>                    <span class="ot">=</span><span class="dv">1</span>    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-24"><a href="#cb15-24" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">22</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-25"><a href="#cb15-25" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">23</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-26"><a href="#cb15-26" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">24</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-27"><a href="#cb15-27" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">25</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-28"><a href="#cb15-28" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">26</span><span class="sc">:</span>                         <span class="er">=</span><span class="dv">2</span>                    <span class="ot">=</span><span class="dv">2</span>    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-29"><a href="#cb15-29" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">27</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-30"><a href="#cb15-30" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">28</span><span class="sc">:</span>                          .  4F<span class="co">#-4G-8cL-8BJ-4c-4d    ***</span></span>
<span id="cb15-31"><a href="#cb15-31" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">29</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-32"><a href="#cb15-32" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">30</span><span class="sc">:</span>    <span class="fl">4E-4</span>C<span class="sc">-</span>8BBL<span class="sc">-</span>8AAJ<span class="sc">-</span>4GG<span class="sc">-</span>2D;                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-33"><a href="#cb15-33" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">31</span><span class="sc">:</span>                         <span class="er">=</span><span class="dv">3</span>                    <span class="ot">=</span><span class="dv">3</span>    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-34"><a href="#cb15-34" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">32</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-35"><a href="#cb15-35" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">33</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-36"><a href="#cb15-36" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">34</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-37"><a href="#cb15-37" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">35</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-38"><a href="#cb15-38" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">36</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-39"><a href="#cb15-39" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">37</span><span class="sc">:</span>                         <span class="er">=</span><span class="dv">4</span>                    <span class="ot">=</span><span class="dv">4</span>    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-40"><a href="#cb15-40" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">38</span><span class="sc">:</span>                          .    2d;<span class="sc">-</span>4d<span class="sc">-</span>4A<span class="sc">-</span>4B<span class="sc">-</span>4c<span class="sc">-</span>4d    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-41"><a href="#cb15-41" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">39</span><span class="sc">:</span>    4GG<span class="sc">-</span>4FF<span class="co">#-4GG-4AA-4BB-4C                     .    ***</span></span>
<span id="cb15-42"><a href="#cb15-42" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">40</span><span class="sc">:</span>                         <span class="er">=</span><span class="dv">5</span>                    <span class="ot">=</span><span class="dv">5</span>    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-43"><a href="#cb15-43" tabindex="-1"></a><span class="er">&gt;</span>    <span class="dv">41-133</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb15-44"><a href="#cb15-44" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">##################### ^^^ chor001.krn ^^^ #####################</span></span>
<span id="cb15-45"><a href="#cb15-45" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb15-46"><a href="#cb15-46" tabindex="-1"></a><span class="er">&gt;</span>           (<span class="dv">8</span> more pieces...)</span>
<span id="cb15-47"><a href="#cb15-47" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb15-48"><a href="#cb15-48" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">##################### vvv chor010.krn vvv #####################</span></span>
<span id="cb15-49"><a href="#cb15-49" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">1-60</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb15-50"><a href="#cb15-50" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">61</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-51"><a href="#cb15-51" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">62</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-52"><a href="#cb15-52" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">63</span><span class="sc">:</span>                         <span class="er">=</span><span class="dv">9</span>                    <span class="ot">=</span><span class="dv">9</span>    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-53"><a href="#cb15-53" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">64</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-54"><a href="#cb15-54" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">65</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-55"><a href="#cb15-55" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">66</span><span class="sc">:</span>      8CJ<span class="sc">-</span>4BB<span class="sc">-</span>4C<span class="sc">-</span>4D<span class="sc">-</span>4D<span class="sc">-</span>2GG;                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-56"><a href="#cb15-56" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">67</span><span class="sc">:</span>                          .  4d<span class="sc">-</span>4c<span class="sc">-</span>8F<span class="co">#-4G-8F#-2G;    ***</span></span>
<span id="cb15-57"><a href="#cb15-57" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">68</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-58"><a href="#cb15-58" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">69</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-59"><a href="#cb15-59" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">70</span><span class="sc">:</span>                        <span class="er">=</span><span class="dv">10</span>                   <span class="ot">=</span><span class="dv">10</span>    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-60"><a href="#cb15-60" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">71</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-61"><a href="#cb15-61" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">72</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-62"><a href="#cb15-62" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">73</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-63"><a href="#cb15-63" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">74</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-64"><a href="#cb15-64" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">75</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-65"><a href="#cb15-65" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">76</span><span class="sc">:</span>                        <span class="er">=</span><span class="dv">11</span>                   <span class="ot">=</span><span class="dv">11</span>    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-66"><a href="#cb15-66" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">77</span><span class="sc">:</span>       2C<span class="sc">-</span>4AA<span class="fl">-4E-4</span>F<span class="sc">-</span>4C<span class="sc">-</span>4BB<span class="sc">-</span>    2G<span class="sc">-</span>4A<span class="sc">-</span>4G<span class="co">#-4A-4G-4G    ***</span></span>
<span id="cb15-67"><a href="#cb15-67" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">78</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-68"><a href="#cb15-68" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">79</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-69"><a href="#cb15-69" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">80</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-70"><a href="#cb15-70" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">81</span><span class="sc">:</span>                        <span class="er">=</span><span class="dv">12</span>                   <span class="ot">=</span><span class="dv">12</span>    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-71"><a href="#cb15-71" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">82</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-72"><a href="#cb15-72" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">83</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-73"><a href="#cb15-73" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">84</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-74"><a href="#cb15-74" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">85</span><span class="sc">:</span>          4AA<span class="sc">-</span>4GG<span class="co">#-4AA-2EE;        4A-4B-4A-2G#X;    ***</span></span>
<span id="cb15-75"><a href="#cb15-75" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">86</span><span class="sc">:</span>                        <span class="er">=</span><span class="dv">13</span>                   <span class="ot">=</span><span class="dv">13</span>    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-76"><a href="#cb15-76" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">87</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-77"><a href="#cb15-77" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">88</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-78"><a href="#cb15-78" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">89</span><span class="sc">:</span>                          .                     .    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-79"><a href="#cb15-79" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">90</span><span class="sc">:</span>                         <span class="er">==</span>                    <span class="er">==</span>    <span class="er">***</span></span>
<span id="cb15-80"><a href="#cb15-80" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">91</span><span class="sc">:</span>                         <span class="er">*</span><span class="sc">-</span>                    <span class="er">*</span><span class="sc">-</span>    <span class="er">***</span></span>
<span id="cb15-81"><a href="#cb15-81" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">92</span><span class="sc">:</span>  <span class="sc">!!!</span>hum2abc<span class="sc">:</span> <span class="sc">-</span>Q <span class="st">''</span></span>
<span id="cb15-82"><a href="#cb15-82" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">93</span><span class="sc">:</span>  <span class="sc">!!!</span>title<span class="sc">:</span> <span class="er">@</span>{PC<span class="co">#}. @{OTL@@DE}</span></span>
<span id="cb15-83"><a href="#cb15-83" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">94</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR1<span class="sc">:</span> <span class="dv">371</span> vierstimmige Choralges<span class="sc">&amp;</span>auml;nge von Jo<span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-84"><a href="#cb15-84" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">95</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> 4th ed. by Alfred D<span class="sc">&amp;</span>ouml;<span class="fu">rffel</span> (Leipzig<span class="sc">:</span> B<span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-85"><a href="#cb15-85" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">96</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> c<span class="fl">.1875</span>). <span class="dv">178</span> pp. Plate <span class="st">"V.A.10"</span>.  reprint<span class="sc">:</span><span class="er">***</span></span>
<span id="cb15-86"><a href="#cb15-86" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">97</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR4<span class="sc">:</span> <span class="fu">Chorales</span> (New York<span class="sc">:</span> Associated Music Publi<span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-87"><a href="#cb15-87" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">98</span><span class="sc">:</span>  <span class="sc">!!!</span>SMS<span class="sc">:</span> B<span class="sc">&amp;</span>H, 4th ed, Alfred D<span class="sc">&amp;</span>ouml;rffel, c<span class="fl">.1875</span>, p<span class="sc">**</span><span class="er">*</span></span>
<span id="cb15-88"><a href="#cb15-88" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">99</span><span class="sc">:</span>  <span class="sc">!!!</span>EED<span class="sc">:</span>  Craig Stuart Sapp</span>
<span id="cb15-89"><a href="#cb15-89" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">100</span><span class="sc">:</span>  <span class="sc">!!!</span>EEV<span class="sc">:</span>  <span class="dv">2009</span><span class="sc">/</span><span class="dv">05</span><span class="sc">/</span><span class="dv">22</span></span>
<span id="cb15-90"><a href="#cb15-90" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">##################### ^^^ chor010.krn ^^^ #####################</span></span>
<span id="cb15-91"><a href="#cb15-91" tabindex="-1"></a><span class="er">&gt;</span>           (<span class="sc">**</span><span class="er">*</span>two spines<span class="sc">/</span>paths not displayed due to screen size<span class="sc">**</span><span class="er">*</span>)</span>
<span id="cb15-92"><a href="#cb15-92" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb15-93"><a href="#cb15-93" tabindex="-1"></a><span class="er">&gt;</span>       humdrumR corpus of ten pieces.</span>
<span id="cb15-94"><a href="#cb15-94" tabindex="-1"></a><span class="sc">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb15-95"><a href="#cb15-95" tabindex="-1"></a><span class="er">&gt;</span>                Token   <span class="sc">::</span> character</span>
<span id="cb15-96"><a href="#cb15-96" tabindex="-1"></a><span class="sc">&gt;</span>                Semits  <span class="sc">::</span> <span class="fu">integer</span> (<span class="sc">**</span>semits tokens)</span>
<span id="cb15-97"><a href="#cb15-97" tabindex="-1"></a><span class="sc">&gt;</span>                Kern    <span class="sc">::</span> <span class="fu">character</span> (<span class="sc">**</span>kern tokens)</span>
<span id="cb15-98"><a href="#cb15-98" tabindex="-1"></a><span class="sc">&gt;</span>                Lowest  <span class="sc">::</span> <span class="fu">integer</span> (<span class="sc">**</span>semits tokens)</span>
<span id="cb15-99"><a href="#cb15-99" tabindex="-1"></a><span class="sc">&gt;</span>                Beat    <span class="sc">::</span> integer</span>
<span id="cb15-100"><a href="#cb15-100" tabindex="-1"></a><span class="sc">&gt;</span>               <span class="er">*</span>Result1 <span class="sc">::</span> character</span></code></pre></div>
<p>We could also close windows at <code>nextopen - 2</code> or
<code>nextopen + 1</code>—whatever we want!</p>
</div>
<div class="section level4">
<h4 id="flip-it-around">Flip it around<a class="anchor" aria-label="anchor" href="#flip-it-around"></a>
</h4>
<p>We don’t have to define <code>open</code> first, then have
<code>close</code> refer to open—we can also do the opposite!</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">within</span>(chorales, <span class="fu">paste</span>(Token, <span class="at">collapse =</span> <span class="st">'-'</span>), <span class="fu">context</span>(close <span class="sc">-</span> <span class="dv">3</span>, <span class="fu">hop</span>(<span class="dv">4</span>, <span class="at">from =</span> <span class="dv">4</span>)))</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">####################### vvv chor001.krn vvv ########################</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of My Heart</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>               <span class="er">**</span>kern          <span class="sc">**</span>kern           <span class="sc">**</span>kern    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>               <span class="er">*</span>ICvox          <span class="sc">*</span>ICvox           <span class="sc">*</span>ICvox    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>               <span class="er">*</span>Ibass         <span class="sc">*</span>Itenor           <span class="sc">*</span>Ialto    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>              <span class="er">*</span>I<span class="st">"Bass        *I"</span>Tenor          <span class="sc">*</span>I<span class="st">"Alto    ***</span></span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a><span class="st">&gt;        12:            *&gt;[A,A,B]       *&gt;[A,A,B]        *&gt;[A,A,B]    ***</span></span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a><span class="st">&gt;        13:         *&gt;norep[A,B]    *&gt;norep[A,B]     *&gt;norep[A,B]    ***</span></span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a><span class="st">&gt;        14:                  *&gt;A             *&gt;A              *&gt;A    ***</span></span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a><span class="st">&gt;        15:              *clefF4        *clefGv2          *clefG2    ***</span></span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a><span class="st">&gt;        16:               *k[f#]          *k[f#]           *k[f#]    ***</span></span>
<span id="cb16-19"><a href="#cb16-19" tabindex="-1"></a><span class="st">&gt;        17:                  *G:             *G:              *G:    ***</span></span>
<span id="cb16-20"><a href="#cb16-20" tabindex="-1"></a><span class="st">&gt;        18:                *M3/4           *M3/4            *M3/4    ***</span></span>
<span id="cb16-21"><a href="#cb16-21" tabindex="-1"></a><span class="st">&gt;        19:               *MM100          *MM100           *MM100    ***</span></span>
<span id="cb16-22"><a href="#cb16-22" tabindex="-1"></a><span class="st">&gt;        20:        4GG-4G-4E-4F#   4B-4B-8cL-8BJ      4d-4d-4e-4d    ***</span></span>
<span id="cb16-23"><a href="#cb16-23" tabindex="-1"></a><span class="st">&gt;        21:                   =1              =1               =1    ***</span></span>
<span id="cb16-24"><a href="#cb16-24" tabindex="-1"></a><span class="st">&gt;        22:                    .               .                .    ***</span></span>
<span id="cb16-25"><a href="#cb16-25" tabindex="-1"></a><span class="st">&gt;        23:                    .               .                .    ***</span></span>
<span id="cb16-26"><a href="#cb16-26" tabindex="-1"></a><span class="st">&gt;        24:                    .               .                .    ***</span></span>
<span id="cb16-27"><a href="#cb16-27" tabindex="-1"></a><span class="st">&gt;        25:                    .    4A-4G-4F#-4G                .    ***</span></span>
<span id="cb16-28"><a href="#cb16-28" tabindex="-1"></a><span class="st">&gt;        26:                   =2              =2               =2    ***</span></span>
<span id="cb16-29"><a href="#cb16-29" tabindex="-1"></a><span class="st">&gt;        27:          4G-4D-4E-4C               .     2d-4B-8eL-8d    ***</span></span>
<span id="cb16-30"><a href="#cb16-30" tabindex="-1"></a><span class="st">&gt;        28:                    .               .                .    ***</span></span>
<span id="cb16-31"><a href="#cb16-31" tabindex="-1"></a><span class="st">&gt;        29:                    .               .                .    ***</span></span>
<span id="cb16-32"><a href="#cb16-32" tabindex="-1"></a><span class="st">&gt;        30:                    .               .                .    ***</span></span>
<span id="cb16-33"><a href="#cb16-33" tabindex="-1"></a><span class="st">&gt;        31:                   =3              =3               =3    ***</span></span>
<span id="cb16-34"><a href="#cb16-34" tabindex="-1"></a><span class="st">&gt;        32:                    .   8cL-8BJ-4c-4d                .    ***</span></span>
<span id="cb16-35"><a href="#cb16-35" tabindex="-1"></a><span class="st">&gt;        33:                    .               .                .    ***</span></span>
<span id="cb16-36"><a href="#cb16-36" tabindex="-1"></a><span class="st">&gt;        34:    8BBL-8AAJ-4GG-2D;               .  8e-8f#J-4g-2f#;    ***</span></span>
<span id="cb16-37"><a href="#cb16-37" tabindex="-1"></a><span class="st">&gt;        35:                    .               .                .    ***</span></span>
<span id="cb16-38"><a href="#cb16-38" tabindex="-1"></a><span class="st">&gt;        36:                    .               .                .    ***</span></span>
<span id="cb16-39"><a href="#cb16-39" tabindex="-1"></a><span class="st">&gt;        37:                   =4              =4               =4    ***</span></span>
<span id="cb16-40"><a href="#cb16-40" tabindex="-1"></a><span class="st">&gt;        38:                    .    2d;-4d-4A-4B                .    ***</span></span>
<span id="cb16-41"><a href="#cb16-41" tabindex="-1"></a><span class="st">&gt;        39:     4GG-4FF#-4GG-4AA               .     4g-4d-4e-4f#    ***</span></span>
<span id="cb16-42"><a href="#cb16-42" tabindex="-1"></a><span class="st">&gt;        40:                   =5              =5               =5    ***</span></span>
<span id="cb16-43"><a href="#cb16-43" tabindex="-1"></a><span class="st">&gt;    41-133::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb16-44"><a href="#cb16-44" tabindex="-1"></a><span class="st">&gt;    ####################### ^^^ chor001.krn ^^^ ########################</span></span>
<span id="cb16-45"><a href="#cb16-45" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb16-46"><a href="#cb16-46" tabindex="-1"></a><span class="st">&gt;           (8 more pieces...)</span></span>
<span id="cb16-47"><a href="#cb16-47" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb16-48"><a href="#cb16-48" tabindex="-1"></a><span class="st">&gt;    ####################### vvv chor010.krn vvv ########################</span></span>
<span id="cb16-49"><a href="#cb16-49" tabindex="-1"></a><span class="st">&gt;      1-60::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb16-50"><a href="#cb16-50" tabindex="-1"></a><span class="st">&gt;        61:                    .               .                .    ***</span></span>
<span id="cb16-51"><a href="#cb16-51" tabindex="-1"></a><span class="st">&gt;        62:                    .               .     2a-4g-4g-8gL    ***</span></span>
<span id="cb16-52"><a href="#cb16-52" tabindex="-1"></a><span class="st">&gt;        63:                   =9              =9               =9    ***</span></span>
<span id="cb16-53"><a href="#cb16-53" tabindex="-1"></a><span class="st">&gt;        64:       4E-8DL-8CJ-4BB     4e-4e-4d-4c                .    ***</span></span>
<span id="cb16-54"><a href="#cb16-54" tabindex="-1"></a><span class="st">&gt;        65:                    .               .                .    ***</span></span>
<span id="cb16-55"><a href="#cb16-55" tabindex="-1"></a><span class="st">&gt;        66:                    .               .                .    ***</span></span>
<span id="cb16-56"><a href="#cb16-56" tabindex="-1"></a><span class="st">&gt;        67:                    .               .                .    ***</span></span>
<span id="cb16-57"><a href="#cb16-57" tabindex="-1"></a><span class="st">&gt;        68:                    .               .     8fJ-4e-4d-4c    ***</span></span>
<span id="cb16-58"><a href="#cb16-58" tabindex="-1"></a><span class="st">&gt;        69:        4C-4D-4D-2GG;               .                .    ***</span></span>
<span id="cb16-59"><a href="#cb16-59" tabindex="-1"></a><span class="st">&gt;        70:                  =10             =10              =10    ***</span></span>
<span id="cb16-60"><a href="#cb16-60" tabindex="-1"></a><span class="st">&gt;        71:                    .  8F#-4G-8F#-2G;                .    ***</span></span>
<span id="cb16-61"><a href="#cb16-61" tabindex="-1"></a><span class="st">&gt;        72:                    .               .                .    ***</span></span>
<span id="cb16-62"><a href="#cb16-62" tabindex="-1"></a><span class="st">&gt;        73:                    .               .                .    ***</span></span>
<span id="cb16-63"><a href="#cb16-63" tabindex="-1"></a><span class="st">&gt;        74:                    .               .                .    ***</span></span>
<span id="cb16-64"><a href="#cb16-64" tabindex="-1"></a><span class="st">&gt;        75:                    .               .    2B;-2e-4e-8eL    ***</span></span>
<span id="cb16-65"><a href="#cb16-65" tabindex="-1"></a><span class="st">&gt;        76:                  =11             =11              =11    ***</span></span>
<span id="cb16-66"><a href="#cb16-66" tabindex="-1"></a><span class="st">&gt;        77:         2C-4AA-4E-4F    2G-4A-4G#-4A                .    ***</span></span>
<span id="cb16-67"><a href="#cb16-67" tabindex="-1"></a><span class="st">&gt;        78:                    .               .                .    ***</span></span>
<span id="cb16-68"><a href="#cb16-68" tabindex="-1"></a><span class="st">&gt;        79:                    .               .                .    ***</span></span>
<span id="cb16-69"><a href="#cb16-69" tabindex="-1"></a><span class="st">&gt;        80:                    .               .    8dJ-4c-4c-[2d    ***</span></span>
<span id="cb16-70"><a href="#cb16-70" tabindex="-1"></a><span class="st">&gt;        81:                  =12             =12              =12    ***</span></span>
<span id="cb16-71"><a href="#cb16-71" tabindex="-1"></a><span class="st">&gt;        82:                    .               .                .    ***</span></span>
<span id="cb16-72"><a href="#cb16-72" tabindex="-1"></a><span class="st">&gt;        83:     4C-4BB--4AA-4GG#     4G-4G-4A-4B                .    ***</span></span>
<span id="cb16-73"><a href="#cb16-73" tabindex="-1"></a><span class="st">&gt;        84:                    .               .                .    ***</span></span>
<span id="cb16-74"><a href="#cb16-74" tabindex="-1"></a><span class="st">&gt;        85:                    .               .                .    ***</span></span>
<span id="cb16-75"><a href="#cb16-75" tabindex="-1"></a><span class="st">&gt;        86:                  =13             =13              =13    ***</span></span>
<span id="cb16-76"><a href="#cb16-76" tabindex="-1"></a><span class="st">&gt;        87:                    .               .                .    ***</span></span>
<span id="cb16-77"><a href="#cb16-77" tabindex="-1"></a><span class="st">&gt;        88:                    .               .                .    ***</span></span>
<span id="cb16-78"><a href="#cb16-78" tabindex="-1"></a><span class="st">&gt;        89:                    .               .                .    ***</span></span>
<span id="cb16-79"><a href="#cb16-79" tabindex="-1"></a><span class="st">&gt;        90:                   ==              ==               ==    ***</span></span>
<span id="cb16-80"><a href="#cb16-80" tabindex="-1"></a><span class="st">&gt;        91:                   *-              *-               *-    ***</span></span>
<span id="cb16-81"><a href="#cb16-81" tabindex="-1"></a><span class="st">&gt;        92:  !!!hum2abc: -Q ''</span></span>
<span id="cb16-82"><a href="#cb16-82" tabindex="-1"></a><span class="st">&gt;        93:  !!!title: @{PC#}. @{OTL@@DE}</span></span>
<span id="cb16-83"><a href="#cb16-83" tabindex="-1"></a><span class="st">&gt;        94:  !!!YOR1: 371 vierstimmige Choralges&amp;auml;nge von Johann ***</span></span>
<span id="cb16-84"><a href="#cb16-84" tabindex="-1"></a><span class="st">&gt;        95:  !!!YOR2: 4th ed. by Alfred D&amp;ouml;rffel (Leipzig: Breitk***</span></span>
<span id="cb16-85"><a href="#cb16-85" tabindex="-1"></a><span class="st">&gt;        96:  !!!YOR2: c.1875). 178 pp. Plate "</span>V.A<span class="fl">.10</span><span class="st">".  reprint: J.S.***</span></span>
<span id="cb16-86"><a href="#cb16-86" tabindex="-1"></a><span class="st">&gt;        97:  !!!YOR4: Chorales (New York: Associated Music Publishers***</span></span>
<span id="cb16-87"><a href="#cb16-87" tabindex="-1"></a><span class="st">&gt;        98:  !!!SMS: B&amp;H, 4th ed, Alfred D&amp;ouml;rffel, c.1875, plate ***</span></span>
<span id="cb16-88"><a href="#cb16-88" tabindex="-1"></a><span class="st">&gt;        99:  !!!EED:  Craig Stuart Sapp</span></span>
<span id="cb16-89"><a href="#cb16-89" tabindex="-1"></a><span class="st">&gt;       100:  !!!EEV:  2009/05/22</span></span>
<span id="cb16-90"><a href="#cb16-90" tabindex="-1"></a><span class="st">&gt;    ####################### ^^^ chor010.krn ^^^ ########################</span></span>
<span id="cb16-91"><a href="#cb16-91" tabindex="-1"></a><span class="st">&gt;                  (***one spine/path not displayed due to screen size***)</span></span>
<span id="cb16-92"><a href="#cb16-92" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb16-93"><a href="#cb16-93" tabindex="-1"></a><span class="st">&gt;       humdrumR corpus of ten pieces.</span></span>
<span id="cb16-94"><a href="#cb16-94" tabindex="-1"></a><span class="st">&gt;        Data fields: </span></span>
<span id="cb16-95"><a href="#cb16-95" tabindex="-1"></a><span class="st">&gt;                Token   :: character</span></span>
<span id="cb16-96"><a href="#cb16-96" tabindex="-1"></a><span class="st">&gt;                Semits  :: integer (**semits tokens)</span></span>
<span id="cb16-97"><a href="#cb16-97" tabindex="-1"></a><span class="st">&gt;                Kern    :: character (**kern tokens)</span></span>
<span id="cb16-98"><a href="#cb16-98" tabindex="-1"></a><span class="st">&gt;                Lowest  :: integer (**semits tokens)</span></span>
<span id="cb16-99"><a href="#cb16-99" tabindex="-1"></a><span class="st">&gt;                Beat    :: integer</span></span>
<span id="cb16-100"><a href="#cb16-100" tabindex="-1"></a><span class="st">&gt;               *Result1 :: character</span></span></code></pre></div>
<p>We’ve got the exact same result by telling the window closes to hop
along regularly (every four indices) and having the <code>open</code>
argument refer to the closing indices (<code>close - 3</code>). The
<code>open</code> argument can also refer to the <code>prevclose</code>
(previous close). Notice that our output windows are still “placed” to
align with the opening—we can set <code>alignLeft = FALSE</code> in our
call to <code><a href="../reference/withinHumdrum.html">within.humdrumR()</a></code>, if we want the output to align
with the close:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">within</span>(chorales, <span class="fu">paste</span>(Token, <span class="at">collapse =</span> <span class="st">'-'</span>), <span class="fu">context</span>(close <span class="sc">-</span> <span class="dv">3</span>, <span class="fu">hop</span>(<span class="dv">4</span>, <span class="at">from =</span> <span class="dv">4</span>)), <span class="at">alignLeft =</span> <span class="cn">FALSE</span>)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">####################### vvv chor001.krn vvv ########################</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of My Heart</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>               <span class="er">**</span>kern          <span class="sc">**</span>kern           <span class="sc">**</span>kern    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>               <span class="er">*</span>ICvox          <span class="sc">*</span>ICvox           <span class="sc">*</span>ICvox    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>               <span class="er">*</span>Ibass         <span class="sc">*</span>Itenor           <span class="sc">*</span>Ialto    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>              <span class="er">*</span>I<span class="st">"Bass        *I"</span>Tenor          <span class="sc">*</span>I<span class="st">"Alto    ***</span></span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a><span class="st">&gt;        12:            *&gt;[A,A,B]       *&gt;[A,A,B]        *&gt;[A,A,B]    ***</span></span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a><span class="st">&gt;        13:         *&gt;norep[A,B]    *&gt;norep[A,B]     *&gt;norep[A,B]    ***</span></span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a><span class="st">&gt;        14:                  *&gt;A             *&gt;A              *&gt;A    ***</span></span>
<span id="cb17-17"><a href="#cb17-17" tabindex="-1"></a><span class="st">&gt;        15:              *clefF4        *clefGv2          *clefG2    ***</span></span>
<span id="cb17-18"><a href="#cb17-18" tabindex="-1"></a><span class="st">&gt;        16:               *k[f#]          *k[f#]           *k[f#]    ***</span></span>
<span id="cb17-19"><a href="#cb17-19" tabindex="-1"></a><span class="st">&gt;        17:                  *G:             *G:              *G:    ***</span></span>
<span id="cb17-20"><a href="#cb17-20" tabindex="-1"></a><span class="st">&gt;        18:                *M3/4           *M3/4            *M3/4    ***</span></span>
<span id="cb17-21"><a href="#cb17-21" tabindex="-1"></a><span class="st">&gt;        19:               *MM100          *MM100           *MM100    ***</span></span>
<span id="cb17-22"><a href="#cb17-22" tabindex="-1"></a><span class="st">&gt;        20:                    .               .                .    ***</span></span>
<span id="cb17-23"><a href="#cb17-23" tabindex="-1"></a><span class="st">&gt;        21:                   =1              =1               =1    ***</span></span>
<span id="cb17-24"><a href="#cb17-24" tabindex="-1"></a><span class="st">&gt;        22:                    .               .                .    ***</span></span>
<span id="cb17-25"><a href="#cb17-25" tabindex="-1"></a><span class="st">&gt;        23:                    .               .                .    ***</span></span>
<span id="cb17-26"><a href="#cb17-26" tabindex="-1"></a><span class="st">&gt;        24:                    .   4B-4B-8cL-8BJ                .    ***</span></span>
<span id="cb17-27"><a href="#cb17-27" tabindex="-1"></a><span class="st">&gt;        25:        4GG-4G-4E-4F#               .      4d-4d-4e-4d    ***</span></span>
<span id="cb17-28"><a href="#cb17-28" tabindex="-1"></a><span class="st">&gt;        26:                   =2              =2               =2    ***</span></span>
<span id="cb17-29"><a href="#cb17-29" tabindex="-1"></a><span class="st">&gt;        27:                    .               .                .    ***</span></span>
<span id="cb17-30"><a href="#cb17-30" tabindex="-1"></a><span class="st">&gt;        28:                    .               .                .    ***</span></span>
<span id="cb17-31"><a href="#cb17-31" tabindex="-1"></a><span class="st">&gt;        29:                    .               .                .    ***</span></span>
<span id="cb17-32"><a href="#cb17-32" tabindex="-1"></a><span class="st">&gt;        30:                    .    4A-4G-4F#-4G                .    ***</span></span>
<span id="cb17-33"><a href="#cb17-33" tabindex="-1"></a><span class="st">&gt;        31:                   =3              =3               =3    ***</span></span>
<span id="cb17-34"><a href="#cb17-34" tabindex="-1"></a><span class="st">&gt;        32:          4G-4D-4E-4C               .                .    ***</span></span>
<span id="cb17-35"><a href="#cb17-35" tabindex="-1"></a><span class="st">&gt;        33:                    .               .     2d-4B-8eL-8d    ***</span></span>
<span id="cb17-36"><a href="#cb17-36" tabindex="-1"></a><span class="st">&gt;        34:                    .               .                .    ***</span></span>
<span id="cb17-37"><a href="#cb17-37" tabindex="-1"></a><span class="st">&gt;        35:                    .               .                .    ***</span></span>
<span id="cb17-38"><a href="#cb17-38" tabindex="-1"></a><span class="st">&gt;        36:                    .   8cL-8BJ-4c-4d                .    ***</span></span>
<span id="cb17-39"><a href="#cb17-39" tabindex="-1"></a><span class="st">&gt;        37:                   =4              =4               =4    ***</span></span>
<span id="cb17-40"><a href="#cb17-40" tabindex="-1"></a><span class="st">&gt;        38:    8BBL-8AAJ-4GG-2D;               .  8e-8f#J-4g-2f#;    ***</span></span>
<span id="cb17-41"><a href="#cb17-41" tabindex="-1"></a><span class="st">&gt;        39:                    .               .                .    ***</span></span>
<span id="cb17-42"><a href="#cb17-42" tabindex="-1"></a><span class="st">&gt;        40:                   =5              =5               =5    ***</span></span>
<span id="cb17-43"><a href="#cb17-43" tabindex="-1"></a><span class="st">&gt;    41-133::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb17-44"><a href="#cb17-44" tabindex="-1"></a><span class="st">&gt;    ####################### ^^^ chor001.krn ^^^ ########################</span></span>
<span id="cb17-45"><a href="#cb17-45" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb17-46"><a href="#cb17-46" tabindex="-1"></a><span class="st">&gt;           (8 more pieces...)</span></span>
<span id="cb17-47"><a href="#cb17-47" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb17-48"><a href="#cb17-48" tabindex="-1"></a><span class="st">&gt;    ####################### vvv chor010.krn vvv ########################</span></span>
<span id="cb17-49"><a href="#cb17-49" tabindex="-1"></a><span class="st">&gt;      1-60::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb17-50"><a href="#cb17-50" tabindex="-1"></a><span class="st">&gt;        61:                    .               .  8bL-8aJ-4g#-2e;    ***</span></span>
<span id="cb17-51"><a href="#cb17-51" tabindex="-1"></a><span class="st">&gt;        62:        4D-4E-2AA;-2A    4f-4B-2c;-2e                .    ***</span></span>
<span id="cb17-52"><a href="#cb17-52" tabindex="-1"></a><span class="st">&gt;        63:                   =9              =9               =9    ***</span></span>
<span id="cb17-53"><a href="#cb17-53" tabindex="-1"></a><span class="st">&gt;        64:                    .               .                .    ***</span></span>
<span id="cb17-54"><a href="#cb17-54" tabindex="-1"></a><span class="st">&gt;        65:                    .               .                .    ***</span></span>
<span id="cb17-55"><a href="#cb17-55" tabindex="-1"></a><span class="st">&gt;        66:                    .               .                .    ***</span></span>
<span id="cb17-56"><a href="#cb17-56" tabindex="-1"></a><span class="st">&gt;        67:       4E-8DL-8CJ-4BB               .     2a-4g-4g-8gL    ***</span></span>
<span id="cb17-57"><a href="#cb17-57" tabindex="-1"></a><span class="st">&gt;        68:                    .               .                .    ***</span></span>
<span id="cb17-58"><a href="#cb17-58" tabindex="-1"></a><span class="st">&gt;        69:                    .     4e-4e-4d-4c                .    ***</span></span>
<span id="cb17-59"><a href="#cb17-59" tabindex="-1"></a><span class="st">&gt;        70:                  =10             =10              =10    ***</span></span>
<span id="cb17-60"><a href="#cb17-60" tabindex="-1"></a><span class="st">&gt;        71:                    .               .                .    ***</span></span>
<span id="cb17-61"><a href="#cb17-61" tabindex="-1"></a><span class="st">&gt;        72:                    .               .                .    ***</span></span>
<span id="cb17-62"><a href="#cb17-62" tabindex="-1"></a><span class="st">&gt;        73:                    .               .     8fJ-4e-4d-4c    ***</span></span>
<span id="cb17-63"><a href="#cb17-63" tabindex="-1"></a><span class="st">&gt;        74:                    .               .                .    ***</span></span>
<span id="cb17-64"><a href="#cb17-64" tabindex="-1"></a><span class="st">&gt;        75:        4C-4D-4D-2GG;  8F#-4G-8F#-2G;                .    ***</span></span>
<span id="cb17-65"><a href="#cb17-65" tabindex="-1"></a><span class="st">&gt;        76:                  =11             =11              =11    ***</span></span>
<span id="cb17-66"><a href="#cb17-66" tabindex="-1"></a><span class="st">&gt;        77:                    .               .                .    ***</span></span>
<span id="cb17-67"><a href="#cb17-67" tabindex="-1"></a><span class="st">&gt;        78:                    .               .                .    ***</span></span>
<span id="cb17-68"><a href="#cb17-68" tabindex="-1"></a><span class="st">&gt;        79:                    .               .    2B;-2e-4e-8eL    ***</span></span>
<span id="cb17-69"><a href="#cb17-69" tabindex="-1"></a><span class="st">&gt;        80:                    .               .                .    ***</span></span>
<span id="cb17-70"><a href="#cb17-70" tabindex="-1"></a><span class="st">&gt;        81:                  =12             =12              =12    ***</span></span>
<span id="cb17-71"><a href="#cb17-71" tabindex="-1"></a><span class="st">&gt;        82:         2C-4AA-4E-4F    2G-4A-4G#-4A                .    ***</span></span>
<span id="cb17-72"><a href="#cb17-72" tabindex="-1"></a><span class="st">&gt;        83:                    .               .                .    ***</span></span>
<span id="cb17-73"><a href="#cb17-73" tabindex="-1"></a><span class="st">&gt;        84:                    .               .    8dJ-4c-4c-[2d    ***</span></span>
<span id="cb17-74"><a href="#cb17-74" tabindex="-1"></a><span class="st">&gt;        85:                    .               .                .    ***</span></span>
<span id="cb17-75"><a href="#cb17-75" tabindex="-1"></a><span class="st">&gt;        86:                  =13             =13              =13    ***</span></span>
<span id="cb17-76"><a href="#cb17-76" tabindex="-1"></a><span class="st">&gt;        87:     4C-4BB--4AA-4GG#     4G-4G-4A-4B                .    ***</span></span>
<span id="cb17-77"><a href="#cb17-77" tabindex="-1"></a><span class="st">&gt;        88:                    .               .                .    ***</span></span>
<span id="cb17-78"><a href="#cb17-78" tabindex="-1"></a><span class="st">&gt;        89:                    .               .                .    ***</span></span>
<span id="cb17-79"><a href="#cb17-79" tabindex="-1"></a><span class="st">&gt;        90:                   ==              ==               ==    ***</span></span>
<span id="cb17-80"><a href="#cb17-80" tabindex="-1"></a><span class="st">&gt;        91:                   *-              *-               *-    ***</span></span>
<span id="cb17-81"><a href="#cb17-81" tabindex="-1"></a><span class="st">&gt;        92:  !!!hum2abc: -Q ''</span></span>
<span id="cb17-82"><a href="#cb17-82" tabindex="-1"></a><span class="st">&gt;        93:  !!!title: @{PC#}. @{OTL@@DE}</span></span>
<span id="cb17-83"><a href="#cb17-83" tabindex="-1"></a><span class="st">&gt;        94:  !!!YOR1: 371 vierstimmige Choralges&amp;auml;nge von Johann ***</span></span>
<span id="cb17-84"><a href="#cb17-84" tabindex="-1"></a><span class="st">&gt;        95:  !!!YOR2: 4th ed. by Alfred D&amp;ouml;rffel (Leipzig: Breitk***</span></span>
<span id="cb17-85"><a href="#cb17-85" tabindex="-1"></a><span class="st">&gt;        96:  !!!YOR2: c.1875). 178 pp. Plate "</span>V.A<span class="fl">.10</span><span class="st">".  reprint: J.S.***</span></span>
<span id="cb17-86"><a href="#cb17-86" tabindex="-1"></a><span class="st">&gt;        97:  !!!YOR4: Chorales (New York: Associated Music Publishers***</span></span>
<span id="cb17-87"><a href="#cb17-87" tabindex="-1"></a><span class="st">&gt;        98:  !!!SMS: B&amp;H, 4th ed, Alfred D&amp;ouml;rffel, c.1875, plate ***</span></span>
<span id="cb17-88"><a href="#cb17-88" tabindex="-1"></a><span class="st">&gt;        99:  !!!EED:  Craig Stuart Sapp</span></span>
<span id="cb17-89"><a href="#cb17-89" tabindex="-1"></a><span class="st">&gt;       100:  !!!EEV:  2009/05/22</span></span>
<span id="cb17-90"><a href="#cb17-90" tabindex="-1"></a><span class="st">&gt;    ####################### ^^^ chor010.krn ^^^ ########################</span></span>
<span id="cb17-91"><a href="#cb17-91" tabindex="-1"></a><span class="st">&gt;                  (***one spine/path not displayed due to screen size***)</span></span>
<span id="cb17-92"><a href="#cb17-92" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb17-93"><a href="#cb17-93" tabindex="-1"></a><span class="st">&gt;       humdrumR corpus of ten pieces.</span></span>
<span id="cb17-94"><a href="#cb17-94" tabindex="-1"></a><span class="st">&gt;        Data fields: </span></span>
<span id="cb17-95"><a href="#cb17-95" tabindex="-1"></a><span class="st">&gt;                Token   :: character</span></span>
<span id="cb17-96"><a href="#cb17-96" tabindex="-1"></a><span class="st">&gt;                Semits  :: integer (**semits tokens)</span></span>
<span id="cb17-97"><a href="#cb17-97" tabindex="-1"></a><span class="st">&gt;                Kern    :: character (**kern tokens)</span></span>
<span id="cb17-98"><a href="#cb17-98" tabindex="-1"></a><span class="st">&gt;                Lowest  :: integer (**semits tokens)</span></span>
<span id="cb17-99"><a href="#cb17-99" tabindex="-1"></a><span class="st">&gt;                Beat    :: integer</span></span>
<span id="cb17-100"><a href="#cb17-100" tabindex="-1"></a><span class="st">&gt;               *Result1 :: character</span></span></code></pre></div>
<hr>
<p>Note that these regular windows we are creating are examples of
N-grams. Humdrum<span class="math inline">\(_{\mathbb{R}}\)</span> also
defines another approach to defining N-grams which will generally be
faster than using <code><a href="../reference/context.html">context()</a></code>—this alternative approach is
described in the last section of this article.</p>
</div>
</div>
<div class="section level3">
<h3 id="irregular-windows">Irregular Windows<a class="anchor" aria-label="anchor" href="#irregular-windows"></a>
</h3>
<p>The regular windows we created in the previous section are useful,
but <code><a href="../reference/context.html">context()</a></code> can do a <em>lot</em> more. You can tell
<code><a href="../reference/context.html">context()</a></code> to open, or close, windows based on arbitrary
criteria! For example, let’s say you want to open a window any time the
leading tone occurs, and stay open until the next tonic. To do this,
let’s get the <code><a href="../reference/solfa.html">solfa()</a></code> data into a <code>Solfa</code>
field:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/withinHumdrum.html">within</a></span><span class="op">(</span><span class="va">chorales</span><span class="op">$</span><span class="va">Token</span>, <span class="fu"><a href="../reference/solfa.html">solfa</a></span><span class="op">(</span><span class="va">Token</span>, simple <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Solfa</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">chorales</span></span></code></pre></div>
<p>Alright, the easy thing to do here is to give
<code><a href="../reference/context.html">context()</a></code>’s <code>open</code>/<code>close</code> arguments
<code>character</code> strings, which are matched as regular expressions
against the active field:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/withinHumdrum.html">with</a></span><span class="op">(</span><span class="va">chorales</span><span class="op">$</span><span class="va">Solfa</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">Solfa</span>, collapse <span class="op">=</span> <span class="st">'-'</span><span class="op">)</span>, <span class="fu"><a href="../reference/context.html">context</a></span><span class="op">(</span><span class="st">'ti'</span>, <span class="st">'do'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>&gt;      [1] "ti-do"                                                                                                            
&gt;      [2] "ti-do"                                                                                                            
&gt;      [3] "ti-do"                                                                                                            
&gt;      [4] "ti-la-la-so-fa-so-do"                                                                                             
&gt;      [5] "ti-do"                                                                                                            
&gt;      [6] "ti-do"                                                                                                            
&gt;      [7] "ti-do"                                                                                                            
&gt;      [8] "ti-do"                                                                                                            
&gt;      [9] "ti-so-do"                                                                                                         
&gt;     [10] "ti-la-ti-do"                                                                                                      
&gt;     [11] "ti-do"                                                                                                            
&gt;     [12] "ti-la-la-ti-do"                                                                                                   
&gt;     [13] "ti-do"                                                                                                            
&gt;     [14] "ti-do"                                                                                                            
&gt;     [15] "ti-ti-la-la-ti-do"                                                                                                
&gt;     [16] "ti-la-la-ti-do-ti-do"                                                                                             
&gt;     [17] "ti-do"                                                                                                            
&gt;     [18] "ti-la-mi-fa-fi-so-re-so-so-do"                                                                                    
&gt;     [19] "ti-do"                                                                                                            
&gt;     [20] "ti-do"                                                                                                            
&gt;     [21] "ti-so-do"                                                                                                         
&gt;     [22] "ti-la-so-fa-so-do"                                                                                                
&gt;     [23] "ti-la-re-do"                                                                                                      
&gt;     [24] "ti-so-so-fi-mi-re-do"                                                                                             
&gt;     [25] "ti-ti-do"                                                                                                         
&gt;     [26] "ti-do-re-mi-fa-so-so-fa-so-so-so-la-re-di-re-mi-fa-ti-do"                                                         
&gt;     [27] "ti-do-ti-la-so-so-fa-mi-fa-so-la-ti-la-la-so-fa-mi-re-mi-fa-so-fa-mi-la-re-so-fa-mi-so-la-so-la-la-so-fi-re-ti-do"
&gt;     [28] "ti-do-ti-la-so-so-fi-re-mi-re-do"                                                                                 
&gt;     [29] "ti-do"                                                                                                            
&gt;     [30] "ti-do"                                                                                                            
&gt;     [31] "ti-di-re-do"                                                                                                      
&gt;     [32] "ti-do"                                                                                                            
&gt;     [33] "ti-la-so-la-ti-do"                                                                                                
&gt;     [34] "ti-la-ti-la-so-so-fa-mi-re-do"                                                                                    
&gt;     [35] "ti-do"                                                                                                            
&gt;     [36] "ti-do"                                                                                                            
&gt;     [37] "ti-do"                                                                                                            
&gt;     [38] "ti-me-do"                                                                                                         
&gt;     [39] "ti-do"                                                                                                            
&gt;     [40] "ti-do"                                                                                                            
&gt;     [41] "ti-do"                                                                                                            
&gt;     [42] "ti-ti-do"                                                                                                         
&gt;     [43] "ti-do-ti-do"                                                                                                      
&gt;     [44] "ti-do"                                                                                                            
&gt;     [45] "ti-do"                                                                                                            
&gt;     [46] "ti-do"                                                                                                            
&gt;     [47] "ti-so-do"                                                                                                         
&gt;     [48] "ti-do"                                                                                                            
&gt;     [49] "ti-la-so-re-so-do"                                                                                                
&gt;     [50] "ti-do"                                                                                                            
&gt;     [51] "ti-do"                                                                                                            
&gt;     [52] "ti-do"                                                                                                            
&gt;     [53] "ti-do"                                                                                                            
&gt;     [54] "ti-do"                                                                                                            
&gt;     [55] "ti-do"                                                                                                            
&gt;     [56] "ti-do"                                                                                                            
&gt;     [57] "ti-la-ti-do"                                                                                                      
&gt;     [58] "ti-do-ti-la-so-so-do"                                                                                             
&gt;     [59] "ti-la-so-so-do-so-la-mi-fa-so-fa-mi-mi-re-fa-mi-re-la-ti-do"                                                      
&gt;     [60] "ti-do"                                                                                                            
&gt;     [61] "ti-do"                                                                                                            
&gt;     [62] "ti-la-mi-fa-so-do"                                                                                                
&gt;     [63] "ti-la-so-la-ti-do"                                                                                                
&gt;     [64] "ti-di-re-re-la-di-re-mi-fa-re-te-la-so-la-la-re-re-mi-fi-so-fi-so-re-so-mi-la-so-do"                              
&gt;     [65] "ti-la-mi-re-do"                                                                                                   
&gt;     [66] "ti-do"                                                                                                            
&gt;     [67] "ti-do"                                                                                                            
&gt;     [68] "ti-ti-do"                                                                                                         
&gt;     [69] "ti-do"                                                                                                            
&gt;     [70] "ti-la-do"                                                                                                         
&gt;     [71] "ti-do"                                                                                                            
&gt;     [72] "ti-so-so-so-la-ti-la-la-so-so-fa-mi-la-so-la-te-la-ti-do"                                                         
&gt;     [73] "ti-la-la-so-so-fa-mi-la-so-la-te-la-ti-do-ti-do"                                                                  
&gt;     [74] "ti-do-ti-do-re-ti-so-do"                                                                                          
&gt;     [75] "ti-do"                                                                                                            
&gt;     [76] "ti-do"                                                                                                            
&gt;     [77] "ti-te-la-so-la-ti-so-do"                                                                                          
&gt;     [78] "ti-do"                                                                                                            
&gt;     [79] "ti-do"                                                                                                            
&gt;     [80] "ti-do"                                                                                                            
&gt;     [81] "ti-do"                                                                                                            
&gt;     [82] "ti-do"                                                                                                            
&gt;     [83] "ti-do"                                                                                                            
&gt;     [84] "ti-la-so-mi-fa-mi-re-re-do"                                                                                       
&gt;     [85] "ti-la-si-la-re-mi-la-fi-so-fa-mi-do"                                                                              
&gt;     [86] "ti-la-so-do"                                                                                                      
&gt;     [87] "ti-la-re-do"                                                                                                      
&gt;     [88] "ti-do"                                                                                                            
&gt;     [89] "ti-do"                                                                                                            
&gt;     [90] "ti-do"                                                                                                            
&gt;     [91] "ti-mi-fa-mi-do"                                                                                                   
&gt;     [92] "ti-do"                                                                                                            
&gt;     [93] "ti-ti-do"                                                                                                         
&gt;     [94] "ti-do-fa-re-so-so-fa-so-la-re-so-fa-mi-re-di-re-ti-do"                                                            
&gt;     [95] "ti-ti-do"                                                                                                         
&gt;     [96] "ti-fa-do"                                                                                                         
&gt;     [97] "ti-si-la-ti-do"                                                                                                   
&gt;     [98] "ti-do-ti-so-so-la-ti-do"                                                                                          
&gt;     [99] "ti-la-si-mi-la-so-so-so-fi-re-mi-mi-la-so-la-ti-do"                                                               
&gt;    [100] "ti-do"                                                                                                            
&gt;    [101] "ti-do"                                                                                                            
&gt;    [102] "ti-do"                                                                                                            
&gt;    [103] "ti-la-so-do"                                                                                                      
&gt;    [104] "ti-la-re-re-do"                                                                                                   
&gt;    [105] "ti-do"                                                                                                            
&gt;    [106] "ti-do"                                                                                                            
&gt;    [107] "ti-la-so-re-mi-re-mi-fa-mi-re-do"                                                                                 
&gt;    [108] "ti-do"                                                                                                            
&gt;    [109] "ti-do"                                                                                                            
&gt;    [110] "ti-do"                                                                                                            
&gt;    [111] "ti-do"                                                                                                            
&gt;    [112] "ti-do"                                                                                                            
&gt;    [113] "ti-so-do"                                                                                                         
&gt;    [114] "ti-do"                                                                                                            
&gt;    [115] "ti-do"                                                                                                            
&gt;    [116] "ti-so-me-me-re-re-re-me-re-do"                                                                                    
&gt;    [117] "ti-ti-do"                                                                                                         
&gt;    [118] "ti-ti-do"                                                                                                         
&gt;    [119] "ti-la-so-do"                                                                                                      
&gt;    [120] "ti-do"                                                                                                            
&gt;    [121] "ti-do"                                                                                                            
&gt;    [122] "ti-do"                                                                                                            
&gt;    [123] "ti-la-ti-do"                                                                                                      
&gt;    [124] "ti-do-la-fi-mi-fi-re-so-mi-fa-so-la-ti-do"                                                                        
&gt;    [125] "ti-la-so-la-ti-mi-la-so-fa-do"                                                                                    
&gt;    [126] "ti-so-la-ti-la-ti-do"                                                                                             
&gt;    [127] "ti-la-ti-do-ti-ti-la-so-la-ti-do"                                                                                 
&gt;    [128] "ti-do-do-ti-so-ti-do"                                                                                             
&gt;    [129] "ti-so-ti-do-re-di-re-di-re-re-di-la-la-si-la-la-la-ti-do"                                                         
&gt;    [130] "ti-do-re-di-re-di-re-re-di-la-la-si-la-la-la-ti-do-ti-ti-do"                                                      
&gt;    [131] "ti-do"                                                                                                            
&gt;    [132] "ti-la-ti-do"                                                                                                      
&gt;    [133] "ti-do"                                                                                                            
&gt;    [134] "ti-do"                                                                                                            
&gt;    [135] "ti-do"                                                                                                            
&gt;    [136] "ti-do"                                                                                                            
&gt;    [137] "ti-do"                                                                                                            
&gt;    [138] "ti-do"                                                                                                            
&gt;    [139] "ti-ti-do"                                                                                                         
&gt;    [140] "ti-so-do"</code></pre>
<p>Pretty cool! But wait, something seems odd; one of the outputs is
<code>"ti-do-fa-re-so-so-fa-so-la-re-so-fa-mi-re-di-re-ti-do"</code>.
Why doesn’t this window close when it hits that first “do”? This has to
do with <code><a href="../reference/context.html">context()</a></code>s treatment of overlapping windows, which
is controlled by the <code>overlap</code> argument. By default,
<code>overlap = 'paired'</code>, which means <code><a href="../reference/context.html">context()</a></code>
attempts to pair each open with the next <em>unused</em> close—the
reason we don’t close on the first “do” in
<code>"ti-do-fa-re-so-so-fa-so-la-re-so-fa-mi-re-di-re-ti-do"</code>, is
because the “do” was <em>already</em> the close of the previous window.
For this analysis, we might want to try <code>overlap = 'none'</code>:
with this argument, a new window will only open after the current window
is closed.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/withinHumdrum.html">with</a></span><span class="op">(</span><span class="va">chorales</span><span class="op">$</span><span class="va">Solfa</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">Solfa</span>, collapse <span class="op">=</span> <span class="st">'-'</span><span class="op">)</span>, <span class="fu"><a href="../reference/context.html">context</a></span><span class="op">(</span><span class="st">'ti'</span>, <span class="st">'do'</span>, overlap <span class="op">=</span> <span class="st">'none'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>&gt;      [1] "ti-do"                                                                              
&gt;      [2] "ti-do"                                                                              
&gt;      [3] "ti-do"                                                                              
&gt;      [4] "ti-la-la-so-fa-so-do"                                                               
&gt;      [5] "ti-do"                                                                              
&gt;      [6] "ti-do"                                                                              
&gt;      [7] "ti-do"                                                                              
&gt;      [8] "ti-do"                                                                              
&gt;      [9] "ti-so-do"                                                                           
&gt;     [10] "ti-la-ti-do"                                                                        
&gt;     [11] "ti-do"                                                                              
&gt;     [12] "ti-la-la-ti-do"                                                                     
&gt;     [13] "ti-do"                                                                              
&gt;     [14] "ti-do"                                                                              
&gt;     [15] "ti-ti-la-la-ti-do"                                                                  
&gt;     [16] "ti-do"                                                                              
&gt;     [17] "ti-do"                                                                              
&gt;     [18] "ti-la-mi-fa-fi-so-re-so-so-do"                                                      
&gt;     [19] "ti-do"                                                                              
&gt;     [20] "ti-do"                                                                              
&gt;     [21] "ti-so-do"                                                                           
&gt;     [22] "ti-la-so-fa-so-do"                                                                  
&gt;     [23] "ti-la-re-do"                                                                        
&gt;     [24] "ti-so-so-fi-mi-re-do"                                                               
&gt;     [25] "ti-ti-do"                                                                           
&gt;     [26] "ti-do"                                                                              
&gt;     [27] "ti-do"                                                                              
&gt;     [28] "ti-la-so-so-fi-re-mi-re-do"                                                         
&gt;     [29] "ti-do"                                                                              
&gt;     [30] "ti-do"                                                                              
&gt;     [31] "ti-di-re-do"                                                                        
&gt;     [32] "ti-do"                                                                              
&gt;     [33] "ti-la-so-la-ti-do"                                                                  
&gt;     [34] "ti-la-ti-la-so-so-fa-mi-re-do"                                                      
&gt;     [35] "ti-do"                                                                              
&gt;     [36] "ti-do"                                                                              
&gt;     [37] "ti-do"                                                                              
&gt;     [38] "ti-me-do"                                                                           
&gt;     [39] "ti-do"                                                                              
&gt;     [40] "ti-do"                                                                              
&gt;     [41] "ti-do"                                                                              
&gt;     [42] "ti-ti-do"                                                                           
&gt;     [43] "ti-do"                                                                              
&gt;     [44] "ti-do"                                                                              
&gt;     [45] "ti-do"                                                                              
&gt;     [46] "ti-do"                                                                              
&gt;     [47] "ti-so-do"                                                                           
&gt;     [48] "ti-do"                                                                              
&gt;     [49] "ti-la-so-re-so-do"                                                                  
&gt;     [50] "ti-do"                                                                              
&gt;     [51] "ti-do"                                                                              
&gt;     [52] "ti-do"                                                                              
&gt;     [53] "ti-do"                                                                              
&gt;     [54] "ti-do"                                                                              
&gt;     [55] "ti-do"                                                                              
&gt;     [56] "ti-do"                                                                              
&gt;     [57] "ti-la-ti-do"                                                                        
&gt;     [58] "ti-la-so-so-do"                                                                     
&gt;     [59] "ti-do"                                                                              
&gt;     [60] "ti-do"                                                                              
&gt;     [61] "ti-do"                                                                              
&gt;     [62] "ti-la-mi-fa-so-do"                                                                  
&gt;     [63] "ti-la-so-la-ti-do"                                                                  
&gt;     [64] "ti-di-re-re-la-di-re-mi-fa-re-te-la-so-la-la-re-re-mi-fi-so-fi-so-re-so-mi-la-so-do"
&gt;     [65] "ti-la-mi-re-do"                                                                     
&gt;     [66] "ti-do"                                                                              
&gt;     [67] "ti-do"                                                                              
&gt;     [68] "ti-ti-do"                                                                           
&gt;     [69] "ti-do"                                                                              
&gt;     [70] "ti-la-do"                                                                           
&gt;     [71] "ti-do"                                                                              
&gt;     [72] "ti-so-so-so-la-ti-la-la-so-so-fa-mi-la-so-la-te-la-ti-do"                           
&gt;     [73] "ti-do"                                                                              
&gt;     [74] "ti-so-do"                                                                           
&gt;     [75] "ti-do"                                                                              
&gt;     [76] "ti-do"                                                                              
&gt;     [77] "ti-te-la-so-la-ti-so-do"                                                            
&gt;     [78] "ti-do"                                                                              
&gt;     [79] "ti-do"                                                                              
&gt;     [80] "ti-do"                                                                              
&gt;     [81] "ti-do"                                                                              
&gt;     [82] "ti-do"                                                                              
&gt;     [83] "ti-do"                                                                              
&gt;     [84] "ti-la-so-mi-fa-mi-re-re-do"                                                         
&gt;     [85] "ti-la-si-la-re-mi-la-fi-so-fa-mi-do"                                                
&gt;     [86] "ti-la-so-do"                                                                        
&gt;     [87] "ti-la-re-do"                                                                        
&gt;     [88] "ti-do"                                                                              
&gt;     [89] "ti-do"                                                                              
&gt;     [90] "ti-do"                                                                              
&gt;     [91] "ti-mi-fa-mi-do"                                                                     
&gt;     [92] "ti-do"                                                                              
&gt;     [93] "ti-ti-do"                                                                           
&gt;     [94] "ti-do"                                                                              
&gt;     [95] "ti-ti-do"                                                                           
&gt;     [96] "ti-fa-do"                                                                           
&gt;     [97] "ti-si-la-ti-do"                                                                     
&gt;     [98] "ti-so-so-la-ti-do"                                                                  
&gt;     [99] "ti-la-si-mi-la-so-so-so-fi-re-mi-mi-la-so-la-ti-do"                                 
&gt;    [100] "ti-do"                                                                              
&gt;    [101] "ti-do"                                                                              
&gt;    [102] "ti-do"                                                                              
&gt;    [103] "ti-la-so-do"                                                                        
&gt;    [104] "ti-la-re-re-do"                                                                     
&gt;    [105] "ti-do"                                                                              
&gt;    [106] "ti-do"                                                                              
&gt;    [107] "ti-la-so-re-mi-re-mi-fa-mi-re-do"                                                   
&gt;    [108] "ti-do"                                                                              
&gt;    [109] "ti-do"                                                                              
&gt;    [110] "ti-do"                                                                              
&gt;    [111] "ti-do"                                                                              
&gt;    [112] "ti-do"                                                                              
&gt;    [113] "ti-so-do"                                                                           
&gt;    [114] "ti-do"                                                                              
&gt;    [115] "ti-do"                                                                              
&gt;    [116] "ti-so-me-me-re-re-re-me-re-do"                                                      
&gt;    [117] "ti-ti-do"                                                                           
&gt;    [118] "ti-ti-do"                                                                           
&gt;    [119] "ti-la-so-do"                                                                        
&gt;    [120] "ti-do"                                                                              
&gt;    [121] "ti-do"                                                                              
&gt;    [122] "ti-do"                                                                              
&gt;    [123] "ti-la-ti-do"                                                                        
&gt;    [124] "ti-do"                                                                              
&gt;    [125] "ti-la-so-la-ti-mi-la-so-fa-do"                                                      
&gt;    [126] "ti-so-la-ti-la-ti-do"                                                               
&gt;    [127] "ti-ti-la-so-la-ti-do"                                                               
&gt;    [128] "ti-so-ti-do"                                                                        
&gt;    [129] "ti-do"                                                                              
&gt;    [130] "ti-ti-do"                                                                           
&gt;    [131] "ti-do"                                                                              
&gt;    [132] "ti-la-ti-do"                                                                        
&gt;    [133] "ti-do"                                                                              
&gt;    [134] "ti-do"                                                                              
&gt;    [135] "ti-do"                                                                              
&gt;    [136] "ti-do"                                                                              
&gt;    [137] "ti-do"                                                                              
&gt;    [138] "ti-do"                                                                              
&gt;    [139] "ti-ti-do"                                                                           
&gt;    [140] "ti-so-do"</code></pre>
<p>Another option would be to allow multiple windows to close at the
same place (i.e., on the same “do”). This can be achieved with the
setting <code>overlap = 'edge'</code>:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">within</span>(chorales<span class="sc">$</span>Solfa, <span class="fu">paste</span>(Solfa, <span class="at">collapse =</span> <span class="st">'-'</span>), <span class="fu">context</span>(<span class="st">'ti'</span>, <span class="st">'do'</span>, <span class="at">overlap =</span> <span class="st">'edge'</span>))</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# vvv chor001.krn vvv #############################</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of My Heart</span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>          <span class="er">**</span>kern        <span class="sc">**</span>kern        <span class="sc">**</span>kern        <span class="sc">**</span>kern</span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>          <span class="er">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox</span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>          <span class="er">*</span>Ibass       <span class="sc">*</span>Itenor        <span class="sc">*</span>Ialto       <span class="sc">*</span>Isoprn</span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>         <span class="er">*</span>I<span class="st">"Bass      *I"</span>Tenor       <span class="sc">*</span>I<span class="st">"Alto    *I"</span>Soprano</span>
<span id="cb23-14"><a href="#cb23-14" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">12</span><span class="sc">:</span>       <span class="er">*&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]</span>
<span id="cb23-15"><a href="#cb23-15" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">13</span><span class="sc">:</span>    <span class="er">*&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]</span>
<span id="cb23-16"><a href="#cb23-16" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">14</span><span class="sc">:</span>             <span class="er">*&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A</span>
<span id="cb23-17"><a href="#cb23-17" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">15</span><span class="sc">:</span>         <span class="er">*</span>clefF4      <span class="sc">*</span>clefGv2       <span class="sc">*</span>clefG2       <span class="sc">*</span>clefG2</span>
<span id="cb23-18"><a href="#cb23-18" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">16</span><span class="sc">:</span>          <span class="er">*</span>k[f<span class="co">#]        *k[f#]        *k[f#]        *k[f#]</span></span>
<span id="cb23-19"><a href="#cb23-19" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">17</span><span class="sc">:</span>             <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span></span>
<span id="cb23-20"><a href="#cb23-20" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">18</span><span class="sc">:</span>           <span class="er">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb23-21"><a href="#cb23-21" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">19</span><span class="sc">:</span>          <span class="er">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100</span>
<span id="cb23-22"><a href="#cb23-22" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">20</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-23"><a href="#cb23-23" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">21</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span></span>
<span id="cb23-24"><a href="#cb23-24" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">22</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-25"><a href="#cb23-25" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">23</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-26"><a href="#cb23-26" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">24</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-27"><a href="#cb23-27" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">25</span><span class="sc">:</span>           ti<span class="sc">-</span>do             .             .             .</span>
<span id="cb23-28"><a href="#cb23-28" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">26</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span></span>
<span id="cb23-29"><a href="#cb23-29" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">27</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-30"><a href="#cb23-30" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">28</span><span class="sc">:</span>               .         ti<span class="sc">-</span>do             .             .</span>
<span id="cb23-31"><a href="#cb23-31" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">29</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-32"><a href="#cb23-32" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">30</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-33"><a href="#cb23-33" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">31</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span></span>
<span id="cb23-34"><a href="#cb23-34" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">32</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-35"><a href="#cb23-35" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">33</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-36"><a href="#cb23-36" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">34</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-37"><a href="#cb23-37" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">35</span><span class="sc">:</span>               .             .         ti<span class="sc">-</span>do             .</span>
<span id="cb23-38"><a href="#cb23-38" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">36</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-39"><a href="#cb23-39" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">37</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span></span>
<span id="cb23-40"><a href="#cb23-40" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">38</span><span class="sc">:</span>               .             .         ti<span class="sc">-</span>do             .</span>
<span id="cb23-41"><a href="#cb23-41" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">39</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-42"><a href="#cb23-42" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">40</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span></span>
<span id="cb23-43"><a href="#cb23-43" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="dv">41-133</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb23-44"><a href="#cb23-44" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# ^^^ chor001.krn ^^^ #############################</span></span>
<span id="cb23-45"><a href="#cb23-45" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb23-46"><a href="#cb23-46" tabindex="-1"></a><span class="er">&gt;</span>           (<span class="dv">8</span> more pieces...)</span>
<span id="cb23-47"><a href="#cb23-47" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb23-48"><a href="#cb23-48" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# vvv chor010.krn vvv #############################</span></span>
<span id="cb23-49"><a href="#cb23-49" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">1-60</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb23-50"><a href="#cb23-50" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">61</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-51"><a href="#cb23-51" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">62</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-52"><a href="#cb23-52" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">63</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span></span>
<span id="cb23-53"><a href="#cb23-53" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">64</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-54"><a href="#cb23-54" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">65</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-55"><a href="#cb23-55" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">66</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-56"><a href="#cb23-56" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">67</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-57"><a href="#cb23-57" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">68</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-58"><a href="#cb23-58" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">69</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-59"><a href="#cb23-59" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">70</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span></span>
<span id="cb23-60"><a href="#cb23-60" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">71</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-61"><a href="#cb23-61" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">72</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-62"><a href="#cb23-62" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">73</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-63"><a href="#cb23-63" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">74</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-64"><a href="#cb23-64" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">75</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-65"><a href="#cb23-65" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">76</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span></span>
<span id="cb23-66"><a href="#cb23-66" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">77</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-67"><a href="#cb23-67" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">78</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-68"><a href="#cb23-68" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">79</span><span class="sc">:</span>               .         ti<span class="sc">-</span>do             .             .</span>
<span id="cb23-69"><a href="#cb23-69" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">80</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-70"><a href="#cb23-70" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">81</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span></span>
<span id="cb23-71"><a href="#cb23-71" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">82</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-72"><a href="#cb23-72" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">83</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-73"><a href="#cb23-73" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">84</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-74"><a href="#cb23-74" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">85</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-75"><a href="#cb23-75" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">86</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span></span>
<span id="cb23-76"><a href="#cb23-76" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">87</span><span class="sc">:</span>           ti<span class="sc">-</span>do             .             .             .</span>
<span id="cb23-77"><a href="#cb23-77" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">88</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-78"><a href="#cb23-78" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">89</span><span class="sc">:</span>               .             .             .             .</span>
<span id="cb23-79"><a href="#cb23-79" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">90</span><span class="sc">:</span>              <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span></span>
<span id="cb23-80"><a href="#cb23-80" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">91</span><span class="sc">:</span>              <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span></span>
<span id="cb23-81"><a href="#cb23-81" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">92</span><span class="sc">:</span>  <span class="sc">!!!</span>hum2abc<span class="sc">:</span> <span class="sc">-</span>Q <span class="st">''</span></span>
<span id="cb23-82"><a href="#cb23-82" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">93</span><span class="sc">:</span>  <span class="sc">!!!</span>title<span class="sc">:</span> <span class="er">@</span>{PC<span class="co">#}. @{OTL@@DE}</span></span>
<span id="cb23-83"><a href="#cb23-83" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">94</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR1<span class="sc">:</span> <span class="dv">371</span> vierstimmige Choralges<span class="sc">&amp;</span>auml;nge von Johann Sebastian B<span class="sc">**</span><span class="er">*</span></span>
<span id="cb23-84"><a href="#cb23-84" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">95</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> 4th ed. by Alfred D<span class="sc">&amp;</span>ouml;<span class="fu">rffel</span> (Leipzig<span class="sc">:</span> Breitkopf und H<span class="sc">&amp;</span>a<span class="sc">**</span><span class="er">*</span></span>
<span id="cb23-85"><a href="#cb23-85" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">96</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> c<span class="fl">.1875</span>). <span class="dv">178</span> pp. Plate <span class="st">"V.A.10"</span>.  reprint<span class="sc">:</span> J.S. Bach, <span class="dv">371</span> <span class="sc">**</span><span class="er">*</span></span>
<span id="cb23-86"><a href="#cb23-86" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">97</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR4<span class="sc">:</span> <span class="fu">Chorales</span> (New York<span class="sc">:</span> Associated Music Publishers, Inc., c<span class="fl">.1</span><span class="sc">**</span><span class="er">*</span></span>
<span id="cb23-87"><a href="#cb23-87" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">98</span><span class="sc">:</span>  <span class="sc">!!!</span>SMS<span class="sc">:</span> B<span class="sc">&amp;</span>H, 4th ed, Alfred D<span class="sc">&amp;</span>ouml;rffel, c<span class="fl">.1875</span>, plate V.A<span class="fl">.10</span></span>
<span id="cb23-88"><a href="#cb23-88" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">99</span><span class="sc">:</span>  <span class="sc">!!!</span>EED<span class="sc">:</span>  Craig Stuart Sapp</span>
<span id="cb23-89"><a href="#cb23-89" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">100</span><span class="sc">:</span>  <span class="sc">!!!</span>EEV<span class="sc">:</span>  <span class="dv">2009</span><span class="sc">/</span><span class="dv">05</span><span class="sc">/</span><span class="dv">22</span></span>
<span id="cb23-90"><a href="#cb23-90" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# ^^^ chor010.krn ^^^ #############################</span></span>
<span id="cb23-91"><a href="#cb23-91" tabindex="-1"></a><span class="er">&gt;</span>                           (<span class="sc">**</span><span class="er">*</span>four global comments truncated due to screen size<span class="sc">**</span><span class="er">*</span>)</span>
<span id="cb23-92"><a href="#cb23-92" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb23-93"><a href="#cb23-93" tabindex="-1"></a><span class="er">&gt;</span>       humdrumR corpus of ten pieces.</span>
<span id="cb23-94"><a href="#cb23-94" tabindex="-1"></a><span class="sc">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb23-95"><a href="#cb23-95" tabindex="-1"></a><span class="er">&gt;</span>                Token   <span class="sc">::</span> character</span>
<span id="cb23-96"><a href="#cb23-96" tabindex="-1"></a><span class="sc">&gt;</span>                Semits  <span class="sc">::</span> <span class="fu">integer</span> (<span class="sc">**</span>semits tokens)</span>
<span id="cb23-97"><a href="#cb23-97" tabindex="-1"></a><span class="sc">&gt;</span>                Kern    <span class="sc">::</span> <span class="fu">character</span> (<span class="sc">**</span>kern tokens)</span>
<span id="cb23-98"><a href="#cb23-98" tabindex="-1"></a><span class="sc">&gt;</span>                Lowest  <span class="sc">::</span> <span class="fu">integer</span> (<span class="sc">**</span>semits tokens)</span>
<span id="cb23-99"><a href="#cb23-99" tabindex="-1"></a><span class="sc">&gt;</span>                Beat    <span class="sc">::</span> integer</span>
<span id="cb23-100"><a href="#cb23-100" tabindex="-1"></a><span class="sc">&gt;</span>                Solfa   <span class="sc">::</span> <span class="fu">character</span> (<span class="sc">**</span>solfa tokens)</span>
<span id="cb23-101"><a href="#cb23-101" tabindex="-1"></a><span class="sc">&gt;</span>               <span class="er">*</span>Result1 <span class="sc">::</span> character</span></code></pre></div>
<hr>
<p>If this is a lot to wrap your head around, you are not the only one!
There are many ways to define/control how contextual windows are
defined, and it’s often difficult to decide what we want in a particular
analysis. You can read the <code><a href="../reference/context.html">context()</a></code> documentation for some
more examples, or simply play around! The following sections layout a
few more examples, just to illustrate some possibilities.</p>
<div class="section level4">
<h4 id="more-criteria">More criteria<a class="anchor" aria-label="anchor" href="#more-criteria"></a>
</h4>
<p>What if want to have our windows close on tonic (do), but only on
long-durations? Let’s extract duration information into a new field:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/withinHumdrum.html">within</a></span><span class="op">(</span><span class="va">chorales</span><span class="op">$</span><span class="va">Token</span>, <span class="fu"><a href="../reference/duration.html">duration</a></span><span class="op">(</span><span class="va">Token</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Duration</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">chorales</span></span></code></pre></div>
<p>We could now do something like this:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/withinHumdrum.html">with</a></span><span class="op">(</span><span class="va">chorales</span><span class="op">$</span><span class="va">Solfa</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">Token</span>, collapse <span class="op">=</span> <span class="st">'-'</span><span class="op">)</span>, <span class="fu"><a href="../reference/context.html">context</a></span><span class="op">(</span><span class="st">'ti'</span>, <span class="va">Solfa</span> <span class="op">==</span> <span class="st">'do'</span> <span class="op">&amp;</span> <span class="va">Duration</span> <span class="op">&gt;=</span> <span class="fl">.5</span>, overlap <span class="op">=</span> <span class="st">'edge'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>&gt;     [1] "4F#-4G-4D-4E-4C-8BBL-8AAJ-4GG-2D;-4GG-4FF#-4GG-4AA-4BB-4C-4D-2GG;"                                                                                                                                                                                    
&gt;     [2] "4FF#-4GG-4AA-4BB-4C-4D-2GG;"                                                                                                                                                                                                                          
&gt;     [3] "4FF#-4GG-4AA-4BB-4GG-4D-8EL-8D-8C-8BB-8AA-8GGJ-2D;-[4G-4G]-4F#-[4E-8EL]-8DJ-4C-4D-2.GG;"                                                                                                                                                              
&gt;     [4] "4F#-[4E-8EL]-8DJ-4C-4D-2.GG;"                                                                                                                                                                                                                         
&gt;     [5] "8f#J-4g-2f#;-4g-4d-4e-4f#-2g"                                                                                                                                                                                                                         
&gt;     [6] "2f#;-4g-4d-4e-4f#-2g"                                                                                                                                                                                                                                 
&gt;     [7] "4f#-2g"                                                                                                                                                                                                                                               
&gt;     [8] "4f#-2d;-[4g-8gL]-8f#J-8eL-8f#J-[4g-8gL]-8aJ-8gL-8f#J-4g-2f#;-4e-4e-8f#L-8gJ-4a-4a-4.g-8f#-2g"                                                                                                                                                         
&gt;     [9] "8f#J-8eL-8f#J-[4g-8gL]-8aJ-8gL-8f#J-4g-2f#;-4e-4e-8f#L-8gJ-4a-4a-4.g-8f#-2g"                                                                                                                                                                          
&gt;    [10] "8f#J-[4g-8gL]-8aJ-8gL-8f#J-4g-2f#;-4e-4e-8f#L-8gJ-4a-4a-4.g-8f#-2g"                                                                                                                                                                                   
&gt;    [11] "8f#J-4g-2f#;-4e-4e-8f#L-8gJ-4a-4a-4.g-8f#-2g"                                                                                                                                                                                                         
&gt;    [12] "2f#;-4e-4e-8f#L-8gJ-4a-4a-4.g-8f#-2g"                                                                                                                                                                                                                 
&gt;    [13] "8f#L-8gJ-4a-4a-4.g-8f#-2g"                                                                                                                                                                                                                            
&gt;    [14] "8f#-2g"                                                                                                                                                                                                                                               
&gt;    [15] "4f#-2g"                                                                                                                                                                                                                                               
&gt;    [16] "[4f#-8f#L]-8eJ-8eL-8f#J-4g-2f#;-4g-2a-8gL-8f#J-2g"                                                                                                                                                                                                    
&gt;    [17] "8f#L]-8eJ-8eL-8f#J-4g-2f#;-4g-2a-8gL-8f#J-2g"                                                                                                                                                                                                         
&gt;    [18] "8f#J-4g-2f#;-4g-2a-8gL-8f#J-2g"                                                                                                                                                                                                                       
&gt;    [19] "2f#;-4g-2a-8gL-8f#J-2g"                                                                                                                                                                                                                               
&gt;    [20] "8f#J-2g"                                                                                                                                                                                                                                              
&gt;    [21] "8G#J-4F#-4C#-4D-4D#-4E-4BB-4EE;-4E-4A-4B-4c#-8BL-8AJ-4B-4BB-4E;-4C#-8F#L-8G#J-4A-4E-8C#L-8AAJ-4D-8C#L-8DJ-4E;-4C#-4BB-4C#-8DL-8GJ-4F#-2.BB;-4C#-4F#-8EL-8DJ-4C#-4BB-8AAL-8BB-8C#-8DJ-4E;-4BB-8F#L-8G#J-4A-8G#L-8EJ-[4A-8AL]-8G#J-4F#-8EL-8DJ-4E-2.AA;"
&gt;    [22] "8G#J-4A-4E-8C#L-8AAJ-4D-8C#L-8DJ-4E;-4C#-4BB-4C#-8DL-8GJ-4F#-2.BB;-4C#-4F#-8EL-8DJ-4C#-4BB-8AAL-8BB-8C#-8DJ-4E;-4BB-8F#L-8G#J-4A-8G#L-8EJ-[4A-8AL]-8G#J-4F#-8EL-8DJ-4E-2.AA;"                                                                         
&gt;    [23] "8G#J-4A-8G#L-8EJ-[4A-8AL]-8G#J-4F#-8EL-8DJ-4E-2.AA;"                                                                                                                                                                                                  
&gt;    [24] "8G#L-8EJ-[4A-8AL]-8G#J-4F#-8EL-8DJ-4E-2.AA;"                                                                                                                                                                                                          
&gt;    [25] "8G#J-4F#-8EL-8DJ-4E-2.AA;"                                                                                                                                                                                                                            
&gt;    [26] "4g#-4a-8g#L-8f#J-[2e-4e]-4d#-4B;-8cc#L-8bJ-4a-4a-4g#-8aL-8gJ-8f#L-8g#XJ-4a-4g#;-4a#-8bL-8aJ-4g-8f#L-8eJ-4f#-2.f#;-8eL-8dJ-4c#-4d-4e-8f#L-8g#J-2a"                                                                                                     
&gt;    [27] "8g#L-8f#J-[2e-4e]-4d#-4B;-8cc#L-8bJ-4a-4a-4g#-8aL-8gJ-8f#L-8g#XJ-4a-4g#;-4a#-8bL-8aJ-4g-8f#L-8eJ-4f#-2.f#;-8eL-8dJ-4c#-4d-4e-8f#L-8g#J-2a"                                                                                                            
&gt;    [28] "4g#-8aL-8gJ-8f#L-8g#XJ-4a-4g#;-4a#-8bL-8aJ-4g-8f#L-8eJ-4f#-2.f#;-8eL-8dJ-4c#-4d-4e-8f#L-8g#J-2a"                                                                                                                                                      
&gt;    [29] "8g#XJ-4a-4g#;-4a#-8bL-8aJ-4g-8f#L-8eJ-4f#-2.f#;-8eL-8dJ-4c#-4d-4e-8f#L-8g#J-2a"                                                                                                                                                                       
&gt;    [30] "4g#;-4a#-8bL-8aJ-4g-8f#L-8eJ-4f#-2.f#;-8eL-8dJ-4c#-4d-4e-8f#L-8g#J-2a"                                                                                                                                                                                
&gt;    [31] "8g#J-2a"                                                                                                                                                                                                                                              
&gt;    [32] "8g#J-4f#-4e-8f#L-8g#J-2a"                                                                                                                                                                                                                             
&gt;    [33] "8g#J-2a"                                                                                                                                                                                                                                              
&gt;    [34] "8g#L-8f#J-4g#-4f#-4e;-4ee-4dd-4cc#-4b-4a-8aL-8bJ-4cc#-4b;-4cc#-4dd-4cc#-4b-4a#-2.b;-4e-4a-4b-4cc#-4dd-4ee-8ddL-8cc#J-4b;-4dd-4cc#-4b-4.ee-8dd-8cc#L-8b-8a-8bJ-4cc#-4b-2.a;"                                                                           
&gt;    [35] "4g#-4f#-4e;-4ee-4dd-4cc#-4b-4a-8aL-8bJ-4cc#-4b;-4cc#-4dd-4cc#-4b-4a#-2.b;-4e-4a-4b-4cc#-4dd-4ee-8ddL-8cc#J-4b;-4dd-4cc#-4b-4.ee-8dd-8cc#L-8b-8a-8bJ-4cc#-4b-2.a;"                                                                                     
&gt;    [36] "4E-4E--4D-8CL-8D-8E-8CJ-4F;-4BB--4AA-4GG-8FFL-8AAJ-4C-2FF;"                                                                                                                                                                                           
&gt;    [37] "8E-8CJ-4F;-4BB--4AA-4GG-8FFL-8AAJ-4C-2FF;"                                                                                                                                                                                                            
&gt;    [38] "8eL-8f-8g-8eJ-4f;-4f-4.f-8e-4.f-8e-2f;"                                                                                                                                                                                                               
&gt;    [39] "8eJ-4f;-4f-4.f-8e-4.f-8e-2f;"                                                                                                                                                                                                                         
&gt;    [40] "8e-4.f-8e-2f;"                                                                                                                                                                                                                                        
&gt;    [41] "8e-2f;"                                                                                                                                                                                                                                               
&gt;    [42] "4ee-4ff-4ee-2dd-4cc;-4a-4b--4a-4g-4g-2.f;"                                                                                                                                                                                                            
&gt;    [43] "4ee-2dd-4cc;-4a-4b--4a-4g-4g-2.f;"                                                                                                                                                                                                                    
&gt;    [44] "4G#-4F#-4E#X-4F#-4BB-4C#-2FF#;-4D#-2E-4DnX-4C#-4AA-4BB-2E;-4C#-4F#-4E-4F#-4G#-4F#-4E-2A"                                                                                                                                                              
&gt;    [45] "4G#-4F#-4E-2A"                                                                                                                                                                                                                                        
&gt;    [46] "4G#-4F#-4B-4A-4G-2.C#-2D;-4A-2D#-4E-4AA-2BB-2E;-4C#-2F#-4E-2BB-4C#-2DnX-4D#-2E;-4E#-4F#-4G#-4A-4E-4F#-4D-2E-4E-2AA;"                                                                                                                                  
&gt;    [47] "4G#-4A-4E-4F#-4D-2E-4E-2AA;"                                                                                                                                                                                                                          
&gt;    [48] "4G#-2A"                                                                                                                                                                                                                                               
&gt;    [49] "4G#-2A;"                                                                                                                                                                                                                                              
&gt;    [50] "4g#-4c#-4d-4c#-2A;"                                                                                                                                                                                                                                   
&gt;    [51] "4G#-4A-4B-2c#-8BL-8AJ-2G#;-4G#-2A"                                                                                                                                                                                                                    
&gt;    [52] "2G#;-4G#-2A"                                                                                                                                                                                                                                          
&gt;    [53] "4G#-2A"                                                                                                                                                                                                                                               
&gt;    [54] "4G#X-2A"                                                                                                                                                                                                                                              
&gt;    [55] "2G#;-4G#-2A"                                                                                                                                                                                                                                          
&gt;    [56] "4G#-2A"                                                                                                                                                                                                                                               
&gt;    [57] "4G#-4dnX-2A"                                                                                                                                                                                                                                          
&gt;    [58] "2g#-4e#-2f#-4g#-2a"                                                                                                                                                                                                                                   
&gt;    [59] "4g#-2a"                                                                                                                                                                                                                                               
&gt;    [60] "4g#-2e;-4e-4f#-4g#-4a-4b-4a-4g#-2f#-4e#-2c#;-4f#-2e-4e-2e-4d#-2B;-4c#-2c#-4f#-4e-4f#-4g#-2a"                                                                                                                                                          
&gt;    [61] "4g#-4a-4b-4a-4g#-2f#-4e#-2c#;-4f#-2e-4e-2e-4d#-2B;-4c#-2c#-4f#-4e-4f#-4g#-2a"                                                                                                                                                                         
&gt;    [62] "4g#-2f#-4e#-2c#;-4f#-2e-4e-2e-4d#-2B;-4c#-2c#-4f#-4e-4f#-4g#-2a"                                                                                                                                                                                      
&gt;    [63] "4g#-2a"                                                                                                                                                                                                                                               
&gt;    [64] "8g#-4a-2e;-4g#-4a-4b-4a-4g#-2a"                                                                                                                                                                                                                       
&gt;    [65] "4g#-4a-4b-4a-4g#-2a"                                                                                                                                                                                                                                  
&gt;    [66] "4g#-2a"                                                                                                                                                                                                                                               
&gt;    [67] "4g#-2f#-4e-4a-2b-2cc#;-4cc#-4cc#-4b-4cc#-2cc#-4b-4a-2b-2a;"                                                                                                                                                                                           
&gt;    [68] "2g#-2f#;-4b-4b-4a-4g#-4a-2f#-2e;-4e-2a"                                                                                                                                                                                                               
&gt;    [69] "4g#-4a-2f#-2e;-4e-2a"                                                                                                                                                                                                                                 
&gt;    [70] "4g#-4a-2f#-2e;-4e-2a"                                                                                                                                                                                                                                 
&gt;    [71] "4g#-2f#-4e-4b-2cc#-2b;-4cc#-2dd-4cc#-4b-8aL-8g#-8a-8bJ-4cc#-2b-2a;"                                                                                                                                                                                   
&gt;    [72] "8g#-8a-8bJ-4cc#-2b-2a;"                                                                                                                                                                                                                               
&gt;    [73] "8eJ-4f-8fL-8gJ-4e-4f-4c;-4.f-8g-4a--4a--8a-L-8fJ-4g-2e-;-4f-4g-4e-4f-4f-4e-2c;-4f-4f-4f-4f-8gL-8a-XJ-8b-L-8gJ-4a--4a-;-4f-4f-4b--4b--4b--4a-2f;"                                                                                                      
&gt;    [74] "4e-4f-4c;-4.f-8g-4a--4a--8a-L-8fJ-4g-2e-;-4f-4g-4e-4f-4f-4e-2c;-4f-4f-4f-4f-8gL-8a-XJ-8b-L-8gJ-4a--4a-;-4f-4f-4b--4b--4b--4a-2f;"                                                                                                                     
&gt;    [75] "4e-4f-4f-4e-2c;-4f-4f-4f-4f-8gL-8a-XJ-8b-L-8gJ-4a--4a-;-4f-4f-4b--4b--4b--4a-2f;"                                                                                                                                                                     
&gt;    [76] "4e-2c;-4f-4f-4f-4f-8gL-8a-XJ-8b-L-8gJ-4a--4a-;-4f-4f-4b--4b--4b--4a-2f;"                                                                                                                                                                              
&gt;    [77] "4f#-8dL-8eJ-4f#-8eL-8f#J-4g-4f#;-4f#-4e-8dL-8eJ-4f#-[4g-4g]-4f#-4d;-8f#L-8gJ-4.a-8g#-8aL-8g#J-4a-4a-4g#-4e;-8eL-8d#J-4e-4e-8eL-8f#J-8gnXL-8f#J-8f#L-8gJ-4anX-4g;-4a-8gL-8aJ-4b-8bL-8aJ-8aL-8gJ-2g"                                                    
&gt;    [78] "4f#-8eL-8f#J-4g-4f#;-4f#-4e-8dL-8eJ-4f#-[4g-4g]-4f#-4d;-8f#L-8gJ-4.a-8g#-8aL-8g#J-4a-4a-4g#-4e;-8eL-8d#J-4e-4e-8eL-8f#J-8gnXL-8f#J-8f#L-8gJ-4anX-4g;-4a-8gL-8aJ-4b-8bL-8aJ-8aL-8gJ-2g"                                                                
&gt;    [79] "8f#J-4g-4f#;-4f#-4e-8dL-8eJ-4f#-[4g-4g]-4f#-4d;-8f#L-8gJ-4.a-8g#-8aL-8g#J-4a-4a-4g#-4e;-8eL-8d#J-4e-4e-8eL-8f#J-8gnXL-8f#J-8f#L-8gJ-4anX-4g;-4a-8gL-8aJ-4b-8bL-8aJ-8aL-8gJ-2g"                                                                        
&gt;    [80] "4f#;-4f#-4e-8dL-8eJ-4f#-[4g-4g]-4f#-4d;-8f#L-8gJ-4.a-8g#-8aL-8g#J-4a-4a-4g#-4e;-8eL-8d#J-4e-4e-8eL-8f#J-8gnXL-8f#J-8f#L-8gJ-4anX-4g;-4a-8gL-8aJ-4b-8bL-8aJ-8aL-8gJ-2g"                                                                                
&gt;    [81] "4f#-4e-8dL-8eJ-4f#-[4g-4g]-4f#-4d;-8f#L-8gJ-4.a-8g#-8aL-8g#J-4a-4a-4g#-4e;-8eL-8d#J-4e-4e-8eL-8f#J-8gnXL-8f#J-8f#L-8gJ-4anX-4g;-4a-8gL-8aJ-4b-8bL-8aJ-8aL-8gJ-2g"                                                                                     
&gt;    [82] "4f#-[4g-4g]-4f#-4d;-8f#L-8gJ-4.a-8g#-8aL-8g#J-4a-4a-4g#-4e;-8eL-8d#J-4e-4e-8eL-8f#J-8gnXL-8f#J-8f#L-8gJ-4anX-4g;-4a-8gL-8aJ-4b-8bL-8aJ-8aL-8gJ-2g"                                                                                                    
&gt;    [83] "4f#-4d;-8f#L-8gJ-4.a-8g#-8aL-8g#J-4a-4a-4g#-4e;-8eL-8d#J-4e-4e-8eL-8f#J-8gnXL-8f#J-8f#L-8gJ-4anX-4g;-4a-8gL-8aJ-4b-8bL-8aJ-8aL-8gJ-2g"                                                                                                                
&gt;    [84] "8f#L-8gJ-4.a-8g#-8aL-8g#J-4a-4a-4g#-4e;-8eL-8d#J-4e-4e-8eL-8f#J-8gnXL-8f#J-8f#L-8gJ-4anX-4g;-4a-8gL-8aJ-4b-8bL-8aJ-8aL-8gJ-2g"                                                                                                                        
&gt;    [85] "8f#J-8gnXL-8f#J-8f#L-8gJ-4anX-4g;-4a-8gL-8aJ-4b-8bL-8aJ-8aL-8gJ-2g"                                                                                                                                                                                   
&gt;    [86] "8f#J-8f#L-8gJ-4anX-4g;-4a-8gL-8aJ-4b-8bL-8aJ-8aL-8gJ-2g"                                                                                                                                                                                              
&gt;    [87] "8f#L-8gJ-4anX-4g;-4a-8gL-8aJ-4b-8bL-8aJ-8aL-8gJ-2g"                                                                                                                                                                                                   
&gt;    [88] "2G#-4A-4d-4e-4d-8eL-8dJ-4c-2B;-2e-4e-4f-4g-4c-8cL-8BJ-4A-2G#;-2A"                                                                                                                                                                                     
&gt;    [89] "2G#;-2A"                                                                                                                                                                                                                                              
&gt;    [90] "4g#-4a-8gnXL-8f#J-4e-4f#-2g#;-2g#-4a-4b-4cc-4f-4e-8dL-8cJ-2B;-2e-4d-8eL-8f#J-4g-4a-8bL-8aJ-4g#-2e;-2a"                                                                                                                                                
&gt;    [91] "2g#;-2g#-4a-4b-4cc-4f-4e-8dL-8cJ-2B;-2e-4d-8eL-8f#J-4g-4a-8bL-8aJ-4g#-2e;-2a"                                                                                                                                                                         
&gt;    [92] "2g#-4a-4b-4cc-4f-4e-8dL-8cJ-2B;-2e-4d-8eL-8f#J-4g-4a-8bL-8aJ-4g#-2e;-2a"                                                                                                                                                                              
&gt;    [93] "4g#-2e;-2a"</code></pre>
<p>Notice that, because our <code>close</code> expression is more
complicated now, I had to explictely say <code>Solfa == 'do'</code>
instead of using the shortcut of just providing a single string.</p>
</div>
<div class="section level4">
<h4 id="open-until-nextprevious">Open until next/previous<a class="anchor" aria-label="anchor" href="#open-until-nextprevious"></a>
</h4>
<p>We can use what we learned above about the <code>nextopen</code> and
<code>nextclose</code> variables to make windows open/close at matches.
For example, we could have windows close every time there is a fermata
(<code>";"</code> token in <code>**kern</code>) in the data, but
<em>open</em> again immediately after each fermata:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/withinHumdrum.html">with</a></span><span class="op">(</span><span class="va">chorales</span><span class="op">$</span><span class="va">Token</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">Token</span>, collapse <span class="op">=</span> <span class="st">'-'</span><span class="op">)</span>, <span class="fu"><a href="../reference/context.html">context</a></span><span class="op">(</span><span class="va">prevclose</span> <span class="op">+</span> <span class="fl">1</span>, <span class="st">';'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>&gt;      [1] "4GG-4FF#-4GG-4AA-4BB-4C-4D-2GG;"                                                                                 
&gt;      [2] "4GG-4GG-4AA-4BB-4.BB-8AA-4GG-2D;"                                                                                
&gt;      [3] "[4E-4E]-4D-4C-4.BB-8C-4D-8GGL-8AAJ-4BB-4GG-2C;"                                                                  
&gt;      [4] "4GG-4FF#-4GG-4AA-4BB-4GG-4D-8EL-8D-8C-8BB-8AA-8GGJ-2D;"                                                          
&gt;      [5] "[4G-4G]-4F#-[4E-8EL]-8DJ-4C-4D-2.GG;"                                                                            
&gt;      [6] "4B-4B-8cL-8BJ-4A-4G-4F#-4G-8cL-8BJ-4c-4d-2d;"                                                                    
&gt;      [7] "4d-4A-4B-4c-4d-4e-8dL-8cJ-2B;"                                                                                   
&gt;      [8] "4d-4d-4c-8BL-8AJ-8BL-8cJ-4d-4d-2d;"                                                                              
&gt;      [9] "4B-4G-4B-4e-2d-4d-2.d-2c;"                                                                                       
&gt;     [10] "4d-8dL-8cJ-4B-4c-2d-8dL-8cJ-4B-4c-4d-2d;"                                                                        
&gt;     [11] "4d-2d-4e-2e-8dL-8cJ-2.B;"                                                                                        
&gt;     [12] "4d-4d-4e-4d-2d-4B-8eL-8d-8e-8f#J-4g-2f#;"                                                                        
&gt;     [13] "4g-4d-4e-4f#-2g-4f#-2d;"                                                                                         
&gt;     [14] "[4g-8gL]-8f#J-8eL-8f#J-[4g-8gL]-8aJ-8gL-8f#J-4g-2f#;"                                                            
&gt;     [15] "4e-4e-8f#L-8gJ-4a-4a-4.g-8f#-2g-4f-2e;"                                                                          
&gt;     [16] "4g-4.a-8g-4f#-2g-[4f#-8f#L]-8eJ-8eL-8f#J-4g-2f#;"                                                                
&gt;     [17] "4g-2a-8gL-8f#J-2g-4f#-2.d;"                                                                                      
&gt;     [18] "4g-2g-4dd-4.b-8a-4g-4.g-8a-4b-2a;"                                                                               
&gt;     [19] "4b-2dd-4cc-4b-2a-2g;"                                                                                            
&gt;     [20] "4b-4b-4cc-4dd-4.dd-8cc-4b-2a;"                                                                                   
&gt;     [21] "4g-2b-4cc-2dd-4cc-2.b-2g;"                                                                                       
&gt;     [22] "4b-2dd-4cc-2b-4a-4.g-8a-4b-2a;"                                                                                  
&gt;     [23] "4b-2dd-4cc-4b-2a-2.g;"                                                                                           
&gt;     [24] "8AL-8G#J-4F#-4C#-4D-4D#-4E-4BB-4EE;"                                                                             
&gt;     [25] "4E-4A-4B-4c#-8BL-8AJ-4B-4BB-4E;"                                                                                 
&gt;     [26] "4C#-8F#L-8G#J-4A-4E-8C#L-8AAJ-4D-8C#L-8DJ-4E;"                                                                   
&gt;     [27] "4C#-4BB-4C#-8DL-8GJ-4F#-2.BB;"                                                                                   
&gt;     [28] "4C#-4F#-8EL-8DJ-4C#-4BB-8AAL-8BB-8C#-8DJ-4E;"                                                                    
&gt;     [29] "4BB-8F#L-8G#J-4A-8G#L-8EJ-[4A-8AL]-8G#J-4F#-8EL-8DJ-4E-2.AA;"                                                    
&gt;     [30] "4c#-4c#-8c#L-8BJ-8AL-8G#J-4F#-4.B-8A-4G#X;"                                                                      
&gt;     [31] "4e-4e-4d#-2c#-4.B-8A-4G#;"                                                                                       
&gt;     [32] "4G#-8AL-8BJ-8c#L-8dJ-4e-4e-4d-4e-4e;"                                                                            
&gt;     [33] "4e-8f#-4B-8A#-4B-4c#-2.d;"                                                                                       
&gt;     [34] "4G#-4A-8G#L-8F#J-8EL-8eJ-4d-8c#L-8d-8e-8f#J-4g#;"                                                                
&gt;     [35] "4f#-8f#L-8eJ-8dL-8c#J-4B-8c#L-8dJ-4.e-8d-8c#L-8f#J-8BL-16eL-16dJJ-2.c#;"                                         
&gt;     [36] "4e-4f#-4e-4f#-4f#-4e-4d#-4B;"                                                                                    
&gt;     [37] "4g#-4a-8g#L-8f#J-[2e-4e]-4d#-4B;"                                                                                
&gt;     [38] "8cc#L-8bJ-4a-4a-4g#-8aL-8gJ-8f#L-8g#XJ-4a-4g#;"                                                                  
&gt;     [39] "4a#-8bL-8aJ-4g-8f#L-8eJ-4f#-2.f#;"                                                                               
&gt;     [40] "8eL-8dJ-4c#-4d-4e-8f#L-8g#J-2a-4e;"                                                                              
&gt;     [41] "4b-8aL-8g#J-4f#-4e-8f#L-8g#J-2a-4a-4g#-2.e;"                                                                     
&gt;     [42] "4a-4a-4a-4a-4b-4g-4f#-4e;"                                                                                       
&gt;     [43] "4b-4cc#-4b-4a-8g#L-8f#J-4g#-4f#-4e;"                                                                             
&gt;     [44] "4ee-4dd-4cc#-4b-4a-8aL-8bJ-4cc#-4b;"                                                                             
&gt;     [45] "4cc#-4dd-4cc#-4b-4a#-2.b;"                                                                                       
&gt;     [46] "4e-4a-4b-4cc#-4dd-4ee-8ddL-8cc#J-4b;"                                                                            
&gt;     [47] "4dd-4cc#-4b-4.ee-8dd-8cc#L-8b-8a-8bJ-4cc#-4b-2.a;"                                                               
&gt;     [48] "4E-4A-4B-4c-8BL-8AJ-4G#-4A-4E;"                                                                                  
&gt;     [49] "4BB-8CL-8DJ-4E-4F-8EL-8DJ-2E-4AA;"                                                                               
&gt;     [50] "4F#-8GL-8F#J-4E-8BL-8AJ-8GL-8F#J-8EL-8DJ-4C-4BB;"                                                                
&gt;     [51] "4E-4F-8CL-8DJ-4E-8AAL-8BBJ-8CL-8DJ-4E-4AA;"                                                                      
&gt;     [52] "4A-4G#-8AL-8GJ-8FL-8EJ-8DL-8C#J-4D-4D#-4E;"                                                                      
&gt;     [53] "4e-4e-4d-4e-8dL-8cJ-4B-8cL-8dJ-4e;"                                                                              
&gt;     [54] "4f-4e-8eL-8dJ-4c-4d-8G#-4A-8G#-4c;"                                                                              
&gt;     [55] "4A-8GL-8AJ-4B-4B-8BL-8AJ-4B-4c-4F#;"                                                                             
&gt;     [56] "8eL-8dnJ-8cL-8dJ-4e-4e-8eL-8dJ-4c-4B-4c;"                                                                        
&gt;     [57] "4c-4B-4A-4A-4B--8AL-8EJ-4F#X-4G#;"                                                                               
&gt;     [58] "4g#-4a-4g#-4a-8g#L-8aJ-4b-8eL-8f#J-4g#;"                                                                         
&gt;     [59] "4g#-4a-4g#-8aL-8gJ-4f-2e-4e;"                                                                                    
&gt;     [60] "4d-8dL-8d#J-4e-4d#-8eL-8d#J-8eL-8gJ-8f#L-8eJ-4d#;"                                                               
&gt;     [61] "4B-4A-4a-4g#-4a-4e-4e-4e;"                                                                                       
&gt;     [62] "4e-4e-4e-4f-4g-8f#XL-8g#J-4a-4e;"                                                                                
&gt;     [63] "4b-4cc-4b-4a-4ee-8eeL-8ddJ-4cc-4b;"                                                                              
&gt;     [64] "4dd-4cc-4b-4a-8bL-16ccL-16ddJJ-4cc-4b-4a;"                                                                       
&gt;     [65] "4a-8bL-8aJ-4g-4f#-8eL-8f#J-4g-4a-4b;"                                                                            
&gt;     [66] "4g-8aL-8bJ-4cc-4b-8ccL-8bJ-4a-4g#-4a;"                                                                           
&gt;     [67] "4a-4ee-4cc-4dd-4ee-4dd-4cc-4b;"                                                                                  
&gt;     [68] "4E-4D#-4BB-4E-8F#L-8G#J-4A-4E-4AA;"                                                                              
&gt;     [69] "4D#-8EL-8F#J-4G#-4C#-8F#L-8EJ-8D#L-16C#L-16BBJJ-4F#-4BB;"                                                        
&gt;     [70] "4E-4C#-8D#L-8EJ-4F#-4B-8G#L-8EJ-4F#-4BB;"                                                                        
&gt;     [71] "4E-4G#-4E-8AnXL-8BJ-4c#-4E#-4F#-4C#;"                                                                            
&gt;     [72] "4E-4BB-8C#L-8D#J-4E-4BB-4AA#-4BB-4EE;"                                                                           
&gt;     [73] "4e-4f#-8eL-8d#J-4e-8AL-8BJ-16c#LL-16dJJ-4e-8d-4c#;"                                                              
&gt;     [74] "4B-4.B-8A-4G#-4F#-8F#-4B-8A#-4F#;"                                                                               
&gt;     [75] "4G#-4c#-4F#-4f#-4f#-4B-4A#-4d#;"                                                                                 
&gt;     [76] "4e-4B-4e-4e-4c#-4d-4c#-4c#;"                                                                                     
&gt;     [77] "[4B-4B]-4e-4e-8d#L-8BJ-2F#-4G#;"                                                                                 
&gt;     [78] "4g#-8f#L-8g#J-4a-4g#-4f#-8e-4a-8g#-4e;"                                                                          
&gt;     [79] "4f#-4e-8eL-8d#J-4e-4c#-8f#L-16eL-16d#JJ-4e-4d#;"                                                                 
&gt;     [80] "8eL-8f#J-8g#L-8a#J-4b-4a#-4b-4b-4f#-4f#;"                                                                        
&gt;     [81] "4g#-8eL-8f#J-4g#-4a-8eL-8f#J-4g#-4f#-4e#;"                                                                       
&gt;     [82] "4e-4d#-4c#-4B-4B-4c#-4B-4B;"                                                                                     
&gt;     [83] "4b-4b-4b-4b-4dd-4cc#-4b-4a;"                                                                                     
&gt;     [84] "4b-4g#-8eL-8f#J-4g#-4a#-4b-4cc#-4b;"                                                                             
&gt;     [85] "4b-4ee-4dd#-4cc#-4dd#-8eeL-8dd#J-4cc#-4b;"                                                                       
&gt;     [86] "4b-4ee-4b-4cc#-8g#L-8aJ-4b-4a-4g#;"                                                                              
&gt;     [87] "4g#-4f#-4a-4g#-4f#-4c#-4d#-4e;"                                                                                  
&gt;     [88] "4G-4C-4D-4E-8F#L-8GJ-4A-4D-4G;"                                                                                  
&gt;     [89] "4F#-8GL-8F#J-4E-4BB-4C-2D-4GG;"                                                                                  
&gt;     [90] "4G-4F#-8EL-8DJ-4E-4F#-4G-4D-4GG;"                                                                                
&gt;     [91] "4C-8GL-8FJ-8EL-8DJ-8CL-8BBJ-8CL-8DJ-4E-4AA-4D;"                                                                  
&gt;     [92] "8GL-8AJ-4B-4c-4F#-4G#-4A-4AA-4E;"                                                                                
&gt;     [93] "4GG#-8AAL-8BBJ-8CL-8AAJ-4F-8EL-8DJ-4E-4EE-4AA;"                                                                  
&gt;     [94] "4AA-8BBL-8C#J-2D-4C#-4D-4AA-4D;"                                                                                 
&gt;     [95] "4BB-4E-4D-8GL-8F#J-4E-8BBL-8AAJ-4GG-8CL-8BBJ-4AA-8DL-8CJ-4D-4GG;"                                                
&gt;     [96] "4B-8cL-8BJ-4A-4e-8AL-8BJ-8cL-8eJ-4d-4d;"                                                                         
&gt;     [97] "4d-4d-8GL-8AJ-8BL-8GJ-4e-8AL-8BJ-4c-4B;"                                                                         
&gt;     [98] "4B-4A-4d-4G-4A-8AL-8GJ-8GL-8F#J-4G;"                                                                             
&gt;     [99] "4G-4G-4G-4G-4G-8GL-16AL-16BJJ-4A-4A;"                                                                            
&gt;    [100] "4G-8GL-8dJ-8cL-8BJ-4A-4e-2e-4e;"                                                                                 
&gt;    [101] "8eL-8dJ-8cL-8BJ-[4A-8AL]-8G#J-8AL-8BJ-8G#-4A-8G#-4A;"                                                            
&gt;    [102] "8EL-8F#XJ-4GnX-8dL-8cJ-4B--4A-4A-4G-4F#X;"                                                                       
&gt;    [103] "4F#-4G-4d-4d-4e-2d-8eL-8dJ-4c-8dL-8eJ-8dL-8cJ-4B;"                                                               
&gt;    [104] "4g-4g-4f#-4g-4f#-8eL-8gJ-8gL-8f#J-4g;"                                                                           
&gt;    [105] "4a-4g-4g-4g-4g-4g-4f#-4d;"                                                                                       
&gt;    [106] "4d-8dL-8eJ-4f#-4e-8eL-8dJ-4d-4c-4B;"                                                                             
&gt;    [107] "4e-4d-4e-4f-8eL-8f#J-8gL-8f#J-8gL-8aJ-4f#;"                                                                      
&gt;    [108] "4d-4g-4g-4a-4b-8bL-8g#J-4a-4g#;"                                                                                 
&gt;    [109] "4b-4a-8eL-8cJ-8dL-8eJ-4f-4e-4d-4c;"                                                                              
&gt;    [110] "4a-8dL-8eJ-4f-8eL-8dJ-[4e-8eL]-8dJ-8dL-8c#J-4d;"                                                                 
&gt;    [111] "8dL-8cJ-8BL-8AJ-8GL-8F#J-4G-4g-4f#-4g-4g-[4g-4g]-4f#-4d;"                                                        
&gt;    [112] "4dd-4ee-8ddL-8ccJ-8bL-8ccJ-4dd-8ccL-8bJ-4cc-4b;"                                                                 
&gt;    [113] "4a-4b-4cc-4dd-8ccL-8bJ-8aL-8gJ-4a-4g;"                                                                           
&gt;    [114] "4g-4a-4b-8ccL-8bJ-4a-4b-4a-4g;"                                                                                  
&gt;    [115] "8gL-8aJ-4b-4cc-4dd-4ee-4b-4cc#-4dd;"                                                                             
&gt;    [116] "8bL-8ccJ-4dd-4ee-8ddL-8ccJ-4b-2cc-4b;"                                                                           
&gt;    [117] "4ee-4ee-4ee-4a-4dd-4cc-4b-4a;"                                                                                   
&gt;    [118] "4cc-4b-4a-4g-8aL-8gJ-4f-4e-4d;"                                                                                  
&gt;    [119] "4d-4g-4a-4.b-8cc-4dd-8ccL-8bJ-4a-8bL-8ccJ-2a-4g;"                                                                
&gt;    [120] "4FF-4F-4E-4E--4D-8CL-8D-8E-8CJ-4F;"                                                                              
&gt;    [121] "4BB--4AA-4GG-8FFL-8AAJ-4C-2FF;"                                                                                  
&gt;    [122] "4r-4A-4BB-4C-8DL-8FJ-8AL-8GJ-8FL-8DJ-4G-4C;"                                                                     
&gt;    [123] "4FF-4GG-4AA-4BB--4C-2.FF;"                                                                                       
&gt;    [124] "4A-4c-4c-4c-4d-4G-4c-4c;"                                                                                        
&gt;    [125] "4B--4c-8dL-8B-J-4c-4c-2c;"                                                                                       
&gt;    [126] "4ry-4f-4f-[4e-8eL]-8dJ-[4c-4c]-4B-4e;"                                                                           
&gt;    [127] "4c-4B-X-4c-4d-8.cL-16B-Jk-2.A;"                                                                                  
&gt;    [128] "4c-4f-4g-4f-4f-8eL-8f-8g-8eJ-4f;"                                                                                
&gt;    [129] "4f-4.f-8e-4.f-8e-2f;"                                                                                            
&gt;    [130] "4ry-[4a-8aL]-[8gJ-8gL]-16ccLL-16b-XJJ-4a-4a-4a-4g-4g;"                                                           
&gt;    [131] "[4f-8fL]-8eJ-4f-4f-4e-2.c;"                                                                                      
&gt;    [132] "4f-4a-4g-4a-4b--2cc-4a;"                                                                                         
&gt;    [133] "4dd-4cc-4b--4a-4g-2a;"                                                                                           
&gt;    [134] "4r-4cc-4dd-4ee-4ff-4ee-2dd-4cc;"                                                                                 
&gt;    [135] "4a-4b--4a-4g-4g-2.f;"                                                                                            
&gt;    [136] "4A-2F#-4C#-2D-4D-4C#-4D-4E-2AA;"                                                                                 
&gt;    [137] "4A-2E#-4C#-4F#-4EnX-4D-4C#-4D-4E-2AA;"                                                                           
&gt;    [138] "4AA-2D-4A-4G#-4F#-4E#X-4F#-4BB-4C#-2FF#;"                                                                        
&gt;    [139] "4D#-2E-4DnX-4C#-4AA-4BB-2E;"                                                                                     
&gt;    [140] "4C#-4F#-4E-4F#-4G#-4F#-4E-2A-4AA-2D;"                                                                            
&gt;    [141] "4C#-4BB-8BL-8A-8G-8F#J-8EL-8F#J-4G-4F#-2BB;"                                                                     
&gt;    [142] "4E-4A-4G#-4F#-4B-4A-4G-2.C#-2D;"                                                                                 
&gt;    [143] "4A-2D#-4E-4AA-2BB-2E;"                                                                                           
&gt;    [144] "4C#-2F#-4E-2BB-4C#-2DnX-4D#-2E;"                                                                                 
&gt;    [145] "4E#-4F#-4G#-4A-4E-4F#-4D-2E-4E-2AA;"                                                                             
&gt;    [146] "4c#-2c#-4c#-2A-4G#-2A-4G#-2A;"                                                                                   
&gt;    [147] "4c#-2c#-4B-2A-4e-4e-4f#-4e-2c#;"                                                                                 
&gt;    [148] "4c#-2d-4e-4e#-4f#-4g#-4c#-4d-4c#-2A;"                                                                            
&gt;    [149] "4A-4G#-4A-4B-2c#-8BL-8AJ-2G#;"                                                                                   
&gt;    [150] "4G#-2A-4d-2B-4e-2.e-2d;"                                                                                         
&gt;    [151] "4e-2f#-4B-4e-8dL-8c#J-8BL-8A#J-2B;"                                                                              
&gt;    [152] "4G#X-2A-4A-2B-4B-4B-4A-4G-2F#;"                                                                                  
&gt;    [153] "4A-2F#-4B-4c#-4B-4A-2G#;"                                                                                        
&gt;    [154] "4G#-2A-4B-4B-4A-4G#-4dnX-2A-2G#;"                                                                                
&gt;    [155] "4c#-4f#-4enX-4e-8eL-8dJ-4c#-4f#-2e-4d-2c#;"                                                                      
&gt;    [156] "4e-2f#-4e-4d-4c#-4B-4e-4f#-4e-2e;"                                                                               
&gt;    [157] "8eL-8f#J-2g#-4e#-2f#-4g#-2a-4g#-2e;"                                                                             
&gt;    [158] "4e-4f#-4g#-4a-4b-4a-4g#-2f#-4e#-2c#;"                                                                            
&gt;    [159] "4f#-2e-4e-2e-4d#-2B;"                                                                                            
&gt;    [160] "4c#-2c#-4f#-4e-4f#-4g#-2a-4g-2f#;"                                                                               
&gt;    [161] "4a-2b-8bL-8aJ-8gL-8aJ-4b-4e-2d#;"                                                                                
&gt;    [162] "4e-2e-4f#-2f#-4g-4g-4f#-4e-2d;"                                                                                  
&gt;    [163] "4e-2f#-4e-2e-4d#-2B;"                                                                                            
&gt;    [164] "4c#-4c#-4d#-4e-2d#-4e-4.f#-8g#-4a-2e;"                                                                           
&gt;    [165] "4g#-4a-4b-4a-4g#-2a-4a-2g#-2e;"                                                                                  
&gt;    [166] "4a-2a-4g#-2f#-4e-4a-2b-2cc#;"                                                                                    
&gt;    [167] "4cc#-4cc#-4b-4cc#-2cc#-4b-4a-2b-2a;"                                                                             
&gt;    [168] "4a-4a-4b-4cc#-2b-4cc#-4a-2g#-2f#;"                                                                               
&gt;    [169] "4b-4b-4a-4g#-4a-2f#-2e;"                                                                                         
&gt;    [170] "4e-2a-4a-2b-4b-4.cc#-8b-4cc#-2a;"                                                                                
&gt;    [171] "4a-2dd-4dd-4cc#-4b-4cc#-2b;"                                                                                     
&gt;    [172] "4b-2cc#-4cc#-2dd-4dd-2.ee-2a;"                                                                                   
&gt;    [173] "4cc#-4b-4a-4g#-4a-2f#-2e;"                                                                                       
&gt;    [174] "4e-2a-4g#-2f#-4e-4b-2cc#-2b;"                                                                                    
&gt;    [175] "4cc#-2dd-4cc#-4b-8aL-8g#-8a-8bJ-4cc#-2b-2a;"                                                                     
&gt;    [176] "4F-4E--4D--4C-4BB--4C-4FF-4FF;"                                                                                  
&gt;    [177] "4F-8E-L-8D-J-8CL-8BB-J-4AA--4D--4E--2AA-;"                                                                       
&gt;    [178] "4D--8CL-8BB-J-4C-4D--4BB--4C-2FF;"                                                                               
&gt;    [179] "8FL-8G-8A-8FJ-8BB-L-8C-8D--8BB-J-8E-L-8F-8G-8E-J-4A--4A-;"                                                       
&gt;    [180] "8D-L-8E--8F-8D-J-8BB-L-8C-8D--8BB-J-8E-L-8CJ-4F-2BB-;"                                                           
&gt;    [181] "4B--4A--4G-4F-4BB--4C-2FF;"                                                                                      
&gt;    [182] "8FFL-8GG-8AA--8BB-J-8CL-8D-8E--8FJ-4G-4GG-4C-4C;"                                                                
&gt;    [183] "8FL-8E--8D--8CJ-4BB--8CL-8D-J-4E--4E--4AA--4AA-;"                                                                
&gt;    [184] "8D-L-8E--8D--8CJ-8BB-L-8C-8D--8BB-J-8E-L-8F-8E--8D-J-8CL-8D--8E--8CJ-8FL-8E-8F-8GJ-8A-L-8G-8A--8B-J-4c-4C-4F-4F;"
&gt;    [185] "4A--4A-4B--4c-4d--8cL-8B-J-4A--4A-;"                                                                             
&gt;    [186] "4.c-8B--4e--4e--4f-8e-L-8d-XJ-2c;"                                                                               
&gt;    [187] "4d--4d--4G-8FL-8A-J-4d--8cL-8B-J-2A-;"                                                                           
&gt;    [188] "8AL-8B-J-8cL-8AJ-4B--4B--4B--4e--4e--4e-;"                                                                       
&gt;    [189] "4d--4d--4f-4f-4g--8fL-8e-J-2d-;"                                                                                 
&gt;    [190] "4c-4c-4B--4c-4d--8cL-8B-J-2A-;"                                                                                  
&gt;    [191] "4c-4c-4c-4c-4c-4B-4c-4G;"                                                                                        
&gt;    [192] "4A-4A-4B--4E--4.e--8d--4c-4c;"                                                                                   
&gt;    [193] "4d--4d--4f-4f-4e--4e--4g-4g-4f-4f-4c-4F-4c-4c-4c-4c;"                                                            
&gt;    [194] "4f-4f-8fL-8eJ-4f-8fL-8gJ-4e-4f-4c;"                                                                              
&gt;    [195] "4.f-8g-4a--4a--8a-L-8fJ-4g-2e-;"                                                                                 
&gt;    [196] "4f-4g-4e-4f-4f-4e-2c;"                                                                                           
&gt;    [197] "4f-4f-4f-4f-8gL-8a-XJ-8b-L-8gJ-4a--4a-;"                                                                         
&gt;    [198] "4f-4f-4b--4b--4b--4a-2f;"                                                                                        
&gt;    [199] "4e-4f-8fL-8eJ-4f-4f-4e-2c;"                                                                                      
&gt;    [200] "4a--4a--4g-4g-8gL-8a-J-8gL-8fJ-4e-4e;"                                                                           
&gt;    [201] "4f-4f-8fL-8gJ-4a--8a-L-8fJ-4g-4e--4e-;"                                                                          
&gt;    [202] "4f-4f-4b--4b--4g-4g-4cc-4cc-8a-L-8gJ-8a-L-8b-J-4cc-8b-L-8a-J-4g-4g-4a-4a;"                                       
&gt;    [203] "4cc-4cc-4b--4a--4.g-8f-4f-4f;"                                                                                   
&gt;    [204] "4.a--8b--4cc-4cc-4.b--8a--2a-;"                                                                                  
&gt;    [205] "4a--4b--4b--4a--4.g-8f-2f;"                                                                                      
&gt;    [206] "4cc-4cc-4dd--4dd--4b--4b--4cc-4cc;"                                                                              
&gt;    [207] "4a--4a--4dd--4dd--4cc-4cc-2b-;"                                                                                  
&gt;    [208] "4g-4a-X-4b--4a--4g-4g-2f;"                                                                                       
&gt;    [209] "4ff-4ff-4ee-X-4ee--4dd-4dd-4cc-4cc;"                                                                             
&gt;    [210] "4cc-4cc-4dd--4cc-4.b--8a--4a--4a-;"                                                                              
&gt;    [211] "4a--4a--4dd--4dd--4b--4b--4ee--4ee--4cc-4cc-4ff-4ff-4ee-4ee-4ff-4ff;"                                            
&gt;    [212] "8GL-8F#J-4E-4D-4G-8F#L-8GJ-4A-4AA-4D;"                                                                           
&gt;    [213] "4D#-8EL-8F#J-8GL-[8CJ-8CL]-8BBJ-8AAL-8GGJ-4D-4DD-4GG;"                                                           
&gt;    [214] "4D-8dL-8cJ-4B-4A-4D#-4E-4EE-4AA;"                                                                                
&gt;    [215] "8EL-8F#J-4G-4G#-4A-4A#-4B-4BB-4E;"                                                                               
&gt;    [216] "8DL-8CJ-8BBL-8AA-8GG-8FF#J-8EEL-8FF#J-8GGL-8EEJ-8C#L-8BB-8C#-8AAJ-4D;"                                           
&gt;    [217] "4BB-4CnX-4D-8EL-8F#J-4G-4C-4D-4GG;"                                                                              
&gt;    [218] "4B-8BL-[8cJ-8cL]-8dJ-8BL-8AJ-4A-4A-4A-4A;"                                                                       
&gt;    [219] "8BL-8AJ-8GL-8AJ-8BL-8cJ-4dnX-4d-4.d-8c-4B;"                                                                      
&gt;    [220] "8dL-8eJ-8f#L-8eJ-4d-4e-4f#-4B-8eL-8dJ-4c;"                                                                       
&gt;    [221] "8GnXL-8AJ-8BL-8cJ-8dL-8eJ-4c-4c#-4B-4B-4B;"                                                                      
&gt;    [222] "4d-4d-4g-8GL-8AJ-4B-8eL-8d-8e-8c#XJ-4d;"                                                                         
&gt;    [223] "[4d-8dL]-8cnXJ-8cL-8BJ-8BL-8AJ-[4G-8GL]-16F#L-16EJJ-8F#L-8cJ-4B;"                                                
&gt;    [224] "4d-4e-4f#-8dL-8eJ-4f#-8eL-8f#J-4g-4f#;"                                                                          
&gt;    [225] "4f#-4e-8dL-8eJ-4f#-[4g-4g]-4f#-4d;"                                                                              
&gt;    [226] "8f#L-8gJ-4.a-8g#-8aL-8g#J-4a-4a-4g#-4e;"                                                                         
&gt;    [227] "8eL-8d#J-4e-4e-8eL-8f#J-8gnXL-8f#J-8f#L-8gJ-4anX-4g;"                                                            
&gt;    [228] "4a-8gL-8aJ-4b-8bL-8aJ-8aL-8gJ-2g-4f#;"                                                                           
&gt;    [229] "8gL-8f#J-4e-4f#-8gL-8aJ-4d-4e-4d-4d;"                                                                            
&gt;    [230] "4g-4g-4a-8bL-8cc#J-4dd-4dd-4cc#-4dd;"                                                                            
&gt;    [231] "4b-4ccnX-4b-4a-4b-2a-4g;"                                                                                        
&gt;    [232] "4a-4a-4b-4cc-4cc-8bL-8aJ-4b-4a;"                                                                                 
&gt;    [233] "4b-4b-4b-8ccL-8ddJ-4ee-4ee-4dd#-4ee;"                                                                            
&gt;    [234] "4ff#-4gg-4b-4cc-4b-2a-4a;"                                                                                       
&gt;    [235] "4dd-4ee-4dd-4cc-8bL-8ccJ-2a-4g;"                                                                                 
&gt;    [236] "2D-4C-4BB-4AA-4BB-8CL-8BBJ-4AA-2E;"                                                                              
&gt;    [237] "2E-4A-8GL-8FJ-4E-4F-4C-4D-2E;"                                                                                   
&gt;    [238] "2c-4B-4A-4G-8FnXL-8EJ-4D-4E-2AA;"                                                                                
&gt;    [239] "2A-4E-8DL-8CJ-4BB-4C-4D-4D-2GG;"                                                                                 
&gt;    [240] "2C-4AA-4E-4F-4C-4BB--4AA-4GG#-4AA-2EE;"                                                                          
&gt;    [241] "2G#-4A-4d-4e-4d-8eL-8dJ-4c-2B;"                                                                                  
&gt;    [242] "2e-4e-4f-4g-4c-8cL-8BJ-4A-2G#;"                                                                                  
&gt;    [243] "2A-4B-4c-4d-8dL-8eJ-4f-4B-2c;"                                                                                   
&gt;    [244] "2e-4e-4e-4d-4c-8F#-4G-8F#-2G;"                                                                                   
&gt;    [245] "2G-4A-4G#-4A-4G-4G-4A-4B-4A-2G#X;"                                                                               
&gt;    [246] "2e-4e-4g#-4a-8gnXL-8f#J-4e-4f#-2g#;"                                                                             
&gt;    [247] "2g#-4a-4b-4cc-4f-4e-8dL-8cJ-2B;"                                                                                 
&gt;    [248] "2e-4d-8eL-8f#J-4g-4a-8bL-8aJ-4g#-2e;"                                                                            
&gt;    [249] "2a-4g-4g-8gL-8fJ-4e-4d-4c-2B;"                                                                                   
&gt;    [250] "2e-4e-8eL-8dJ-4c-4c-[2d-4d]-4c-2B;"                                                                              
&gt;    [251] "2b-4e-4b-4cc-8bL-8aJ-4g-4a-2b;"                                                                                  
&gt;    [252] "2b-4cc-4dd-8ccL-8bJ-4a-4g-4f-2e;"                                                                                
&gt;    [253] "2a-4gnX-4cc-4b-4a-8ddL-8ccJ-4b-2a;"                                                                              
&gt;    [254] "2cc-4b-4cc-4dd-4g-4b-4a-2g;"                                                                                     
&gt;    [255] "2g-4cc-4b-4a-4e-4g-4f-1e;"</code></pre>
<p>There is an issue here: the first fermata in the data doesn’t get
paired with anything, because there is no “previous close” before it.
This will happen whenever you use <code>nextopen</code> or
<code>prevclose</code>! You can fix this by explicitely adding an
opening window at <code>1</code>:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/withinHumdrum.html">with</a></span><span class="op">(</span><span class="va">chorales</span><span class="op">$</span><span class="va">Token</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">Token</span>, collapse <span class="op">=</span> <span class="st">'-'</span><span class="op">)</span>, <span class="fu"><a href="../reference/context.html">context</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">prevclose</span> <span class="op">+</span> <span class="fl">1</span>, <span class="st">';'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>&gt;      [1] "4GG-4G-4E-4F#-4G-4D-4E-4C-8BBL-8AAJ-4GG-2D;"                                                                     
&gt;      [2] "4GG-4FF#-4GG-4AA-4BB-4C-4D-2GG;"                                                                                 
&gt;      [3] "4GG-4GG-4AA-4BB-4.BB-8AA-4GG-2D;"                                                                                
&gt;      [4] "[4E-4E]-4D-4C-4.BB-8C-4D-8GGL-8AAJ-4BB-4GG-2C;"                                                                  
&gt;      [5] "4GG-4FF#-4GG-4AA-4BB-4GG-4D-8EL-8D-8C-8BB-8AA-8GGJ-2D;"                                                          
&gt;      [6] "[4G-4G]-4F#-[4E-8EL]-8DJ-4C-4D-2.GG;"                                                                            
&gt;      [7] "4B-4B-8cL-8BJ-4A-4G-4F#-4G-8cL-8BJ-4c-4d-2d;"                                                                    
&gt;      [8] "4d-4A-4B-4c-4d-4e-8dL-8cJ-2B;"                                                                                   
&gt;      [9] "4d-4d-4c-8BL-8AJ-8BL-8cJ-4d-4d-2d;"                                                                              
&gt;     [10] "4B-4G-4B-4e-2d-4d-2.d-2c;"                                                                                       
&gt;     [11] "4d-8dL-8cJ-4B-4c-2d-8dL-8cJ-4B-4c-4d-2d;"                                                                        
&gt;     [12] "4d-2d-4e-2e-8dL-8cJ-2.B;"                                                                                        
&gt;     [13] "4d-4d-4e-4d-2d-4B-8eL-8d-8e-8f#J-4g-2f#;"                                                                        
&gt;     [14] "4g-4d-4e-4f#-2g-4f#-2d;"                                                                                         
&gt;     [15] "[4g-8gL]-8f#J-8eL-8f#J-[4g-8gL]-8aJ-8gL-8f#J-4g-2f#;"                                                            
&gt;     [16] "4e-4e-8f#L-8gJ-4a-4a-4.g-8f#-2g-4f-2e;"                                                                          
&gt;     [17] "4g-4.a-8g-4f#-2g-[4f#-8f#L]-8eJ-8eL-8f#J-4g-2f#;"                                                                
&gt;     [18] "4g-2a-8gL-8f#J-2g-4f#-2.d;"                                                                                      
&gt;     [19] "4g-2g-4dd-4.b-8a-4g-4.g-8a-4b-2a;"                                                                               
&gt;     [20] "4b-2dd-4cc-4b-2a-2g;"                                                                                            
&gt;     [21] "4b-4b-4cc-4dd-4.dd-8cc-4b-2a;"                                                                                   
&gt;     [22] "4g-2b-4cc-2dd-4cc-2.b-2g;"                                                                                       
&gt;     [23] "4b-2dd-4cc-2b-4a-4.g-8a-4b-2a;"                                                                                  
&gt;     [24] "4b-2dd-4cc-4b-2a-2.g;"                                                                                           
&gt;     [25] "8AL-8G#J-4F#-4C#-4D-4D#-4E-4BB-4EE;"                                                                             
&gt;     [26] "4E-4A-4B-4c#-8BL-8AJ-4B-4BB-4E;"                                                                                 
&gt;     [27] "4C#-8F#L-8G#J-4A-4E-8C#L-8AAJ-4D-8C#L-8DJ-4E;"                                                                   
&gt;     [28] "4C#-4BB-4C#-8DL-8GJ-4F#-2.BB;"                                                                                   
&gt;     [29] "4C#-4F#-8EL-8DJ-4C#-4BB-8AAL-8BB-8C#-8DJ-4E;"                                                                    
&gt;     [30] "4BB-8F#L-8G#J-4A-8G#L-8EJ-[4A-8AL]-8G#J-4F#-8EL-8DJ-4E-2.AA;"                                                    
&gt;     [31] "4c#-4c#-8c#L-8BJ-8AL-8G#J-4F#-4.B-8A-4G#X;"                                                                      
&gt;     [32] "4e-4e-4d#-2c#-4.B-8A-4G#;"                                                                                       
&gt;     [33] "4G#-8AL-8BJ-8c#L-8dJ-4e-4e-4d-4e-4e;"                                                                            
&gt;     [34] "4e-8f#-4B-8A#-4B-4c#-2.d;"                                                                                       
&gt;     [35] "4G#-4A-8G#L-8F#J-8EL-8eJ-4d-8c#L-8d-8e-8f#J-4g#;"                                                                
&gt;     [36] "4f#-8f#L-8eJ-8dL-8c#J-4B-8c#L-8dJ-4.e-8d-8c#L-8f#J-8BL-16eL-16dJJ-2.c#;"                                         
&gt;     [37] "4e-4f#-4e-4f#-4f#-4e-4d#-4B;"                                                                                    
&gt;     [38] "4g#-4a-8g#L-8f#J-[2e-4e]-4d#-4B;"                                                                                
&gt;     [39] "8cc#L-8bJ-4a-4a-4g#-8aL-8gJ-8f#L-8g#XJ-4a-4g#;"                                                                  
&gt;     [40] "4a#-8bL-8aJ-4g-8f#L-8eJ-4f#-2.f#;"                                                                               
&gt;     [41] "8eL-8dJ-4c#-4d-4e-8f#L-8g#J-2a-4e;"                                                                              
&gt;     [42] "4b-8aL-8g#J-4f#-4e-8f#L-8g#J-2a-4a-4g#-2.e;"                                                                     
&gt;     [43] "4a-4a-4a-4a-4b-4g-4f#-4e;"                                                                                       
&gt;     [44] "4b-4cc#-4b-4a-8g#L-8f#J-4g#-4f#-4e;"                                                                             
&gt;     [45] "4ee-4dd-4cc#-4b-4a-8aL-8bJ-4cc#-4b;"                                                                             
&gt;     [46] "4cc#-4dd-4cc#-4b-4a#-2.b;"                                                                                       
&gt;     [47] "4e-4a-4b-4cc#-4dd-4ee-8ddL-8cc#J-4b;"                                                                            
&gt;     [48] "4dd-4cc#-4b-4.ee-8dd-8cc#L-8b-8a-8bJ-4cc#-4b-2.a;"                                                               
&gt;     [49] "4E-4A-4B-4c-8BL-8AJ-4G#-4A-4E;"                                                                                  
&gt;     [50] "4BB-8CL-8DJ-4E-4F-8EL-8DJ-2E-4AA;"                                                                               
&gt;     [51] "4F#-8GL-8F#J-4E-8BL-8AJ-8GL-8F#J-8EL-8DJ-4C-4BB;"                                                                
&gt;     [52] "4E-4F-8CL-8DJ-4E-8AAL-8BBJ-8CL-8DJ-4E-4AA;"                                                                      
&gt;     [53] "4A-4G#-8AL-8GJ-8FL-8EJ-8DL-8C#J-4D-4D#-4E;"                                                                      
&gt;     [54] "4e-4e-4d-4e-8dL-8cJ-4B-8cL-8dJ-4e;"                                                                              
&gt;     [55] "4f-4e-8eL-8dJ-4c-4d-8G#-4A-8G#-4c;"                                                                              
&gt;     [56] "4A-8GL-8AJ-4B-4B-8BL-8AJ-4B-4c-4F#;"                                                                             
&gt;     [57] "8eL-8dnJ-8cL-8dJ-4e-4e-8eL-8dJ-4c-4B-4c;"                                                                        
&gt;     [58] "4c-4B-4A-4A-4B--8AL-8EJ-4F#X-4G#;"                                                                               
&gt;     [59] "4g#-4a-4g#-4a-8g#L-8aJ-4b-8eL-8f#J-4g#;"                                                                         
&gt;     [60] "4g#-4a-4g#-8aL-8gJ-4f-2e-4e;"                                                                                    
&gt;     [61] "4d-8dL-8d#J-4e-4d#-8eL-8d#J-8eL-8gJ-8f#L-8eJ-4d#;"                                                               
&gt;     [62] "4B-4A-4a-4g#-4a-4e-4e-4e;"                                                                                       
&gt;     [63] "4e-4e-4e-4f-4g-8f#XL-8g#J-4a-4e;"                                                                                
&gt;     [64] "4b-4cc-4b-4a-4ee-8eeL-8ddJ-4cc-4b;"                                                                              
&gt;     [65] "4dd-4cc-4b-4a-8bL-16ccL-16ddJJ-4cc-4b-4a;"                                                                       
&gt;     [66] "4a-8bL-8aJ-4g-4f#-8eL-8f#J-4g-4a-4b;"                                                                            
&gt;     [67] "4g-8aL-8bJ-4cc-4b-8ccL-8bJ-4a-4g#-4a;"                                                                           
&gt;     [68] "4a-4ee-4cc-4dd-4ee-4dd-4cc-4b;"                                                                                  
&gt;     [69] "4E-4D#-4BB-4E-8F#L-8G#J-4A-4E-4AA;"                                                                              
&gt;     [70] "4D#-8EL-8F#J-4G#-4C#-8F#L-8EJ-8D#L-16C#L-16BBJJ-4F#-4BB;"                                                        
&gt;     [71] "4E-4C#-8D#L-8EJ-4F#-4B-8G#L-8EJ-4F#-4BB;"                                                                        
&gt;     [72] "4E-4G#-4E-8AnXL-8BJ-4c#-4E#-4F#-4C#;"                                                                            
&gt;     [73] "4E-4BB-8C#L-8D#J-4E-4BB-4AA#-4BB-4EE;"                                                                           
&gt;     [74] "4e-4f#-8eL-8d#J-4e-8AL-8BJ-16c#LL-16dJJ-4e-8d-4c#;"                                                              
&gt;     [75] "4B-4.B-8A-4G#-4F#-8F#-4B-8A#-4F#;"                                                                               
&gt;     [76] "4G#-4c#-4F#-4f#-4f#-4B-4A#-4d#;"                                                                                 
&gt;     [77] "4e-4B-4e-4e-4c#-4d-4c#-4c#;"                                                                                     
&gt;     [78] "[4B-4B]-4e-4e-8d#L-8BJ-2F#-4G#;"                                                                                 
&gt;     [79] "4g#-8f#L-8g#J-4a-4g#-4f#-8e-4a-8g#-4e;"                                                                          
&gt;     [80] "4f#-4e-8eL-8d#J-4e-4c#-8f#L-16eL-16d#JJ-4e-4d#;"                                                                 
&gt;     [81] "8eL-8f#J-8g#L-8a#J-4b-4a#-4b-4b-4f#-4f#;"                                                                        
&gt;     [82] "4g#-8eL-8f#J-4g#-4a-8eL-8f#J-4g#-4f#-4e#;"                                                                       
&gt;     [83] "4e-4d#-4c#-4B-4B-4c#-4B-4B;"                                                                                     
&gt;     [84] "4b-4b-4b-4b-4dd-4cc#-4b-4a;"                                                                                     
&gt;     [85] "4b-4g#-8eL-8f#J-4g#-4a#-4b-4cc#-4b;"                                                                             
&gt;     [86] "4b-4ee-4dd#-4cc#-4dd#-8eeL-8dd#J-4cc#-4b;"                                                                       
&gt;     [87] "4b-4ee-4b-4cc#-8g#L-8aJ-4b-4a-4g#;"                                                                              
&gt;     [88] "4g#-4f#-4a-4g#-4f#-4c#-4d#-4e;"                                                                                  
&gt;     [89] "4G-4C-4D-4E-8F#L-8GJ-4A-4D-4G;"                                                                                  
&gt;     [90] "4F#-8GL-8F#J-4E-4BB-4C-2D-4GG;"                                                                                  
&gt;     [91] "4G-4F#-8EL-8DJ-4E-4F#-4G-4D-4GG;"                                                                                
&gt;     [92] "4C-8GL-8FJ-8EL-8DJ-8CL-8BBJ-8CL-8DJ-4E-4AA-4D;"                                                                  
&gt;     [93] "8GL-8AJ-4B-4c-4F#-4G#-4A-4AA-4E;"                                                                                
&gt;     [94] "4GG#-8AAL-8BBJ-8CL-8AAJ-4F-8EL-8DJ-4E-4EE-4AA;"                                                                  
&gt;     [95] "4AA-8BBL-8C#J-2D-4C#-4D-4AA-4D;"                                                                                 
&gt;     [96] "4BB-4E-4D-8GL-8F#J-4E-8BBL-8AAJ-4GG-8CL-8BBJ-4AA-8DL-8CJ-4D-4GG;"                                                
&gt;     [97] "4B-8cL-8BJ-4A-4e-8AL-8BJ-8cL-8eJ-4d-4d;"                                                                         
&gt;     [98] "4d-4d-8GL-8AJ-8BL-8GJ-4e-8AL-8BJ-4c-4B;"                                                                         
&gt;     [99] "4B-4A-4d-4G-4A-8AL-8GJ-8GL-8F#J-4G;"                                                                             
&gt;    [100] "4G-4G-4G-4G-4G-8GL-16AL-16BJJ-4A-4A;"                                                                            
&gt;    [101] "4G-8GL-8dJ-8cL-8BJ-4A-4e-2e-4e;"                                                                                 
&gt;    [102] "8eL-8dJ-8cL-8BJ-[4A-8AL]-8G#J-8AL-8BJ-8G#-4A-8G#-4A;"                                                            
&gt;    [103] "8EL-8F#XJ-4GnX-8dL-8cJ-4B--4A-4A-4G-4F#X;"                                                                       
&gt;    [104] "4F#-4G-4d-4d-4e-2d-8eL-8dJ-4c-8dL-8eJ-8dL-8cJ-4B;"                                                               
&gt;    [105] "4g-4g-4f#-4g-4f#-8eL-8gJ-8gL-8f#J-4g;"                                                                           
&gt;    [106] "4a-4g-4g-4g-4g-4g-4f#-4d;"                                                                                       
&gt;    [107] "4d-8dL-8eJ-4f#-4e-8eL-8dJ-4d-4c-4B;"                                                                             
&gt;    [108] "4e-4d-4e-4f-8eL-8f#J-8gL-8f#J-8gL-8aJ-4f#;"                                                                      
&gt;    [109] "4d-4g-4g-4a-4b-8bL-8g#J-4a-4g#;"                                                                                 
&gt;    [110] "4b-4a-8eL-8cJ-8dL-8eJ-4f-4e-4d-4c;"                                                                              
&gt;    [111] "4a-8dL-8eJ-4f-8eL-8dJ-[4e-8eL]-8dJ-8dL-8c#J-4d;"                                                                 
&gt;    [112] "8dL-8cJ-8BL-8AJ-8GL-8F#J-4G-4g-4f#-4g-4g-[4g-4g]-4f#-4d;"                                                        
&gt;    [113] "4dd-4ee-8ddL-8ccJ-8bL-8ccJ-4dd-8ccL-8bJ-4cc-4b;"                                                                 
&gt;    [114] "4a-4b-4cc-4dd-8ccL-8bJ-8aL-8gJ-4a-4g;"                                                                           
&gt;    [115] "4g-4a-4b-8ccL-8bJ-4a-4b-4a-4g;"                                                                                  
&gt;    [116] "8gL-8aJ-4b-4cc-4dd-4ee-4b-4cc#-4dd;"                                                                             
&gt;    [117] "8bL-8ccJ-4dd-4ee-8ddL-8ccJ-4b-2cc-4b;"                                                                           
&gt;    [118] "4ee-4ee-4ee-4a-4dd-4cc-4b-4a;"                                                                                   
&gt;    [119] "4cc-4b-4a-4g-8aL-8gJ-4f-4e-4d;"                                                                                  
&gt;    [120] "4d-4g-4a-4.b-8cc-4dd-8ccL-8bJ-4a-8bL-8ccJ-2a-4g;"                                                                
&gt;    [121] "4FF-4F-4E-4E--4D-8CL-8D-8E-8CJ-4F;"                                                                              
&gt;    [122] "4BB--4AA-4GG-8FFL-8AAJ-4C-2FF;"                                                                                  
&gt;    [123] "4r-4A-4BB-4C-8DL-8FJ-8AL-8GJ-8FL-8DJ-4G-4C;"                                                                     
&gt;    [124] "4FF-4GG-4AA-4BB--4C-2.FF;"                                                                                       
&gt;    [125] "4A-4c-4c-4c-4d-4G-4c-4c;"                                                                                        
&gt;    [126] "4B--4c-8dL-8B-J-4c-4c-2c;"                                                                                       
&gt;    [127] "4ry-4f-4f-[4e-8eL]-8dJ-[4c-4c]-4B-4e;"                                                                           
&gt;    [128] "4c-4B-X-4c-4d-8.cL-16B-Jk-2.A;"                                                                                  
&gt;    [129] "4c-4f-4g-4f-4f-8eL-8f-8g-8eJ-4f;"                                                                                
&gt;    [130] "4f-4.f-8e-4.f-8e-2f;"                                                                                            
&gt;    [131] "4ry-[4a-8aL]-[8gJ-8gL]-16ccLL-16b-XJJ-4a-4a-4a-4g-4g;"                                                           
&gt;    [132] "[4f-8fL]-8eJ-4f-4f-4e-2.c;"                                                                                      
&gt;    [133] "4f-4a-4g-4a-4b--2cc-4a;"                                                                                         
&gt;    [134] "4dd-4cc-4b--4a-4g-2a;"                                                                                           
&gt;    [135] "4r-4cc-4dd-4ee-4ff-4ee-2dd-4cc;"                                                                                 
&gt;    [136] "4a-4b--4a-4g-4g-2.f;"                                                                                            
&gt;    [137] "4A-2F#-4C#-2D-4D-4C#-4D-4E-2AA;"                                                                                 
&gt;    [138] "4A-2E#-4C#-4F#-4EnX-4D-4C#-4D-4E-2AA;"                                                                           
&gt;    [139] "4AA-2D-4A-4G#-4F#-4E#X-4F#-4BB-4C#-2FF#;"                                                                        
&gt;    [140] "4D#-2E-4DnX-4C#-4AA-4BB-2E;"                                                                                     
&gt;    [141] "4C#-4F#-4E-4F#-4G#-4F#-4E-2A-4AA-2D;"                                                                            
&gt;    [142] "4C#-4BB-8BL-8A-8G-8F#J-8EL-8F#J-4G-4F#-2BB;"                                                                     
&gt;    [143] "4E-4A-4G#-4F#-4B-4A-4G-2.C#-2D;"                                                                                 
&gt;    [144] "4A-2D#-4E-4AA-2BB-2E;"                                                                                           
&gt;    [145] "4C#-2F#-4E-2BB-4C#-2DnX-4D#-2E;"                                                                                 
&gt;    [146] "4E#-4F#-4G#-4A-4E-4F#-4D-2E-4E-2AA;"                                                                             
&gt;    [147] "4c#-2c#-4c#-2A-4G#-2A-4G#-2A;"                                                                                   
&gt;    [148] "4c#-2c#-4B-2A-4e-4e-4f#-4e-2c#;"                                                                                 
&gt;    [149] "4c#-2d-4e-4e#-4f#-4g#-4c#-4d-4c#-2A;"                                                                            
&gt;    [150] "4A-4G#-4A-4B-2c#-8BL-8AJ-2G#;"                                                                                   
&gt;    [151] "4G#-2A-4d-2B-4e-2.e-2d;"                                                                                         
&gt;    [152] "4e-2f#-4B-4e-8dL-8c#J-8BL-8A#J-2B;"                                                                              
&gt;    [153] "4G#X-2A-4A-2B-4B-4B-4A-4G-2F#;"                                                                                  
&gt;    [154] "4A-2F#-4B-4c#-4B-4A-2G#;"                                                                                        
&gt;    [155] "4G#-2A-4B-4B-4A-4G#-4dnX-2A-2G#;"                                                                                
&gt;    [156] "4c#-4f#-4enX-4e-8eL-8dJ-4c#-4f#-2e-4d-2c#;"                                                                      
&gt;    [157] "4e-2f#-4e-4d-4c#-4B-4e-4f#-4e-2e;"                                                                               
&gt;    [158] "8eL-8f#J-2g#-4e#-2f#-4g#-2a-4g#-2e;"                                                                             
&gt;    [159] "4e-4f#-4g#-4a-4b-4a-4g#-2f#-4e#-2c#;"                                                                            
&gt;    [160] "4f#-2e-4e-2e-4d#-2B;"                                                                                            
&gt;    [161] "4c#-2c#-4f#-4e-4f#-4g#-2a-4g-2f#;"                                                                               
&gt;    [162] "4a-2b-8bL-8aJ-8gL-8aJ-4b-4e-2d#;"                                                                                
&gt;    [163] "4e-2e-4f#-2f#-4g-4g-4f#-4e-2d;"                                                                                  
&gt;    [164] "4e-2f#-4e-2e-4d#-2B;"                                                                                            
&gt;    [165] "4c#-4c#-4d#-4e-2d#-4e-4.f#-8g#-4a-2e;"                                                                           
&gt;    [166] "4g#-4a-4b-4a-4g#-2a-4a-2g#-2e;"                                                                                  
&gt;    [167] "4a-2a-4g#-2f#-4e-4a-2b-2cc#;"                                                                                    
&gt;    [168] "4cc#-4cc#-4b-4cc#-2cc#-4b-4a-2b-2a;"                                                                             
&gt;    [169] "4a-4a-4b-4cc#-2b-4cc#-4a-2g#-2f#;"                                                                               
&gt;    [170] "4b-4b-4a-4g#-4a-2f#-2e;"                                                                                         
&gt;    [171] "4e-2a-4a-2b-4b-4.cc#-8b-4cc#-2a;"                                                                                
&gt;    [172] "4a-2dd-4dd-4cc#-4b-4cc#-2b;"                                                                                     
&gt;    [173] "4b-2cc#-4cc#-2dd-4dd-2.ee-2a;"                                                                                   
&gt;    [174] "4cc#-4b-4a-4g#-4a-2f#-2e;"                                                                                       
&gt;    [175] "4e-2a-4g#-2f#-4e-4b-2cc#-2b;"                                                                                    
&gt;    [176] "4cc#-2dd-4cc#-4b-8aL-8g#-8a-8bJ-4cc#-2b-2a;"                                                                     
&gt;    [177] "4F-4E--4D--4C-4BB--4C-4FF-4FF;"                                                                                  
&gt;    [178] "4F-8E-L-8D-J-8CL-8BB-J-4AA--4D--4E--2AA-;"                                                                       
&gt;    [179] "4D--8CL-8BB-J-4C-4D--4BB--4C-2FF;"                                                                               
&gt;    [180] "8FL-8G-8A-8FJ-8BB-L-8C-8D--8BB-J-8E-L-8F-8G-8E-J-4A--4A-;"                                                       
&gt;    [181] "8D-L-8E--8F-8D-J-8BB-L-8C-8D--8BB-J-8E-L-8CJ-4F-2BB-;"                                                           
&gt;    [182] "4B--4A--4G-4F-4BB--4C-2FF;"                                                                                      
&gt;    [183] "8FFL-8GG-8AA--8BB-J-8CL-8D-8E--8FJ-4G-4GG-4C-4C;"                                                                
&gt;    [184] "8FL-8E--8D--8CJ-4BB--8CL-8D-J-4E--4E--4AA--4AA-;"                                                                
&gt;    [185] "8D-L-8E--8D--8CJ-8BB-L-8C-8D--8BB-J-8E-L-8F-8E--8D-J-8CL-8D--8E--8CJ-8FL-8E-8F-8GJ-8A-L-8G-8A--8B-J-4c-4C-4F-4F;"
&gt;    [186] "4A--4A-4B--4c-4d--8cL-8B-J-4A--4A-;"                                                                             
&gt;    [187] "4.c-8B--4e--4e--4f-8e-L-8d-XJ-2c;"                                                                               
&gt;    [188] "4d--4d--4G-8FL-8A-J-4d--8cL-8B-J-2A-;"                                                                           
&gt;    [189] "8AL-8B-J-8cL-8AJ-4B--4B--4B--4e--4e--4e-;"                                                                       
&gt;    [190] "4d--4d--4f-4f-4g--8fL-8e-J-2d-;"                                                                                 
&gt;    [191] "4c-4c-4B--4c-4d--8cL-8B-J-2A-;"                                                                                  
&gt;    [192] "4c-4c-4c-4c-4c-4B-4c-4G;"                                                                                        
&gt;    [193] "4A-4A-4B--4E--4.e--8d--4c-4c;"                                                                                   
&gt;    [194] "4d--4d--4f-4f-4e--4e--4g-4g-4f-4f-4c-4F-4c-4c-4c-4c;"                                                            
&gt;    [195] "4f-4f-8fL-8eJ-4f-8fL-8gJ-4e-4f-4c;"                                                                              
&gt;    [196] "4.f-8g-4a--4a--8a-L-8fJ-4g-2e-;"                                                                                 
&gt;    [197] "4f-4g-4e-4f-4f-4e-2c;"                                                                                           
&gt;    [198] "4f-4f-4f-4f-8gL-8a-XJ-8b-L-8gJ-4a--4a-;"                                                                         
&gt;    [199] "4f-4f-4b--4b--4b--4a-2f;"                                                                                        
&gt;    [200] "4e-4f-8fL-8eJ-4f-4f-4e-2c;"                                                                                      
&gt;    [201] "4a--4a--4g-4g-8gL-8a-J-8gL-8fJ-4e-4e;"                                                                           
&gt;    [202] "4f-4f-8fL-8gJ-4a--8a-L-8fJ-4g-4e--4e-;"                                                                          
&gt;    [203] "4f-4f-4b--4b--4g-4g-4cc-4cc-8a-L-8gJ-8a-L-8b-J-4cc-8b-L-8a-J-4g-4g-4a-4a;"                                       
&gt;    [204] "4cc-4cc-4b--4a--4.g-8f-4f-4f;"                                                                                   
&gt;    [205] "4.a--8b--4cc-4cc-4.b--8a--2a-;"                                                                                  
&gt;    [206] "4a--4b--4b--4a--4.g-8f-2f;"                                                                                      
&gt;    [207] "4cc-4cc-4dd--4dd--4b--4b--4cc-4cc;"                                                                              
&gt;    [208] "4a--4a--4dd--4dd--4cc-4cc-2b-;"                                                                                  
&gt;    [209] "4g-4a-X-4b--4a--4g-4g-2f;"                                                                                       
&gt;    [210] "4ff-4ff-4ee-X-4ee--4dd-4dd-4cc-4cc;"                                                                             
&gt;    [211] "4cc-4cc-4dd--4cc-4.b--8a--4a--4a-;"                                                                              
&gt;    [212] "4a--4a--4dd--4dd--4b--4b--4ee--4ee--4cc-4cc-4ff-4ff-4ee-4ee-4ff-4ff;"                                            
&gt;    [213] "8GL-8F#J-4E-4D-4G-8F#L-8GJ-4A-4AA-4D;"                                                                           
&gt;    [214] "4D#-8EL-8F#J-8GL-[8CJ-8CL]-8BBJ-8AAL-8GGJ-4D-4DD-4GG;"                                                           
&gt;    [215] "4D-8dL-8cJ-4B-4A-4D#-4E-4EE-4AA;"                                                                                
&gt;    [216] "8EL-8F#J-4G-4G#-4A-4A#-4B-4BB-4E;"                                                                               
&gt;    [217] "8DL-8CJ-8BBL-8AA-8GG-8FF#J-8EEL-8FF#J-8GGL-8EEJ-8C#L-8BB-8C#-8AAJ-4D;"                                           
&gt;    [218] "4BB-4CnX-4D-8EL-8F#J-4G-4C-4D-4GG;"                                                                              
&gt;    [219] "4B-8BL-[8cJ-8cL]-8dJ-8BL-8AJ-4A-4A-4A-4A;"                                                                       
&gt;    [220] "8BL-8AJ-8GL-8AJ-8BL-8cJ-4dnX-4d-4.d-8c-4B;"                                                                      
&gt;    [221] "8dL-8eJ-8f#L-8eJ-4d-4e-4f#-4B-8eL-8dJ-4c;"                                                                       
&gt;    [222] "8GnXL-8AJ-8BL-8cJ-8dL-8eJ-4c-4c#-4B-4B-4B;"                                                                      
&gt;    [223] "4d-4d-4g-8GL-8AJ-4B-8eL-8d-8e-8c#XJ-4d;"                                                                         
&gt;    [224] "[4d-8dL]-8cnXJ-8cL-8BJ-8BL-8AJ-[4G-8GL]-16F#L-16EJJ-8F#L-8cJ-4B;"                                                
&gt;    [225] "4d-4e-4f#-8dL-8eJ-4f#-8eL-8f#J-4g-4f#;"                                                                          
&gt;    [226] "4f#-4e-8dL-8eJ-4f#-[4g-4g]-4f#-4d;"                                                                              
&gt;    [227] "8f#L-8gJ-4.a-8g#-8aL-8g#J-4a-4a-4g#-4e;"                                                                         
&gt;    [228] "8eL-8d#J-4e-4e-8eL-8f#J-8gnXL-8f#J-8f#L-8gJ-4anX-4g;"                                                            
&gt;    [229] "4a-8gL-8aJ-4b-8bL-8aJ-8aL-8gJ-2g-4f#;"                                                                           
&gt;    [230] "8gL-8f#J-4e-4f#-8gL-8aJ-4d-4e-4d-4d;"                                                                            
&gt;    [231] "4g-4g-4a-8bL-8cc#J-4dd-4dd-4cc#-4dd;"                                                                            
&gt;    [232] "4b-4ccnX-4b-4a-4b-2a-4g;"                                                                                        
&gt;    [233] "4a-4a-4b-4cc-4cc-8bL-8aJ-4b-4a;"                                                                                 
&gt;    [234] "4b-4b-4b-8ccL-8ddJ-4ee-4ee-4dd#-4ee;"                                                                            
&gt;    [235] "4ff#-4gg-4b-4cc-4b-2a-4a;"                                                                                       
&gt;    [236] "4dd-4ee-4dd-4cc-8bL-8ccJ-2a-4g;"                                                                                 
&gt;    [237] "2D-4C-4BB-4AA-4BB-8CL-8BBJ-4AA-2E;"                                                                              
&gt;    [238] "2E-4A-8GL-8FJ-4E-4F-4C-4D-2E;"                                                                                   
&gt;    [239] "2c-4B-4A-4G-8FnXL-8EJ-4D-4E-2AA;"                                                                                
&gt;    [240] "2A-4E-8DL-8CJ-4BB-4C-4D-4D-2GG;"                                                                                 
&gt;    [241] "2C-4AA-4E-4F-4C-4BB--4AA-4GG#-4AA-2EE;"                                                                          
&gt;    [242] "2G#-4A-4d-4e-4d-8eL-8dJ-4c-2B;"                                                                                  
&gt;    [243] "2e-4e-4f-4g-4c-8cL-8BJ-4A-2G#;"                                                                                  
&gt;    [244] "2A-4B-4c-4d-8dL-8eJ-4f-4B-2c;"                                                                                   
&gt;    [245] "2e-4e-4e-4d-4c-8F#-4G-8F#-2G;"                                                                                   
&gt;    [246] "2G-4A-4G#-4A-4G-4G-4A-4B-4A-2G#X;"                                                                               
&gt;    [247] "2e-4e-4g#-4a-8gnXL-8f#J-4e-4f#-2g#;"                                                                             
&gt;    [248] "2g#-4a-4b-4cc-4f-4e-8dL-8cJ-2B;"                                                                                 
&gt;    [249] "2e-4d-8eL-8f#J-4g-4a-8bL-8aJ-4g#-2e;"                                                                            
&gt;    [250] "2a-4g-4g-8gL-8fJ-4e-4d-4c-2B;"                                                                                   
&gt;    [251] "2e-4e-8eL-8dJ-4c-4c-[2d-4d]-4c-2B;"                                                                              
&gt;    [252] "2b-4e-4b-4cc-8bL-8aJ-4g-4a-2b;"                                                                                  
&gt;    [253] "2b-4cc-4dd-8ccL-8bJ-4a-4g-4f-2e;"                                                                                
&gt;    [254] "2a-4gnX-4cc-4b-4a-8ddL-8ccJ-4b-2a;"                                                                              
&gt;    [255] "2cc-4b-4cc-4dd-4g-4b-4a-2g;"                                                                                     
&gt;    [256] "2g-4cc-4b-4a-4e-4g-4f-1e;"</code></pre>
<p>By using the <code>|</code> (or) command in <code><a href="../reference/context.html">context()</a></code>,
we are saying open a window at <code>1</code> <em>or</em> at
<code>prevclose + 1</code>. When working with <code>nextopen</code> you
might want to use the special <code>end</code> argument (only available
inside <code><a href="../reference/context.html">context()</a></code>), which is the last index in the input
vector.0</p>
</div>
<div class="section level4">
<h4 id="semi-fixed-windows">Semi-fixed windows<a class="anchor" aria-label="anchor" href="#semi-fixed-windows"></a>
</h4>
<p>In some cases, you might want to have windows open (or close) at a
fixed interval, but close based on something irregular. We can do this
easily by combining what we’ve already learned. For example, we could
open a window on every third index, but close only when we see a
fermata. We’ll want to use <code>overlap = 'edge'</code> again.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="fu">within</span>(chorales<span class="sc">$</span>Token, <span class="fu">paste</span>(Token, <span class="at">collapse =</span> <span class="st">'-'</span>), <span class="fu">context</span>(<span class="fu">hop</span>(<span class="dv">4</span>), <span class="st">';'</span>, <span class="at">overlap =</span> <span class="st">'edge'</span>))</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############# vvv chor001.krn vvv ##############</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of M<span class="sc">**</span><span class="er">*</span></span>
<span id="cb31-7"><a href="#cb31-7" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb31-8"><a href="#cb31-8" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb31-9"><a href="#cb31-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb31-10"><a href="#cb31-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>                            <span class="er">**</span>kern    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb31-11"><a href="#cb31-11" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>                            <span class="er">*</span>ICvox    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb31-12"><a href="#cb31-12" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>                            <span class="er">*</span>Ibass    <span class="sc">**</span><span class="er">*</span></span>
<span id="cb31-13"><a href="#cb31-13" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>                           <span class="er">*</span>I<span class="st">"Bass    ***</span></span>
<span id="cb31-14"><a href="#cb31-14" tabindex="-1"></a><span class="st">&gt;        12:                         *&gt;[A,A,B]    ***</span></span>
<span id="cb31-15"><a href="#cb31-15" tabindex="-1"></a><span class="st">&gt;        13:                      *&gt;norep[A,B]    ***</span></span>
<span id="cb31-16"><a href="#cb31-16" tabindex="-1"></a><span class="st">&gt;        14:                               *&gt;A    ***</span></span>
<span id="cb31-17"><a href="#cb31-17" tabindex="-1"></a><span class="st">&gt;        15:                           *clefF4    ***</span></span>
<span id="cb31-18"><a href="#cb31-18" tabindex="-1"></a><span class="st">&gt;        16:                            *k[f#]    ***</span></span>
<span id="cb31-19"><a href="#cb31-19" tabindex="-1"></a><span class="st">&gt;        17:                               *G:    ***</span></span>
<span id="cb31-20"><a href="#cb31-20" tabindex="-1"></a><span class="st">&gt;        18:                             *M3/4    ***</span></span>
<span id="cb31-21"><a href="#cb31-21" tabindex="-1"></a><span class="st">&gt;        19:                            *MM100    ***</span></span>
<span id="cb31-22"><a href="#cb31-22" tabindex="-1"></a><span class="st">&gt;        20:    4GG-4G-4E-4F#-4G-4D-4E-4C-8...    ***</span></span>
<span id="cb31-23"><a href="#cb31-23" tabindex="-1"></a><span class="st">&gt;        21:                                =1    ***</span></span>
<span id="cb31-24"><a href="#cb31-24" tabindex="-1"></a><span class="st">&gt;        22:                                 .    ***</span></span>
<span id="cb31-25"><a href="#cb31-25" tabindex="-1"></a><span class="st">&gt;        23:                                 .    ***</span></span>
<span id="cb31-26"><a href="#cb31-26" tabindex="-1"></a><span class="st">&gt;        24:                                 .    ***</span></span>
<span id="cb31-27"><a href="#cb31-27" tabindex="-1"></a><span class="st">&gt;        25:                                 .    ***</span></span>
<span id="cb31-28"><a href="#cb31-28" tabindex="-1"></a><span class="st">&gt;        26:                                =2    ***</span></span>
<span id="cb31-29"><a href="#cb31-29" tabindex="-1"></a><span class="st">&gt;        27:     4G-4D-4E-4C-8BBL-8AAJ-4GG-2D;    ***</span></span>
<span id="cb31-30"><a href="#cb31-30" tabindex="-1"></a><span class="st">&gt;        28:                                 .    ***</span></span>
<span id="cb31-31"><a href="#cb31-31" tabindex="-1"></a><span class="st">&gt;        29:                                 .    ***</span></span>
<span id="cb31-32"><a href="#cb31-32" tabindex="-1"></a><span class="st">&gt;        30:                                 .    ***</span></span>
<span id="cb31-33"><a href="#cb31-33" tabindex="-1"></a><span class="st">&gt;        31:                                =3    ***</span></span>
<span id="cb31-34"><a href="#cb31-34" tabindex="-1"></a><span class="st">&gt;        32:                                 .    ***</span></span>
<span id="cb31-35"><a href="#cb31-35" tabindex="-1"></a><span class="st">&gt;        33:                                 .    ***</span></span>
<span id="cb31-36"><a href="#cb31-36" tabindex="-1"></a><span class="st">&gt;        34:                 8BBL-8AAJ-4GG-2D;    ***</span></span>
<span id="cb31-37"><a href="#cb31-37" tabindex="-1"></a><span class="st">&gt;        35:                                 .    ***</span></span>
<span id="cb31-38"><a href="#cb31-38" tabindex="-1"></a><span class="st">&gt;        36:                                 .    ***</span></span>
<span id="cb31-39"><a href="#cb31-39" tabindex="-1"></a><span class="st">&gt;        37:                                =4    ***</span></span>
<span id="cb31-40"><a href="#cb31-40" tabindex="-1"></a><span class="st">&gt;        38:                                 .    ***</span></span>
<span id="cb31-41"><a href="#cb31-41" tabindex="-1"></a><span class="st">&gt;        39:    4GG-4FF#-4GG-4AA-4BB-4C-4D-...    ***</span></span>
<span id="cb31-42"><a href="#cb31-42" tabindex="-1"></a><span class="st">&gt;        40:                                =5    ***</span></span>
<span id="cb31-43"><a href="#cb31-43" tabindex="-1"></a><span class="st">&gt;    41-133::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb31-44"><a href="#cb31-44" tabindex="-1"></a><span class="st">&gt;    ############# ^^^ chor001.krn ^^^ ##############</span></span>
<span id="cb31-45"><a href="#cb31-45" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb31-46"><a href="#cb31-46" tabindex="-1"></a><span class="st">&gt;           (8 more pieces...)</span></span>
<span id="cb31-47"><a href="#cb31-47" tabindex="-1"></a><span class="st">&gt;    </span></span>
<span id="cb31-48"><a href="#cb31-48" tabindex="-1"></a><span class="st">&gt;    ############# vvv chor010.krn vvv ##############</span></span>
<span id="cb31-49"><a href="#cb31-49" tabindex="-1"></a><span class="st">&gt;      1-60::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb31-50"><a href="#cb31-50" tabindex="-1"></a><span class="st">&gt;        61:                                 .    ***</span></span>
<span id="cb31-51"><a href="#cb31-51" tabindex="-1"></a><span class="st">&gt;        62:                                 .    ***</span></span>
<span id="cb31-52"><a href="#cb31-52" tabindex="-1"></a><span class="st">&gt;        63:                                =9    ***</span></span>
<span id="cb31-53"><a href="#cb31-53" tabindex="-1"></a><span class="st">&gt;        64:      4E-8DL-8CJ-4BB-4C-4D-4D-2GG;    ***</span></span>
<span id="cb31-54"><a href="#cb31-54" tabindex="-1"></a><span class="st">&gt;        65:                                 .    ***</span></span>
<span id="cb31-55"><a href="#cb31-55" tabindex="-1"></a><span class="st">&gt;        66:                                 .    ***</span></span>
<span id="cb31-56"><a href="#cb31-56" tabindex="-1"></a><span class="st">&gt;        67:                                 .    ***</span></span>
<span id="cb31-57"><a href="#cb31-57" tabindex="-1"></a><span class="st">&gt;        68:                                 .    ***</span></span>
<span id="cb31-58"><a href="#cb31-58" tabindex="-1"></a><span class="st">&gt;        69:                     4C-4D-4D-2GG;    ***</span></span>
<span id="cb31-59"><a href="#cb31-59" tabindex="-1"></a><span class="st">&gt;        70:                               =10    ***</span></span>
<span id="cb31-60"><a href="#cb31-60" tabindex="-1"></a><span class="st">&gt;        71:                                 .    ***</span></span>
<span id="cb31-61"><a href="#cb31-61" tabindex="-1"></a><span class="st">&gt;        72:                                 .    ***</span></span>
<span id="cb31-62"><a href="#cb31-62" tabindex="-1"></a><span class="st">&gt;        73:                                 .    ***</span></span>
<span id="cb31-63"><a href="#cb31-63" tabindex="-1"></a><span class="st">&gt;        74:                                 .    ***</span></span>
<span id="cb31-64"><a href="#cb31-64" tabindex="-1"></a><span class="st">&gt;        75:                                 .    ***</span></span>
<span id="cb31-65"><a href="#cb31-65" tabindex="-1"></a><span class="st">&gt;        76:                               =11    ***</span></span>
<span id="cb31-66"><a href="#cb31-66" tabindex="-1"></a><span class="st">&gt;        77:    2C-4AA-4E-4F-4C-4BB--4AA-4G...    ***</span></span>
<span id="cb31-67"><a href="#cb31-67" tabindex="-1"></a><span class="st">&gt;        78:                                 .    ***</span></span>
<span id="cb31-68"><a href="#cb31-68" tabindex="-1"></a><span class="st">&gt;        79:                                 .    ***</span></span>
<span id="cb31-69"><a href="#cb31-69" tabindex="-1"></a><span class="st">&gt;        80:                                 .    ***</span></span>
<span id="cb31-70"><a href="#cb31-70" tabindex="-1"></a><span class="st">&gt;        81:                               =12    ***</span></span>
<span id="cb31-71"><a href="#cb31-71" tabindex="-1"></a><span class="st">&gt;        82:                                 .    ***</span></span>
<span id="cb31-72"><a href="#cb31-72" tabindex="-1"></a><span class="st">&gt;        83:         4C-4BB--4AA-4GG#-4AA-2EE;    ***</span></span>
<span id="cb31-73"><a href="#cb31-73" tabindex="-1"></a><span class="st">&gt;        84:                                 .    ***</span></span>
<span id="cb31-74"><a href="#cb31-74" tabindex="-1"></a><span class="st">&gt;        85:                                 .    ***</span></span>
<span id="cb31-75"><a href="#cb31-75" tabindex="-1"></a><span class="st">&gt;        86:                               =13    ***</span></span>
<span id="cb31-76"><a href="#cb31-76" tabindex="-1"></a><span class="st">&gt;        87:                                 .    ***</span></span>
<span id="cb31-77"><a href="#cb31-77" tabindex="-1"></a><span class="st">&gt;        88:                          4AA-2EE;    ***</span></span>
<span id="cb31-78"><a href="#cb31-78" tabindex="-1"></a><span class="st">&gt;        89:                                 .    ***</span></span>
<span id="cb31-79"><a href="#cb31-79" tabindex="-1"></a><span class="st">&gt;        90:                                ==    ***</span></span>
<span id="cb31-80"><a href="#cb31-80" tabindex="-1"></a><span class="st">&gt;        91:                                *-    ***</span></span>
<span id="cb31-81"><a href="#cb31-81" tabindex="-1"></a><span class="st">&gt;        92:  !!!hum2abc: -Q ''</span></span>
<span id="cb31-82"><a href="#cb31-82" tabindex="-1"></a><span class="st">&gt;        93:  !!!title: @{PC#}. @{OTL@@DE}</span></span>
<span id="cb31-83"><a href="#cb31-83" tabindex="-1"></a><span class="st">&gt;        94:  !!!YOR1: 371 vierstimmige Choralges&amp;***</span></span>
<span id="cb31-84"><a href="#cb31-84" tabindex="-1"></a><span class="st">&gt;        95:  !!!YOR2: 4th ed. by Alfred D&amp;ouml;rf***</span></span>
<span id="cb31-85"><a href="#cb31-85" tabindex="-1"></a><span class="st">&gt;        96:  !!!YOR2: c.1875). 178 pp. Plate "</span>V.A<span class="sc">**</span><span class="er">*</span></span>
<span id="cb31-86"><a href="#cb31-86" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">97</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR4<span class="sc">:</span> <span class="fu">Chorales</span> (New York<span class="sc">:</span> Associa<span class="sc">**</span><span class="er">*</span></span>
<span id="cb31-87"><a href="#cb31-87" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">98</span><span class="sc">:</span>  <span class="sc">!!!</span>SMS<span class="sc">:</span> B<span class="sc">&amp;</span>H, 4th ed, Alfred D<span class="sc">&amp;</span>ouml;r<span class="sc">**</span><span class="er">*</span></span>
<span id="cb31-88"><a href="#cb31-88" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">99</span><span class="sc">:</span>  <span class="sc">!!!</span>EED<span class="sc">:</span>  Craig Stuart Sapp</span>
<span id="cb31-89"><a href="#cb31-89" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">100</span><span class="sc">:</span>  <span class="sc">!!!</span>EEV<span class="sc">:</span>  <span class="dv">2009</span><span class="sc">/</span><span class="dv">05</span><span class="sc">/</span><span class="dv">22</span></span>
<span id="cb31-90"><a href="#cb31-90" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############# ^^^ chor010.krn ^^^ ##############</span></span>
<span id="cb31-91"><a href="#cb31-91" tabindex="-1"></a><span class="er">&gt;</span>                               (<span class="sc">**</span><span class="er">*</span>three spines<span class="sc">/</span>paths</span>
<span id="cb31-92"><a href="#cb31-92" tabindex="-1"></a><span class="sc">&gt;</span>                 not displayed due to screen size<span class="sc">**</span><span class="er">*</span>)</span>
<span id="cb31-93"><a href="#cb31-93" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb31-94"><a href="#cb31-94" tabindex="-1"></a><span class="er">&gt;</span>       humdrumR corpus of ten pieces.</span>
<span id="cb31-95"><a href="#cb31-95" tabindex="-1"></a><span class="sc">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb31-96"><a href="#cb31-96" tabindex="-1"></a><span class="er">&gt;</span>                Token    <span class="sc">::</span> character</span>
<span id="cb31-97"><a href="#cb31-97" tabindex="-1"></a><span class="sc">&gt;</span>                Semits   <span class="sc">::</span> <span class="fu">integer</span> (<span class="sc">**</span>semits tokens)</span>
<span id="cb31-98"><a href="#cb31-98" tabindex="-1"></a><span class="sc">&gt;</span>                Kern     <span class="sc">::</span> <span class="fu">character</span> (<span class="sc">**</span>kern tokens)</span>
<span id="cb31-99"><a href="#cb31-99" tabindex="-1"></a><span class="sc">&gt;</span>                Lowest   <span class="sc">::</span> <span class="fu">integer</span> (<span class="sc">**</span>semits tokens)</span>
<span id="cb31-100"><a href="#cb31-100" tabindex="-1"></a><span class="sc">&gt;</span>                Beat     <span class="sc">::</span> integer</span>
<span id="cb31-101"><a href="#cb31-101" tabindex="-1"></a><span class="sc">&gt;</span>                Solfa    <span class="sc">::</span> <span class="fu">character</span> (<span class="sc">**</span>solfa tokens)</span>
<span id="cb31-102"><a href="#cb31-102" tabindex="-1"></a><span class="sc">&gt;</span>                Duration <span class="sc">::</span> <span class="fu">numeric</span> (<span class="sc">**</span>duration tokens)</span>
<span id="cb31-103"><a href="#cb31-103" tabindex="-1"></a><span class="sc">&gt;</span>               <span class="er">*</span>Result1  <span class="sc">::</span> character</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="slurs">Slurs<a class="anchor" aria-label="anchor" href="#slurs"></a>
</h4>
<p>A common case of contextual information in musical scores are slurs,
which are used in to indicate articulation (e.g., bowing) and phrasing
information. In <code>**kern</code>, slurs are indicated with
parentheses, like <code>(</code> or <code>)</code>. To see some
examples, let’s load our built-in Beethoven variation dataset and remove
multi-stops (which would make this much more complicated).</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>beethoven <span class="ot">&lt;-</span> <span class="fu">readHumdrum</span>(humdrumRroot, <span class="st">'HumdrumData/BeethovenVariations/.*krn'</span>)</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a>beethoven <span class="ot">&lt;-</span> <span class="fu">subset</span>(beethoven, Exclusive <span class="sc">==</span> <span class="st">'kern'</span> <span class="sc">&amp;</span> Stop <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> <span class="fu">removeEmptySpines</span>() <span class="sc">|&gt;</span> <span class="fu">removeEmptyStops</span>()</span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a>beethoven</span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############ vvv B075_00_01_a.krn vvv #############</span></span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Beethoven</span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">:</span> <span class="dv">7</span> Variations on a Quartet by Winter</span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>Variation<span class="sc">:</span> Theme a</span>
<span id="cb32-9"><a href="#cb32-9" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">4</span><span class="sc">:</span>     <span class="er">**</span>kern     <span class="sc">**</span>kern</span>
<span id="cb32-10"><a href="#cb32-10" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">5</span><span class="sc">:</span>    <span class="er">*</span>clefG2    <span class="sc">*</span>clefG2</span>
<span id="cb32-11"><a href="#cb32-11" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">6</span><span class="sc">:</span>     <span class="er">*</span>k[b<span class="sc">-</span>]     <span class="sc">*</span>k[b<span class="sc">-</span>]</span>
<span id="cb32-12"><a href="#cb32-12" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">7</span><span class="sc">:</span>      <span class="er">*</span>M2<span class="sc">/</span><span class="dv">4</span>      <span class="sc">*</span>M2<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb32-13"><a href="#cb32-13" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">8</span><span class="sc">:</span>        <span class="er">*</span>F<span class="sc">:</span>        <span class="er">*</span>F<span class="sc">:</span></span>
<span id="cb32-14"><a href="#cb32-14" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">9</span><span class="sc">:</span>         4r        4aa</span>
<span id="cb32-15"><a href="#cb32-15" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">10</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">1</span>         <span class="ot">=</span><span class="dv">1</span></span>
<span id="cb32-16"><a href="#cb32-16" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">11</span><span class="sc">:</span>         2f      8ff<span class="st">'L</span></span>
<span id="cb32-17"><a href="#cb32-17" tabindex="-1"></a><span class="st">&gt;       12:          .      8cc'</span>J</span>
<span id="cb32-18"><a href="#cb32-18" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">13</span><span class="sc">:</span>          .      8ff<span class="st">'L</span></span>
<span id="cb32-19"><a href="#cb32-19" tabindex="-1"></a><span class="st">&gt;       14:          .      8aa'</span>J</span>
<span id="cb32-20"><a href="#cb32-20" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">15</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">2</span>         <span class="ot">=</span><span class="dv">2</span></span>
<span id="cb32-21"><a href="#cb32-21" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">16</span><span class="sc">:</span>        (4c       (4gg</span>
<span id="cb32-22"><a href="#cb32-22" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">17</span><span class="sc">:</span>        4f)       4ff)</span>
<span id="cb32-23"><a href="#cb32-23" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">18</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">3</span>         <span class="ot">=</span><span class="dv">3</span></span>
<span id="cb32-24"><a href="#cb32-24" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">19</span><span class="sc">:</span>         4c      8ee<span class="st">'L</span></span>
<span id="cb32-25"><a href="#cb32-25" tabindex="-1"></a><span class="st">&gt;       20:          .      8dd'</span>J</span>
<span id="cb32-26"><a href="#cb32-26" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">21</span><span class="sc">:</span>         4c      8cc<span class="st">'L</span></span>
<span id="cb32-27"><a href="#cb32-27" tabindex="-1"></a><span class="st">&gt;       22:          .      8dd'</span>J</span>
<span id="cb32-28"><a href="#cb32-28" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">23</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">4</span>         <span class="ot">=</span><span class="dv">4</span></span>
<span id="cb32-29"><a href="#cb32-29" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">24</span><span class="sc">:</span>         8c        8ee</span>
<span id="cb32-30"><a href="#cb32-30" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">25</span><span class="sc">:</span>         8r         8r</span>
<span id="cb32-31"><a href="#cb32-31" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">26</span><span class="sc">:</span>         4r        4aa</span>
<span id="cb32-32"><a href="#cb32-32" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">27</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">5</span>         <span class="ot">=</span><span class="dv">5</span></span>
<span id="cb32-33"><a href="#cb32-33" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">28</span><span class="sc">:</span>         2f      8ff<span class="st">'L</span></span>
<span id="cb32-34"><a href="#cb32-34" tabindex="-1"></a><span class="st">&gt;       29:          .      8cc'</span>J</span>
<span id="cb32-35"><a href="#cb32-35" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">30</span><span class="sc">:</span>          .      8ff<span class="st">'L</span></span>
<span id="cb32-36"><a href="#cb32-36" tabindex="-1"></a><span class="st">&gt;       31:          .      8aa'</span>J</span>
<span id="cb32-37"><a href="#cb32-37" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">32</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">6</span>         <span class="ot">=</span><span class="dv">6</span></span>
<span id="cb32-38"><a href="#cb32-38" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">33</span><span class="sc">:</span>        (4c       (4gg</span>
<span id="cb32-39"><a href="#cb32-39" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">34</span><span class="sc">:</span>        4f)       4ff)</span>
<span id="cb32-40"><a href="#cb32-40" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">35</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">7</span>         <span class="ot">=</span><span class="dv">7</span></span>
<span id="cb32-41"><a href="#cb32-41" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">36</span><span class="sc">:</span>       8B<span class="sc">-</span>L       8ddL</span>
<span id="cb32-42"><a href="#cb32-42" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">37</span><span class="sc">:</span>       8B<span class="sc">-</span>J       8ddJ</span>
<span id="cb32-43"><a href="#cb32-43" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">38</span><span class="sc">:</span>        8cL      (8b<span class="sc">-</span>L</span>
<span id="cb32-44"><a href="#cb32-44" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">39</span><span class="sc">:</span>        8cJ      16b<span class="sc">-</span>L</span>
<span id="cb32-45"><a href="#cb32-45" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">40</span><span class="sc">:</span>          .    16eeJJ)</span>
<span id="cb32-46"><a href="#cb32-46" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="dv">41-45</span><span class="sc">:::</span><span class="er">:::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb32-47"><a href="#cb32-47" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############ ^^^ B075_00_01_a.krn ^^^ #############</span></span>
<span id="cb32-48"><a href="#cb32-48" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb32-49"><a href="#cb32-49" tabindex="-1"></a><span class="er">&gt;</span>           (<span class="dv">10</span> more pieces...)</span>
<span id="cb32-50"><a href="#cb32-50" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb32-51"><a href="#cb32-51" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############ vvv B075_01_06_a.krn vvv #############</span></span>
<span id="cb32-52"><a href="#cb32-52" tabindex="-1"></a><span class="er">&gt;</span>     <span class="dv">1-46</span><span class="sc">:::</span><span class="er">:::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb32-53"><a href="#cb32-53" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">47</span><span class="sc">:</span>         8c        16r</span>
<span id="cb32-54"><a href="#cb32-54" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">48</span><span class="sc">:</span>          .     (16bLL</span>
<span id="cb32-55"><a href="#cb32-55" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">49</span><span class="sc">:</span>         8r       16dd</span>
<span id="cb32-56"><a href="#cb32-56" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">50</span><span class="sc">:</span>          .    16ccJJ)</span>
<span id="cb32-57"><a href="#cb32-57" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">51</span><span class="sc">:</span>         8c        16r</span>
<span id="cb32-58"><a href="#cb32-58" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">52</span><span class="sc">:</span>          .   (16dd<span class="co">#LL</span></span>
<span id="cb32-59"><a href="#cb32-59" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">53</span><span class="sc">:</span>         8r       16ff</span>
<span id="cb32-60"><a href="#cb32-60" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">54</span><span class="sc">:</span>          .    16eeJJ)</span>
<span id="cb32-61"><a href="#cb32-61" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">55</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">95</span>        <span class="ot">=</span><span class="dv">95</span></span>
<span id="cb32-62"><a href="#cb32-62" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">56</span><span class="sc">:</span>         8f        16r</span>
<span id="cb32-63"><a href="#cb32-63" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">57</span><span class="sc">:</span>          .    (16eeLL</span>
<span id="cb32-64"><a href="#cb32-64" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">58</span><span class="sc">:</span>         8r       16gg</span>
<span id="cb32-65"><a href="#cb32-65" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">59</span><span class="sc">:</span>          .    16ffJJ)</span>
<span id="cb32-66"><a href="#cb32-66" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">60</span><span class="sc">:</span>         8d        16r</span>
<span id="cb32-67"><a href="#cb32-67" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">61</span><span class="sc">:</span>          .    16gg<span class="co">#LL</span></span>
<span id="cb32-68"><a href="#cb32-68" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">62</span><span class="sc">:</span>         8r       16aa</span>
<span id="cb32-69"><a href="#cb32-69" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">63</span><span class="sc">:</span>          .     16ffJJ</span>
<span id="cb32-70"><a href="#cb32-70" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">64</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">96</span>        <span class="ot">=</span><span class="dv">96</span></span>
<span id="cb32-71"><a href="#cb32-71" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">65</span><span class="sc">:</span>        8B<span class="sc">-</span>        16r</span>
<span id="cb32-72"><a href="#cb32-72" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">66</span><span class="sc">:</span>          .  (16ccc<span class="co">#LL</span></span>
<span id="cb32-73"><a href="#cb32-73" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">67</span><span class="sc">:</span>         8r      16ddd</span>
<span id="cb32-74"><a href="#cb32-74" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">68</span><span class="sc">:</span>          .    16ggJJ)</span>
<span id="cb32-75"><a href="#cb32-75" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">69</span><span class="sc">:</span>         8c        16r</span>
<span id="cb32-76"><a href="#cb32-76" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">70</span><span class="sc">:</span>          .    (16aaLL</span>
<span id="cb32-77"><a href="#cb32-77" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">71</span><span class="sc">:</span>         8r      16bb<span class="sc">-</span></span>
<span id="cb32-78"><a href="#cb32-78" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">72</span><span class="sc">:</span>          .    16eeJJ)</span>
<span id="cb32-79"><a href="#cb32-79" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">73</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">97</span>        <span class="ot">=</span><span class="dv">97</span></span>
<span id="cb32-80"><a href="#cb32-80" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">74</span><span class="sc">:</span>         8f        16r</span>
<span id="cb32-81"><a href="#cb32-81" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">75</span><span class="sc">:</span>          .    (16eeLL</span>
<span id="cb32-82"><a href="#cb32-82" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">76</span><span class="sc">:</span>         8r       16ff</span>
<span id="cb32-83"><a href="#cb32-83" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">77</span><span class="sc">:</span>          .    16ccJJ)</span>
<span id="cb32-84"><a href="#cb32-84" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">78</span><span class="sc">:</span>    <span class="er">*</span>clefF4          <span class="sc">*</span></span>
<span id="cb32-85"><a href="#cb32-85" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">79</span><span class="sc">:</span>         8C        16r</span>
<span id="cb32-86"><a href="#cb32-86" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">80</span><span class="sc">:</span>          .     (16aLL</span>
<span id="cb32-87"><a href="#cb32-87" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">81</span><span class="sc">:</span>         8r       16b<span class="sc">-</span></span>
<span id="cb32-88"><a href="#cb32-88" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">82</span><span class="sc">:</span>          .     16gJJ)</span>
<span id="cb32-89"><a href="#cb32-89" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">83</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">98</span>        <span class="ot">=</span><span class="dv">98</span></span>
<span id="cb32-90"><a href="#cb32-90" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">84</span><span class="sc">:</span>        8FF         8f</span>
<span id="cb32-91"><a href="#cb32-91" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">85</span><span class="sc">:</span>         8r         8r</span>
<span id="cb32-92"><a href="#cb32-92" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">86</span><span class="sc">:</span>         <span class="er">*</span><span class="sc">-</span>         <span class="er">*</span><span class="sc">-</span></span>
<span id="cb32-93"><a href="#cb32-93" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############ ^^^ B075_01_06_a.krn ^^^ #############</span></span>
<span id="cb32-94"><a href="#cb32-94" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb32-95"><a href="#cb32-95" tabindex="-1"></a><span class="er">&gt;</span>       humdrumR corpus of twelve pieces.</span>
<span id="cb32-96"><a href="#cb32-96" tabindex="-1"></a><span class="sc">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb32-97"><a href="#cb32-97" tabindex="-1"></a><span class="er">&gt;</span>               <span class="er">*</span>Token <span class="sc">::</span> character</span></code></pre></div>
<p>We can see parentheses used to indicate slurs in the piano parts.
Let’s say we want to get the length of all these slurred groups:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a>slurlengths <span class="ot">&lt;-</span> <span class="fu">with</span>(beethoven, <span class="fu">length</span>(Token), <span class="fu">context</span>(<span class="st">'('</span>, <span class="st">')'</span>))</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a>slurlengths <span class="sc">|&gt;</span> <span class="fu">table</span>()</span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a><span class="sc">&gt;</span>    slurlengths</span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a><span class="sc">&gt;</span>     <span class="dv">2</span>  <span class="dv">3</span>  <span class="dv">4</span>  <span class="dv">7</span>  <span class="dv">8</span> <span class="dv">12</span> <span class="dv">13</span> </span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="dv">47</span> <span class="dv">40</span> <span class="dv">18</span>  <span class="dv">3</span>  <span class="dv">9</span>  <span class="dv">2</span>  <span class="dv">1</span></span></code></pre></div>
<p>Most of the slurts are only 2, 3, or 4 notes. But there is one that
is 13! I wonder where that is?</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="fu">with</span>(beethoven, <span class="cf">if</span> (<span class="fu">length</span>(Token) <span class="sc">==</span> <span class="dv">13</span>) <span class="fu">paste0</span>(File, <span class="st">','</span>, Record), <span class="fu">context</span>(<span class="st">'('</span>, <span class="st">')'</span>))</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">78</span>     <span class="dv">78</span>     <span class="dv">78</span>     <span class="dv">78</span>     <span class="dv">78</span>     <span class="dv">78</span>     <span class="dv">78</span>     <span class="dv">78</span>     <span class="dv">78</span>     <span class="dv">78</span>     <span class="dv">78</span> </span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="st">"9,46"</span> <span class="st">"9,47"</span> <span class="st">"9,48"</span> <span class="st">"9,49"</span> <span class="st">"9,50"</span> <span class="st">"9,52"</span> <span class="st">"9,53"</span> <span class="st">"9,54"</span> <span class="st">"9,55"</span> <span class="st">"9,56"</span> <span class="st">"9,57"</span> </span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">78</span>     <span class="dv">78</span> </span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="st">"9,58"</span> <span class="st">"9,59"</span> </span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="fu">attr</span>(,<span class="st">"class"</span>)</span>
<span id="cb34-7"><a href="#cb34-7" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">1</span>] <span class="st">"NULL"</span></span></code></pre></div>
<p>File 9, records 46–59.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>beethoven[<span class="dv">9</span>]</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############ vvv B075_01_03_a.krn vvv ############</span></span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Beethoven</span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">:</span> <span class="dv">7</span> Variations on a Quartet by Winter</span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>Variation<span class="sc">:</span> Variation <span class="dv">1</span> c</span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">4</span><span class="sc">:</span>     <span class="er">**</span>kern         <span class="sc">**</span>kern</span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">5</span><span class="sc">:</span>    <span class="er">*</span>clefF4        <span class="sc">*</span>clefG2</span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">6</span><span class="sc">:</span>     <span class="er">*</span>k[b<span class="sc">-</span>]         <span class="sc">*</span>k[b<span class="sc">-</span>]</span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">7</span><span class="sc">:</span>      <span class="er">*</span>M2<span class="sc">/</span><span class="dv">4</span>          <span class="sc">*</span>M2<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb35-10"><a href="#cb35-10" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">8</span><span class="sc">:</span>        <span class="er">*</span>F<span class="sc">:</span>            <span class="er">*</span>F<span class="sc">:</span></span>
<span id="cb35-11"><a href="#cb35-11" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">9</span><span class="sc">:</span>         4r         (16bLL</span>
<span id="cb35-12"><a href="#cb35-12" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">10</span><span class="sc">:</span>          .           16cc</span>
<span id="cb35-13"><a href="#cb35-13" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">11</span><span class="sc">:</span>          .           16dd</span>
<span id="cb35-14"><a href="#cb35-14" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">12</span><span class="sc">:</span>          .         16ccJJ</span>
<span id="cb35-15"><a href="#cb35-15" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">13</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">70</span>            <span class="ot">=</span><span class="dv">70</span></span>
<span id="cb35-16"><a href="#cb35-16" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">14</span><span class="sc">:</span>         8r         16b<span class="sc">-</span>LL</span>
<span id="cb35-17"><a href="#cb35-17" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">15</span><span class="sc">:</span>          .            16a</span>
<span id="cb35-18"><a href="#cb35-18" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">16</span><span class="sc">:</span>        (8c           16ff</span>
<span id="cb35-19"><a href="#cb35-19" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">17</span><span class="sc">:</span>          .         16ccJJ</span>
<span id="cb35-20"><a href="#cb35-20" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">18</span><span class="sc">:</span>         8A         16aaLL</span>
<span id="cb35-21"><a href="#cb35-21" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">19</span><span class="sc">:</span>          .           16ff</span>
<span id="cb35-22"><a href="#cb35-22" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">20</span><span class="sc">:</span>        8F)           16cc</span>
<span id="cb35-23"><a href="#cb35-23" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">21</span><span class="sc">:</span>          .         16aJJ)</span>
<span id="cb35-24"><a href="#cb35-24" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">22</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">71</span>            <span class="ot">=</span><span class="dv">71</span></span>
<span id="cb35-25"><a href="#cb35-25" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">23</span><span class="sc">:</span>         <span class="er">*^</span>              <span class="er">*</span></span>
<span id="cb35-26"><a href="#cb35-26" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">24</span><span class="sc">:</span>         4E    8E  (16ccLL</span>
<span id="cb35-27"><a href="#cb35-27" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">25</span><span class="sc">:</span>          .     .     16b<span class="sc">-</span></span>
<span id="cb35-28"><a href="#cb35-28" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">26</span><span class="sc">:</span>          .    4c    16gg)</span>
<span id="cb35-29"><a href="#cb35-29" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">27</span><span class="sc">:</span>          .     .  16gg<span class="st">'JJ</span></span>
<span id="cb35-30"><a href="#cb35-30" tabindex="-1"></a><span class="st">&gt;      28:         4F     .  (16b-LL</span></span>
<span id="cb35-31"><a href="#cb35-31" tabindex="-1"></a><span class="st">&gt;      29:          .     .      16a</span></span>
<span id="cb35-32"><a href="#cb35-32" tabindex="-1"></a><span class="st">&gt;      30:          .    8c    16ff)</span></span>
<span id="cb35-33"><a href="#cb35-33" tabindex="-1"></a><span class="st">&gt;      31:          .     .  16ff'</span>JJ</span>
<span id="cb35-34"><a href="#cb35-34" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">32</span><span class="sc">:</span>         <span class="er">*</span>v    <span class="sc">*</span>v        <span class="sc">*</span></span>
<span id="cb35-35"><a href="#cb35-35" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">33</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">72</span>            <span class="ot">=</span><span class="dv">72</span></span>
<span id="cb35-36"><a href="#cb35-36" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">34</span><span class="sc">:</span>      8B<span class="sc">-</span><span class="st">'L         16g'</span>LL</span>
<span id="cb35-37"><a href="#cb35-37" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">35</span><span class="sc">:</span>          .          (16ee</span>
<span id="cb35-38"><a href="#cb35-38" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">36</span><span class="sc">:</span>       8A<span class="st">'J           16a)</span></span>
<span id="cb35-39"><a href="#cb35-39" tabindex="-1"></a><span class="st">&gt;      37:          .        (16ffJJ</span></span>
<span id="cb35-40"><a href="#cb35-40" tabindex="-1"></a><span class="st">&gt;      38:       8E'</span>L        16b<span class="sc">-</span>LL)</span>
<span id="cb35-41"><a href="#cb35-41" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">39</span><span class="sc">:</span>          .          (16gg</span>
<span id="cb35-42"><a href="#cb35-42" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">40</span><span class="sc">:</span>       8F<span class="st">'J           16a)</span></span>
<span id="cb35-43"><a href="#cb35-43" tabindex="-1"></a><span class="st">&gt;      41:          .        (16ffJJ</span></span>
<span id="cb35-44"><a href="#cb35-44" tabindex="-1"></a><span class="st">&gt;      42:        =73            =73</span></span>
<span id="cb35-45"><a href="#cb35-45" tabindex="-1"></a><span class="st">&gt;      43:         8C         16gLL)</span></span>
<span id="cb35-46"><a href="#cb35-46" tabindex="-1"></a><span class="st">&gt;      44:          .          (16ee</span></span>
<span id="cb35-47"><a href="#cb35-47" tabindex="-1"></a><span class="st">&gt;      45:         8r          16cc)</span></span>
<span id="cb35-48"><a href="#cb35-48" tabindex="-1"></a><span class="st">&gt;      46:          .        (16ccJJ</span></span>
<span id="cb35-49"><a href="#cb35-49" tabindex="-1"></a><span class="st">&gt;      47:         8r          16bLL</span></span>
<span id="cb35-50"><a href="#cb35-50" tabindex="-1"></a><span class="st">&gt;      48:          .           16cc</span></span>
<span id="cb35-51"><a href="#cb35-51" tabindex="-1"></a><span class="st">&gt;      49:         8r           16dd</span></span>
<span id="cb35-52"><a href="#cb35-52" tabindex="-1"></a><span class="st">&gt;      50:          .         16ccJJ</span></span>
<span id="cb35-53"><a href="#cb35-53" tabindex="-1"></a><span class="st">&gt;      51:        =74            =74</span></span>
<span id="cb35-54"><a href="#cb35-54" tabindex="-1"></a><span class="st">&gt;      52:         8r         16b-LL</span></span>
<span id="cb35-55"><a href="#cb35-55" tabindex="-1"></a><span class="st">&gt;      53:          .            16a</span></span>
<span id="cb35-56"><a href="#cb35-56" tabindex="-1"></a><span class="st">&gt;      54:        (8c           16ff</span></span>
<span id="cb35-57"><a href="#cb35-57" tabindex="-1"></a><span class="st">&gt;      55:          .         16ccJJ</span></span>
<span id="cb35-58"><a href="#cb35-58" tabindex="-1"></a><span class="st">&gt;      56:        8AL         16aaLL</span></span>
<span id="cb35-59"><a href="#cb35-59" tabindex="-1"></a><span class="st">&gt;      57:          .           16ff</span></span>
<span id="cb35-60"><a href="#cb35-60" tabindex="-1"></a><span class="st">&gt;      58:       8FJ)           16cc</span></span>
<span id="cb35-61"><a href="#cb35-61" tabindex="-1"></a><span class="st">&gt;      59:          .         16aJJ)</span></span>
<span id="cb35-62"><a href="#cb35-62" tabindex="-1"></a><span class="st">&gt;      60:        =75            =75</span></span>
<span id="cb35-63"><a href="#cb35-63" tabindex="-1"></a><span class="st">&gt;      61:         *^              *</span></span>
<span id="cb35-64"><a href="#cb35-64" tabindex="-1"></a><span class="st">&gt;      62:         4E    8E  (16ccLL</span></span>
<span id="cb35-65"><a href="#cb35-65" tabindex="-1"></a><span class="st">&gt;      63:          .     .     16b-</span></span>
<span id="cb35-66"><a href="#cb35-66" tabindex="-1"></a><span class="st">&gt;      64:          .    4c    16gg)</span></span>
<span id="cb35-67"><a href="#cb35-67" tabindex="-1"></a><span class="st">&gt;      65:          .     .  16gg'</span>JJ</span>
<span id="cb35-68"><a href="#cb35-68" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">66</span><span class="sc">:</span>         4F     .  (16b<span class="sc">-</span>LL</span>
<span id="cb35-69"><a href="#cb35-69" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">67</span><span class="sc">:</span>          .     .      16a</span>
<span id="cb35-70"><a href="#cb35-70" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">68</span><span class="sc">:</span>          .  ([8c    16ff)</span>
<span id="cb35-71"><a href="#cb35-71" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">69</span><span class="sc">:</span>          .     .  16ff<span class="st">'JJ</span></span>
<span id="cb35-72"><a href="#cb35-72" tabindex="-1"></a><span class="st">&gt;      70:        =76   =76      =76</span></span>
<span id="cb35-73"><a href="#cb35-73" tabindex="-1"></a><span class="st">&gt;      71:        4.G  8cL]  (16a-LL</span></span>
<span id="cb35-74"><a href="#cb35-74" tabindex="-1"></a><span class="st">&gt;      72:          .     .      16g</span></span>
<span id="cb35-75"><a href="#cb35-75" tabindex="-1"></a><span class="st">&gt;      73:          .   8BJ    16ff)</span></span>
<span id="cb35-76"><a href="#cb35-76" tabindex="-1"></a><span class="st">&gt;      74:          .     .  16ff'</span>JJ</span>
<span id="cb35-77"><a href="#cb35-77" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">75</span><span class="sc">:</span>          .   4d)   (16bLL</span>
<span id="cb35-78"><a href="#cb35-78" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">76</span><span class="sc">:</span>          .     .      16g</span>
<span id="cb35-79"><a href="#cb35-79" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">77</span><span class="sc">:</span>         8G     .      16b</span>
<span id="cb35-80"><a href="#cb35-80" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">78</span><span class="sc">:</span>          .     .   16fJJ)</span>
<span id="cb35-81"><a href="#cb35-81" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">79</span><span class="sc">:</span>         <span class="er">*</span>v    <span class="sc">*</span>v        <span class="sc">*</span></span>
<span id="cb35-82"><a href="#cb35-82" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">80</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">77</span>            <span class="ot">=</span><span class="dv">77</span></span>
<span id="cb35-83"><a href="#cb35-83" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">81</span><span class="sc">:</span>         8c        (16ccLL</span>
<span id="cb35-84"><a href="#cb35-84" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">82</span><span class="sc">:</span>          .          16cc<span class="co">#</span></span>
<span id="cb35-85"><a href="#cb35-85" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">83</span><span class="sc">:</span>         8r           16dd</span>
<span id="cb35-86"><a href="#cb35-86" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">84</span><span class="sc">:</span>          .        16ee<span class="sc">-</span>JJ</span>
<span id="cb35-87"><a href="#cb35-87" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">85</span><span class="sc">:</span>         4r         16eeLL</span>
<span id="cb35-88"><a href="#cb35-88" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">86</span><span class="sc">:</span>          .           16ff</span>
<span id="cb35-89"><a href="#cb35-89" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">87</span><span class="sc">:</span>          .          16ff<span class="co">#</span></span>
<span id="cb35-90"><a href="#cb35-90" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">88</span><span class="sc">:</span>          .        16ggJJ)</span>
<span id="cb35-91"><a href="#cb35-91" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">89</span><span class="sc">:</span>         <span class="er">*</span><span class="sc">-</span>             <span class="er">*</span><span class="sc">-</span></span>
<span id="cb35-92"><a href="#cb35-92" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############ ^^^ B075_01_03_a.krn ^^^ ############</span></span>
<span id="cb35-93"><a href="#cb35-93" tabindex="-1"></a><span class="er">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb35-94"><a href="#cb35-94" tabindex="-1"></a><span class="er">&gt;</span>               <span class="er">*</span>Token <span class="sc">::</span> character</span></code></pre></div>
<p>Sure enough!</p>
<hr>
<p>Ok, what if we want to collapse (<code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste()</a></code>) our slurred
notes together, like we’ve been doing throughout this article?</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="fu">within</span>(beethoven, <span class="fu">paste</span>(Token, <span class="at">collapse =</span> <span class="st">'-'</span>), <span class="fu">context</span>(<span class="st">'('</span>, <span class="st">')'</span>))</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############ vvv B075_00_01_a.krn vvv #############</span></span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Beethoven</span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">:</span> <span class="dv">7</span> Variations on a Quartet by Winter</span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>Variation<span class="sc">:</span> Theme a</span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">4</span><span class="sc">:</span>     <span class="er">**</span>kern                   <span class="sc">**</span>kern</span>
<span id="cb36-7"><a href="#cb36-7" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">5</span><span class="sc">:</span>    <span class="er">*</span>clefG2                  <span class="sc">*</span>clefG2</span>
<span id="cb36-8"><a href="#cb36-8" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">6</span><span class="sc">:</span>     <span class="er">*</span>k[b<span class="sc">-</span>]                   <span class="sc">*</span>k[b<span class="sc">-</span>]</span>
<span id="cb36-9"><a href="#cb36-9" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">7</span><span class="sc">:</span>      <span class="er">*</span>M2<span class="sc">/</span><span class="dv">4</span>                    <span class="sc">*</span>M2<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb36-10"><a href="#cb36-10" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">8</span><span class="sc">:</span>        <span class="er">*</span>F<span class="sc">:</span>                      <span class="er">*</span>F<span class="sc">:</span></span>
<span id="cb36-11"><a href="#cb36-11" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">9</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-12"><a href="#cb36-12" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">10</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">1</span>                       <span class="ot">=</span><span class="dv">1</span></span>
<span id="cb36-13"><a href="#cb36-13" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">11</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-14"><a href="#cb36-14" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">12</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-15"><a href="#cb36-15" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">13</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-16"><a href="#cb36-16" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">14</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-17"><a href="#cb36-17" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">15</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">2</span>                       <span class="ot">=</span><span class="dv">2</span></span>
<span id="cb36-18"><a href="#cb36-18" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">16</span><span class="sc">:</span>    (4c<span class="sc">-</span>4f)                (4gg<span class="sc">-</span>4ff)</span>
<span id="cb36-19"><a href="#cb36-19" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">17</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-20"><a href="#cb36-20" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">18</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">3</span>                       <span class="ot">=</span><span class="dv">3</span></span>
<span id="cb36-21"><a href="#cb36-21" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">19</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-22"><a href="#cb36-22" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">20</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-23"><a href="#cb36-23" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">21</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-24"><a href="#cb36-24" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">22</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-25"><a href="#cb36-25" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">23</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">4</span>                       <span class="ot">=</span><span class="dv">4</span></span>
<span id="cb36-26"><a href="#cb36-26" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">24</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-27"><a href="#cb36-27" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">25</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-28"><a href="#cb36-28" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">26</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-29"><a href="#cb36-29" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">27</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">5</span>                       <span class="ot">=</span><span class="dv">5</span></span>
<span id="cb36-30"><a href="#cb36-30" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">28</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-31"><a href="#cb36-31" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">29</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-32"><a href="#cb36-32" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">30</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-33"><a href="#cb36-33" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">31</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-34"><a href="#cb36-34" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">32</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">6</span>                       <span class="ot">=</span><span class="dv">6</span></span>
<span id="cb36-35"><a href="#cb36-35" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">33</span><span class="sc">:</span>    (4c<span class="sc">-</span>4f)                (4gg<span class="sc">-</span>4ff)</span>
<span id="cb36-36"><a href="#cb36-36" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">34</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-37"><a href="#cb36-37" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">35</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">7</span>                       <span class="ot">=</span><span class="dv">7</span></span>
<span id="cb36-38"><a href="#cb36-38" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">36</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-39"><a href="#cb36-39" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">37</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-40"><a href="#cb36-40" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">38</span><span class="sc">:</span>          .      (8b<span class="sc">-</span>L<span class="sc">-</span>16b<span class="sc">-</span>L<span class="sc">-</span>16eeJJ)</span>
<span id="cb36-41"><a href="#cb36-41" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">39</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-42"><a href="#cb36-42" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">40</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-43"><a href="#cb36-43" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="dv">41-45</span><span class="sc">:::</span><span class="er">:::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb36-44"><a href="#cb36-44" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############ ^^^ B075_00_01_a.krn ^^^ #############</span></span>
<span id="cb36-45"><a href="#cb36-45" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb36-46"><a href="#cb36-46" tabindex="-1"></a><span class="er">&gt;</span>           (<span class="dv">10</span> more pieces...)</span>
<span id="cb36-47"><a href="#cb36-47" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb36-48"><a href="#cb36-48" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############ vvv B075_01_06_a.krn vvv #############</span></span>
<span id="cb36-49"><a href="#cb36-49" tabindex="-1"></a><span class="er">&gt;</span>     <span class="dv">1-46</span><span class="sc">:::</span><span class="er">:::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb36-50"><a href="#cb36-50" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">47</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-51"><a href="#cb36-51" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">48</span><span class="sc">:</span>          .      (16bLL<span class="sc">-</span>16dd<span class="sc">-</span>16ccJJ)</span>
<span id="cb36-52"><a href="#cb36-52" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">49</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-53"><a href="#cb36-53" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">50</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-54"><a href="#cb36-54" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">51</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-55"><a href="#cb36-55" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">52</span><span class="sc">:</span>          .    (16dd<span class="co">#LL-16ff-16eeJJ)</span></span>
<span id="cb36-56"><a href="#cb36-56" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">53</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-57"><a href="#cb36-57" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">54</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-58"><a href="#cb36-58" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">55</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">95</span>                      <span class="ot">=</span><span class="dv">95</span></span>
<span id="cb36-59"><a href="#cb36-59" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">56</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-60"><a href="#cb36-60" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">57</span><span class="sc">:</span>          .     (16eeLL<span class="sc">-</span>16gg<span class="sc">-</span>16ffJJ)</span>
<span id="cb36-61"><a href="#cb36-61" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">58</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-62"><a href="#cb36-62" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">59</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-63"><a href="#cb36-63" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">60</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-64"><a href="#cb36-64" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">61</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-65"><a href="#cb36-65" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">62</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-66"><a href="#cb36-66" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">63</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-67"><a href="#cb36-67" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">64</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">96</span>                      <span class="ot">=</span><span class="dv">96</span></span>
<span id="cb36-68"><a href="#cb36-68" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">65</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-69"><a href="#cb36-69" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">66</span><span class="sc">:</span>          .  (16ccc<span class="co">#LL-16ddd-16ggJJ)</span></span>
<span id="cb36-70"><a href="#cb36-70" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">67</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-71"><a href="#cb36-71" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">68</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-72"><a href="#cb36-72" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">69</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-73"><a href="#cb36-73" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">70</span><span class="sc">:</span>          .    (16aaLL<span class="sc">-</span>16bb<span class="sc">--</span>16eeJJ)</span>
<span id="cb36-74"><a href="#cb36-74" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">71</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-75"><a href="#cb36-75" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">72</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-76"><a href="#cb36-76" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">73</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">97</span>                      <span class="ot">=</span><span class="dv">97</span></span>
<span id="cb36-77"><a href="#cb36-77" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">74</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-78"><a href="#cb36-78" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">75</span><span class="sc">:</span>          .     (16eeLL<span class="sc">-</span>16ff<span class="sc">-</span>16ccJJ)</span>
<span id="cb36-79"><a href="#cb36-79" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">76</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-80"><a href="#cb36-80" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">77</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-81"><a href="#cb36-81" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">78</span><span class="sc">:</span>    <span class="er">*</span>clefF4                        <span class="sc">*</span></span>
<span id="cb36-82"><a href="#cb36-82" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">79</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-83"><a href="#cb36-83" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">80</span><span class="sc">:</span>          .       (16aLL<span class="sc">-</span>16b<span class="sc">--</span>16gJJ)</span>
<span id="cb36-84"><a href="#cb36-84" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">81</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-85"><a href="#cb36-85" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">82</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-86"><a href="#cb36-86" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">83</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">98</span>                      <span class="ot">=</span><span class="dv">98</span></span>
<span id="cb36-87"><a href="#cb36-87" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">84</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-88"><a href="#cb36-88" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">85</span><span class="sc">:</span>          .                        .</span>
<span id="cb36-89"><a href="#cb36-89" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">86</span><span class="sc">:</span>         <span class="er">*</span><span class="sc">-</span>                       <span class="er">*</span><span class="sc">-</span></span>
<span id="cb36-90"><a href="#cb36-90" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############ ^^^ B075_01_06_a.krn ^^^ #############</span></span>
<span id="cb36-91"><a href="#cb36-91" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb36-92"><a href="#cb36-92" tabindex="-1"></a><span class="er">&gt;</span>       humdrumR corpus of twelve pieces.</span>
<span id="cb36-93"><a href="#cb36-93" tabindex="-1"></a><span class="sc">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb36-94"><a href="#cb36-94" tabindex="-1"></a><span class="er">&gt;</span>                Token   <span class="sc">::</span> character</span>
<span id="cb36-95"><a href="#cb36-95" tabindex="-1"></a><span class="sc">&gt;</span>               <span class="er">*</span>Result1 <span class="sc">::</span> character</span></code></pre></div>
<p>That worked…but we lost all the <em>unslurred</em> notes. We can keep
those tokens by adding a <code>complement</code> argument to
<code><a href="../reference/withinHumdrum.html">within.humdrumR()</a></code>—this works the same was as the complement
when you do a subset inside <code><a href="../reference/withinHumdrum.html">within.humdrumR()</a></code> (see the <a href="WorkingWithData.html">Working with humdrum data</a> article).
Basically, any indices in the active field that <em>aren’t</em> captured
in any of your windows, are in the complement. If we want to keep the
original tokens there, just pass <code>complement = Token</code>.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="fu">within</span>(beethoven, <span class="fu">paste</span>(Token, <span class="at">collapse =</span> <span class="st">'-'</span>), <span class="fu">context</span>(<span class="st">'('</span>, <span class="st">')'</span>), <span class="at">complement =</span> Token)</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############ vvv B075_00_01_a.krn vvv #############</span></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Beethoven</span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">:</span> <span class="dv">7</span> Variations on a Quartet by Winter</span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>Variation<span class="sc">:</span> Theme a</span>
<span id="cb37-6"><a href="#cb37-6" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">4</span><span class="sc">:</span>     <span class="er">**</span>kern                   <span class="sc">**</span>kern</span>
<span id="cb37-7"><a href="#cb37-7" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">5</span><span class="sc">:</span>    <span class="er">*</span>clefG2                  <span class="sc">*</span>clefG2</span>
<span id="cb37-8"><a href="#cb37-8" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">6</span><span class="sc">:</span>     <span class="er">*</span>k[b<span class="sc">-</span>]                   <span class="sc">*</span>k[b<span class="sc">-</span>]</span>
<span id="cb37-9"><a href="#cb37-9" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">7</span><span class="sc">:</span>      <span class="er">*</span>M2<span class="sc">/</span><span class="dv">4</span>                    <span class="sc">*</span>M2<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb37-10"><a href="#cb37-10" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">8</span><span class="sc">:</span>        <span class="er">*</span>F<span class="sc">:</span>                      <span class="er">*</span>F<span class="sc">:</span></span>
<span id="cb37-11"><a href="#cb37-11" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">9</span><span class="sc">:</span>         4r                      4aa</span>
<span id="cb37-12"><a href="#cb37-12" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">10</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">1</span>                       <span class="ot">=</span><span class="dv">1</span></span>
<span id="cb37-13"><a href="#cb37-13" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">11</span><span class="sc">:</span>         2f                    8ff<span class="st">'L</span></span>
<span id="cb37-14"><a href="#cb37-14" tabindex="-1"></a><span class="st">&gt;       12:          .                    8cc'</span>J</span>
<span id="cb37-15"><a href="#cb37-15" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">13</span><span class="sc">:</span>          .                    8ff<span class="st">'L</span></span>
<span id="cb37-16"><a href="#cb37-16" tabindex="-1"></a><span class="st">&gt;       14:          .                    8aa'</span>J</span>
<span id="cb37-17"><a href="#cb37-17" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">15</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">2</span>                       <span class="ot">=</span><span class="dv">2</span></span>
<span id="cb37-18"><a href="#cb37-18" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">16</span><span class="sc">:</span>    (4c<span class="sc">-</span>4f)                (4gg<span class="sc">-</span>4ff)</span>
<span id="cb37-19"><a href="#cb37-19" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">17</span><span class="sc">:</span>          .                        .</span>
<span id="cb37-20"><a href="#cb37-20" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">18</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">3</span>                       <span class="ot">=</span><span class="dv">3</span></span>
<span id="cb37-21"><a href="#cb37-21" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">19</span><span class="sc">:</span>         4c                    8ee<span class="st">'L</span></span>
<span id="cb37-22"><a href="#cb37-22" tabindex="-1"></a><span class="st">&gt;       20:          .                    8dd'</span>J</span>
<span id="cb37-23"><a href="#cb37-23" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">21</span><span class="sc">:</span>         4c                    8cc<span class="st">'L</span></span>
<span id="cb37-24"><a href="#cb37-24" tabindex="-1"></a><span class="st">&gt;       22:          .                    8dd'</span>J</span>
<span id="cb37-25"><a href="#cb37-25" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">23</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">4</span>                       <span class="ot">=</span><span class="dv">4</span></span>
<span id="cb37-26"><a href="#cb37-26" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">24</span><span class="sc">:</span>         8c                      8ee</span>
<span id="cb37-27"><a href="#cb37-27" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">25</span><span class="sc">:</span>         8r                       8r</span>
<span id="cb37-28"><a href="#cb37-28" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">26</span><span class="sc">:</span>         4r                      4aa</span>
<span id="cb37-29"><a href="#cb37-29" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">27</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">5</span>                       <span class="ot">=</span><span class="dv">5</span></span>
<span id="cb37-30"><a href="#cb37-30" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">28</span><span class="sc">:</span>         2f                    8ff<span class="st">'L</span></span>
<span id="cb37-31"><a href="#cb37-31" tabindex="-1"></a><span class="st">&gt;       29:          .                    8cc'</span>J</span>
<span id="cb37-32"><a href="#cb37-32" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">30</span><span class="sc">:</span>          .                    8ff<span class="st">'L</span></span>
<span id="cb37-33"><a href="#cb37-33" tabindex="-1"></a><span class="st">&gt;       31:          .                    8aa'</span>J</span>
<span id="cb37-34"><a href="#cb37-34" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">32</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">6</span>                       <span class="ot">=</span><span class="dv">6</span></span>
<span id="cb37-35"><a href="#cb37-35" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">33</span><span class="sc">:</span>    (4c<span class="sc">-</span>4f)                (4gg<span class="sc">-</span>4ff)</span>
<span id="cb37-36"><a href="#cb37-36" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">34</span><span class="sc">:</span>          .                        .</span>
<span id="cb37-37"><a href="#cb37-37" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">35</span><span class="sc">:</span>         <span class="er">=</span><span class="dv">7</span>                       <span class="ot">=</span><span class="dv">7</span></span>
<span id="cb37-38"><a href="#cb37-38" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">36</span><span class="sc">:</span>       8B<span class="sc">-</span>L                     8ddL</span>
<span id="cb37-39"><a href="#cb37-39" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">37</span><span class="sc">:</span>       8B<span class="sc">-</span>J                     8ddJ</span>
<span id="cb37-40"><a href="#cb37-40" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">38</span><span class="sc">:</span>        8cL      (8b<span class="sc">-</span>L<span class="sc">-</span>16b<span class="sc">-</span>L<span class="sc">-</span>16eeJJ)</span>
<span id="cb37-41"><a href="#cb37-41" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">39</span><span class="sc">:</span>        8cJ                        .</span>
<span id="cb37-42"><a href="#cb37-42" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">40</span><span class="sc">:</span>          .                        .</span>
<span id="cb37-43"><a href="#cb37-43" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="dv">41-45</span><span class="sc">:::</span><span class="er">:::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb37-44"><a href="#cb37-44" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############ ^^^ B075_00_01_a.krn ^^^ #############</span></span>
<span id="cb37-45"><a href="#cb37-45" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb37-46"><a href="#cb37-46" tabindex="-1"></a><span class="er">&gt;</span>           (<span class="dv">10</span> more pieces...)</span>
<span id="cb37-47"><a href="#cb37-47" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb37-48"><a href="#cb37-48" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############ vvv B075_01_06_a.krn vvv #############</span></span>
<span id="cb37-49"><a href="#cb37-49" tabindex="-1"></a><span class="er">&gt;</span>     <span class="dv">1-46</span><span class="sc">:::</span><span class="er">:::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb37-50"><a href="#cb37-50" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">47</span><span class="sc">:</span>         8c                      16r</span>
<span id="cb37-51"><a href="#cb37-51" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">48</span><span class="sc">:</span>          .      (16bLL<span class="sc">-</span>16dd<span class="sc">-</span>16ccJJ)</span>
<span id="cb37-52"><a href="#cb37-52" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">49</span><span class="sc">:</span>         8r                        .</span>
<span id="cb37-53"><a href="#cb37-53" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">50</span><span class="sc">:</span>          .                        .</span>
<span id="cb37-54"><a href="#cb37-54" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">51</span><span class="sc">:</span>         8c                      16r</span>
<span id="cb37-55"><a href="#cb37-55" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">52</span><span class="sc">:</span>          .    (16dd<span class="co">#LL-16ff-16eeJJ)</span></span>
<span id="cb37-56"><a href="#cb37-56" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">53</span><span class="sc">:</span>         8r                        .</span>
<span id="cb37-57"><a href="#cb37-57" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">54</span><span class="sc">:</span>          .                        .</span>
<span id="cb37-58"><a href="#cb37-58" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">55</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">95</span>                      <span class="ot">=</span><span class="dv">95</span></span>
<span id="cb37-59"><a href="#cb37-59" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">56</span><span class="sc">:</span>         8f                      16r</span>
<span id="cb37-60"><a href="#cb37-60" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">57</span><span class="sc">:</span>          .     (16eeLL<span class="sc">-</span>16gg<span class="sc">-</span>16ffJJ)</span>
<span id="cb37-61"><a href="#cb37-61" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">58</span><span class="sc">:</span>         8r                        .</span>
<span id="cb37-62"><a href="#cb37-62" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">59</span><span class="sc">:</span>          .                        .</span>
<span id="cb37-63"><a href="#cb37-63" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">60</span><span class="sc">:</span>         8d                      16r</span>
<span id="cb37-64"><a href="#cb37-64" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">61</span><span class="sc">:</span>          .                  16gg<span class="co">#LL</span></span>
<span id="cb37-65"><a href="#cb37-65" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">62</span><span class="sc">:</span>         8r                     16aa</span>
<span id="cb37-66"><a href="#cb37-66" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">63</span><span class="sc">:</span>          .                   16ffJJ</span>
<span id="cb37-67"><a href="#cb37-67" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">64</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">96</span>                      <span class="ot">=</span><span class="dv">96</span></span>
<span id="cb37-68"><a href="#cb37-68" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">65</span><span class="sc">:</span>        8B<span class="sc">-</span>                      16r</span>
<span id="cb37-69"><a href="#cb37-69" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">66</span><span class="sc">:</span>          .  (16ccc<span class="co">#LL-16ddd-16ggJJ)</span></span>
<span id="cb37-70"><a href="#cb37-70" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">67</span><span class="sc">:</span>         8r                        .</span>
<span id="cb37-71"><a href="#cb37-71" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">68</span><span class="sc">:</span>          .                        .</span>
<span id="cb37-72"><a href="#cb37-72" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">69</span><span class="sc">:</span>         8c                      16r</span>
<span id="cb37-73"><a href="#cb37-73" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">70</span><span class="sc">:</span>          .    (16aaLL<span class="sc">-</span>16bb<span class="sc">--</span>16eeJJ)</span>
<span id="cb37-74"><a href="#cb37-74" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">71</span><span class="sc">:</span>         8r                        .</span>
<span id="cb37-75"><a href="#cb37-75" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">72</span><span class="sc">:</span>          .                        .</span>
<span id="cb37-76"><a href="#cb37-76" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">73</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">97</span>                      <span class="ot">=</span><span class="dv">97</span></span>
<span id="cb37-77"><a href="#cb37-77" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">74</span><span class="sc">:</span>         8f                      16r</span>
<span id="cb37-78"><a href="#cb37-78" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">75</span><span class="sc">:</span>          .     (16eeLL<span class="sc">-</span>16ff<span class="sc">-</span>16ccJJ)</span>
<span id="cb37-79"><a href="#cb37-79" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">76</span><span class="sc">:</span>         8r                        .</span>
<span id="cb37-80"><a href="#cb37-80" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">77</span><span class="sc">:</span>          .                        .</span>
<span id="cb37-81"><a href="#cb37-81" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">78</span><span class="sc">:</span>    <span class="er">*</span>clefF4                        <span class="sc">*</span></span>
<span id="cb37-82"><a href="#cb37-82" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">79</span><span class="sc">:</span>         8C                      16r</span>
<span id="cb37-83"><a href="#cb37-83" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">80</span><span class="sc">:</span>          .       (16aLL<span class="sc">-</span>16b<span class="sc">--</span>16gJJ)</span>
<span id="cb37-84"><a href="#cb37-84" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">81</span><span class="sc">:</span>         8r                        .</span>
<span id="cb37-85"><a href="#cb37-85" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">82</span><span class="sc">:</span>          .                        .</span>
<span id="cb37-86"><a href="#cb37-86" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">83</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">98</span>                      <span class="ot">=</span><span class="dv">98</span></span>
<span id="cb37-87"><a href="#cb37-87" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">84</span><span class="sc">:</span>        8FF                       8f</span>
<span id="cb37-88"><a href="#cb37-88" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">85</span><span class="sc">:</span>         8r                       8r</span>
<span id="cb37-89"><a href="#cb37-89" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">86</span><span class="sc">:</span>         <span class="er">*</span><span class="sc">-</span>                       <span class="er">*</span><span class="sc">-</span></span>
<span id="cb37-90"><a href="#cb37-90" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############ ^^^ B075_01_06_a.krn ^^^ #############</span></span>
<span id="cb37-91"><a href="#cb37-91" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb37-92"><a href="#cb37-92" tabindex="-1"></a><span class="er">&gt;</span>       humdrumR corpus of twelve pieces.</span>
<span id="cb37-93"><a href="#cb37-93" tabindex="-1"></a><span class="sc">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb37-94"><a href="#cb37-94" tabindex="-1"></a><span class="er">&gt;</span>                Token   <span class="sc">::</span> character</span>
<span id="cb37-95"><a href="#cb37-95" tabindex="-1"></a><span class="sc">&gt;</span>               <span class="er">*</span>Result1 <span class="sc">::</span> character</span></code></pre></div>
<div class="section level5">
<h5 id="slurs-with-multi-stops">Slurs with multi-stops<a class="anchor" aria-label="anchor" href="#slurs-with-multi-stops"></a>
</h5>
<p>In the last section we took the easy way out and remove the
multi-stops (chords) being played be the piano. Can we analyze slurs
without doing this? Let’s load the data again, but keep the multi-stop
tokens:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a>beethoven <span class="ot">&lt;-</span> <span class="fu">readHumdrum</span>(humdrumRroot, <span class="st">'HumdrumData/BeethovenVariations/.*krn'</span>)</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a>beethoven <span class="ot">&lt;-</span> <span class="fu">subset</span>(beethoven, Exclusive <span class="sc">==</span> <span class="st">'kern'</span>) <span class="sc">|&gt;</span> <span class="fu">removeEmptySpines</span>()</span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a>beethoven</span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############ vvv B075_00_01_a.krn vvv #############</span></span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Beethoven</span>
<span id="cb38-7"><a href="#cb38-7" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">:</span> <span class="dv">7</span> Variations on a Quartet by Winter</span>
<span id="cb38-8"><a href="#cb38-8" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>Variation<span class="sc">:</span> Theme a</span>
<span id="cb38-9"><a href="#cb38-9" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">4</span><span class="sc">:</span>       <span class="er">**</span>kern       <span class="sc">**</span>kern</span>
<span id="cb38-10"><a href="#cb38-10" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">5</span><span class="sc">:</span>      <span class="er">*</span>clefG2      <span class="sc">*</span>clefG2</span>
<span id="cb38-11"><a href="#cb38-11" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">6</span><span class="sc">:</span>       <span class="er">*</span>k[b<span class="sc">-</span>]       <span class="sc">*</span>k[b<span class="sc">-</span>]</span>
<span id="cb38-12"><a href="#cb38-12" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">7</span><span class="sc">:</span>        <span class="er">*</span>M2<span class="sc">/</span><span class="dv">4</span>        <span class="sc">*</span>M2<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb38-13"><a href="#cb38-13" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">8</span><span class="sc">:</span>          <span class="er">*</span>F<span class="sc">:</span>          <span class="er">*</span>F<span class="sc">:</span></span>
<span id="cb38-14"><a href="#cb38-14" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">9</span><span class="sc">:</span>           4r     4aa 4ccc</span>
<span id="cb38-15"><a href="#cb38-15" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">10</span><span class="sc">:</span>           <span class="er">=</span><span class="dv">1</span>           <span class="ot">=</span><span class="dv">1</span></span>
<span id="cb38-16"><a href="#cb38-16" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">11</span><span class="sc">:</span>           2f   8ff<span class="st">'L 8aa'</span></span>
<span id="cb38-17"><a href="#cb38-17" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">12</span><span class="sc">:</span>            .   8cc<span class="st">'J 8ff'</span></span>
<span id="cb38-18"><a href="#cb38-18" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">13</span><span class="sc">:</span>            .   8ff<span class="st">'L 8aa'</span></span>
<span id="cb38-19"><a href="#cb38-19" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">14</span><span class="sc">:</span>            .  8aa<span class="st">'J 8ccc'</span></span>
<span id="cb38-20"><a href="#cb38-20" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">15</span><span class="sc">:</span>           <span class="er">=</span><span class="dv">2</span>           <span class="ot">=</span><span class="dv">2</span></span>
<span id="cb38-21"><a href="#cb38-21" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">16</span><span class="sc">:</span>    (4c 4e 4g    (4gg 4bb<span class="sc">-</span></span>
<span id="cb38-22"><a href="#cb38-22" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">17</span><span class="sc">:</span>          4f)     4ff) 4aa</span>
<span id="cb38-23"><a href="#cb38-23" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">18</span><span class="sc">:</span>           <span class="er">=</span><span class="dv">3</span>           <span class="ot">=</span><span class="dv">3</span></span>
<span id="cb38-24"><a href="#cb38-24" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">19</span><span class="sc">:</span>           4c   8ee<span class="st">'L 8gg'</span></span>
<span id="cb38-25"><a href="#cb38-25" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">20</span><span class="sc">:</span>            .   8dd<span class="st">'J 8ff'</span></span>
<span id="cb38-26"><a href="#cb38-26" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">21</span><span class="sc">:</span>           4c   8cc<span class="st">'L 8ee'</span></span>
<span id="cb38-27"><a href="#cb38-27" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">22</span><span class="sc">:</span>            .   8dd<span class="st">'J 8ff'</span></span>
<span id="cb38-28"><a href="#cb38-28" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">23</span><span class="sc">:</span>           <span class="er">=</span><span class="dv">4</span>           <span class="ot">=</span><span class="dv">4</span></span>
<span id="cb38-29"><a href="#cb38-29" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">24</span><span class="sc">:</span>           8c      8ee 8gg</span>
<span id="cb38-30"><a href="#cb38-30" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">25</span><span class="sc">:</span>           8r           8r</span>
<span id="cb38-31"><a href="#cb38-31" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">26</span><span class="sc">:</span>           4r     4aa 4ccc</span>
<span id="cb38-32"><a href="#cb38-32" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">27</span><span class="sc">:</span>           <span class="er">=</span><span class="dv">5</span>           <span class="ot">=</span><span class="dv">5</span></span>
<span id="cb38-33"><a href="#cb38-33" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">28</span><span class="sc">:</span>           2f   8ff<span class="st">'L 8aa'</span></span>
<span id="cb38-34"><a href="#cb38-34" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">29</span><span class="sc">:</span>            .   8cc<span class="st">'J 8ff'</span></span>
<span id="cb38-35"><a href="#cb38-35" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">30</span><span class="sc">:</span>            .   8ff<span class="st">'L 8aa'</span></span>
<span id="cb38-36"><a href="#cb38-36" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">31</span><span class="sc">:</span>            .  8aa<span class="st">'J 8ccc'</span></span>
<span id="cb38-37"><a href="#cb38-37" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">32</span><span class="sc">:</span>           <span class="er">=</span><span class="dv">6</span>           <span class="ot">=</span><span class="dv">6</span></span>
<span id="cb38-38"><a href="#cb38-38" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">33</span><span class="sc">:</span>    (4c 4e 4g    (4gg 4bb<span class="sc">-</span></span>
<span id="cb38-39"><a href="#cb38-39" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">34</span><span class="sc">:</span>       4f) 4a     4ff) 4aa</span>
<span id="cb38-40"><a href="#cb38-40" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">35</span><span class="sc">:</span>           <span class="er">=</span><span class="dv">7</span>           <span class="ot">=</span><span class="dv">7</span></span>
<span id="cb38-41"><a href="#cb38-41" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">36</span><span class="sc">:</span>         8B<span class="sc">-</span>L     8ddL 8gg</span>
<span id="cb38-42"><a href="#cb38-42" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">37</span><span class="sc">:</span>         8B<span class="sc">-</span>J     8ddJ 8gg</span>
<span id="cb38-43"><a href="#cb38-43" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">38</span><span class="sc">:</span>          8cL    (8b<span class="sc">-</span>L 8ee</span>
<span id="cb38-44"><a href="#cb38-44" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">39</span><span class="sc">:</span>          8cJ   16b<span class="sc">-</span>L 16dd</span>
<span id="cb38-45"><a href="#cb38-45" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">40</span><span class="sc">:</span>            .      16eeJJ)</span>
<span id="cb38-46"><a href="#cb38-46" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="dv">41-45</span><span class="sc">:::</span><span class="er">:::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb38-47"><a href="#cb38-47" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############ ^^^ B075_00_01_a.krn ^^^ #############</span></span>
<span id="cb38-48"><a href="#cb38-48" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb38-49"><a href="#cb38-49" tabindex="-1"></a><span class="er">&gt;</span>           (<span class="dv">10</span> more pieces...)</span>
<span id="cb38-50"><a href="#cb38-50" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb38-51"><a href="#cb38-51" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############ vvv B075_01_06_a.krn vvv #############</span></span>
<span id="cb38-52"><a href="#cb38-52" tabindex="-1"></a><span class="er">&gt;</span>     <span class="dv">1-46</span><span class="sc">:::</span><span class="er">:::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb38-53"><a href="#cb38-53" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">47</span><span class="sc">:</span>    8c 8g 8b<span class="sc">-</span>          16r</span>
<span id="cb38-54"><a href="#cb38-54" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">48</span><span class="sc">:</span>            .       (16bLL</span>
<span id="cb38-55"><a href="#cb38-55" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">49</span><span class="sc">:</span>           8r         16dd</span>
<span id="cb38-56"><a href="#cb38-56" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">50</span><span class="sc">:</span>            .      16ccJJ)</span>
<span id="cb38-57"><a href="#cb38-57" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">51</span><span class="sc">:</span>    8c 8g 8b<span class="sc">-</span>          16r</span>
<span id="cb38-58"><a href="#cb38-58" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">52</span><span class="sc">:</span>            .     (16dd<span class="co">#LL</span></span>
<span id="cb38-59"><a href="#cb38-59" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">53</span><span class="sc">:</span>           8r         16ff</span>
<span id="cb38-60"><a href="#cb38-60" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">54</span><span class="sc">:</span>            .      16eeJJ)</span>
<span id="cb38-61"><a href="#cb38-61" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">55</span><span class="sc">:</span>          <span class="er">=</span><span class="dv">95</span>          <span class="ot">=</span><span class="dv">95</span></span>
<span id="cb38-62"><a href="#cb38-62" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">56</span><span class="sc">:</span>        8f 8a          16r</span>
<span id="cb38-63"><a href="#cb38-63" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">57</span><span class="sc">:</span>            .      (16eeLL</span>
<span id="cb38-64"><a href="#cb38-64" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">58</span><span class="sc">:</span>           8r         16gg</span>
<span id="cb38-65"><a href="#cb38-65" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">59</span><span class="sc">:</span>            .      16ffJJ)</span>
<span id="cb38-66"><a href="#cb38-66" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">60</span><span class="sc">:</span>     8d 8f 8a          16r</span>
<span id="cb38-67"><a href="#cb38-67" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">61</span><span class="sc">:</span>            .      16gg<span class="co">#LL</span></span>
<span id="cb38-68"><a href="#cb38-68" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">62</span><span class="sc">:</span>           8r         16aa</span>
<span id="cb38-69"><a href="#cb38-69" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">63</span><span class="sc">:</span>            .       16ffJJ</span>
<span id="cb38-70"><a href="#cb38-70" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">64</span><span class="sc">:</span>          <span class="er">=</span><span class="dv">96</span>          <span class="ot">=</span><span class="dv">96</span></span>
<span id="cb38-71"><a href="#cb38-71" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">65</span><span class="sc">:</span>    8B<span class="sc">-</span> 8d 8g          16r</span>
<span id="cb38-72"><a href="#cb38-72" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">66</span><span class="sc">:</span>            .    (16ccc<span class="co">#LL</span></span>
<span id="cb38-73"><a href="#cb38-73" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">67</span><span class="sc">:</span>           8r        16ddd</span>
<span id="cb38-74"><a href="#cb38-74" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">68</span><span class="sc">:</span>            .      16ggJJ)</span>
<span id="cb38-75"><a href="#cb38-75" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">69</span><span class="sc">:</span>    8c 8g 8b<span class="sc">-</span>          16r</span>
<span id="cb38-76"><a href="#cb38-76" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">70</span><span class="sc">:</span>            .      (16aaLL</span>
<span id="cb38-77"><a href="#cb38-77" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">71</span><span class="sc">:</span>           8r        16bb<span class="sc">-</span></span>
<span id="cb38-78"><a href="#cb38-78" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">72</span><span class="sc">:</span>            .      16eeJJ)</span>
<span id="cb38-79"><a href="#cb38-79" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">73</span><span class="sc">:</span>          <span class="er">=</span><span class="dv">97</span>          <span class="ot">=</span><span class="dv">97</span></span>
<span id="cb38-80"><a href="#cb38-80" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">74</span><span class="sc">:</span>        8f 8a          16r</span>
<span id="cb38-81"><a href="#cb38-81" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">75</span><span class="sc">:</span>            .      (16eeLL</span>
<span id="cb38-82"><a href="#cb38-82" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">76</span><span class="sc">:</span>           8r         16ff</span>
<span id="cb38-83"><a href="#cb38-83" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">77</span><span class="sc">:</span>            .      16ccJJ)</span>
<span id="cb38-84"><a href="#cb38-84" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">78</span><span class="sc">:</span>      <span class="er">*</span>clefF4            <span class="sc">*</span></span>
<span id="cb38-85"><a href="#cb38-85" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">79</span><span class="sc">:</span>        8C 8E          16r</span>
<span id="cb38-86"><a href="#cb38-86" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">80</span><span class="sc">:</span>            .       (16aLL</span>
<span id="cb38-87"><a href="#cb38-87" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">81</span><span class="sc">:</span>           8r         16b<span class="sc">-</span></span>
<span id="cb38-88"><a href="#cb38-88" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">82</span><span class="sc">:</span>            .       16gJJ)</span>
<span id="cb38-89"><a href="#cb38-89" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">83</span><span class="sc">:</span>          <span class="er">=</span><span class="dv">98</span>          <span class="ot">=</span><span class="dv">98</span></span>
<span id="cb38-90"><a href="#cb38-90" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">84</span><span class="sc">:</span>       8FF 8F           8f</span>
<span id="cb38-91"><a href="#cb38-91" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">85</span><span class="sc">:</span>           8r           8r</span>
<span id="cb38-92"><a href="#cb38-92" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">86</span><span class="sc">:</span>           <span class="er">*</span><span class="sc">-</span>           <span class="er">*</span><span class="sc">-</span></span>
<span id="cb38-93"><a href="#cb38-93" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############ ^^^ B075_01_06_a.krn ^^^ #############</span></span>
<span id="cb38-94"><a href="#cb38-94" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb38-95"><a href="#cb38-95" tabindex="-1"></a><span class="er">&gt;</span>       humdrumR corpus of twelve pieces.</span>
<span id="cb38-96"><a href="#cb38-96" tabindex="-1"></a><span class="sc">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb38-97"><a href="#cb38-97" tabindex="-1"></a><span class="er">&gt;</span>               <span class="er">*</span>Token <span class="sc">::</span> character</span></code></pre></div>
<p>It looks like the slurs are always written on the first stop, even
though they would probably be interpreted (by a pianist) as encompassing
the whole chord. We can simply throw a <code>subset</code> argument into
<code><a href="../reference/withinHumdrum.html">within.humdrumR()</a></code>, <em>before</em> the
<code><a href="../reference/context.html">context()</a></code> command:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a><span class="fu">within</span>(beethoven,</span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a>       <span class="at">subset =</span> Stop <span class="sc">==</span> <span class="dv">1</span>, </span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a>       <span class="fu">paste</span>(Token, <span class="at">collapse =</span> <span class="st">'-'</span>), </span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a>       <span class="fu">context</span>(<span class="st">'('</span>, <span class="st">')'</span>), </span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a>       <span class="at">complement =</span> Token)</span>
<span id="cb39-7"><a href="#cb39-7" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############ vvv B075_00_01_a.krn vvv #############</span></span>
<span id="cb39-8"><a href="#cb39-8" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Beethoven</span>
<span id="cb39-9"><a href="#cb39-9" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">:</span> <span class="dv">7</span> Variations on a Quartet by Winter</span>
<span id="cb39-10"><a href="#cb39-10" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>Variation<span class="sc">:</span> Theme a</span>
<span id="cb39-11"><a href="#cb39-11" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">4</span><span class="sc">:</span>           <span class="er">**</span>kern                   <span class="sc">**</span>kern</span>
<span id="cb39-12"><a href="#cb39-12" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">5</span><span class="sc">:</span>          <span class="er">*</span>clefG2                  <span class="sc">*</span>clefG2</span>
<span id="cb39-13"><a href="#cb39-13" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">6</span><span class="sc">:</span>           <span class="er">*</span>k[b<span class="sc">-</span>]                   <span class="sc">*</span>k[b<span class="sc">-</span>]</span>
<span id="cb39-14"><a href="#cb39-14" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">7</span><span class="sc">:</span>            <span class="er">*</span>M2<span class="sc">/</span><span class="dv">4</span>                    <span class="sc">*</span>M2<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb39-15"><a href="#cb39-15" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">8</span><span class="sc">:</span>              <span class="er">*</span>F<span class="sc">:</span>                      <span class="er">*</span>F<span class="sc">:</span></span>
<span id="cb39-16"><a href="#cb39-16" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">9</span><span class="sc">:</span>               4r                 4aa 4ccc</span>
<span id="cb39-17"><a href="#cb39-17" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">10</span><span class="sc">:</span>               <span class="er">=</span><span class="dv">1</span>                       <span class="ot">=</span><span class="dv">1</span></span>
<span id="cb39-18"><a href="#cb39-18" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">11</span><span class="sc">:</span>               2f               8ff<span class="st">'L 8aa'</span></span>
<span id="cb39-19"><a href="#cb39-19" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">12</span><span class="sc">:</span>                .               8cc<span class="st">'J 8ff'</span></span>
<span id="cb39-20"><a href="#cb39-20" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">13</span><span class="sc">:</span>                .               8ff<span class="st">'L 8aa'</span></span>
<span id="cb39-21"><a href="#cb39-21" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">14</span><span class="sc">:</span>                .              8aa<span class="st">'J 8ccc'</span></span>
<span id="cb39-22"><a href="#cb39-22" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">15</span><span class="sc">:</span>               <span class="er">=</span><span class="dv">2</span>                       <span class="ot">=</span><span class="dv">2</span></span>
<span id="cb39-23"><a href="#cb39-23" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">16</span><span class="sc">:</span>    (4c<span class="sc">-</span>4f) 4e 4g           (4gg<span class="sc">-</span>4ff) 4bb<span class="sc">-</span></span>
<span id="cb39-24"><a href="#cb39-24" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">17</span><span class="sc">:</span>                .                      4aa</span>
<span id="cb39-25"><a href="#cb39-25" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">18</span><span class="sc">:</span>               <span class="er">=</span><span class="dv">3</span>                       <span class="ot">=</span><span class="dv">3</span></span>
<span id="cb39-26"><a href="#cb39-26" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">19</span><span class="sc">:</span>               4c               8ee<span class="st">'L 8gg'</span></span>
<span id="cb39-27"><a href="#cb39-27" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">20</span><span class="sc">:</span>                .               8dd<span class="st">'J 8ff'</span></span>
<span id="cb39-28"><a href="#cb39-28" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">21</span><span class="sc">:</span>               4c               8cc<span class="st">'L 8ee'</span></span>
<span id="cb39-29"><a href="#cb39-29" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">22</span><span class="sc">:</span>                .               8dd<span class="st">'J 8ff'</span></span>
<span id="cb39-30"><a href="#cb39-30" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">23</span><span class="sc">:</span>               <span class="er">=</span><span class="dv">4</span>                       <span class="ot">=</span><span class="dv">4</span></span>
<span id="cb39-31"><a href="#cb39-31" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">24</span><span class="sc">:</span>               8c                  8ee 8gg</span>
<span id="cb39-32"><a href="#cb39-32" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">25</span><span class="sc">:</span>               8r                       8r</span>
<span id="cb39-33"><a href="#cb39-33" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">26</span><span class="sc">:</span>               4r                 4aa 4ccc</span>
<span id="cb39-34"><a href="#cb39-34" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">27</span><span class="sc">:</span>               <span class="er">=</span><span class="dv">5</span>                       <span class="ot">=</span><span class="dv">5</span></span>
<span id="cb39-35"><a href="#cb39-35" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">28</span><span class="sc">:</span>               2f               8ff<span class="st">'L 8aa'</span></span>
<span id="cb39-36"><a href="#cb39-36" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">29</span><span class="sc">:</span>                .               8cc<span class="st">'J 8ff'</span></span>
<span id="cb39-37"><a href="#cb39-37" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">30</span><span class="sc">:</span>                .               8ff<span class="st">'L 8aa'</span></span>
<span id="cb39-38"><a href="#cb39-38" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">31</span><span class="sc">:</span>                .              8aa<span class="st">'J 8ccc'</span></span>
<span id="cb39-39"><a href="#cb39-39" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">32</span><span class="sc">:</span>               <span class="er">=</span><span class="dv">6</span>                       <span class="ot">=</span><span class="dv">6</span></span>
<span id="cb39-40"><a href="#cb39-40" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">33</span><span class="sc">:</span>    (4c<span class="sc">-</span>4f) 4e 4g           (4gg<span class="sc">-</span>4ff) 4bb<span class="sc">-</span></span>
<span id="cb39-41"><a href="#cb39-41" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">34</span><span class="sc">:</span>               4a                      4aa</span>
<span id="cb39-42"><a href="#cb39-42" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">35</span><span class="sc">:</span>               <span class="er">=</span><span class="dv">7</span>                       <span class="ot">=</span><span class="dv">7</span></span>
<span id="cb39-43"><a href="#cb39-43" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">36</span><span class="sc">:</span>             8B<span class="sc">-</span>L                 8ddL 8gg</span>
<span id="cb39-44"><a href="#cb39-44" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">37</span><span class="sc">:</span>             8B<span class="sc">-</span>J                 8ddJ 8gg</span>
<span id="cb39-45"><a href="#cb39-45" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">38</span><span class="sc">:</span>              8cL  (8b<span class="sc">-</span>L<span class="sc">-</span>16b<span class="sc">-</span>L<span class="sc">-</span>16eeJJ) 8ee</span>
<span id="cb39-46"><a href="#cb39-46" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">39</span><span class="sc">:</span>              8cJ                     16dd</span>
<span id="cb39-47"><a href="#cb39-47" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">40</span><span class="sc">:</span>                .                        .</span>
<span id="cb39-48"><a href="#cb39-48" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="dv">41-45</span><span class="sc">:::</span><span class="er">:::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb39-49"><a href="#cb39-49" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############ ^^^ B075_00_01_a.krn ^^^ #############</span></span>
<span id="cb39-50"><a href="#cb39-50" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb39-51"><a href="#cb39-51" tabindex="-1"></a><span class="er">&gt;</span>           (<span class="dv">10</span> more pieces...)</span>
<span id="cb39-52"><a href="#cb39-52" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb39-53"><a href="#cb39-53" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############ vvv B075_01_06_a.krn vvv #############</span></span>
<span id="cb39-54"><a href="#cb39-54" tabindex="-1"></a><span class="er">&gt;</span>     <span class="dv">1-46</span><span class="sc">:::</span><span class="er">:::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb39-55"><a href="#cb39-55" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">47</span><span class="sc">:</span>        8c 8g 8b<span class="sc">-</span>                      16r</span>
<span id="cb39-56"><a href="#cb39-56" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">48</span><span class="sc">:</span>                .      (16bLL<span class="sc">-</span>16dd<span class="sc">-</span>16ccJJ)</span>
<span id="cb39-57"><a href="#cb39-57" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">49</span><span class="sc">:</span>               8r                        .</span>
<span id="cb39-58"><a href="#cb39-58" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">50</span><span class="sc">:</span>                .                        .</span>
<span id="cb39-59"><a href="#cb39-59" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">51</span><span class="sc">:</span>        8c 8g 8b<span class="sc">-</span>                      16r</span>
<span id="cb39-60"><a href="#cb39-60" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">52</span><span class="sc">:</span>                .    (16dd<span class="co">#LL-16ff-16eeJJ)</span></span>
<span id="cb39-61"><a href="#cb39-61" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">53</span><span class="sc">:</span>               8r                        .</span>
<span id="cb39-62"><a href="#cb39-62" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">54</span><span class="sc">:</span>                .                        .</span>
<span id="cb39-63"><a href="#cb39-63" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">55</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">95</span>                      <span class="ot">=</span><span class="dv">95</span></span>
<span id="cb39-64"><a href="#cb39-64" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">56</span><span class="sc">:</span>            8f 8a                      16r</span>
<span id="cb39-65"><a href="#cb39-65" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">57</span><span class="sc">:</span>                .     (16eeLL<span class="sc">-</span>16gg<span class="sc">-</span>16ffJJ)</span>
<span id="cb39-66"><a href="#cb39-66" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">58</span><span class="sc">:</span>               8r                        .</span>
<span id="cb39-67"><a href="#cb39-67" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">59</span><span class="sc">:</span>                .                        .</span>
<span id="cb39-68"><a href="#cb39-68" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">60</span><span class="sc">:</span>         8d 8f 8a                      16r</span>
<span id="cb39-69"><a href="#cb39-69" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">61</span><span class="sc">:</span>                .                  16gg<span class="co">#LL</span></span>
<span id="cb39-70"><a href="#cb39-70" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">62</span><span class="sc">:</span>               8r                     16aa</span>
<span id="cb39-71"><a href="#cb39-71" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">63</span><span class="sc">:</span>                .                   16ffJJ</span>
<span id="cb39-72"><a href="#cb39-72" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">64</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">96</span>                      <span class="ot">=</span><span class="dv">96</span></span>
<span id="cb39-73"><a href="#cb39-73" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">65</span><span class="sc">:</span>        8B<span class="sc">-</span> 8d 8g                      16r</span>
<span id="cb39-74"><a href="#cb39-74" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">66</span><span class="sc">:</span>                .  (16ccc<span class="co">#LL-16ddd-16ggJJ)</span></span>
<span id="cb39-75"><a href="#cb39-75" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">67</span><span class="sc">:</span>               8r                        .</span>
<span id="cb39-76"><a href="#cb39-76" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">68</span><span class="sc">:</span>                .                        .</span>
<span id="cb39-77"><a href="#cb39-77" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">69</span><span class="sc">:</span>        8c 8g 8b<span class="sc">-</span>                      16r</span>
<span id="cb39-78"><a href="#cb39-78" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">70</span><span class="sc">:</span>                .    (16aaLL<span class="sc">-</span>16bb<span class="sc">--</span>16eeJJ)</span>
<span id="cb39-79"><a href="#cb39-79" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">71</span><span class="sc">:</span>               8r                        .</span>
<span id="cb39-80"><a href="#cb39-80" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">72</span><span class="sc">:</span>                .                        .</span>
<span id="cb39-81"><a href="#cb39-81" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">73</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">97</span>                      <span class="ot">=</span><span class="dv">97</span></span>
<span id="cb39-82"><a href="#cb39-82" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">74</span><span class="sc">:</span>            8f 8a                      16r</span>
<span id="cb39-83"><a href="#cb39-83" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">75</span><span class="sc">:</span>                .     (16eeLL<span class="sc">-</span>16ff<span class="sc">-</span>16ccJJ)</span>
<span id="cb39-84"><a href="#cb39-84" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">76</span><span class="sc">:</span>               8r                        .</span>
<span id="cb39-85"><a href="#cb39-85" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">77</span><span class="sc">:</span>                .                        .</span>
<span id="cb39-86"><a href="#cb39-86" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">78</span><span class="sc">:</span>          <span class="er">*</span>clefF4                        <span class="sc">*</span></span>
<span id="cb39-87"><a href="#cb39-87" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">79</span><span class="sc">:</span>            8C 8E                      16r</span>
<span id="cb39-88"><a href="#cb39-88" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">80</span><span class="sc">:</span>                .       (16aLL<span class="sc">-</span>16b<span class="sc">--</span>16gJJ)</span>
<span id="cb39-89"><a href="#cb39-89" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">81</span><span class="sc">:</span>               8r                        .</span>
<span id="cb39-90"><a href="#cb39-90" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">82</span><span class="sc">:</span>                .                        .</span>
<span id="cb39-91"><a href="#cb39-91" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">83</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">98</span>                      <span class="ot">=</span><span class="dv">98</span></span>
<span id="cb39-92"><a href="#cb39-92" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">84</span><span class="sc">:</span>           8FF 8F                       8f</span>
<span id="cb39-93"><a href="#cb39-93" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">85</span><span class="sc">:</span>               8r                       8r</span>
<span id="cb39-94"><a href="#cb39-94" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">86</span><span class="sc">:</span>               <span class="er">*</span><span class="sc">-</span>                       <span class="er">*</span><span class="sc">-</span></span>
<span id="cb39-95"><a href="#cb39-95" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############ ^^^ B075_01_06_a.krn ^^^ #############</span></span>
<span id="cb39-96"><a href="#cb39-96" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb39-97"><a href="#cb39-97" tabindex="-1"></a><span class="er">&gt;</span>       humdrumR corpus of twelve pieces.</span>
<span id="cb39-98"><a href="#cb39-98" tabindex="-1"></a><span class="sc">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb39-99"><a href="#cb39-99" tabindex="-1"></a><span class="er">&gt;</span>                Token   <span class="sc">::</span> character</span>
<span id="cb39-100"><a href="#cb39-100" tabindex="-1"></a><span class="sc">&gt;</span>               <span class="er">*</span>Result1 <span class="sc">::</span> character</span></code></pre></div>
<p>The slurs are collapsed (as before) for the first stop, and the other
stops are simply left as is.</p>
<!--

How would be modify this to interpret slurs relative to all stops, and use contextual windows within those stops?
This is mega advanced humdrum$_{\mathbb{R}}$!

The first thing we'd need to do is to copy slur information into the other stops.
Let's first identify slur open and closes and save them into new fields:


```r
within(beethoven, 
       Open <- Token %~% '(',
       Close <- Token %~% ')') -> beethoven

```

Let's now copy those slurs into multistops in the same record and spine:


```r
beethoven <- within(beethoven, fill = any(Open) -> Open, fill = any(Close) -> Close, by = list(File, Record, Spine))
```

-->
</div>
</div>
<div class="section level4">
<h4 id="nested-windows">Nested windows<a class="anchor" aria-label="anchor" href="#nested-windows"></a>
</h4>
<p>In some cases, we might have contextual windows “nested” inside each
other. For example, slurs in sheet music might overlap to represent fine
gradiations in articulation. The <code><a href="../reference/context.html">context()</a></code> funciton can
handle nested windows by setting <code>overlap = 'nested'</code>. Here
is an example file we can experiment with:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a>nested <span class="ot">&lt;-</span> <span class="fu">readHumdrum</span>(humdrumRroot, <span class="st">'examples/Phrases.krn'</span>)</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a>nested</span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a><span class="sc">&gt;</span>     vvv Phrases.krn vvv </span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">1</span><span class="sc">:</span>    <span class="er">**</span>kern</span>
<span id="cb40-5"><a href="#cb40-5" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">2</span><span class="sc">:</span>       <span class="er">*</span>A<span class="sc">:</span></span>
<span id="cb40-6"><a href="#cb40-6" tabindex="-1"></a><span class="er">&gt;</span>       <span class="dv">3</span><span class="sc">:</span>     <span class="er">*</span>M4<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb40-7"><a href="#cb40-7" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">4</span><span class="sc">:</span>       (4e</span>
<span id="cb40-8"><a href="#cb40-8" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">5</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">1</span></span>
<span id="cb40-9"><a href="#cb40-9" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">6</span><span class="sc">:</span>        4a</span>
<span id="cb40-10"><a href="#cb40-10" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">7</span><span class="sc">:</span>        8b</span>
<span id="cb40-11"><a href="#cb40-11" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">8</span><span class="sc">:</span>      8cc<span class="co">#</span></span>
<span id="cb40-12"><a href="#cb40-12" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">9</span><span class="sc">:</span>      (8dd</span>
<span id="cb40-13"><a href="#cb40-13" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">10</span><span class="sc">:</span>     8cc<span class="co">#)</span></span>
<span id="cb40-14"><a href="#cb40-14" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">11</span><span class="sc">:</span>     (8cc<span class="co">#</span></span>
<span id="cb40-15"><a href="#cb40-15" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">12</span><span class="sc">:</span>       8b)</span>
<span id="cb40-16"><a href="#cb40-16" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">13</span><span class="sc">:</span>        <span class="er">=</span><span class="dv">2</span></span>
<span id="cb40-17"><a href="#cb40-17" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">14</span><span class="sc">:</span>       (2b</span>
<span id="cb40-18"><a href="#cb40-18" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">15</span><span class="sc">:</span>      4a))</span>
<span id="cb40-19"><a href="#cb40-19" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">16</span><span class="sc">:</span>      ((4e</span>
<span id="cb40-20"><a href="#cb40-20" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">17</span><span class="sc">:</span>         <span class="er">=</span></span>
<span id="cb40-21"><a href="#cb40-21" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">18</span><span class="sc">:</span>        4a</span>
<span id="cb40-22"><a href="#cb40-22" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">19</span><span class="sc">:</span>        8b</span>
<span id="cb40-23"><a href="#cb40-23" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">20</span><span class="sc">:</span>      8cc<span class="co">#</span></span>
<span id="cb40-24"><a href="#cb40-24" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">21</span><span class="sc">:</span>      4dd)</span>
<span id="cb40-25"><a href="#cb40-25" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">22</span><span class="sc">:</span>    ((8dd<span class="co">#</span></span>
<span id="cb40-26"><a href="#cb40-26" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">23</span><span class="sc">:</span>     8ff<span class="co">#)</span></span>
<span id="cb40-27"><a href="#cb40-27" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">24</span><span class="sc">:</span>     2ee))</span>
<span id="cb40-28"><a href="#cb40-28" tabindex="-1"></a><span class="sc">&gt;</span>      <span class="dv">25</span><span class="sc">:</span>        <span class="er">==</span></span>
<span id="cb40-29"><a href="#cb40-29" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">26</span><span class="sc">:</span>        <span class="er">*</span><span class="sc">-</span></span>
<span id="cb40-30"><a href="#cb40-30" tabindex="-1"></a><span class="er">&gt;</span>     <span class="er">^^^</span> Phrases.krn <span class="sc">^</span><span class="er">^^</span> </span>
<span id="cb40-31"><a href="#cb40-31" tabindex="-1"></a><span class="er">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb40-32"><a href="#cb40-32" tabindex="-1"></a><span class="er">&gt;</span>               <span class="er">*</span>Token <span class="sc">::</span> character</span></code></pre></div>
<p>We’ve got nested slurs. Let’s try
<code>context(..., overlap = 'nested')</code>:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="fu">with</span>(nested, <span class="fu">paste</span>(Token, <span class="at">collapse =</span> <span class="st">'-'</span>), <span class="fu">context</span>(<span class="st">'('</span>, <span class="st">')'</span>, <span class="at">overlap =</span> <span class="st">'nested'</span>))</span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a><span class="sc">&gt;</span>                                                 <span class="dv">1</span> </span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="st">"(4e-4a-8b-8cc#-(8dd-8cc#)-(8cc#-8b)-(2b-4a))"</span> </span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a><span class="sc">&gt;</span>                                                 <span class="dv">2</span> </span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a><span class="sc">&gt;</span>                                      <span class="st">"(8dd-8cc#)"</span> </span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a><span class="sc">&gt;</span>                                                 <span class="dv">3</span> </span>
<span id="cb41-8"><a href="#cb41-8" tabindex="-1"></a><span class="sc">&gt;</span>                                       <span class="st">"(8cc#-8b)"</span> </span>
<span id="cb41-9"><a href="#cb41-9" tabindex="-1"></a><span class="sc">&gt;</span>                                                 <span class="dv">4</span> </span>
<span id="cb41-10"><a href="#cb41-10" tabindex="-1"></a><span class="sc">&gt;</span>                                        <span class="st">"(2b-4a))"</span> </span>
<span id="cb41-11"><a href="#cb41-11" tabindex="-1"></a><span class="sc">&gt;</span>                                                 <span class="dv">5</span> </span>
<span id="cb41-12"><a href="#cb41-12" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="st">"((4e-4a-8b-8cc#-4dd)-((8dd#-8ff#)-2ee))"</span> </span>
<span id="cb41-13"><a href="#cb41-13" tabindex="-1"></a><span class="sc">&gt;</span>                                                 <span class="dv">6</span> </span>
<span id="cb41-14"><a href="#cb41-14" tabindex="-1"></a><span class="sc">&gt;</span>                            <span class="st">"((4e-4a-8b-8cc#-4dd)"</span> </span>
<span id="cb41-15"><a href="#cb41-15" tabindex="-1"></a><span class="sc">&gt;</span>                                                 <span class="dv">7</span> </span>
<span id="cb41-16"><a href="#cb41-16" tabindex="-1"></a><span class="sc">&gt;</span>                              <span class="st">"((8dd#-8ff#)-2ee))"</span> </span>
<span id="cb41-17"><a href="#cb41-17" tabindex="-1"></a><span class="sc">&gt;</span>                                                 <span class="dv">8</span> </span>
<span id="cb41-18"><a href="#cb41-18" tabindex="-1"></a><span class="sc">&gt;</span>                                    <span class="st">"((8dd#-8ff#)"</span></span></code></pre></div>
<p>Very good! We get all our windows, including the nested ones. (Look
how the result differs if you set <code>overlap = 'paired'</code>.) But
what if we only want the topmost or bottommost slurs? Use the
<code>depth</code> argument: <code>depth</code> should be one or more
non-zero integers, indicating how deeply nested you want your windows to
be. <code>depth = 1</code> would be the “top” (unnested) layer,
<code>2</code> the next-most nested, etc. You can also use negative
numbers to start from the most nested and work backwards:
<code>-1</code> is the most deeply nested layer, <code>-2</code> the
second-most deeply nested, etc. Finally, you can specify more than one
depths by making depth vector, like <code>depth = c(1,2)</code>.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a></span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a><span class="fu">with</span>(nested, <span class="fu">paste</span>(Token, <span class="at">collapse =</span> <span class="st">'-'</span>), <span class="fu">context</span>(<span class="st">'('</span>, <span class="st">')'</span>, <span class="at">overlap =</span> <span class="st">'nested'</span>, <span class="at">depth =</span> <span class="dv">1</span>))</span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a><span class="sc">&gt;</span>                                                 <span class="dv">1</span> </span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="st">"(4e-4a-8b-8cc#-(8dd-8cc#)-(8cc#-8b)-(2b-4a))"</span> </span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a><span class="sc">&gt;</span>                                                 <span class="dv">2</span> </span>
<span id="cb42-6"><a href="#cb42-6" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="st">"((4e-4a-8b-8cc#-4dd)-((8dd#-8ff#)-2ee))"</span></span>
<span id="cb42-7"><a href="#cb42-7" tabindex="-1"></a></span>
<span id="cb42-8"><a href="#cb42-8" tabindex="-1"></a><span class="fu">with</span>(nested, <span class="fu">paste</span>(Token, <span class="at">collapse =</span> <span class="st">'-'</span>), <span class="fu">context</span>(<span class="st">'('</span>, <span class="st">')'</span>, <span class="at">overlap =</span> <span class="st">'nested'</span>, <span class="at">depth =</span> <span class="dv">2</span>))</span>
<span id="cb42-9"><a href="#cb42-9" tabindex="-1"></a><span class="sc">&gt;</span>                         <span class="dv">1</span>                      <span class="dv">2</span>                      <span class="dv">3</span> </span>
<span id="cb42-10"><a href="#cb42-10" tabindex="-1"></a><span class="sc">&gt;</span>              <span class="st">"(8dd-8cc#)"</span>            <span class="st">"(8cc#-8b)"</span>             <span class="st">"(2b-4a))"</span> </span>
<span id="cb42-11"><a href="#cb42-11" tabindex="-1"></a><span class="sc">&gt;</span>                         <span class="dv">4</span>                      <span class="dv">5</span> </span>
<span id="cb42-12"><a href="#cb42-12" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="st">"((4e-4a-8b-8cc#-4dd)"</span>   <span class="st">"((8dd#-8ff#)-2ee))"</span></span>
<span id="cb42-13"><a href="#cb42-13" tabindex="-1"></a></span>
<span id="cb42-14"><a href="#cb42-14" tabindex="-1"></a><span class="fu">with</span>(nested, <span class="fu">paste</span>(Token, <span class="at">collapse =</span> <span class="st">'-'</span>), <span class="fu">context</span>(<span class="st">'('</span>, <span class="st">')'</span>, <span class="at">overlap =</span> <span class="st">'nested'</span>, <span class="at">depth =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>))</span>
<span id="cb42-15"><a href="#cb42-15" tabindex="-1"></a><span class="sc">&gt;</span>                         <span class="dv">1</span>                      <span class="dv">2</span>                      <span class="dv">3</span> </span>
<span id="cb42-16"><a href="#cb42-16" tabindex="-1"></a><span class="sc">&gt;</span>              <span class="st">"(8dd-8cc#)"</span>            <span class="st">"(8cc#-8b)"</span>             <span class="st">"(2b-4a))"</span> </span>
<span id="cb42-17"><a href="#cb42-17" tabindex="-1"></a><span class="sc">&gt;</span>                         <span class="dv">4</span>                      <span class="dv">5</span>                      <span class="dv">6</span> </span>
<span id="cb42-18"><a href="#cb42-18" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="st">"((4e-4a-8b-8cc#-4dd)"</span>   <span class="st">"((8dd#-8ff#)-2ee))"</span>         <span class="st">"((8dd#-8ff#)"</span></span>
<span id="cb42-19"><a href="#cb42-19" tabindex="-1"></a></span>
<span id="cb42-20"><a href="#cb42-20" tabindex="-1"></a><span class="fu">with</span>(nested, <span class="fu">paste</span>(Token, <span class="at">collapse =</span> <span class="st">'-'</span>), <span class="fu">context</span>(<span class="st">'('</span>, <span class="st">')'</span>, <span class="at">overlap =</span> <span class="st">'nested'</span>, <span class="at">depth =</span> <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb42-21"><a href="#cb42-21" tabindex="-1"></a><span class="sc">&gt;</span>                 <span class="dv">1</span> </span>
<span id="cb42-22"><a href="#cb42-22" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="st">"((8dd#-8ff#)"</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="n-grams">N-grams<a class="anchor" aria-label="anchor" href="#n-grams"></a>
</h2>
<p>In the previous section, we saw that the <code><a href="../reference/context.html">context()</a></code>
function can be used (inside <code><a href="../reference/withinHumdrum.html">within.humdrumR()</a></code>) to create
n-grams (and so much more). Humdrum<span class="math inline">\(_{\mathbb{R}}\)</span> also offers a different,
lag-based, approach to doing n-gram analyses. The main advante of this
approach is that it can be much faster than applying
<code><a href="../reference/context.html">context()</a></code>—for large datasets, you might find
<code><a href="../reference/context.html">context()</a></code> takes a while. The lag-based approach is more
fully vectorized than <code><a href="../reference/context.html">context()</a></code> which makes it extremely
fast, but also less general purpose. Depending on what you are doing
with you n-grams, <code><a href="../reference/context.html">context()</a></code> may be the only way that
works—basically, if you want to apply an expression separately to each
every n-gram, you need to use <code><a href="../reference/context.html">context()</a></code>.</p>
<p>The idea of lag-based n-grams can be demonstrated quite simply using
the <code>letters</code> vector (built in to R) and the
<code>lag(n)</code> command. The <code>lag(n)</code> command “shifts” a
vector over by <code>n</code> indices:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="fu">cbind</span>(letters, <span class="fu">lag</span>(letters), <span class="fu">lag</span>(letters, <span class="at">n =</span> <span class="dv">2</span>))</span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a><span class="sc">&gt;</span>          letters        </span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">1</span>,] <span class="st">"a"</span>     <span class="cn">NA</span>  <span class="cn">NA</span> </span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">2</span>,] <span class="st">"b"</span>     <span class="st">"a"</span> <span class="cn">NA</span> </span>
<span id="cb43-5"><a href="#cb43-5" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">3</span>,] <span class="st">"c"</span>     <span class="st">"b"</span> <span class="st">"a"</span></span>
<span id="cb43-6"><a href="#cb43-6" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">4</span>,] <span class="st">"d"</span>     <span class="st">"c"</span> <span class="st">"b"</span></span>
<span id="cb43-7"><a href="#cb43-7" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">5</span>,] <span class="st">"e"</span>     <span class="st">"d"</span> <span class="st">"c"</span></span>
<span id="cb43-8"><a href="#cb43-8" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">6</span>,] <span class="st">"f"</span>     <span class="st">"e"</span> <span class="st">"d"</span></span>
<span id="cb43-9"><a href="#cb43-9" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">7</span>,] <span class="st">"g"</span>     <span class="st">"f"</span> <span class="st">"e"</span></span>
<span id="cb43-10"><a href="#cb43-10" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">8</span>,] <span class="st">"h"</span>     <span class="st">"g"</span> <span class="st">"f"</span></span>
<span id="cb43-11"><a href="#cb43-11" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">9</span>,] <span class="st">"i"</span>     <span class="st">"h"</span> <span class="st">"g"</span></span>
<span id="cb43-12"><a href="#cb43-12" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">10</span>,] <span class="st">"j"</span>     <span class="st">"i"</span> <span class="st">"h"</span></span>
<span id="cb43-13"><a href="#cb43-13" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">11</span>,] <span class="st">"k"</span>     <span class="st">"j"</span> <span class="st">"i"</span></span>
<span id="cb43-14"><a href="#cb43-14" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">12</span>,] <span class="st">"l"</span>     <span class="st">"k"</span> <span class="st">"j"</span></span>
<span id="cb43-15"><a href="#cb43-15" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">13</span>,] <span class="st">"m"</span>     <span class="st">"l"</span> <span class="st">"k"</span></span>
<span id="cb43-16"><a href="#cb43-16" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">14</span>,] <span class="st">"n"</span>     <span class="st">"m"</span> <span class="st">"l"</span></span>
<span id="cb43-17"><a href="#cb43-17" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">15</span>,] <span class="st">"o"</span>     <span class="st">"n"</span> <span class="st">"m"</span></span>
<span id="cb43-18"><a href="#cb43-18" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">16</span>,] <span class="st">"p"</span>     <span class="st">"o"</span> <span class="st">"n"</span></span>
<span id="cb43-19"><a href="#cb43-19" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">17</span>,] <span class="st">"q"</span>     <span class="st">"p"</span> <span class="st">"o"</span></span>
<span id="cb43-20"><a href="#cb43-20" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">18</span>,] <span class="st">"r"</span>     <span class="st">"q"</span> <span class="st">"p"</span></span>
<span id="cb43-21"><a href="#cb43-21" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">19</span>,] <span class="st">"s"</span>     <span class="st">"r"</span> <span class="st">"q"</span></span>
<span id="cb43-22"><a href="#cb43-22" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">20</span>,] <span class="st">"t"</span>     <span class="st">"s"</span> <span class="st">"r"</span></span>
<span id="cb43-23"><a href="#cb43-23" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">21</span>,] <span class="st">"u"</span>     <span class="st">"t"</span> <span class="st">"s"</span></span>
<span id="cb43-24"><a href="#cb43-24" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">22</span>,] <span class="st">"v"</span>     <span class="st">"u"</span> <span class="st">"t"</span></span>
<span id="cb43-25"><a href="#cb43-25" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">23</span>,] <span class="st">"w"</span>     <span class="st">"v"</span> <span class="st">"u"</span></span>
<span id="cb43-26"><a href="#cb43-26" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">24</span>,] <span class="st">"x"</span>     <span class="st">"w"</span> <span class="st">"v"</span></span>
<span id="cb43-27"><a href="#cb43-27" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">25</span>,] <span class="st">"y"</span>     <span class="st">"x"</span> <span class="st">"w"</span></span>
<span id="cb43-28"><a href="#cb43-28" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">26</span>,] <span class="st">"z"</span>     <span class="st">"y"</span> <span class="st">"x"</span></span></code></pre></div>
<p>What happened here? We give the <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind()</a></code> function three
separate arguments: 1) the normal <code>letters</code> vector; 2)
<code>letters</code> lagged by 1; 3) <code>letters</code> lagged by 3.
These three arguments are bound together into a three-column
<code>matrix</code>. We can do the same thing with
<code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste()</a></code>:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="fu">paste</span>(letters, <span class="fu">lag</span>(letters), <span class="fu">lag</span>(letters, <span class="at">n =</span> <span class="dv">2</span>))</span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">1</span>] <span class="st">"a NA NA"</span> <span class="st">"b a NA"</span>  <span class="st">"c b a"</span>   <span class="st">"d c b"</span>   <span class="st">"e d c"</span>   <span class="st">"f e d"</span>   <span class="st">"g f e"</span>  </span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="sc">&gt;</span>     [<span class="dv">8</span>] <span class="st">"h g f"</span>   <span class="st">"i h g"</span>   <span class="st">"j i h"</span>   <span class="st">"k j i"</span>   <span class="st">"l k j"</span>   <span class="st">"m l k"</span>   <span class="st">"n m l"</span>  </span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">15</span>] <span class="st">"o n m"</span>   <span class="st">"p o n"</span>   <span class="st">"q p o"</span>   <span class="st">"r q p"</span>   <span class="st">"s r q"</span>   <span class="st">"t s r"</span>   <span class="st">"u t s"</span>  </span>
<span id="cb44-5"><a href="#cb44-5" tabindex="-1"></a><span class="sc">&gt;</span>    [<span class="dv">22</span>] <span class="st">"v u t"</span>   <span class="st">"w v u"</span>   <span class="st">"x w v"</span>   <span class="st">"y x w"</span>   <span class="st">"z y x"</span></span></code></pre></div>
<p>We made three-grams! This approach, if used with fully-vectorized
functions will be extremely fast, even for large datasets.</p>
<div class="section level3">
<h3 id="lag-within-humdrumr">Lag within humdrumR<a class="anchor" aria-label="anchor" href="#lag-within-humdrumr"></a>
</h3>
<p>The <code>with</code>/<code><a href="../reference/withinHumdrum.html">within.humdrumR()</a></code> functions allow
you to create lagged vectors in a special, concise way. Let’s work again
with the chorales, using just simple <code><a href="../reference/kern.html">kern()</a></code> data:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chorales</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readHumdrum.html">readHumdrum</a></span><span class="op">(</span><span class="va">humdrumRroot</span>, <span class="st">'HumdrumData/BachChorales/.*krn'</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/withinHumdrum.html">within</a></span><span class="op">(</span><span class="va">chorales</span>, <span class="fu"><a href="../reference/kern.html">kern</a></span><span class="op">(</span><span class="va">Token</span>, simple <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Kern</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">chorales</span></span></code></pre></div>
<p>When using <code>with</code>/<code><a href="../reference/withinHumdrum.html">within.humdrumR()</a></code>, instead
of writing <code>lag(x, n = 1)</code>, we can write
<code>x[lag = 1]</code>. If we paste a field (like <code>Kern</code>) to
itself <em>lagged</em> like this:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="fu">within</span>(chorales, <span class="fu">paste</span>(Kern, Kern[<span class="at">lag =</span> <span class="dv">1</span>], <span class="at">sep =</span> <span class="st">' '</span>))</span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# vvv chor001.krn vvv #############################</span></span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb46-5"><a href="#cb46-5" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb46-6"><a href="#cb46-6" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of My Heart</span>
<span id="cb46-7"><a href="#cb46-7" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb46-8"><a href="#cb46-8" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb46-9"><a href="#cb46-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb46-10"><a href="#cb46-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>          <span class="er">**</span>kern        <span class="sc">**</span>kern        <span class="sc">**</span>kern        <span class="sc">**</span>kern</span>
<span id="cb46-11"><a href="#cb46-11" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>          <span class="er">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox</span>
<span id="cb46-12"><a href="#cb46-12" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>          <span class="er">*</span>Ibass       <span class="sc">*</span>Itenor        <span class="sc">*</span>Ialto       <span class="sc">*</span>Isoprn</span>
<span id="cb46-13"><a href="#cb46-13" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>         <span class="er">*</span>I<span class="st">"Bass      *I"</span>Tenor       <span class="sc">*</span>I<span class="st">"Alto    *I"</span>Soprano</span>
<span id="cb46-14"><a href="#cb46-14" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">12</span><span class="sc">:</span>       <span class="er">*&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]</span>
<span id="cb46-15"><a href="#cb46-15" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">13</span><span class="sc">:</span>    <span class="er">*&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]</span>
<span id="cb46-16"><a href="#cb46-16" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">14</span><span class="sc">:</span>             <span class="er">*&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A</span>
<span id="cb46-17"><a href="#cb46-17" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">15</span><span class="sc">:</span>         <span class="er">*</span>clefF4      <span class="sc">*</span>clefGv2       <span class="sc">*</span>clefG2       <span class="sc">*</span>clefG2</span>
<span id="cb46-18"><a href="#cb46-18" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">16</span><span class="sc">:</span>          <span class="er">*</span>k[f<span class="co">#]        *k[f#]        *k[f#]        *k[f#]</span></span>
<span id="cb46-19"><a href="#cb46-19" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">17</span><span class="sc">:</span>             <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span></span>
<span id="cb46-20"><a href="#cb46-20" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">18</span><span class="sc">:</span>           <span class="er">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb46-21"><a href="#cb46-21" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">19</span><span class="sc">:</span>          <span class="er">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100</span>
<span id="cb46-22"><a href="#cb46-22" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">20</span><span class="sc">:</span>            g <span class="cn">NA</span>          b <span class="cn">NA</span>          d <span class="cn">NA</span>          g <span class="cn">NA</span></span>
<span id="cb46-23"><a href="#cb46-23" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">21</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span></span>
<span id="cb46-24"><a href="#cb46-24" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">22</span><span class="sc">:</span>             g g           b b           d d           g g</span>
<span id="cb46-25"><a href="#cb46-25" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">23</span><span class="sc">:</span>             e g           c b           e d             .</span>
<span id="cb46-26"><a href="#cb46-26" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">24</span><span class="sc">:</span>               .           b c             .             .</span>
<span id="cb46-27"><a href="#cb46-27" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">25</span><span class="sc">:</span>            f<span class="co"># e           a b           d e           d g</span></span>
<span id="cb46-28"><a href="#cb46-28" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">26</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span></span>
<span id="cb46-29"><a href="#cb46-29" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">27</span><span class="sc">:</span>            g f<span class="co">#           g a           d d           b d</span></span>
<span id="cb46-30"><a href="#cb46-30" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">28</span><span class="sc">:</span>             d g          f<span class="co"># g             .             .</span></span>
<span id="cb46-31"><a href="#cb46-31" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">29</span><span class="sc">:</span>               .             .             .           a b</span>
<span id="cb46-32"><a href="#cb46-32" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">30</span><span class="sc">:</span>             e d          g f<span class="co">#           b d           g a</span></span>
<span id="cb46-33"><a href="#cb46-33" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">31</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span></span>
<span id="cb46-34"><a href="#cb46-34" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">32</span><span class="sc">:</span>             c e           c g           e b           g g</span>
<span id="cb46-35"><a href="#cb46-35" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">33</span><span class="sc">:</span>               .           b c           d e             .</span>
<span id="cb46-36"><a href="#cb46-36" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">34</span><span class="sc">:</span>             b c           c b           e d             .</span>
<span id="cb46-37"><a href="#cb46-37" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">35</span><span class="sc">:</span>             a b             .          f<span class="co"># e           a g</span></span>
<span id="cb46-38"><a href="#cb46-38" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">36</span><span class="sc">:</span>             g a           d c          g f<span class="co">#           b a</span></span>
<span id="cb46-39"><a href="#cb46-39" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">37</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span></span>
<span id="cb46-40"><a href="#cb46-40" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">38</span><span class="sc">:</span>             d g           d d          f<span class="co"># g           a b</span></span>
<span id="cb46-41"><a href="#cb46-41" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">39</span><span class="sc">:</span>             g d           d d          g f<span class="co">#           b a</span></span>
<span id="cb46-42"><a href="#cb46-42" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">40</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span></span>
<span id="cb46-43"><a href="#cb46-43" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="dv">41-133</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb46-44"><a href="#cb46-44" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# ^^^ chor001.krn ^^^ #############################</span></span>
<span id="cb46-45"><a href="#cb46-45" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb46-46"><a href="#cb46-46" tabindex="-1"></a><span class="er">&gt;</span>           (<span class="dv">8</span> more pieces...)</span>
<span id="cb46-47"><a href="#cb46-47" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb46-48"><a href="#cb46-48" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# vvv chor010.krn vvv #############################</span></span>
<span id="cb46-49"><a href="#cb46-49" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">1-60</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb46-50"><a href="#cb46-50" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">61</span><span class="sc">:</span>             a e           c b          e g<span class="co">#           a b</span></span>
<span id="cb46-51"><a href="#cb46-51" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">62</span><span class="sc">:</span>             a a           e c           a e           c a</span>
<span id="cb46-52"><a href="#cb46-52" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">63</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span></span>
<span id="cb46-53"><a href="#cb46-53" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">64</span><span class="sc">:</span>             e a           e e           g a           b c</span>
<span id="cb46-54"><a href="#cb46-54" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">65</span><span class="sc">:</span>             d e           e e           g g           c b</span>
<span id="cb46-55"><a href="#cb46-55" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">66</span><span class="sc">:</span>             c d             .             .             .</span>
<span id="cb46-56"><a href="#cb46-56" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">67</span><span class="sc">:</span>             b c           d e           g g           d c</span>
<span id="cb46-57"><a href="#cb46-57" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">68</span><span class="sc">:</span>               .             .           f g             .</span>
<span id="cb46-58"><a href="#cb46-58" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">69</span><span class="sc">:</span>             c b           c d           e f           g d</span>
<span id="cb46-59"><a href="#cb46-59" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">70</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span></span>
<span id="cb46-60"><a href="#cb46-60" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">71</span><span class="sc">:</span>             d c          f<span class="co"># c           d e           b g</span></span>
<span id="cb46-61"><a href="#cb46-61" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">72</span><span class="sc">:</span>               .          g f<span class="co">#             .             .</span></span>
<span id="cb46-62"><a href="#cb46-62" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">73</span><span class="sc">:</span>             d d             .           c d           a b</span>
<span id="cb46-63"><a href="#cb46-63" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">74</span><span class="sc">:</span>               .          f<span class="co"># g             .             .</span></span>
<span id="cb46-64"><a href="#cb46-64" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">75</span><span class="sc">:</span>             g d          g f<span class="co">#           b c           g a</span></span>
<span id="cb46-65"><a href="#cb46-65" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">76</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span></span>
<span id="cb46-66"><a href="#cb46-66" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">77</span><span class="sc">:</span>             c g           g g           e b           g g</span>
<span id="cb46-67"><a href="#cb46-67" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">78</span><span class="sc">:</span>             a c           a g           e e           c g</span>
<span id="cb46-68"><a href="#cb46-68" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">79</span><span class="sc">:</span>             e a          g<span class="co"># a           e e           b c</span></span>
<span id="cb46-69"><a href="#cb46-69" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">80</span><span class="sc">:</span>               .             .           d e             .</span>
<span id="cb46-70"><a href="#cb46-70" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">81</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span></span>
<span id="cb46-71"><a href="#cb46-71" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">82</span><span class="sc">:</span>             f e          a g<span class="co">#           c d           a b</span></span>
<span id="cb46-72"><a href="#cb46-72" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">83</span><span class="sc">:</span>             c f           g a           c c           e a</span>
<span id="cb46-73"><a href="#cb46-73" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">84</span><span class="sc">:</span>            b<span class="sc">-</span> c           g g           d c           g e</span>
<span id="cb46-74"><a href="#cb46-74" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">85</span><span class="sc">:</span>            a b<span class="sc">-</span>           a g             .           f g</span>
<span id="cb46-75"><a href="#cb46-75" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">86</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span></span>
<span id="cb46-76"><a href="#cb46-76" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">87</span><span class="sc">:</span>            g<span class="co"># a           b a           d d           e f</span></span>
<span id="cb46-77"><a href="#cb46-77" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">88</span><span class="sc">:</span>            a g<span class="co">#           a b           c d             .</span></span>
<span id="cb46-78"><a href="#cb46-78" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">89</span><span class="sc">:</span>             e a          g<span class="co"># a           b c             .</span></span>
<span id="cb46-79"><a href="#cb46-79" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">90</span><span class="sc">:</span>              <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span></span>
<span id="cb46-80"><a href="#cb46-80" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">91</span><span class="sc">:</span>              <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span></span>
<span id="cb46-81"><a href="#cb46-81" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">92</span><span class="sc">:</span>  <span class="sc">!!!</span>hum2abc<span class="sc">:</span> <span class="sc">-</span>Q <span class="st">''</span></span>
<span id="cb46-82"><a href="#cb46-82" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">93</span><span class="sc">:</span>  <span class="sc">!!!</span>title<span class="sc">:</span> <span class="er">@</span>{PC<span class="co">#}. @{OTL@@DE}</span></span>
<span id="cb46-83"><a href="#cb46-83" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">94</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR1<span class="sc">:</span> <span class="dv">371</span> vierstimmige Choralges<span class="sc">&amp;</span>auml;nge von Johann Sebastian B<span class="sc">**</span><span class="er">*</span></span>
<span id="cb46-84"><a href="#cb46-84" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">95</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> 4th ed. by Alfred D<span class="sc">&amp;</span>ouml;<span class="fu">rffel</span> (Leipzig<span class="sc">:</span> Breitkopf und H<span class="sc">&amp;</span>a<span class="sc">**</span><span class="er">*</span></span>
<span id="cb46-85"><a href="#cb46-85" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">96</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> c<span class="fl">.1875</span>). <span class="dv">178</span> pp. Plate <span class="st">"V.A.10"</span>.  reprint<span class="sc">:</span> J.S. Bach, <span class="dv">371</span> <span class="sc">**</span><span class="er">*</span></span>
<span id="cb46-86"><a href="#cb46-86" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">97</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR4<span class="sc">:</span> <span class="fu">Chorales</span> (New York<span class="sc">:</span> Associated Music Publishers, Inc., c<span class="fl">.1</span><span class="sc">**</span><span class="er">*</span></span>
<span id="cb46-87"><a href="#cb46-87" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">98</span><span class="sc">:</span>  <span class="sc">!!!</span>SMS<span class="sc">:</span> B<span class="sc">&amp;</span>H, 4th ed, Alfred D<span class="sc">&amp;</span>ouml;rffel, c<span class="fl">.1875</span>, plate V.A<span class="fl">.10</span></span>
<span id="cb46-88"><a href="#cb46-88" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">99</span><span class="sc">:</span>  <span class="sc">!!!</span>EED<span class="sc">:</span>  Craig Stuart Sapp</span>
<span id="cb46-89"><a href="#cb46-89" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">100</span><span class="sc">:</span>  <span class="sc">!!!</span>EEV<span class="sc">:</span>  <span class="dv">2009</span><span class="sc">/</span><span class="dv">05</span><span class="sc">/</span><span class="dv">22</span></span>
<span id="cb46-90"><a href="#cb46-90" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# ^^^ chor010.krn ^^^ #############################</span></span>
<span id="cb46-91"><a href="#cb46-91" tabindex="-1"></a><span class="er">&gt;</span>                           (<span class="sc">**</span><span class="er">*</span>four global comments truncated due to screen size<span class="sc">**</span><span class="er">*</span>)</span>
<span id="cb46-92"><a href="#cb46-92" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb46-93"><a href="#cb46-93" tabindex="-1"></a><span class="er">&gt;</span>       humdrumR corpus of ten pieces.</span>
<span id="cb46-94"><a href="#cb46-94" tabindex="-1"></a><span class="sc">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb46-95"><a href="#cb46-95" tabindex="-1"></a><span class="er">&gt;</span>                Token   <span class="sc">::</span> character</span>
<span id="cb46-96"><a href="#cb46-96" tabindex="-1"></a><span class="sc">&gt;</span>                Kern    <span class="sc">::</span> <span class="fu">character</span> (<span class="sc">**</span>kern tokens)</span>
<span id="cb46-97"><a href="#cb46-97" tabindex="-1"></a><span class="sc">&gt;</span>               <span class="er">*</span>Result1 <span class="sc">::</span> character</span></code></pre></div>
<p>We can use negative or positive lags, depending on how we want the
n-grams to line up:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="fu">within</span>(chorales, <span class="fu">paste</span>(Kern, Kern[<span class="at">lag =</span> <span class="sc">-</span><span class="dv">1</span>], <span class="at">sep =</span> <span class="st">' '</span>))</span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# vvv chor001.krn vvv #############################</span></span>
<span id="cb47-3"><a href="#cb47-3" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb47-4"><a href="#cb47-4" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb47-5"><a href="#cb47-5" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb47-6"><a href="#cb47-6" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of My Heart</span>
<span id="cb47-7"><a href="#cb47-7" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb47-8"><a href="#cb47-8" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb47-9"><a href="#cb47-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb47-10"><a href="#cb47-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>          <span class="er">**</span>kern        <span class="sc">**</span>kern        <span class="sc">**</span>kern        <span class="sc">**</span>kern</span>
<span id="cb47-11"><a href="#cb47-11" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>          <span class="er">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox</span>
<span id="cb47-12"><a href="#cb47-12" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>          <span class="er">*</span>Ibass       <span class="sc">*</span>Itenor        <span class="sc">*</span>Ialto       <span class="sc">*</span>Isoprn</span>
<span id="cb47-13"><a href="#cb47-13" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>         <span class="er">*</span>I<span class="st">"Bass      *I"</span>Tenor       <span class="sc">*</span>I<span class="st">"Alto    *I"</span>Soprano</span>
<span id="cb47-14"><a href="#cb47-14" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">12</span><span class="sc">:</span>       <span class="er">*&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]</span>
<span id="cb47-15"><a href="#cb47-15" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">13</span><span class="sc">:</span>    <span class="er">*&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]</span>
<span id="cb47-16"><a href="#cb47-16" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">14</span><span class="sc">:</span>             <span class="er">*&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A</span>
<span id="cb47-17"><a href="#cb47-17" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">15</span><span class="sc">:</span>         <span class="er">*</span>clefF4      <span class="sc">*</span>clefGv2       <span class="sc">*</span>clefG2       <span class="sc">*</span>clefG2</span>
<span id="cb47-18"><a href="#cb47-18" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">16</span><span class="sc">:</span>          <span class="er">*</span>k[f<span class="co">#]        *k[f#]        *k[f#]        *k[f#]</span></span>
<span id="cb47-19"><a href="#cb47-19" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">17</span><span class="sc">:</span>             <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span></span>
<span id="cb47-20"><a href="#cb47-20" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">18</span><span class="sc">:</span>           <span class="er">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb47-21"><a href="#cb47-21" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">19</span><span class="sc">:</span>          <span class="er">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100</span>
<span id="cb47-22"><a href="#cb47-22" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">20</span><span class="sc">:</span>             g g           b b           d d           g g</span>
<span id="cb47-23"><a href="#cb47-23" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">21</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span></span>
<span id="cb47-24"><a href="#cb47-24" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">22</span><span class="sc">:</span>             g e           b c           d e           g d</span>
<span id="cb47-25"><a href="#cb47-25" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">23</span><span class="sc">:</span>            e f<span class="co">#           c b           e d             .</span></span>
<span id="cb47-26"><a href="#cb47-26" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">24</span><span class="sc">:</span>               .           b a             .             .</span>
<span id="cb47-27"><a href="#cb47-27" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">25</span><span class="sc">:</span>            f<span class="co"># g           a g           d d           d b</span></span>
<span id="cb47-28"><a href="#cb47-28" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">26</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span></span>
<span id="cb47-29"><a href="#cb47-29" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">27</span><span class="sc">:</span>             g d          g f<span class="co">#           d b           b a</span></span>
<span id="cb47-30"><a href="#cb47-30" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">28</span><span class="sc">:</span>             d e          f<span class="co"># g             .             .</span></span>
<span id="cb47-31"><a href="#cb47-31" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">29</span><span class="sc">:</span>               .             .             .           a g</span>
<span id="cb47-32"><a href="#cb47-32" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">30</span><span class="sc">:</span>             e c           g c           b e           g g</span>
<span id="cb47-33"><a href="#cb47-33" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">31</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span></span>
<span id="cb47-34"><a href="#cb47-34" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">32</span><span class="sc">:</span>             c b           c b           e d           g a</span>
<span id="cb47-35"><a href="#cb47-35" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">33</span><span class="sc">:</span>               .           b c           d e             .</span>
<span id="cb47-36"><a href="#cb47-36" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">34</span><span class="sc">:</span>             b a           c d          e f<span class="co">#             .</span></span>
<span id="cb47-37"><a href="#cb47-37" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">35</span><span class="sc">:</span>             a g             .          f<span class="co"># g           a b</span></span>
<span id="cb47-38"><a href="#cb47-38" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">36</span><span class="sc">:</span>             g d           d d          g f<span class="co">#           b a</span></span>
<span id="cb47-39"><a href="#cb47-39" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">37</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span></span>
<span id="cb47-40"><a href="#cb47-40" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">38</span><span class="sc">:</span>             d g           d d          f<span class="co"># g           a b</span></span>
<span id="cb47-41"><a href="#cb47-41" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">39</span><span class="sc">:</span>            g f<span class="co">#           d a           g d           b d</span></span>
<span id="cb47-42"><a href="#cb47-42" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">40</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span></span>
<span id="cb47-43"><a href="#cb47-43" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="dv">41-133</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb47-44"><a href="#cb47-44" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# ^^^ chor001.krn ^^^ #############################</span></span>
<span id="cb47-45"><a href="#cb47-45" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb47-46"><a href="#cb47-46" tabindex="-1"></a><span class="er">&gt;</span>           (<span class="dv">8</span> more pieces...)</span>
<span id="cb47-47"><a href="#cb47-47" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb47-48"><a href="#cb47-48" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# vvv chor010.krn vvv #############################</span></span>
<span id="cb47-49"><a href="#cb47-49" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">1-60</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb47-50"><a href="#cb47-50" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">61</span><span class="sc">:</span>             a a           c e           e a           a c</span>
<span id="cb47-51"><a href="#cb47-51" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">62</span><span class="sc">:</span>             a e           e e           a g           c b</span>
<span id="cb47-52"><a href="#cb47-52" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">63</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span></span>
<span id="cb47-53"><a href="#cb47-53" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">64</span><span class="sc">:</span>             e d           e e           g g           b c</span>
<span id="cb47-54"><a href="#cb47-54" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">65</span><span class="sc">:</span>             d c           e d           g g           c d</span>
<span id="cb47-55"><a href="#cb47-55" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">66</span><span class="sc">:</span>             c b             .             .             .</span>
<span id="cb47-56"><a href="#cb47-56" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">67</span><span class="sc">:</span>             b c           d c           g f           d g</span>
<span id="cb47-57"><a href="#cb47-57" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">68</span><span class="sc">:</span>               .             .           f e             .</span>
<span id="cb47-58"><a href="#cb47-58" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">69</span><span class="sc">:</span>             c d          c f<span class="co">#           e d           g b</span></span>
<span id="cb47-59"><a href="#cb47-59" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">70</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span></span>
<span id="cb47-60"><a href="#cb47-60" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">71</span><span class="sc">:</span>             d d          f<span class="co"># g           d c           b a</span></span>
<span id="cb47-61"><a href="#cb47-61" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">72</span><span class="sc">:</span>               .          g f<span class="co">#             .             .</span></span>
<span id="cb47-62"><a href="#cb47-62" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">73</span><span class="sc">:</span>             d g             .           c b           a g</span>
<span id="cb47-63"><a href="#cb47-63" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">74</span><span class="sc">:</span>               .          f<span class="co"># g             .             .</span></span>
<span id="cb47-64"><a href="#cb47-64" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">75</span><span class="sc">:</span>             g c           g g           b e           g g</span>
<span id="cb47-65"><a href="#cb47-65" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">76</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span></span>
<span id="cb47-66"><a href="#cb47-66" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">77</span><span class="sc">:</span>             c a           g a           e e           g c</span>
<span id="cb47-67"><a href="#cb47-67" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">78</span><span class="sc">:</span>             a e          a g<span class="co">#           e e           c b</span></span>
<span id="cb47-68"><a href="#cb47-68" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">79</span><span class="sc">:</span>             e f          g<span class="co"># a           e d           b a</span></span>
<span id="cb47-69"><a href="#cb47-69" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">80</span><span class="sc">:</span>               .             .           d c             .</span>
<span id="cb47-70"><a href="#cb47-70" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">81</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span></span>
<span id="cb47-71"><a href="#cb47-71" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">82</span><span class="sc">:</span>             f c           a g           c c           a e</span>
<span id="cb47-72"><a href="#cb47-72" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">83</span><span class="sc">:</span>            c b<span class="sc">-</span>           g g           c d           e g</span>
<span id="cb47-73"><a href="#cb47-73" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">84</span><span class="sc">:</span>            b<span class="sc">-</span> a           g a           d d           g f</span>
<span id="cb47-74"><a href="#cb47-74" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">85</span><span class="sc">:</span>            a g<span class="co">#           a b             .           f e</span></span>
<span id="cb47-75"><a href="#cb47-75" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">86</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span></span>
<span id="cb47-76"><a href="#cb47-76" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">87</span><span class="sc">:</span>            g<span class="co"># a           b a           d c          e NA</span></span>
<span id="cb47-77"><a href="#cb47-77" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">88</span><span class="sc">:</span>             a e          a g<span class="co">#           c b             .</span></span>
<span id="cb47-78"><a href="#cb47-78" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">89</span><span class="sc">:</span>            e <span class="cn">NA</span>         g<span class="co"># NA          b NA             .</span></span>
<span id="cb47-79"><a href="#cb47-79" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">90</span><span class="sc">:</span>              <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span></span>
<span id="cb47-80"><a href="#cb47-80" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">91</span><span class="sc">:</span>              <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span></span>
<span id="cb47-81"><a href="#cb47-81" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">92</span><span class="sc">:</span>  <span class="sc">!!!</span>hum2abc<span class="sc">:</span> <span class="sc">-</span>Q <span class="st">''</span></span>
<span id="cb47-82"><a href="#cb47-82" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">93</span><span class="sc">:</span>  <span class="sc">!!!</span>title<span class="sc">:</span> <span class="er">@</span>{PC<span class="co">#}. @{OTL@@DE}</span></span>
<span id="cb47-83"><a href="#cb47-83" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">94</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR1<span class="sc">:</span> <span class="dv">371</span> vierstimmige Choralges<span class="sc">&amp;</span>auml;nge von Johann Sebastian B<span class="sc">**</span><span class="er">*</span></span>
<span id="cb47-84"><a href="#cb47-84" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">95</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> 4th ed. by Alfred D<span class="sc">&amp;</span>ouml;<span class="fu">rffel</span> (Leipzig<span class="sc">:</span> Breitkopf und H<span class="sc">&amp;</span>a<span class="sc">**</span><span class="er">*</span></span>
<span id="cb47-85"><a href="#cb47-85" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">96</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> c<span class="fl">.1875</span>). <span class="dv">178</span> pp. Plate <span class="st">"V.A.10"</span>.  reprint<span class="sc">:</span> J.S. Bach, <span class="dv">371</span> <span class="sc">**</span><span class="er">*</span></span>
<span id="cb47-86"><a href="#cb47-86" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">97</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR4<span class="sc">:</span> <span class="fu">Chorales</span> (New York<span class="sc">:</span> Associated Music Publishers, Inc., c<span class="fl">.1</span><span class="sc">**</span><span class="er">*</span></span>
<span id="cb47-87"><a href="#cb47-87" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">98</span><span class="sc">:</span>  <span class="sc">!!!</span>SMS<span class="sc">:</span> B<span class="sc">&amp;</span>H, 4th ed, Alfred D<span class="sc">&amp;</span>ouml;rffel, c<span class="fl">.1875</span>, plate V.A<span class="fl">.10</span></span>
<span id="cb47-88"><a href="#cb47-88" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">99</span><span class="sc">:</span>  <span class="sc">!!!</span>EED<span class="sc">:</span>  Craig Stuart Sapp</span>
<span id="cb47-89"><a href="#cb47-89" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">100</span><span class="sc">:</span>  <span class="sc">!!!</span>EEV<span class="sc">:</span>  <span class="dv">2009</span><span class="sc">/</span><span class="dv">05</span><span class="sc">/</span><span class="dv">22</span></span>
<span id="cb47-90"><a href="#cb47-90" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# ^^^ chor010.krn ^^^ #############################</span></span>
<span id="cb47-91"><a href="#cb47-91" tabindex="-1"></a><span class="er">&gt;</span>                           (<span class="sc">**</span><span class="er">*</span>four global comments truncated due to screen size<span class="sc">**</span><span class="er">*</span>)</span>
<span id="cb47-92"><a href="#cb47-92" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb47-93"><a href="#cb47-93" tabindex="-1"></a><span class="er">&gt;</span>       humdrumR corpus of ten pieces.</span>
<span id="cb47-94"><a href="#cb47-94" tabindex="-1"></a><span class="sc">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb47-95"><a href="#cb47-95" tabindex="-1"></a><span class="er">&gt;</span>                Token   <span class="sc">::</span> character</span>
<span id="cb47-96"><a href="#cb47-96" tabindex="-1"></a><span class="sc">&gt;</span>                Kern    <span class="sc">::</span> <span class="fu">character</span> (<span class="sc">**</span>kern tokens)</span>
<span id="cb47-97"><a href="#cb47-97" tabindex="-1"></a><span class="sc">&gt;</span>               <span class="er">*</span>Result1 <span class="sc">::</span> character</span></code></pre></div>
<p>An important point! <code>with</code>/<code><a href="../reference/withinHumdrum.html">within.humdrumR()</a></code>
will automatically group lagged data by
<code>list(File, Spine, Path)</code>, so the n-grams won’t cross from
the end of one file/spine to the beginning of the next, etc.</p>
<hr>
<p><code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste()</a></code> isn’t the only vectoried function we might want
to apply to lagged data. Another common example would be
<code><a href="https://rdrr.io/r/base/table.html" class="external-link">table()</a></code>:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="fu">with</span>(chorales, <span class="fu">table</span>(Kern, Kern[<span class="at">lag =</span> <span class="sc">-</span><span class="dv">1</span>]))</span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a><span class="sc">&gt;</span>        </span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a><span class="er">&gt;</span>    Kern  c c<span class="co"># d-  d d# e-  e e#  f f# g-  g g# a-  a a# b-  b  .</span></span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a><span class="sc">&gt;</span>      c  <span class="dv">34</span>  <span class="dv">1</span> <span class="dv">12</span> <span class="dv">49</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">2</span>  <span class="dv">0</span> <span class="dv">18</span>  <span class="dv">3</span>  <span class="dv">0</span>  <span class="dv">4</span>  <span class="dv">0</span>  <span class="dv">3</span>  <span class="dv">9</span>  <span class="dv">0</span> <span class="dv">22</span> <span class="dv">73</span>  <span class="dv">2</span></span>
<span id="cb48-5"><a href="#cb48-5" tabindex="-1"></a><span class="sc">&gt;</span>      c<span class="co">#  0 13  0 30  5  0  1  1  0 14  0  0  1  0  7  0  0 41  2</span></span>
<span id="cb48-6"><a href="#cb48-6" tabindex="-1"></a><span class="sc">&gt;</span>      d<span class="sc">-</span> <span class="dv">14</span>  <span class="dv">0</span>  <span class="dv">6</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">5</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">2</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">7</span>  <span class="dv">0</span>  <span class="dv">0</span></span>
<span id="cb48-7"><a href="#cb48-7" tabindex="-1"></a><span class="sc">&gt;</span>      d  <span class="dv">61</span> <span class="dv">30</span>  <span class="dv">0</span> <span class="dv">42</span>  <span class="dv">5</span>  <span class="dv">1</span> <span class="dv">67</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">1</span>  <span class="dv">0</span> <span class="dv">25</span>  <span class="dv">2</span>  <span class="dv">0</span>  <span class="dv">5</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">9</span>  <span class="dv">3</span></span>
<span id="cb48-8"><a href="#cb48-8" tabindex="-1"></a><span class="sc">&gt;</span>      d<span class="co">#  0  5  0  0  0  0 25  0  0  0  0  0  0  0  0  0  0  7  0</span></span>
<span id="cb48-9"><a href="#cb48-9" tabindex="-1"></a><span class="sc">&gt;</span>      e<span class="sc">-</span>  <span class="dv">3</span>  <span class="dv">0</span>  <span class="dv">9</span>  <span class="dv">2</span>  <span class="dv">0</span>  <span class="dv">9</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">7</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">0</span>  <span class="dv">3</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span></span>
<span id="cb48-10"><a href="#cb48-10" tabindex="-1"></a><span class="sc">&gt;</span>      e  <span class="dv">10</span> <span class="dv">11</span>  <span class="dv">0</span> <span class="dv">75</span> <span class="dv">22</span>  <span class="dv">1</span> <span class="dv">64</span>  <span class="dv">2</span> <span class="dv">25</span> <span class="dv">60</span>  <span class="dv">0</span>  <span class="dv">4</span>  <span class="dv">4</span>  <span class="dv">0</span> <span class="dv">32</span>  <span class="dv">0</span>  <span class="dv">0</span> <span class="dv">16</span>  <span class="dv">8</span></span>
<span id="cb48-11"><a href="#cb48-11" tabindex="-1"></a><span class="sc">&gt;</span>      e<span class="co">#  0  2  0  0  0  0  1  0  0  5  0  0  0  0  0  0  0  0  0</span></span>
<span id="cb48-12"><a href="#cb48-12" tabindex="-1"></a><span class="sc">&gt;</span>      f   <span class="dv">7</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">1</span>  <span class="dv">0</span>  <span class="dv">8</span> <span class="dv">33</span>  <span class="dv">0</span> <span class="dv">35</span>  <span class="dv">0</span>  <span class="dv">1</span> <span class="dv">17</span>  <span class="dv">0</span>  <span class="dv">2</span>  <span class="dv">5</span>  <span class="dv">0</span>  <span class="dv">6</span>  <span class="dv">1</span>  <span class="dv">4</span></span>
<span id="cb48-13"><a href="#cb48-13" tabindex="-1"></a><span class="sc">&gt;</span>      f<span class="co">#  1  4  0  8  1  0 57  3  0 12  0 47 30  0  3  0  0 16  0</span></span>
<span id="cb48-14"><a href="#cb48-14" tabindex="-1"></a><span class="sc">&gt;</span>      g<span class="sc">-</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span></span>
<span id="cb48-15"><a href="#cb48-15" tabindex="-1"></a><span class="sc">&gt;</span>      g  <span class="dv">16</span>  <span class="dv">1</span>  <span class="dv">0</span> <span class="dv">13</span>  <span class="dv">0</span>  <span class="dv">3</span>  <span class="dv">6</span>  <span class="dv">0</span> <span class="dv">22</span> <span class="dv">54</span>  <span class="dv">0</span> <span class="dv">51</span>  <span class="dv">1</span> <span class="dv">10</span> <span class="dv">48</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">6</span>  <span class="dv">6</span></span>
<span id="cb48-16"><a href="#cb48-16" tabindex="-1"></a><span class="sc">&gt;</span>      g<span class="co">#  1  4  0  1  0  0 12  1  0 22  0  0  6  0 55  3  0  1  3</span></span>
<span id="cb48-17"><a href="#cb48-17" tabindex="-1"></a><span class="sc">&gt;</span>      a<span class="sc">-</span>  <span class="dv">2</span>  <span class="dv">0</span>  <span class="dv">7</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">3</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">9</span>  <span class="dv">0</span> <span class="dv">15</span>  <span class="dv">2</span>  <span class="dv">0</span>  <span class="dv">7</span>  <span class="dv">0</span>  <span class="dv">0</span></span>
<span id="cb48-18"><a href="#cb48-18" tabindex="-1"></a><span class="sc">&gt;</span>      a   <span class="dv">5</span>  <span class="dv">2</span>  <span class="dv">0</span> <span class="dv">19</span>  <span class="dv">3</span>  <span class="dv">0</span> <span class="dv">24</span>  <span class="dv">1</span>  <span class="dv">3</span>  <span class="dv">6</span>  <span class="dv">0</span> <span class="dv">62</span> <span class="dv">56</span>  <span class="dv">0</span> <span class="dv">45</span>  <span class="dv">1</span>  <span class="dv">8</span> <span class="dv">77</span>  <span class="dv">6</span></span>
<span id="cb48-19"><a href="#cb48-19" tabindex="-1"></a><span class="sc">&gt;</span>      a<span class="co">#  0  0  0  0  1  0  0  0  0  1  0  0  0  0  0  0  0  9  0</span></span>
<span id="cb48-20"><a href="#cb48-20" tabindex="-1"></a><span class="sc">&gt;</span>      b<span class="sc">-</span> <span class="dv">21</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">7</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">3</span>  <span class="dv">0</span> <span class="dv">11</span>  <span class="dv">9</span>  <span class="dv">0</span>  <span class="dv">9</span>  <span class="dv">0</span>  <span class="dv">0</span></span>
<span id="cb48-21"><a href="#cb48-21" tabindex="-1"></a><span class="sc">&gt;</span>      b  <span class="dv">55</span> <span class="dv">40</span>  <span class="dv">0</span>  <span class="dv">9</span>  <span class="dv">0</span>  <span class="dv">0</span> <span class="dv">35</span>  <span class="dv">0</span>  <span class="dv">0</span>  <span class="dv">4</span>  <span class="dv">0</span>  <span class="dv">7</span>  <span class="dv">6</span>  <span class="dv">0</span> <span class="dv">93</span>  <span class="dv">7</span>  <span class="dv">0</span> <span class="dv">35</span>  <span class="dv">6</span></span></code></pre></div>
<p>We get a transition matrix!</p>
</div>
<div class="section level3">
<h3 id="larger-n">Larger N<a class="anchor" aria-label="anchor" href="#larger-n"></a>
</h3>
<p>For functions that accept unlimited arguments (<code>...</code>),
like <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste()</a></code>, and <code><a href="https://rdrr.io/r/base/table.html" class="external-link">table()</a></code>, you can easily
extend the principle to create longer n-grams:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="fu">within</span>(chorales, <span class="fu">paste</span>(Kern, Kern[<span class="at">lag =</span> <span class="sc">-</span><span class="dv">1</span>], Kern[<span class="at">lag =</span> <span class="sc">-</span><span class="dv">2</span>], <span class="at">sep =</span> <span class="st">' '</span>))</span>
<span id="cb49-2"><a href="#cb49-2" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# vvv chor001.krn vvv #############################</span></span>
<span id="cb49-3"><a href="#cb49-3" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb49-4"><a href="#cb49-4" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb49-5"><a href="#cb49-5" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb49-6"><a href="#cb49-6" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of My Heart</span>
<span id="cb49-7"><a href="#cb49-7" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb49-8"><a href="#cb49-8" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb49-9"><a href="#cb49-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb49-10"><a href="#cb49-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>          <span class="er">**</span>kern        <span class="sc">**</span>kern        <span class="sc">**</span>kern        <span class="sc">**</span>kern</span>
<span id="cb49-11"><a href="#cb49-11" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>          <span class="er">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox</span>
<span id="cb49-12"><a href="#cb49-12" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>          <span class="er">*</span>Ibass       <span class="sc">*</span>Itenor        <span class="sc">*</span>Ialto       <span class="sc">*</span>Isoprn</span>
<span id="cb49-13"><a href="#cb49-13" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>         <span class="er">*</span>I<span class="st">"Bass      *I"</span>Tenor       <span class="sc">*</span>I<span class="st">"Alto    *I"</span>Soprano</span>
<span id="cb49-14"><a href="#cb49-14" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">12</span><span class="sc">:</span>       <span class="er">*&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]</span>
<span id="cb49-15"><a href="#cb49-15" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">13</span><span class="sc">:</span>    <span class="er">*&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]</span>
<span id="cb49-16"><a href="#cb49-16" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">14</span><span class="sc">:</span>             <span class="er">*&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A</span>
<span id="cb49-17"><a href="#cb49-17" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">15</span><span class="sc">:</span>         <span class="er">*</span>clefF4      <span class="sc">*</span>clefGv2       <span class="sc">*</span>clefG2       <span class="sc">*</span>clefG2</span>
<span id="cb49-18"><a href="#cb49-18" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">16</span><span class="sc">:</span>          <span class="er">*</span>k[f<span class="co">#]        *k[f#]        *k[f#]        *k[f#]</span></span>
<span id="cb49-19"><a href="#cb49-19" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">17</span><span class="sc">:</span>             <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span></span>
<span id="cb49-20"><a href="#cb49-20" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">18</span><span class="sc">:</span>           <span class="er">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb49-21"><a href="#cb49-21" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">19</span><span class="sc">:</span>          <span class="er">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100</span>
<span id="cb49-22"><a href="#cb49-22" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">20</span><span class="sc">:</span>           g g e         b b c         d d e         g g d</span>
<span id="cb49-23"><a href="#cb49-23" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">21</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span></span>
<span id="cb49-24"><a href="#cb49-24" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">22</span><span class="sc">:</span>          g e f<span class="co">#         b c b         d e d         g d b</span></span>
<span id="cb49-25"><a href="#cb49-25" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">23</span><span class="sc">:</span>          e f<span class="co"># g         c b a         e d d             .</span></span>
<span id="cb49-26"><a href="#cb49-26" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">24</span><span class="sc">:</span>               .         b a g             .             .</span>
<span id="cb49-27"><a href="#cb49-27" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">25</span><span class="sc">:</span>          f<span class="co"># g d        a g f#         d d b         d b a</span></span>
<span id="cb49-28"><a href="#cb49-28" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">26</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span></span>
<span id="cb49-29"><a href="#cb49-29" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">27</span><span class="sc">:</span>           g d e        g f<span class="co"># g         d b e         b a g</span></span>
<span id="cb49-30"><a href="#cb49-30" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">28</span><span class="sc">:</span>           d e c        f<span class="co"># g c             .             .</span></span>
<span id="cb49-31"><a href="#cb49-31" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">29</span><span class="sc">:</span>               .             .             .         a g g</span>
<span id="cb49-32"><a href="#cb49-32" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">30</span><span class="sc">:</span>           e c b         g c b         b e d         g g a</span>
<span id="cb49-33"><a href="#cb49-33" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">31</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span></span>
<span id="cb49-34"><a href="#cb49-34" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">32</span><span class="sc">:</span>           c b a         c b c         e d e         g a b</span>
<span id="cb49-35"><a href="#cb49-35" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">33</span><span class="sc">:</span>               .         b c d        d e f<span class="co">#             .</span></span>
<span id="cb49-36"><a href="#cb49-36" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">34</span><span class="sc">:</span>           b a g         c d d        e f<span class="co"># g             .</span></span>
<span id="cb49-37"><a href="#cb49-37" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">35</span><span class="sc">:</span>           a g d             .       f<span class="co"># g f#         a b a</span></span>
<span id="cb49-38"><a href="#cb49-38" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">36</span><span class="sc">:</span>           g d g         d d d        g f<span class="co"># g         b a b</span></span>
<span id="cb49-39"><a href="#cb49-39" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">37</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span></span>
<span id="cb49-40"><a href="#cb49-40" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">38</span><span class="sc">:</span>          d g f<span class="co">#         d d a        f# g d         a b d</span></span>
<span id="cb49-41"><a href="#cb49-41" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">39</span><span class="sc">:</span>          g f<span class="co"># g         d a b         g d e         b d c</span></span>
<span id="cb49-42"><a href="#cb49-42" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">40</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span></span>
<span id="cb49-43"><a href="#cb49-43" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="dv">41-133</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb49-44"><a href="#cb49-44" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# ^^^ chor001.krn ^^^ #############################</span></span>
<span id="cb49-45"><a href="#cb49-45" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb49-46"><a href="#cb49-46" tabindex="-1"></a><span class="er">&gt;</span>           (<span class="dv">8</span> more pieces...)</span>
<span id="cb49-47"><a href="#cb49-47" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb49-48"><a href="#cb49-48" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# vvv chor010.krn vvv #############################</span></span>
<span id="cb49-49"><a href="#cb49-49" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">1-60</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb49-50"><a href="#cb49-50" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">61</span><span class="sc">:</span>           a a e         c e e         e a g         a c b</span>
<span id="cb49-51"><a href="#cb49-51" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">62</span><span class="sc">:</span>           a e d         e e e         a g g         c b c</span>
<span id="cb49-52"><a href="#cb49-52" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">63</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span></span>
<span id="cb49-53"><a href="#cb49-53" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">64</span><span class="sc">:</span>           e d c         e e d         g g g         b c d</span>
<span id="cb49-54"><a href="#cb49-54" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">65</span><span class="sc">:</span>           d c b         e d c         g g f         c d g</span>
<span id="cb49-55"><a href="#cb49-55" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">66</span><span class="sc">:</span>           c b c             .             .             .</span>
<span id="cb49-56"><a href="#cb49-56" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">67</span><span class="sc">:</span>           b c d        d c f<span class="co">#         g f e         d g b</span></span>
<span id="cb49-57"><a href="#cb49-57" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">68</span><span class="sc">:</span>               .             .         f e d             .</span>
<span id="cb49-58"><a href="#cb49-58" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">69</span><span class="sc">:</span>           c d d        c f<span class="co"># g         e d c         g b a</span></span>
<span id="cb49-59"><a href="#cb49-59" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">70</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span></span>
<span id="cb49-60"><a href="#cb49-60" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">71</span><span class="sc">:</span>           d d g       f<span class="co"># g f#         d c b         b a g</span></span>
<span id="cb49-61"><a href="#cb49-61" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">72</span><span class="sc">:</span>               .        g f<span class="co"># g             .             .</span></span>
<span id="cb49-62"><a href="#cb49-62" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">73</span><span class="sc">:</span>           d g c             .         c b e         a g g</span>
<span id="cb49-63"><a href="#cb49-63" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">74</span><span class="sc">:</span>               .        f<span class="co"># g g             .             .</span></span>
<span id="cb49-64"><a href="#cb49-64" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">75</span><span class="sc">:</span>           g c a         g g a         b e e         g g c</span>
<span id="cb49-65"><a href="#cb49-65" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">76</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span></span>
<span id="cb49-66"><a href="#cb49-66" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">77</span><span class="sc">:</span>           c a e        g a g<span class="co">#         e e e         g c b</span></span>
<span id="cb49-67"><a href="#cb49-67" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">78</span><span class="sc">:</span>           a e f        a g<span class="co"># a         e e d         c b a</span></span>
<span id="cb49-68"><a href="#cb49-68" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">79</span><span class="sc">:</span>           e f c        g<span class="co"># a g         e d c         b a e</span></span>
<span id="cb49-69"><a href="#cb49-69" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">80</span><span class="sc">:</span>               .             .         d c c             .</span>
<span id="cb49-70"><a href="#cb49-70" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">81</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span></span>
<span id="cb49-71"><a href="#cb49-71" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">82</span><span class="sc">:</span>          f c b<span class="sc">-</span>         a g g         c c d         a e g</span>
<span id="cb49-72"><a href="#cb49-72" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">83</span><span class="sc">:</span>          c b<span class="sc">-</span> a         g g a         c d d         e g f</span>
<span id="cb49-73"><a href="#cb49-73" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">84</span><span class="sc">:</span>         b<span class="sc">-</span> a g<span class="co">#         g a b         d d c         g f e</span></span>
<span id="cb49-74"><a href="#cb49-74" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">85</span><span class="sc">:</span>          a g<span class="co"># a         a b a             .        f e NA</span></span>
<span id="cb49-75"><a href="#cb49-75" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">86</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span></span>
<span id="cb49-76"><a href="#cb49-76" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">87</span><span class="sc">:</span>          g<span class="co"># a e        b a g#         d c b       e NA NA</span></span>
<span id="cb49-77"><a href="#cb49-77" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">88</span><span class="sc">:</span>          a e <span class="cn">NA</span>       a g<span class="co"># NA        c b NA             .</span></span>
<span id="cb49-78"><a href="#cb49-78" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">89</span><span class="sc">:</span>         e <span class="cn">NA</span> <span class="cn">NA</span>      g<span class="co"># NA NA       b NA NA             .</span></span>
<span id="cb49-79"><a href="#cb49-79" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">90</span><span class="sc">:</span>              <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span></span>
<span id="cb49-80"><a href="#cb49-80" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">91</span><span class="sc">:</span>              <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span></span>
<span id="cb49-81"><a href="#cb49-81" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">92</span><span class="sc">:</span>  <span class="sc">!!!</span>hum2abc<span class="sc">:</span> <span class="sc">-</span>Q <span class="st">''</span></span>
<span id="cb49-82"><a href="#cb49-82" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">93</span><span class="sc">:</span>  <span class="sc">!!!</span>title<span class="sc">:</span> <span class="er">@</span>{PC<span class="co">#}. @{OTL@@DE}</span></span>
<span id="cb49-83"><a href="#cb49-83" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">94</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR1<span class="sc">:</span> <span class="dv">371</span> vierstimmige Choralges<span class="sc">&amp;</span>auml;nge von Johann Sebastian B<span class="sc">**</span><span class="er">*</span></span>
<span id="cb49-84"><a href="#cb49-84" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">95</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> 4th ed. by Alfred D<span class="sc">&amp;</span>ouml;<span class="fu">rffel</span> (Leipzig<span class="sc">:</span> Breitkopf und H<span class="sc">&amp;</span>a<span class="sc">**</span><span class="er">*</span></span>
<span id="cb49-85"><a href="#cb49-85" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">96</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> c<span class="fl">.1875</span>). <span class="dv">178</span> pp. Plate <span class="st">"V.A.10"</span>.  reprint<span class="sc">:</span> J.S. Bach, <span class="dv">371</span> <span class="sc">**</span><span class="er">*</span></span>
<span id="cb49-86"><a href="#cb49-86" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">97</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR4<span class="sc">:</span> <span class="fu">Chorales</span> (New York<span class="sc">:</span> Associated Music Publishers, Inc., c<span class="fl">.1</span><span class="sc">**</span><span class="er">*</span></span>
<span id="cb49-87"><a href="#cb49-87" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">98</span><span class="sc">:</span>  <span class="sc">!!!</span>SMS<span class="sc">:</span> B<span class="sc">&amp;</span>H, 4th ed, Alfred D<span class="sc">&amp;</span>ouml;rffel, c<span class="fl">.1875</span>, plate V.A<span class="fl">.10</span></span>
<span id="cb49-88"><a href="#cb49-88" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">99</span><span class="sc">:</span>  <span class="sc">!!!</span>EED<span class="sc">:</span>  Craig Stuart Sapp</span>
<span id="cb49-89"><a href="#cb49-89" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">100</span><span class="sc">:</span>  <span class="sc">!!!</span>EEV<span class="sc">:</span>  <span class="dv">2009</span><span class="sc">/</span><span class="dv">05</span><span class="sc">/</span><span class="dv">22</span></span>
<span id="cb49-90"><a href="#cb49-90" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# ^^^ chor010.krn ^^^ #############################</span></span>
<span id="cb49-91"><a href="#cb49-91" tabindex="-1"></a><span class="er">&gt;</span>                           (<span class="sc">**</span><span class="er">*</span>four global comments truncated due to screen size<span class="sc">**</span><span class="er">*</span>)</span>
<span id="cb49-92"><a href="#cb49-92" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb49-93"><a href="#cb49-93" tabindex="-1"></a><span class="er">&gt;</span>       humdrumR corpus of ten pieces.</span>
<span id="cb49-94"><a href="#cb49-94" tabindex="-1"></a><span class="sc">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb49-95"><a href="#cb49-95" tabindex="-1"></a><span class="er">&gt;</span>                Token   <span class="sc">::</span> character</span>
<span id="cb49-96"><a href="#cb49-96" tabindex="-1"></a><span class="sc">&gt;</span>                Kern    <span class="sc">::</span> <span class="fu">character</span> (<span class="sc">**</span>kern tokens)</span>
<span id="cb49-97"><a href="#cb49-97" tabindex="-1"></a><span class="sc">&gt;</span>               <span class="er">*</span>Result1 <span class="sc">::</span> character</span></code></pre></div>
<p>But there’s an even better way! Simply give that <code>lag</code>
argument a vector of lags! In fact, <code>lag = 0</code> spits out the
unlagged vector, so you can do it all in a single index command:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="fu">within</span>(chorales, <span class="fu">paste</span>(Kern[<span class="at">lag =</span> <span class="dv">0</span><span class="sc">:-</span><span class="dv">2</span>], <span class="at">sep =</span> <span class="st">' '</span>))</span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# vvv chor001.krn vvv #############################</span></span>
<span id="cb50-3"><a href="#cb50-3" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">1</span><span class="sc">:</span>  <span class="sc">!!!</span>COM<span class="sc">:</span> Bach, Johann Sebastian</span>
<span id="cb50-4"><a href="#cb50-4" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">2</span><span class="sc">:</span>  <span class="sc">!!!</span>CDT<span class="sc">:</span> <span class="dv">1685</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">21</span><span class="sc">/-</span><span class="dv">1750</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">28</span><span class="sc">/</span></span>
<span id="cb50-5"><a href="#cb50-5" tabindex="-1"></a><span class="er">&gt;</span>         <span class="dv">3</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span><span class="er">@</span>DE<span class="sc">:</span> Aus meines Herzens Grunde</span>
<span id="cb50-6"><a href="#cb50-6" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">4</span><span class="sc">:</span>  <span class="sc">!!!</span>OTL<span class="sc">@</span>EN<span class="sc">:</span>      From the Depths of My Heart</span>
<span id="cb50-7"><a href="#cb50-7" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">5</span><span class="sc">:</span>  <span class="sc">!!!</span>SCT<span class="sc">:</span> BWV <span class="dv">269</span></span>
<span id="cb50-8"><a href="#cb50-8" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">6</span><span class="sc">:</span>  <span class="sc">!!!</span>PC<span class="co">#: 1</span></span>
<span id="cb50-9"><a href="#cb50-9" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">7</span><span class="sc">:</span>  <span class="sc">!!!</span>AGN<span class="sc">:</span> chorale</span>
<span id="cb50-10"><a href="#cb50-10" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">8</span><span class="sc">:</span>          <span class="er">**</span>kern        <span class="sc">**</span>kern        <span class="sc">**</span>kern        <span class="sc">**</span>kern</span>
<span id="cb50-11"><a href="#cb50-11" tabindex="-1"></a><span class="sc">&gt;</span>         <span class="dv">9</span><span class="sc">:</span>          <span class="er">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox        <span class="sc">*</span>ICvox</span>
<span id="cb50-12"><a href="#cb50-12" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">10</span><span class="sc">:</span>          <span class="er">*</span>Ibass       <span class="sc">*</span>Itenor        <span class="sc">*</span>Ialto       <span class="sc">*</span>Isoprn</span>
<span id="cb50-13"><a href="#cb50-13" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">11</span><span class="sc">:</span>         <span class="er">*</span>I<span class="st">"Bass      *I"</span>Tenor       <span class="sc">*</span>I<span class="st">"Alto    *I"</span>Soprano</span>
<span id="cb50-14"><a href="#cb50-14" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">12</span><span class="sc">:</span>       <span class="er">*&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]     <span class="sc">*</span><span class="er">&gt;</span>[A,A,B]</span>
<span id="cb50-15"><a href="#cb50-15" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">13</span><span class="sc">:</span>    <span class="er">*&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]  <span class="sc">*</span><span class="er">&gt;</span>norep[A,B]</span>
<span id="cb50-16"><a href="#cb50-16" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">14</span><span class="sc">:</span>             <span class="er">*&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A           <span class="sc">*</span><span class="er">&gt;</span>A</span>
<span id="cb50-17"><a href="#cb50-17" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">15</span><span class="sc">:</span>         <span class="er">*</span>clefF4      <span class="sc">*</span>clefGv2       <span class="sc">*</span>clefG2       <span class="sc">*</span>clefG2</span>
<span id="cb50-18"><a href="#cb50-18" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">16</span><span class="sc">:</span>          <span class="er">*</span>k[f<span class="co">#]        *k[f#]        *k[f#]        *k[f#]</span></span>
<span id="cb50-19"><a href="#cb50-19" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">17</span><span class="sc">:</span>             <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span>           <span class="er">*</span>G<span class="sc">:</span></span>
<span id="cb50-20"><a href="#cb50-20" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">18</span><span class="sc">:</span>           <span class="er">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span>         <span class="sc">*</span>M3<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb50-21"><a href="#cb50-21" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">19</span><span class="sc">:</span>          <span class="er">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100        <span class="sc">*</span>MM100</span>
<span id="cb50-22"><a href="#cb50-22" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">20</span><span class="sc">:</span>           g g e         b b c         d d e         g g d</span>
<span id="cb50-23"><a href="#cb50-23" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">21</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span>            <span class="ot">=</span><span class="dv">1</span></span>
<span id="cb50-24"><a href="#cb50-24" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">22</span><span class="sc">:</span>          g e f<span class="co">#         b c b         d e d         g d b</span></span>
<span id="cb50-25"><a href="#cb50-25" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">23</span><span class="sc">:</span>          e f<span class="co"># g         c b a         e d d             .</span></span>
<span id="cb50-26"><a href="#cb50-26" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">24</span><span class="sc">:</span>               .         b a g             .             .</span>
<span id="cb50-27"><a href="#cb50-27" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">25</span><span class="sc">:</span>          f<span class="co"># g d        a g f#         d d b         d b a</span></span>
<span id="cb50-28"><a href="#cb50-28" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">26</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span>            <span class="ot">=</span><span class="dv">2</span></span>
<span id="cb50-29"><a href="#cb50-29" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">27</span><span class="sc">:</span>           g d e        g f<span class="co"># g         d b e         b a g</span></span>
<span id="cb50-30"><a href="#cb50-30" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">28</span><span class="sc">:</span>           d e c        f<span class="co"># g c             .             .</span></span>
<span id="cb50-31"><a href="#cb50-31" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">29</span><span class="sc">:</span>               .             .             .         a g g</span>
<span id="cb50-32"><a href="#cb50-32" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">30</span><span class="sc">:</span>           e c b         g c b         b e d         g g a</span>
<span id="cb50-33"><a href="#cb50-33" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">31</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span>            <span class="ot">=</span><span class="dv">3</span></span>
<span id="cb50-34"><a href="#cb50-34" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">32</span><span class="sc">:</span>           c b a         c b c         e d e         g a b</span>
<span id="cb50-35"><a href="#cb50-35" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">33</span><span class="sc">:</span>               .         b c d        d e f<span class="co">#             .</span></span>
<span id="cb50-36"><a href="#cb50-36" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">34</span><span class="sc">:</span>           b a g         c d d        e f<span class="co"># g             .</span></span>
<span id="cb50-37"><a href="#cb50-37" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">35</span><span class="sc">:</span>           a g d             .       f<span class="co"># g f#         a b a</span></span>
<span id="cb50-38"><a href="#cb50-38" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">36</span><span class="sc">:</span>           g d g         d d d        g f<span class="co"># g         b a b</span></span>
<span id="cb50-39"><a href="#cb50-39" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">37</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span>            <span class="ot">=</span><span class="dv">4</span></span>
<span id="cb50-40"><a href="#cb50-40" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">38</span><span class="sc">:</span>          d g f<span class="co">#         d d a        f# g d         a b d</span></span>
<span id="cb50-41"><a href="#cb50-41" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">39</span><span class="sc">:</span>          g f<span class="co"># g         d a b         g d e         b d c</span></span>
<span id="cb50-42"><a href="#cb50-42" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">40</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span>            <span class="ot">=</span><span class="dv">5</span></span>
<span id="cb50-43"><a href="#cb50-43" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="dv">41-133</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb50-44"><a href="#cb50-44" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# ^^^ chor001.krn ^^^ #############################</span></span>
<span id="cb50-45"><a href="#cb50-45" tabindex="-1"></a><span class="er">&gt;</span>    </span>
<span id="cb50-46"><a href="#cb50-46" tabindex="-1"></a><span class="er">&gt;</span>           (<span class="dv">8</span> more pieces...)</span>
<span id="cb50-47"><a href="#cb50-47" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb50-48"><a href="#cb50-48" tabindex="-1"></a><span class="er">&gt;</span>    <span class="do">############################# vvv chor010.krn vvv #############################</span></span>
<span id="cb50-49"><a href="#cb50-49" tabindex="-1"></a><span class="er">&gt;</span>      <span class="dv">1-60</span><span class="sc">:::</span><span class="er">::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span id="cb50-50"><a href="#cb50-50" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">61</span><span class="sc">:</span>           a a e         c e e         e a g         a c b</span>
<span id="cb50-51"><a href="#cb50-51" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">62</span><span class="sc">:</span>           a e d         e e e         a g g         c b c</span>
<span id="cb50-52"><a href="#cb50-52" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">63</span><span class="sc">:</span>              <span class="er">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span>            <span class="ot">=</span><span class="dv">9</span></span>
<span id="cb50-53"><a href="#cb50-53" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">64</span><span class="sc">:</span>           e d c         e e d         g g g         b c d</span>
<span id="cb50-54"><a href="#cb50-54" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">65</span><span class="sc">:</span>           d c b         e d c         g g f         c d g</span>
<span id="cb50-55"><a href="#cb50-55" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">66</span><span class="sc">:</span>           c b c             .             .             .</span>
<span id="cb50-56"><a href="#cb50-56" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">67</span><span class="sc">:</span>           b c d        d c f<span class="co">#         g f e         d g b</span></span>
<span id="cb50-57"><a href="#cb50-57" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">68</span><span class="sc">:</span>               .             .         f e d             .</span>
<span id="cb50-58"><a href="#cb50-58" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">69</span><span class="sc">:</span>           c d d        c f<span class="co"># g         e d c         g b a</span></span>
<span id="cb50-59"><a href="#cb50-59" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">70</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span>           <span class="ot">=</span><span class="dv">10</span></span>
<span id="cb50-60"><a href="#cb50-60" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">71</span><span class="sc">:</span>           d d g       f<span class="co"># g f#         d c b         b a g</span></span>
<span id="cb50-61"><a href="#cb50-61" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">72</span><span class="sc">:</span>               .        g f<span class="co"># g             .             .</span></span>
<span id="cb50-62"><a href="#cb50-62" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">73</span><span class="sc">:</span>           d g c             .         c b e         a g g</span>
<span id="cb50-63"><a href="#cb50-63" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">74</span><span class="sc">:</span>               .        f<span class="co"># g g             .             .</span></span>
<span id="cb50-64"><a href="#cb50-64" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">75</span><span class="sc">:</span>           g c a         g g a         b e e         g g c</span>
<span id="cb50-65"><a href="#cb50-65" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">76</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span>           <span class="ot">=</span><span class="dv">11</span></span>
<span id="cb50-66"><a href="#cb50-66" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">77</span><span class="sc">:</span>           c a e        g a g<span class="co">#         e e e         g c b</span></span>
<span id="cb50-67"><a href="#cb50-67" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">78</span><span class="sc">:</span>           a e f        a g<span class="co"># a         e e d         c b a</span></span>
<span id="cb50-68"><a href="#cb50-68" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">79</span><span class="sc">:</span>           e f c        g<span class="co"># a g         e d c         b a e</span></span>
<span id="cb50-69"><a href="#cb50-69" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">80</span><span class="sc">:</span>               .             .         d c c             .</span>
<span id="cb50-70"><a href="#cb50-70" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">81</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span>           <span class="ot">=</span><span class="dv">12</span></span>
<span id="cb50-71"><a href="#cb50-71" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">82</span><span class="sc">:</span>          f c b<span class="sc">-</span>         a g g         c c d         a e g</span>
<span id="cb50-72"><a href="#cb50-72" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">83</span><span class="sc">:</span>          c b<span class="sc">-</span> a         g g a         c d d         e g f</span>
<span id="cb50-73"><a href="#cb50-73" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">84</span><span class="sc">:</span>         b<span class="sc">-</span> a g<span class="co">#         g a b         d d c         g f e</span></span>
<span id="cb50-74"><a href="#cb50-74" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">85</span><span class="sc">:</span>          a g<span class="co"># a         a b a             .        f e NA</span></span>
<span id="cb50-75"><a href="#cb50-75" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">86</span><span class="sc">:</span>             <span class="er">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span>           <span class="ot">=</span><span class="dv">13</span></span>
<span id="cb50-76"><a href="#cb50-76" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">87</span><span class="sc">:</span>          g<span class="co"># a e        b a g#         d c b       e NA NA</span></span>
<span id="cb50-77"><a href="#cb50-77" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">88</span><span class="sc">:</span>          a e <span class="cn">NA</span>       a g<span class="co"># NA        c b NA             .</span></span>
<span id="cb50-78"><a href="#cb50-78" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">89</span><span class="sc">:</span>         e <span class="cn">NA</span> <span class="cn">NA</span>      g<span class="co"># NA NA       b NA NA             .</span></span>
<span id="cb50-79"><a href="#cb50-79" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">90</span><span class="sc">:</span>              <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span>            <span class="er">==</span></span>
<span id="cb50-80"><a href="#cb50-80" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">91</span><span class="sc">:</span>              <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span>            <span class="er">*</span><span class="sc">-</span></span>
<span id="cb50-81"><a href="#cb50-81" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">92</span><span class="sc">:</span>  <span class="sc">!!!</span>hum2abc<span class="sc">:</span> <span class="sc">-</span>Q <span class="st">''</span></span>
<span id="cb50-82"><a href="#cb50-82" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">93</span><span class="sc">:</span>  <span class="sc">!!!</span>title<span class="sc">:</span> <span class="er">@</span>{PC<span class="co">#}. @{OTL@@DE}</span></span>
<span id="cb50-83"><a href="#cb50-83" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">94</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR1<span class="sc">:</span> <span class="dv">371</span> vierstimmige Choralges<span class="sc">&amp;</span>auml;nge von Johann Sebastian B<span class="sc">**</span><span class="er">*</span></span>
<span id="cb50-84"><a href="#cb50-84" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">95</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> 4th ed. by Alfred D<span class="sc">&amp;</span>ouml;<span class="fu">rffel</span> (Leipzig<span class="sc">:</span> Breitkopf und H<span class="sc">&amp;</span>a<span class="sc">**</span><span class="er">*</span></span>
<span id="cb50-85"><a href="#cb50-85" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">96</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR2<span class="sc">:</span> c<span class="fl">.1875</span>). <span class="dv">178</span> pp. Plate <span class="st">"V.A.10"</span>.  reprint<span class="sc">:</span> J.S. Bach, <span class="dv">371</span> <span class="sc">**</span><span class="er">*</span></span>
<span id="cb50-86"><a href="#cb50-86" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">97</span><span class="sc">:</span>  <span class="sc">!!!</span>YOR4<span class="sc">:</span> <span class="fu">Chorales</span> (New York<span class="sc">:</span> Associated Music Publishers, Inc., c<span class="fl">.1</span><span class="sc">**</span><span class="er">*</span></span>
<span id="cb50-87"><a href="#cb50-87" tabindex="-1"></a><span class="er">&gt;</span>        <span class="dv">98</span><span class="sc">:</span>  <span class="sc">!!!</span>SMS<span class="sc">:</span> B<span class="sc">&amp;</span>H, 4th ed, Alfred D<span class="sc">&amp;</span>ouml;rffel, c<span class="fl">.1875</span>, plate V.A<span class="fl">.10</span></span>
<span id="cb50-88"><a href="#cb50-88" tabindex="-1"></a><span class="sc">&gt;</span>        <span class="dv">99</span><span class="sc">:</span>  <span class="sc">!!!</span>EED<span class="sc">:</span>  Craig Stuart Sapp</span>
<span id="cb50-89"><a href="#cb50-89" tabindex="-1"></a><span class="sc">&gt;</span>       <span class="dv">100</span><span class="sc">:</span>  <span class="sc">!!!</span>EEV<span class="sc">:</span>  <span class="dv">2009</span><span class="sc">/</span><span class="dv">05</span><span class="sc">/</span><span class="dv">22</span></span>
<span id="cb50-90"><a href="#cb50-90" tabindex="-1"></a><span class="sc">&gt;</span>    <span class="do">############################# ^^^ chor010.krn ^^^ #############################</span></span>
<span id="cb50-91"><a href="#cb50-91" tabindex="-1"></a><span class="er">&gt;</span>                           (<span class="sc">**</span><span class="er">*</span>four global comments truncated due to screen size<span class="sc">**</span><span class="er">*</span>)</span>
<span id="cb50-92"><a href="#cb50-92" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb50-93"><a href="#cb50-93" tabindex="-1"></a><span class="er">&gt;</span>       humdrumR corpus of ten pieces.</span>
<span id="cb50-94"><a href="#cb50-94" tabindex="-1"></a><span class="sc">&gt;</span>        Data fields<span class="sc">:</span> </span>
<span id="cb50-95"><a href="#cb50-95" tabindex="-1"></a><span class="er">&gt;</span>                Token   <span class="sc">::</span> character</span>
<span id="cb50-96"><a href="#cb50-96" tabindex="-1"></a><span class="sc">&gt;</span>                Kern    <span class="sc">::</span> <span class="fu">character</span> (<span class="sc">**</span>kern tokens)</span>
<span id="cb50-97"><a href="#cb50-97" tabindex="-1"></a><span class="sc">&gt;</span>               <span class="er">*</span>Result1 <span class="sc">::</span> character</span></code></pre></div>
<p>Let’s create 10-grams, and see what the most frequent 10-grams
are:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="fu">with</span>(chorales, <span class="fu">paste</span>(Kern[<span class="at">lag =</span> <span class="dv">0</span><span class="sc">:-</span><span class="dv">9</span>], <span class="at">sep =</span> <span class="st">' '</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb51-2"><a href="#cb51-2" tabindex="-1"></a>  <span class="fu">table</span>() <span class="sc">|&gt;</span> </span>
<span id="cb51-3"><a href="#cb51-3" tabindex="-1"></a>  <span class="fu">sort</span>() <span class="sc">|&gt;</span> </span>
<span id="cb51-4"><a href="#cb51-4" tabindex="-1"></a>  <span class="fu">tail</span>(<span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb51-5"><a href="#cb51-5" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb51-6"><a href="#cb51-6" tabindex="-1"></a><span class="er">&gt;</span>     d <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span>     e d c b <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> </span>
<span id="cb51-7"><a href="#cb51-7" tabindex="-1"></a><span class="sc">&gt;</span>                                <span class="dv">3</span>                             <span class="dv">3</span> </span>
<span id="cb51-8"><a href="#cb51-8" tabindex="-1"></a><span class="sc">&gt;</span>    g<span class="co"># NA NA NA NA NA NA NA NA NA    d c b NA NA NA NA NA NA NA </span></span>
<span id="cb51-9"><a href="#cb51-9" tabindex="-1"></a><span class="sc">&gt;</span>                                <span class="dv">3</span>                             <span class="dv">4</span> </span>
<span id="cb51-10"><a href="#cb51-10" tabindex="-1"></a><span class="sc">&gt;</span>     f <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span>   c b <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> </span>
<span id="cb51-11"><a href="#cb51-11" tabindex="-1"></a><span class="sc">&gt;</span>                                <span class="dv">4</span>                             <span class="dv">5</span> </span>
<span id="cb51-12"><a href="#cb51-12" tabindex="-1"></a><span class="sc">&gt;</span>     a <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span>  b <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> </span>
<span id="cb51-13"><a href="#cb51-13" tabindex="-1"></a><span class="sc">&gt;</span>                                <span class="dv">6</span>                             <span class="dv">6</span> </span>
<span id="cb51-14"><a href="#cb51-14" tabindex="-1"></a><span class="sc">&gt;</span>     g <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span>  e <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> </span>
<span id="cb51-15"><a href="#cb51-15" tabindex="-1"></a><span class="sc">&gt;</span>                                <span class="dv">6</span>                             <span class="dv">8</span></span></code></pre></div>
<p>That’s not what we want! When you do lagged n-grams, the first and
last n-grams get “padded” with <code>NA</code> values. We’ll just need
to get rid of these:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="fu">with</span>(chorales, <span class="fu">paste</span>(Kern[<span class="at">lag =</span> <span class="dv">0</span><span class="sc">:-</span><span class="dv">9</span>], <span class="at">sep =</span> <span class="st">' '</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a>  <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">'NA'</span>, <span class="at">invert =</span> <span class="cn">TRUE</span>, <span class="at">value =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb52-3"><a href="#cb52-3" tabindex="-1"></a>  <span class="fu">table</span>() <span class="sc">|&gt;</span> </span>
<span id="cb52-4"><a href="#cb52-4" tabindex="-1"></a>  <span class="fu">sort</span>() <span class="sc">|&gt;</span> </span>
<span id="cb52-5"><a href="#cb52-5" tabindex="-1"></a>  <span class="fu">tail</span>(<span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb52-6"><a href="#cb52-6" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb52-7"><a href="#cb52-7" tabindex="-1"></a><span class="er">&gt;</span>    g<span class="co"># f# f# b a# f# g# c# f# f#     g# f# f# e d c# b c# d e </span></span>
<span id="cb52-8"><a href="#cb52-8" tabindex="-1"></a><span class="sc">&gt;</span>                               <span class="dv">1</span>                            <span class="dv">1</span> </span>
<span id="cb52-9"><a href="#cb52-9" tabindex="-1"></a><span class="sc">&gt;</span>       g<span class="co"># f# g# a g# f# e a g# e     g# f# g# f# e e d c# b a </span></span>
<span id="cb52-10"><a href="#cb52-10" tabindex="-1"></a><span class="sc">&gt;</span>                               <span class="dv">1</span>                            <span class="dv">1</span> </span>
<span id="cb52-11"><a href="#cb52-11" tabindex="-1"></a><span class="sc">&gt;</span>         g<span class="co"># g# a b b a g# d a g#        g# g# a b c f e d c b </span></span>
<span id="cb52-12"><a href="#cb52-12" tabindex="-1"></a><span class="sc">&gt;</span>                               <span class="dv">1</span>                            <span class="dv">1</span> </span>
<span id="cb52-13"><a href="#cb52-13" tabindex="-1"></a><span class="sc">&gt;</span>          g<span class="co"># g# a b c# d e e d e       g# g# a d b e e d e f# </span></span>
<span id="cb52-14"><a href="#cb52-14" tabindex="-1"></a><span class="sc">&gt;</span>                               <span class="dv">1</span>                            <span class="dv">1</span> </span>
<span id="cb52-15"><a href="#cb52-15" tabindex="-1"></a><span class="sc">&gt;</span>          g<span class="co"># g# a g# a g f e e d          g a b a b d c b a g </span></span>
<span id="cb52-16"><a href="#cb52-16" tabindex="-1"></a><span class="sc">&gt;</span>                               <span class="dv">1</span>                            <span class="dv">2</span></span></code></pre></div>
<p>That still doesn’t seem right, does it? Actually, it is right: in
these 10 chorales, there are no 10-gram pitch patterns that occur more
than once! Let’s try a 5-gram instead:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a><span class="fu">with</span>(chorales, <span class="fu">paste</span>(Kern[<span class="at">lag =</span> <span class="dv">0</span><span class="sc">:-</span><span class="dv">4</span>], <span class="at">sep =</span> <span class="st">' '</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a>  <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">'NA'</span>, <span class="at">invert =</span> <span class="cn">TRUE</span>, <span class="at">value =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb53-3"><a href="#cb53-3" tabindex="-1"></a>  <span class="fu">table</span>() <span class="sc">|&gt;</span> </span>
<span id="cb53-4"><a href="#cb53-4" tabindex="-1"></a>  <span class="fu">sort</span>() <span class="sc">|&gt;</span> </span>
<span id="cb53-5"><a href="#cb53-5" tabindex="-1"></a>  <span class="fu">tail</span>(<span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb53-6"><a href="#cb53-6" tabindex="-1"></a><span class="sc">&gt;</span>    </span>
<span id="cb53-7"><a href="#cb53-7" tabindex="-1"></a><span class="er">&gt;</span>     b a g f<span class="co"># e   c b a b c   e e d c b   g a b c d g f# e f# g   b c d c b </span></span>
<span id="cb53-8"><a href="#cb53-8" tabindex="-1"></a><span class="sc">&gt;</span>              <span class="dv">5</span>           <span class="dv">5</span>           <span class="dv">5</span>           <span class="dv">5</span>           <span class="dv">5</span>           <span class="dv">6</span> </span>
<span id="cb53-9"><a href="#cb53-9" tabindex="-1"></a><span class="sc">&gt;</span>      d c b c d   e d c b c   d c b a g   d e d c b </span>
<span id="cb53-10"><a href="#cb53-10" tabindex="-1"></a><span class="sc">&gt;</span>              <span class="dv">7</span>           <span class="dv">8</span>           <span class="dv">9</span>           <span class="dv">9</span></span></code></pre></div>
<p>Now we see a couple of n-grams (like ‘d e d c b’) that occur more
often.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Nathaniel Condit-Schultz, Claire Arthur.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
