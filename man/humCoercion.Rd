% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/humdrumR-class.R
\name{humCoercion}
\alias{humCoercion}
\alias{as.lines}
\alias{as.matrix.humdrumR}
\alias{as.matrix}
\alias{as.matrices}
\alias{as.data.frames}
\title{humdrumR coercion}
\usage{
\S4method{as.vector}{humdrumR}(x, mode = "any")

as.lines(
  humdrumR,
  dataTypes = "GLIMDd",
  padPaths = "dont",
  padder = "",
  sep = "\\t"
)

\method{as.matrix}{humdrumR}(x, dataTypes = "GLIMDd", padPaths = "corpus", padder = NA)

\S4method{as.data.frame}{humdrumR}(x, dataTypes = "Dd", padPaths = "corpus", padder = NA)

\S4method{as.data.frame}{humdrumR}(x, dataTypes = "Dd", padPaths = "corpus", padder = NA)

as.matrices(humdrumR, dataTypes = "LIMDd", padPaths = "piece", padder = NA)

as.data.frames(humdrumR, dataTypes = "LIMDd", padPaths = "piece", padder = NA)
}
\arguments{
\item{mode}{\emph{\strong{The desired output class.}}

Defaults to \code{"any"}.

Must be a single \code{character} string naming an \link[base:vector]{atomic vector type} to coerce the output to (i.e., \code{logical} or \code{numeric}).

If set to \code{"any"}, the output type is simply whatever the type of the \link[=selectedFields]{selected field} is.}

\item{humdrumR}{\emph{\strong{HumdrumR data.}}

Must be a \link[=humdrumRclass]{humdrumR data object}.}

\item{dataTypes}{\emph{\strong{Which types of humdrum record(s) to include.}}

Defaults to \code{"GLIMDd"} for \code{as.lines()} and \code{as.matrix()}; \code{"Dd"} for \code{as.data.frame()};
\code{"LIMDd"} for \code{as.matrices()} and \code{as.data.frames()}.

Must be a single \code{character} string. Legal values are \verb{'G', 'L', 'I', 'M', 'D', 'd'}
or any combination of these (e.g., \code{"LIM"}).
(See the \link[=humTable]{humdrum table} documentation for explanation.)}

\item{padPaths}{\emph{\strong{Determines how spine-paths are aligned in the output.}}

Defaults to \code{"dont"} for \code{as.lines()}; \code{"corpus"} for \code{as.matrix()} and \code{as.data.frame()};
\code{"piece"} for \code{as.matrices()} and \code{as.data.frames()}

Must be a single \code{character} string, \code{"corpus"}, \code{"piece"}, or \code{"dont"}.

See the details for an explanation.}

\item{padder}{\emph{\strong{Used to fill in differences in the number of columns between files and/or spine paths.}}

Defaults to \code{NA}.

Must be a single \code{atomic} value.}

\item{sep}{\emph{\strong{Separator to place between columns in collapsed lines.}}

Defaults to \code{"\\t"} (tab).

Must be a single \code{character} string.}
}
\description{
Many users may wish to work with humdrum data,
without having to rely on \code{humdrumR}'s \link[=withinHumdrum]{with(in).humdrumR} functionality.
Rather, you'd like to just get "normal" \code{R} objects out of your humdrum data.
\code{humdrumR} defines a number of functions/methods for "coercing" \link[=humdrumRclass]{humdrum data} into
basic \code{R} data types.
}
\details{
Generally, coercion works by evaluating a humdrumR object's the
\link[=selectedFields]{selected fields} and forcing the result to be an atomic vector.
When multiple field are selected, they are pasted together, separated by \code{", "}.
If a field is not atomic (like a \code{list}, or \code{lm} object), a concise representation of the
list or object class is printed.
The \link[=humCoercion]{as.vector(humdrumR)} has the additional
option of coercing the resulting vector to a particular type using the \code{mode} argument.

The \link[base:matrix]{as.matrix(humdrumR)} method take things a step further by putting the evaluated
fields into a two-dimensional matrix, with rows representing records and columns indicating
spine paths (see Padding section below).
\link[base:as.data.frame]{as.data.frame(humdrumR)} first calls \code{as.matrix} then converts the matrix to a
\code{data.frame}.
Note that \code{as.matrix(humdrumR)} places the \emph{entire} corpus object into one matrix, even if there are multiple pieces.
In contrast, the plural \code{as.matrices} and \code{as.data.frames} call their respective singular versions
separately on each individual file in a \link[=humdrumRclass]{humdrumR corpus} and return them all in a list.
The \link[base:colnames]{row names}  of the \code{matrix}/\code{data.frame}(s) consist of two integer values,
separated by a \code{.}, representing: \code{Piece.Record}.

The \code{as.lines} function converts a \link[=humdrumRclass]{humdrumR object} into a \code{character} vector of text lines,
with columns separated by the \code{sep} argument (defaults to \code{"\\t"}), just as you'd see in a humdrum-syntax file.
Each line is a single row from a \code{as.matrix.humdrumR}, with padded values at the right side removed.
The matrix's \code{Piece.Record} \link[base:colnames]{row names} are preserved as the lines' \link[base:names]{names}.

Note that multiple-stop token (where \code{Stop > 1L}) cannot by incorporated into the two
dimensional \code{matrix}/\code{data.frame}. Thus, \code{as.matrix(humdrumR)} calls
\link{collapseStops(collapseAtomic = TRUE, sep = " ")}
on the \link[=humdrumRclass]{humdrumR object} before creating a matrix.
}
\section{Padding}{


Different pieces in a single \link[=humdrumRclass]{humdrumR object}
often differ in the number of spines and/or spine paths they contain.
To squish them into a two dimensional object (\code{matrix} or \code{data.frame}) they must necessarily be padded to the same number of columns.
(Global comments---which actually have \code{NA} spines---are also padded, placing the record in column 1.)
The \code{pad} argument is a single atomic value which is used to pad the matrix.

Another consideration is the behavior of spine paths.
In the humdrum syntax, a spine path in a leftward spine "bumps" data in higher spines into new columns, as in this example:

\if{html}{\out{<div class="sourceCode">}}\preformatted{**kern  **kern
A       E
*^      *
A       C       E
G       B       D
*v      *v      *
A       C        
*-      *-
}\if{html}{\out{</div>}}

At the beginning and end of the file, the second column holds data for the second spine.
However, in the middle of the file, the second column holds data from the second spine path of the first spine.
To make the spine structure clearer, \code{as.matrix(humdrumR)} has the option to pad spine paths.
For example, using \code{"_"} as our \code{pad} argument:

\if{html}{\out{<div class="sourceCode">}}\preformatted{**kern   _        **kern
A        _        E
*^       _        *
A        C        E
G        B        D
*v       *v       *
A        _        C        
*-       _        *-
}\if{html}{\out{</div>}}

This aspect of the matrix padding behavior can be controlled with the \code{padPaths} argument, with three possible values/behaviors:
\itemize{
\item \code{"corpus"}: Paths are padded such that spine-paths across all pieces in the corpus all align in the same columns.
If even one file has a spine path, all the other files are padded so their spines stay aligned.
This is the default behavior for \code{as.matrix(humdrumR)}.
\item \code{"piece"}: Paths are padded, but only \emph{within} each piece. The spines/paths between different pieces may not align.
\item \code{"dont"}: Paths are not padded at all.
}
}

